var TT=Object.defineProperty;var EE=c=>{throw TypeError(c)};var CT=(c,e,t)=>e in c?TT(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var xe=(c,e,t)=>CT(c,typeof e!="symbol"?e+"":e,t),Rx=(c,e,t)=>e.has(c)||EE("Cannot "+t);var f=(c,e,t)=>(Rx(c,e,"read from private field"),t?t.call(c):e.get(c)),C=(c,e,t)=>e.has(c)?EE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(c):e.set(c,t),w=(c,e,t,i)=>(Rx(c,e,"write to private field"),i?i.call(c,t):e.set(c,t),t),T=(c,e,t)=>(Rx(c,e,"access private method"),t);var aa=(c,e,t,i)=>({set _(r){w(c,e,r,t)},get _(){return f(c,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function jT(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Mx={exports:{}},bd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE;function RT(){if(SE)return bd;SE=1;var c=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,o){var d=null;if(o!==void 0&&(d=""+o),r.key!==void 0&&(d=""+r.key),"key"in r){o={};for(var h in r)h!=="key"&&(o[h]=r[h])}else o=r;return r=o.ref,{$$typeof:c,type:i,key:d,ref:r!==void 0?r:null,props:o}}return bd.Fragment=e,bd.jsx=t,bd.jsxs=t,bd}var _E;function MT(){return _E||(_E=1,Mx.exports=RT()),Mx.exports}var u=MT(),kx={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wE;function kT(){if(wE)return Be;wE=1;var c=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),v=Symbol.iterator;function y(M){return M===null||typeof M!="object"?null:(M=v&&M[v]||M["@@iterator"],typeof M=="function"?M:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function j(M,k,Q){this.props=M,this.context=k,this.refs=_,this.updater=Q||E}j.prototype.isReactComponent={},j.prototype.setState=function(M,k){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,k,"setState")},j.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function R(){}R.prototype=j.prototype;function L(M,k,Q){this.props=M,this.context=k,this.refs=_,this.updater=Q||E}var D=L.prototype=new R;D.constructor=L,S(D,j.prototype),D.isPureReactComponent=!0;var z=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function se(M,k,Q,q,ee,le){return Q=le.ref,{$$typeof:c,type:M,key:k,ref:Q!==void 0?Q:null,props:le}}function re(M,k){return se(M.type,k,void 0,void 0,void 0,M.props)}function ne(M){return typeof M=="object"&&M!==null&&M.$$typeof===c}function ue(M){var k={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Q){return k[Q]})}var J=/\/+/g;function ge(M,k){return typeof M=="object"&&M!==null&&M.key!=null?ue(""+M.key):k.toString(36)}function Ce(){}function Ie(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Ce,Ce):(M.status="pending",M.then(function(k){M.status==="pending"&&(M.status="fulfilled",M.value=k)},function(k){M.status==="pending"&&(M.status="rejected",M.reason=k)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function ae(M,k,Q,q,ee){var le=typeof M;(le==="undefined"||le==="boolean")&&(M=null);var pe=!1;if(M===null)pe=!0;else switch(le){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(M.$$typeof){case c:case e:pe=!0;break;case x:return pe=M._init,ae(pe(M._payload),k,Q,q,ee)}}if(pe)return ee=ee(M),pe=q===""?"."+ge(M,0):q,z(ee)?(Q="",pe!=null&&(Q=pe.replace(J,"$&/")+"/"),ae(ee,k,Q,"",function(gt){return gt})):ee!=null&&(ne(ee)&&(ee=re(ee,Q+(ee.key==null||M&&M.key===ee.key?"":(""+ee.key).replace(J,"$&/")+"/")+pe)),k.push(ee)),1;pe=0;var Me=q===""?".":q+":";if(z(M))for(var Pe=0;Pe<M.length;Pe++)q=M[Pe],le=Me+ge(q,Pe),pe+=ae(q,k,Q,le,ee);else if(Pe=y(M),typeof Pe=="function")for(M=Pe.call(M),Pe=0;!(q=M.next()).done;)q=q.value,le=Me+ge(q,Pe++),pe+=ae(q,k,Q,le,ee);else if(le==="object"){if(typeof M.then=="function")return ae(Ie(M),k,Q,q,ee);throw k=String(M),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return pe}function G(M,k,Q){if(M==null)return M;var q=[],ee=0;return ae(M,q,"","",function(le){return k.call(Q,le,ee++)}),q}function Y(M){if(M._status===-1){var k=M._result;k=k(),k.then(function(Q){(M._status===0||M._status===-1)&&(M._status=1,M._result=Q)},function(Q){(M._status===0||M._status===-1)&&(M._status=2,M._result=Q)}),M._status===-1&&(M._status=0,M._result=k)}if(M._status===1)return M._result.default;throw M._result}var W=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function oe(){}return Be.Children={map:G,forEach:function(M,k,Q){G(M,function(){k.apply(this,arguments)},Q)},count:function(M){var k=0;return G(M,function(){k++}),k},toArray:function(M){return G(M,function(k){return k})||[]},only:function(M){if(!ne(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Be.Component=j,Be.Fragment=t,Be.Profiler=r,Be.PureComponent=L,Be.StrictMode=i,Be.Suspense=p,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Be.__COMPILER_RUNTIME={__proto__:null,c:function(M){return P.H.useMemoCache(M)}},Be.cache=function(M){return function(){return M.apply(null,arguments)}},Be.cloneElement=function(M,k,Q){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var q=S({},M.props),ee=M.key,le=void 0;if(k!=null)for(pe in k.ref!==void 0&&(le=void 0),k.key!==void 0&&(ee=""+k.key),k)!H.call(k,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&k.ref===void 0||(q[pe]=k[pe]);var pe=arguments.length-2;if(pe===1)q.children=Q;else if(1<pe){for(var Me=Array(pe),Pe=0;Pe<pe;Pe++)Me[Pe]=arguments[Pe+2];q.children=Me}return se(M.type,ee,void 0,void 0,le,q)},Be.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:o,_context:M},M},Be.createElement=function(M,k,Q){var q,ee={},le=null;if(k!=null)for(q in k.key!==void 0&&(le=""+k.key),k)H.call(k,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(ee[q]=k[q]);var pe=arguments.length-2;if(pe===1)ee.children=Q;else if(1<pe){for(var Me=Array(pe),Pe=0;Pe<pe;Pe++)Me[Pe]=arguments[Pe+2];ee.children=Me}if(M&&M.defaultProps)for(q in pe=M.defaultProps,pe)ee[q]===void 0&&(ee[q]=pe[q]);return se(M,le,void 0,void 0,null,ee)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(M){return{$$typeof:h,render:M}},Be.isValidElement=ne,Be.lazy=function(M){return{$$typeof:x,_payload:{_status:-1,_result:M},_init:Y}},Be.memo=function(M,k){return{$$typeof:m,type:M,compare:k===void 0?null:k}},Be.startTransition=function(M){var k=P.T,Q={};P.T=Q;try{var q=M(),ee=P.S;ee!==null&&ee(Q,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(oe,W)}catch(le){W(le)}finally{P.T=k}},Be.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Be.use=function(M){return P.H.use(M)},Be.useActionState=function(M,k,Q){return P.H.useActionState(M,k,Q)},Be.useCallback=function(M,k){return P.H.useCallback(M,k)},Be.useContext=function(M){return P.H.useContext(M)},Be.useDebugValue=function(){},Be.useDeferredValue=function(M,k){return P.H.useDeferredValue(M,k)},Be.useEffect=function(M,k,Q){var q=P.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return q.useEffect(M,k)},Be.useId=function(){return P.H.useId()},Be.useImperativeHandle=function(M,k,Q){return P.H.useImperativeHandle(M,k,Q)},Be.useInsertionEffect=function(M,k){return P.H.useInsertionEffect(M,k)},Be.useLayoutEffect=function(M,k){return P.H.useLayoutEffect(M,k)},Be.useMemo=function(M,k){return P.H.useMemo(M,k)},Be.useOptimistic=function(M,k){return P.H.useOptimistic(M,k)},Be.useReducer=function(M,k,Q){return P.H.useReducer(M,k,Q)},Be.useRef=function(M){return P.H.useRef(M)},Be.useState=function(M){return P.H.useState(M)},Be.useSyncExternalStore=function(M,k,Q){return P.H.useSyncExternalStore(M,k,Q)},Be.useTransition=function(){return P.H.useTransition()},Be.version="19.1.1",Be}var NE;function gv(){return NE||(NE=1,kx.exports=kT()),kx.exports}var X=gv();const ig=jT(X);var Dx={exports:{}},vd={},Ox={exports:{}},Lx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE;function DT(){return TE||(TE=1,(function(c){function e(G,Y){var W=G.length;G.push(Y);e:for(;0<W;){var oe=W-1>>>1,M=G[oe];if(0<r(M,Y))G[oe]=Y,G[W]=M,W=oe;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var Y=G[0],W=G.pop();if(W!==Y){G[0]=W;e:for(var oe=0,M=G.length,k=M>>>1;oe<k;){var Q=2*(oe+1)-1,q=G[Q],ee=Q+1,le=G[ee];if(0>r(q,W))ee<M&&0>r(le,q)?(G[oe]=le,G[ee]=W,oe=ee):(G[oe]=q,G[Q]=W,oe=Q);else if(ee<M&&0>r(le,W))G[oe]=le,G[ee]=W,oe=ee;else break e}}return Y}function r(G,Y){var W=G.sortIndex-Y.sortIndex;return W!==0?W:G.id-Y.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;c.unstable_now=function(){return o.now()}}else{var d=Date,h=d.now();c.unstable_now=function(){return d.now()-h}}var p=[],m=[],x=1,v=null,y=3,E=!1,S=!1,_=!1,j=!1,R=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function z(G){for(var Y=t(m);Y!==null;){if(Y.callback===null)i(m);else if(Y.startTime<=G)i(m),Y.sortIndex=Y.expirationTime,e(p,Y);else break;Y=t(m)}}function P(G){if(_=!1,z(G),!S)if(t(p)!==null)S=!0,H||(H=!0,ge());else{var Y=t(m);Y!==null&&ae(P,Y.startTime-G)}}var H=!1,se=-1,re=5,ne=-1;function ue(){return j?!0:!(c.unstable_now()-ne<re)}function J(){if(j=!1,H){var G=c.unstable_now();ne=G;var Y=!0;try{e:{S=!1,_&&(_=!1,L(se),se=-1),E=!0;var W=y;try{t:{for(z(G),v=t(p);v!==null&&!(v.expirationTime>G&&ue());){var oe=v.callback;if(typeof oe=="function"){v.callback=null,y=v.priorityLevel;var M=oe(v.expirationTime<=G);if(G=c.unstable_now(),typeof M=="function"){v.callback=M,z(G),Y=!0;break t}v===t(p)&&i(p),z(G)}else i(p);v=t(p)}if(v!==null)Y=!0;else{var k=t(m);k!==null&&ae(P,k.startTime-G),Y=!1}}break e}finally{v=null,y=W,E=!1}Y=void 0}}finally{Y?ge():H=!1}}}var ge;if(typeof D=="function")ge=function(){D(J)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Ie=Ce.port2;Ce.port1.onmessage=J,ge=function(){Ie.postMessage(null)}}else ge=function(){R(J,0)};function ae(G,Y){se=R(function(){G(c.unstable_now())},Y)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(G){G.callback=null},c.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<G?Math.floor(1e3/G):5},c.unstable_getCurrentPriorityLevel=function(){return y},c.unstable_next=function(G){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var W=y;y=Y;try{return G()}finally{y=W}},c.unstable_requestPaint=function(){j=!0},c.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var W=y;y=G;try{return Y()}finally{y=W}},c.unstable_scheduleCallback=function(G,Y,W){var oe=c.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?oe+W:oe):W=oe,G){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=W+M,G={id:x++,callback:Y,priorityLevel:G,startTime:W,expirationTime:M,sortIndex:-1},W>oe?(G.sortIndex=W,e(m,G),t(p)===null&&G===t(m)&&(_?(L(se),se=-1):_=!0,ae(P,W-oe))):(G.sortIndex=M,e(p,G),S||E||(S=!0,H||(H=!0,ge()))),G},c.unstable_shouldYield=ue,c.unstable_wrapCallback=function(G){var Y=y;return function(){var W=y;y=Y;try{return G.apply(this,arguments)}finally{y=W}}}})(Lx)),Lx}var CE;function OT(){return CE||(CE=1,Ox.exports=DT()),Ox.exports}var Ix={exports:{}},xs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE;function LT(){if(jE)return xs;jE=1;var c=gv();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(p,m,x){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:p,containerInfo:m,implementation:x}}var d=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return xs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,xs.createPortal=function(p,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(p,m,null,x)},xs.flushSync=function(p){var m=d.T,x=i.p;try{if(d.T=null,i.p=2,p)return p()}finally{d.T=m,i.p=x,i.d.f()}},xs.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(p,m))},xs.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},xs.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var x=m.as,v=h(x,m.crossOrigin),y=typeof m.integrity=="string"?m.integrity:void 0,E=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?i.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:E}):x==="script"&&i.d.X(p,{crossOrigin:v,integrity:y,fetchPriority:E,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},xs.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=h(m.as,m.crossOrigin);i.d.M(p,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(p)},xs.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,v=h(x,m.crossOrigin);i.d.L(p,x,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},xs.preloadModule=function(p,m){if(typeof p=="string")if(m){var x=h(m.as,m.crossOrigin);i.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(p)},xs.requestFormReset=function(p){i.d.r(p)},xs.unstable_batchedUpdates=function(p,m){return p(m)},xs.useFormState=function(p,m,x){return d.H.useFormState(p,m,x)},xs.useFormStatus=function(){return d.H.useHostTransitionStatus()},xs.version="19.1.1",xs}var RE;function IT(){if(RE)return Ix.exports;RE=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(e){console.error(e)}}return c(),Ix.exports=LT(),Ix.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ME;function PT(){if(ME)return vd;ME=1;var c=OT(),e=gv(),t=IT();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)a+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,n=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(n=a.return),s=a.return;while(s)}return a.tag===3?n:null}function d(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(i(188))}function p(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var n=s,l=a;;){var g=n.return;if(g===null)break;var b=g.alternate;if(b===null){if(l=g.return,l!==null){n=l;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===n)return h(g),s;if(b===l)return h(g),a;b=b.sibling}throw Error(i(188))}if(n.return!==l.return)n=g,l=b;else{for(var A=!1,N=g.child;N;){if(N===n){A=!0,n=g,l=b;break}if(N===l){A=!0,l=g,n=b;break}N=N.sibling}if(!A){for(N=b.child;N;){if(N===n){A=!0,n=b,l=g;break}if(N===l){A=!0,l=b,n=g;break}N=N.sibling}if(!A)throw Error(i(189))}}if(n.alternate!==l)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?s:a}function m(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=m(s),a!==null)return a;s=s.sibling}return null}var x=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),D=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function ge(s){return s===null||typeof s!="object"?null:(s=J&&s[J]||s["@@iterator"],typeof s=="function"?s:null)}var Ce=Symbol.for("react.client.reference");function Ie(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Ce?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case j:return"Profiler";case _:return"StrictMode";case P:return"Suspense";case H:return"SuspenseList";case ne:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case E:return"Portal";case D:return(s.displayName||"Context")+".Provider";case L:return(s._context.displayName||"Context")+".Consumer";case z:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case se:return a=s.displayName||null,a!==null?a:Ie(s.type)||"Memo";case re:a=s._payload,s=s._init;try{return Ie(s(a))}catch{}}return null}var ae=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},oe=[],M=-1;function k(s){return{current:s}}function Q(s){0>M||(s.current=oe[M],oe[M]=null,M--)}function q(s,a){M++,oe[M]=s.current,s.current=a}var ee=k(null),le=k(null),pe=k(null),Me=k(null);function Pe(s,a){switch(q(pe,a),q(le,s),q(ee,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?K1(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=K1(a),s=W1(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Q(ee),q(ee,s)}function gt(){Q(ee),Q(le),Q(pe)}function _s(s){s.memoizedState!==null&&q(Me,s);var a=ee.current,n=W1(a,s.type);a!==n&&(q(le,s),q(ee,n))}function gl(s){le.current===s&&(Q(ee),Q(le)),Me.current===s&&(Q(Me),fd._currentValue=W)}var kn=Object.prototype.hasOwnProperty,mu=c.unstable_scheduleCallback,pu=c.unstable_cancelCallback,xl=c.unstable_shouldYield,bl=c.unstable_requestPaint,Qs=c.unstable_now,kf=c.unstable_getCurrentPriorityLevel,Df=c.unstable_ImmediatePriority,gu=c.unstable_UserBlockingPriority,vl=c.unstable_NormalPriority,xu=c.unstable_LowPriority,Of=c.unstable_IdlePriority,bu=c.log,vg=c.unstable_setDisableYieldValue,ji=null,ws=null;function Oa(s){if(typeof bu=="function"&&vg(s),ws&&typeof ws.setStrictMode=="function")try{ws.setStrictMode(ji,s)}catch{}}var Ct=Math.clz32?Math.clz32:Al,yl=Math.log,yg=Math.LN2;function Al(s){return s>>>=0,s===0?32:31-(yl(s)/yg|0)|0}var pa=256,Ir=4194304;function La(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function El(s,a,n){var l=s.pendingLanes;if(l===0)return 0;var g=0,b=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var N=l&134217727;return N!==0?(l=N&~b,l!==0?g=La(l):(A&=N,A!==0?g=La(A):n||(n=N&~s,n!==0&&(g=La(n))))):(N=l&~b,N!==0?g=La(N):A!==0?g=La(A):n||(n=l&~s,n!==0&&(g=La(n)))),g===0?0:a!==0&&a!==g&&(a&b)===0&&(b=g&-g,n=a&-a,b>=n||b===32&&(n&4194048)!==0)?a:g}function It(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Ag(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lf(){var s=pa;return pa<<=1,(pa&4194048)===0&&(pa=256),s}function If(){var s=Ir;return Ir<<=1,(Ir&62914560)===0&&(Ir=4194304),s}function vu(s){for(var a=[],n=0;31>n;n++)a.push(s);return a}function Pr(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function yu(s,a,n,l,g,b){var A=s.pendingLanes;s.pendingLanes=n,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=n,s.entangledLanes&=n,s.errorRecoveryDisabledLanes&=n,s.shellSuspendCounter=0;var N=s.entanglements,O=s.expirationTimes,B=s.hiddenUpdates;for(n=A&~n;0<n;){var K=31-Ct(n),te=1<<K;N[K]=0,O[K]=-1;var V=B[K];if(V!==null)for(B[K]=null,K=0;K<V.length;K++){var $=V[K];$!==null&&($.lane&=-536870913)}n&=~te}l!==0&&Pf(s,l,0),b!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=b&~(A&~a))}function Pf(s,a,n){s.pendingLanes|=a,s.suspendedLanes&=~a;var l=31-Ct(a);s.entangledLanes|=a,s.entanglements[l]=s.entanglements[l]|1073741824|n&4194090}function Uf(s,a){var n=s.entangledLanes|=a;for(s=s.entanglements;n;){var l=31-Ct(n),g=1<<l;g&a|s[l]&a&&(s[l]|=a),n&=~g}}function Au(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Eu(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Dn(){var s=Y.p;return s!==0?s:(s=window.event,s===void 0?32:gE(s.type))}function Eg(s,a){var n=Y.p;try{return Y.p=s,a()}finally{Y.p=n}}var si=Math.random().toString(36).slice(2),Kt="__reactFiber$"+si,ps="__reactProps$"+si,ga="__reactContainer$"+si,Ur="__reactEvents$"+si,Sg="__reactListeners$"+si,Su="__reactHandles$"+si,_u="__reactResources$"+si,zr="__reactMarker$"+si;function wu(s){delete s[Kt],delete s[ps],delete s[Ur],delete s[Sg],delete s[Su]}function On(s){var a=s[Kt];if(a)return a;for(var n=s.parentNode;n;){if(a=n[ga]||n[Kt]){if(n=a.alternate,a.child!==null||n!==null&&n.child!==null)for(s=tE(s);s!==null;){if(n=s[Kt])return n;s=tE(s)}return a}s=n,n=s.parentNode}return null}function ie(s){if(s=s[Kt]||s[ga]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function de(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function je(s){var a=s[_u];return a||(a=s[_u]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ee(s){s[zr]=!0}var we=new Set,Ne={};function De(s,a){Le(s,a),Le(s+"Capture",a)}function Le(s,a){for(Ne[s]=a,s=0;s<a.length;s++)we.add(a[s])}var Fe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nt={},Ln={};function Ns(s){return kn.call(Ln,s)?!0:kn.call(nt,s)?!1:Fe.test(s)?Ln[s]=!0:(nt[s]=!0,!1)}function Ri(s,a,n){if(Ns(a))if(n===null)s.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+n)}}function zf(s,a,n){if(n===null)s.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+n)}}function Mi(s,a,n,l){if(l===null)s.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(n);return}s.setAttributeNS(a,n,""+l)}}var _g,qv;function Sl(s){if(_g===void 0)try{throw Error()}catch(n){var a=n.stack.trim().match(/\n( *(at )?)/);_g=a&&a[1]||"",qv=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_g+s+qv}var wg=!1;function Ng(s,a){if(!s||wg)return"";wg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch($){var V=$}Reflect.construct(s,[],te)}else{try{te.call()}catch($){V=$}s.call(te.prototype)}}else{try{throw Error()}catch($){V=$}(te=s())&&typeof te.catch=="function"&&te.catch(function(){})}}catch($){if($&&V&&typeof $.stack=="string")return[$.stack,V.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=l.DetermineComponentFrameRoot(),A=b[0],N=b[1];if(A&&N){var O=A.split(`
`),B=N.split(`
`);for(g=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;g<B.length&&!B[g].includes("DetermineComponentFrameRoot");)g++;if(l===O.length||g===B.length)for(l=O.length-1,g=B.length-1;1<=l&&0<=g&&O[l]!==B[g];)g--;for(;1<=l&&0<=g;l--,g--)if(O[l]!==B[g]){if(l!==1||g!==1)do if(l--,g--,0>g||O[l]!==B[g]){var K=`
`+O[l].replace(" at new "," at ");return s.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",s.displayName)),K}while(1<=l&&0<=g);break}}}finally{wg=!1,Error.prepareStackTrace=n}return(n=s?s.displayName||s.name:"")?Sl(n):""}function AN(s){switch(s.tag){case 26:case 27:case 5:return Sl(s.type);case 16:return Sl("Lazy");case 13:return Sl("Suspense");case 19:return Sl("SuspenseList");case 0:case 15:return Ng(s.type,!1);case 11:return Ng(s.type.render,!1);case 1:return Ng(s.type,!0);case 31:return Sl("Activity");default:return""}}function Gv(s){try{var a="";do a+=AN(s),s=s.return;while(s);return a}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function xa(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Yv(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function EN(s){var a=Yv(s)?"checked":"value",n=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),l=""+s[a];if(!s.hasOwnProperty(a)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var g=n.get,b=n.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(A){l=""+A,b.call(this,A)}}),Object.defineProperty(s,a,{enumerable:n.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Ff(s){s._valueTracker||(s._valueTracker=EN(s))}function Vv(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var n=a.getValue(),l="";return s&&(l=Yv(s)?s.checked?"true":"false":s.value),s=l,s!==n?(a.setValue(s),!0):!1}function Bf(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var SN=/[\n"\\]/g;function ba(s){return s.replace(SN,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Tg(s,a,n,l,g,b,A,N){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),a!=null?A==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+xa(a)):s.value!==""+xa(a)&&(s.value=""+xa(a)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),a!=null?Cg(s,A,xa(a)):n!=null?Cg(s,A,xa(n)):l!=null&&s.removeAttribute("value"),g==null&&b!=null&&(s.defaultChecked=!!b),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?s.name=""+xa(N):s.removeAttribute("name")}function $v(s,a,n,l,g,b,A,N){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.type=b),a!=null||n!=null){if(!(b!=="submit"&&b!=="reset"||a!=null))return;n=n!=null?""+xa(n):"",a=a!=null?""+xa(a):n,N||a===s.value||(s.value=a),s.defaultValue=a}l=l??g,l=typeof l!="function"&&typeof l!="symbol"&&!!l,s.checked=N?s.checked:!!l,s.defaultChecked=!!l,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A)}function Cg(s,a,n){a==="number"&&Bf(s.ownerDocument)===s||s.defaultValue===""+n||(s.defaultValue=""+n)}function _l(s,a,n,l){if(s=s.options,a){a={};for(var g=0;g<n.length;g++)a["$"+n[g]]=!0;for(n=0;n<s.length;n++)g=a.hasOwnProperty("$"+s[n].value),s[n].selected!==g&&(s[n].selected=g),g&&l&&(s[n].defaultSelected=!0)}else{for(n=""+xa(n),a=null,g=0;g<s.length;g++){if(s[g].value===n){s[g].selected=!0,l&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function Xv(s,a,n){if(a!=null&&(a=""+xa(a),a!==s.value&&(s.value=a),n==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=n!=null?""+xa(n):""}function Qv(s,a,n,l){if(a==null){if(l!=null){if(n!=null)throw Error(i(92));if(ae(l)){if(1<l.length)throw Error(i(93));l=l[0]}n=l}n==null&&(n=""),a=n}n=xa(a),s.defaultValue=n,l=s.textContent,l===n&&l!==""&&l!==null&&(s.value=l)}function wl(s,a){if(a){var n=s.firstChild;if(n&&n===s.lastChild&&n.nodeType===3){n.nodeValue=a;return}}s.textContent=a}var _N=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kv(s,a,n){var l=a.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":l?s.setProperty(a,n):typeof n!="number"||n===0||_N.has(a)?a==="float"?s.cssFloat=n:s[a]=(""+n).trim():s[a]=n+"px"}function Wv(s,a,n){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="");for(var g in a)l=a[g],a.hasOwnProperty(g)&&n[g]!==l&&Kv(s,g,l)}else for(var b in a)a.hasOwnProperty(b)&&Kv(s,b,a[b])}function jg(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wN=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),NN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hf(s){return NN.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Rg=null;function Mg(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Nl=null,Tl=null;function Zv(s){var a=ie(s);if(a&&(s=a.stateNode)){var n=s[ps]||null;e:switch(s=a.stateNode,a.type){case"input":if(Tg(s,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),a=n.name,n.type==="radio"&&a!=null){for(n=s;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ba(""+a)+'"][type="radio"]'),a=0;a<n.length;a++){var l=n[a];if(l!==s&&l.form===s.form){var g=l[ps]||null;if(!g)throw Error(i(90));Tg(l,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<n.length;a++)l=n[a],l.form===s.form&&Vv(l)}break e;case"textarea":Xv(s,n.value,n.defaultValue);break e;case"select":a=n.value,a!=null&&_l(s,!!n.multiple,a,!1)}}}var kg=!1;function Jv(s,a,n){if(kg)return s(a,n);kg=!0;try{var l=s(a);return l}finally{if(kg=!1,(Nl!==null||Tl!==null)&&(Tm(),Nl&&(a=Nl,s=Tl,Tl=Nl=null,Zv(a),s)))for(a=0;a<s.length;a++)Zv(s[a])}}function Nu(s,a){var n=s.stateNode;if(n===null)return null;var l=n[ps]||null;if(l===null)return null;n=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(s=s.type,l=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!l;break e;default:s=!1}if(s)return null;if(n&&typeof n!="function")throw Error(i(231,a,typeof n));return n}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dg=!1;if(ki)try{var Tu={};Object.defineProperty(Tu,"passive",{get:function(){Dg=!0}}),window.addEventListener("test",Tu,Tu),window.removeEventListener("test",Tu,Tu)}catch{Dg=!1}var In=null,Og=null,qf=null;function ey(){if(qf)return qf;var s,a=Og,n=a.length,l,g="value"in In?In.value:In.textContent,b=g.length;for(s=0;s<n&&a[s]===g[s];s++);var A=n-s;for(l=1;l<=A&&a[n-l]===g[b-l];l++);return qf=g.slice(s,1<l?1-l:void 0)}function Gf(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Yf(){return!0}function ty(){return!1}function Is(s){function a(n,l,g,b,A){this._reactName=n,this._targetInst=g,this.type=l,this.nativeEvent=b,this.target=A,this.currentTarget=null;for(var N in s)s.hasOwnProperty(N)&&(n=s[N],this[N]=n?n(b):b[N]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Yf:ty,this.isPropagationStopped=ty,this}return x(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yf)},persist:function(){},isPersistent:Yf}),a}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vf=Is(Fr),Cu=x({},Fr,{view:0,detail:0}),TN=Is(Cu),Lg,Ig,ju,$f=x({},Cu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ug,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ju&&(ju&&s.type==="mousemove"?(Lg=s.screenX-ju.screenX,Ig=s.screenY-ju.screenY):Ig=Lg=0,ju=s),Lg)},movementY:function(s){return"movementY"in s?s.movementY:Ig}}),sy=Is($f),CN=x({},$f,{dataTransfer:0}),jN=Is(CN),RN=x({},Cu,{relatedTarget:0}),Pg=Is(RN),MN=x({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),kN=Is(MN),DN=x({},Fr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ON=Is(DN),LN=x({},Fr,{data:0}),ay=Is(LN),IN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zN(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=UN[s])?!!a[s]:!1}function Ug(){return zN}var FN=x({},Cu,{key:function(s){if(s.key){var a=IN[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Gf(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?PN[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ug,charCode:function(s){return s.type==="keypress"?Gf(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Gf(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),BN=Is(FN),HN=x({},$f,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iy=Is(HN),qN=x({},Cu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ug}),GN=Is(qN),YN=x({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),VN=Is(YN),$N=x({},$f,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),XN=Is($N),QN=x({},Fr,{newState:0,oldState:0}),KN=Is(QN),WN=[9,13,27,32],zg=ki&&"CompositionEvent"in window,Ru=null;ki&&"documentMode"in document&&(Ru=document.documentMode);var ZN=ki&&"TextEvent"in window&&!Ru,ny=ki&&(!zg||Ru&&8<Ru&&11>=Ru),ry=" ",oy=!1;function ly(s,a){switch(s){case"keyup":return WN.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cy(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Cl=!1;function JN(s,a){switch(s){case"compositionend":return cy(a);case"keypress":return a.which!==32?null:(oy=!0,ry);case"textInput":return s=a.data,s===ry&&oy?null:s;default:return null}}function e2(s,a){if(Cl)return s==="compositionend"||!zg&&ly(s,a)?(s=ey(),qf=Og=In=null,Cl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ny&&a.locale!=="ko"?null:a.data;default:return null}}var t2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uy(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!t2[s.type]:a==="textarea"}function dy(s,a,n,l){Nl?Tl?Tl.push(l):Tl=[l]:Nl=l,a=Dm(a,"onChange"),0<a.length&&(n=new Vf("onChange","change",null,n,l),s.push({event:n,listeners:a}))}var Mu=null,ku=null;function s2(s){Y1(s,0)}function Xf(s){var a=de(s);if(Vv(a))return s}function hy(s,a){if(s==="change")return a}var fy=!1;if(ki){var Fg;if(ki){var Bg="oninput"in document;if(!Bg){var my=document.createElement("div");my.setAttribute("oninput","return;"),Bg=typeof my.oninput=="function"}Fg=Bg}else Fg=!1;fy=Fg&&(!document.documentMode||9<document.documentMode)}function py(){Mu&&(Mu.detachEvent("onpropertychange",gy),ku=Mu=null)}function gy(s){if(s.propertyName==="value"&&Xf(ku)){var a=[];dy(a,ku,s,Mg(s)),Jv(s2,a)}}function a2(s,a,n){s==="focusin"?(py(),Mu=a,ku=n,Mu.attachEvent("onpropertychange",gy)):s==="focusout"&&py()}function i2(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Xf(ku)}function n2(s,a){if(s==="click")return Xf(a)}function r2(s,a){if(s==="input"||s==="change")return Xf(a)}function o2(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Ks=typeof Object.is=="function"?Object.is:o2;function Du(s,a){if(Ks(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var n=Object.keys(s),l=Object.keys(a);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var g=n[l];if(!kn.call(a,g)||!Ks(s[g],a[g]))return!1}return!0}function xy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function by(s,a){var n=xy(s);s=0;for(var l;n;){if(n.nodeType===3){if(l=s+n.textContent.length,s<=a&&l>=a)return{node:n,offset:a-s};s=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xy(n)}}function vy(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?vy(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function yy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Bf(s.document);a instanceof s.HTMLIFrameElement;){try{var n=typeof a.contentWindow.location.href=="string"}catch{n=!1}if(n)s=a.contentWindow;else break;a=Bf(s.document)}return a}function Hg(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var l2=ki&&"documentMode"in document&&11>=document.documentMode,jl=null,qg=null,Ou=null,Gg=!1;function Ay(s,a,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gg||jl==null||jl!==Bf(l)||(l=jl,"selectionStart"in l&&Hg(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ou&&Du(Ou,l)||(Ou=l,l=Dm(qg,"onSelect"),0<l.length&&(a=new Vf("onSelect","select",null,a,n),s.push({event:a,listeners:l}),a.target=jl)))}function Br(s,a){var n={};return n[s.toLowerCase()]=a.toLowerCase(),n["Webkit"+s]="webkit"+a,n["Moz"+s]="moz"+a,n}var Rl={animationend:Br("Animation","AnimationEnd"),animationiteration:Br("Animation","AnimationIteration"),animationstart:Br("Animation","AnimationStart"),transitionrun:Br("Transition","TransitionRun"),transitionstart:Br("Transition","TransitionStart"),transitioncancel:Br("Transition","TransitionCancel"),transitionend:Br("Transition","TransitionEnd")},Yg={},Ey={};ki&&(Ey=document.createElement("div").style,"AnimationEvent"in window||(delete Rl.animationend.animation,delete Rl.animationiteration.animation,delete Rl.animationstart.animation),"TransitionEvent"in window||delete Rl.transitionend.transition);function Hr(s){if(Yg[s])return Yg[s];if(!Rl[s])return s;var a=Rl[s],n;for(n in a)if(a.hasOwnProperty(n)&&n in Ey)return Yg[s]=a[n];return s}var Sy=Hr("animationend"),_y=Hr("animationiteration"),wy=Hr("animationstart"),c2=Hr("transitionrun"),u2=Hr("transitionstart"),d2=Hr("transitioncancel"),Ny=Hr("transitionend"),Ty=new Map,Vg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vg.push("scrollEnd");function Ia(s,a){Ty.set(s,a),De(a,[s])}var Cy=new WeakMap;function va(s,a){if(typeof s=="object"&&s!==null){var n=Cy.get(s);return n!==void 0?n:(a={value:s,source:a,stack:Gv(a)},Cy.set(s,a),a)}return{value:s,source:a,stack:Gv(a)}}var ya=[],Ml=0,$g=0;function Qf(){for(var s=Ml,a=$g=Ml=0;a<s;){var n=ya[a];ya[a++]=null;var l=ya[a];ya[a++]=null;var g=ya[a];ya[a++]=null;var b=ya[a];if(ya[a++]=null,l!==null&&g!==null){var A=l.pending;A===null?g.next=g:(g.next=A.next,A.next=g),l.pending=g}b!==0&&jy(n,g,b)}}function Kf(s,a,n,l){ya[Ml++]=s,ya[Ml++]=a,ya[Ml++]=n,ya[Ml++]=l,$g|=l,s.lanes|=l,s=s.alternate,s!==null&&(s.lanes|=l)}function Xg(s,a,n,l){return Kf(s,a,n,l),Wf(s)}function kl(s,a){return Kf(s,null,null,a),Wf(s)}function jy(s,a,n){s.lanes|=n;var l=s.alternate;l!==null&&(l.lanes|=n);for(var g=!1,b=s.return;b!==null;)b.childLanes|=n,l=b.alternate,l!==null&&(l.childLanes|=n),b.tag===22&&(s=b.stateNode,s===null||s._visibility&1||(g=!0)),s=b,b=b.return;return s.tag===3?(b=s.stateNode,g&&a!==null&&(g=31-Ct(n),s=b.hiddenUpdates,l=s[g],l===null?s[g]=[a]:l.push(a),a.lane=n|536870912),b):null}function Wf(s){if(50<nd)throw nd=0,ex=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Dl={};function h2(s,a,n,l){this.tag=s,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(s,a,n,l){return new h2(s,a,n,l)}function Qg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Di(s,a){var n=s.alternate;return n===null?(n=Ws(s.tag,a,s.key,s.mode),n.elementType=s.elementType,n.type=s.type,n.stateNode=s.stateNode,n.alternate=s,s.alternate=n):(n.pendingProps=a,n.type=s.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=s.flags&65011712,n.childLanes=s.childLanes,n.lanes=s.lanes,n.child=s.child,n.memoizedProps=s.memoizedProps,n.memoizedState=s.memoizedState,n.updateQueue=s.updateQueue,a=s.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},n.sibling=s.sibling,n.index=s.index,n.ref=s.ref,n.refCleanup=s.refCleanup,n}function Ry(s,a){s.flags&=65011714;var n=s.alternate;return n===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=n.childLanes,s.lanes=n.lanes,s.child=n.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=n.memoizedProps,s.memoizedState=n.memoizedState,s.updateQueue=n.updateQueue,s.type=n.type,a=n.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Zf(s,a,n,l,g,b){var A=0;if(l=s,typeof s=="function")Qg(s)&&(A=1);else if(typeof s=="string")A=mT(s,n,ee.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case ne:return s=Ws(31,n,a,g),s.elementType=ne,s.lanes=b,s;case S:return qr(n.children,g,b,a);case _:A=8,g|=24;break;case j:return s=Ws(12,n,a,g|2),s.elementType=j,s.lanes=b,s;case P:return s=Ws(13,n,a,g),s.elementType=P,s.lanes=b,s;case H:return s=Ws(19,n,a,g),s.elementType=H,s.lanes=b,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R:case D:A=10;break e;case L:A=9;break e;case z:A=11;break e;case se:A=14;break e;case re:A=16,l=null;break e}A=29,n=Error(i(130,s===null?"null":typeof s,"")),l=null}return a=Ws(A,n,a,g),a.elementType=s,a.type=l,a.lanes=b,a}function qr(s,a,n,l){return s=Ws(7,s,l,a),s.lanes=n,s}function Kg(s,a,n){return s=Ws(6,s,null,a),s.lanes=n,s}function Wg(s,a,n){return a=Ws(4,s.children!==null?s.children:[],s.key,a),a.lanes=n,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var Ol=[],Ll=0,Jf=null,em=0,Aa=[],Ea=0,Gr=null,Oi=1,Li="";function Yr(s,a){Ol[Ll++]=em,Ol[Ll++]=Jf,Jf=s,em=a}function My(s,a,n){Aa[Ea++]=Oi,Aa[Ea++]=Li,Aa[Ea++]=Gr,Gr=s;var l=Oi;s=Li;var g=32-Ct(l)-1;l&=~(1<<g),n+=1;var b=32-Ct(a)+g;if(30<b){var A=g-g%5;b=(l&(1<<A)-1).toString(32),l>>=A,g-=A,Oi=1<<32-Ct(a)+g|n<<g|l,Li=b+s}else Oi=1<<b|n<<g|l,Li=s}function Zg(s){s.return!==null&&(Yr(s,1),My(s,1,0))}function Jg(s){for(;s===Jf;)Jf=Ol[--Ll],Ol[Ll]=null,em=Ol[--Ll],Ol[Ll]=null;for(;s===Gr;)Gr=Aa[--Ea],Aa[Ea]=null,Li=Aa[--Ea],Aa[Ea]=null,Oi=Aa[--Ea],Aa[Ea]=null}var Ts=null,jt=null,tt=!1,Vr=null,ai=!1,e0=Error(i(519));function $r(s){var a=Error(i(418,""));throw Pu(va(a,s)),e0}function ky(s){var a=s.stateNode,n=s.type,l=s.memoizedProps;switch(a[Kt]=s,a[ps]=l,n){case"dialog":Ve("cancel",a),Ve("close",a);break;case"iframe":case"object":case"embed":Ve("load",a);break;case"video":case"audio":for(n=0;n<od.length;n++)Ve(od[n],a);break;case"source":Ve("error",a);break;case"img":case"image":case"link":Ve("error",a),Ve("load",a);break;case"details":Ve("toggle",a);break;case"input":Ve("invalid",a),$v(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ff(a);break;case"select":Ve("invalid",a);break;case"textarea":Ve("invalid",a),Qv(a,l.value,l.defaultValue,l.children),Ff(a)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||a.textContent===""+n||l.suppressHydrationWarning===!0||Q1(a.textContent,n)?(l.popover!=null&&(Ve("beforetoggle",a),Ve("toggle",a)),l.onScroll!=null&&Ve("scroll",a),l.onScrollEnd!=null&&Ve("scrollend",a),l.onClick!=null&&(a.onclick=Om),a=!0):a=!1,a||$r(s)}function Dy(s){for(Ts=s.return;Ts;)switch(Ts.tag){case 5:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:Ts=Ts.return}}function Lu(s){if(s!==Ts)return!1;if(!tt)return Dy(s),tt=!0,!1;var a=s.tag,n;if((n=a!==3&&a!==27)&&((n=a===5)&&(n=s.type,n=!(n!=="form"&&n!=="button")||gx(s.type,s.memoizedProps)),n=!n),n&&jt&&$r(s),Dy(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(n=s.data,n==="/$"){if(a===0){jt=Ua(s.nextSibling);break e}a--}else n!=="$"&&n!=="$!"&&n!=="$?"||a++;s=s.nextSibling}jt=null}}else a===27?(a=jt,Zn(s.type)?(s=yx,yx=null,jt=s):jt=a):jt=Ts?Ua(s.stateNode.nextSibling):null;return!0}function Iu(){jt=Ts=null,tt=!1}function Oy(){var s=Vr;return s!==null&&(zs===null?zs=s:zs.push.apply(zs,s),Vr=null),s}function Pu(s){Vr===null?Vr=[s]:Vr.push(s)}var t0=k(null),Xr=null,Ii=null;function Pn(s,a,n){q(t0,a._currentValue),a._currentValue=n}function Pi(s){s._currentValue=t0.current,Q(t0)}function s0(s,a,n){for(;s!==null;){var l=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),s===n)break;s=s.return}}function a0(s,a,n,l){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var b=g.dependencies;if(b!==null){var A=g.child;b=b.firstContext;e:for(;b!==null;){var N=b;b=g;for(var O=0;O<a.length;O++)if(N.context===a[O]){b.lanes|=n,N=b.alternate,N!==null&&(N.lanes|=n),s0(b.return,n,s),l||(A=null);break e}b=N.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(i(341));A.lanes|=n,b=A.alternate,b!==null&&(b.lanes|=n),s0(A,n,s),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===s){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function Uu(s,a,n,l){s=null;for(var g=a,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var N=g.type;Ks(g.pendingProps.value,A.value)||(s!==null?s.push(N):s=[N])}}else if(g===Me.current){if(A=g.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(fd):s=[fd])}g=g.return}s!==null&&a0(a,s,n,l),a.flags|=262144}function tm(s){for(s=s.firstContext;s!==null;){if(!Ks(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Qr(s){Xr=s,Ii=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function gs(s){return Ly(Xr,s)}function sm(s,a){return Xr===null&&Qr(s),Ly(s,a)}function Ly(s,a){var n=a._currentValue;if(a={context:a,memoizedValue:n,next:null},Ii===null){if(s===null)throw Error(i(308));Ii=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Ii=Ii.next=a;return n}var f2=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(n,l){s.push(l)}};this.abort=function(){a.aborted=!0,s.forEach(function(n){return n()})}},m2=c.unstable_scheduleCallback,p2=c.unstable_NormalPriority,Bt={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function i0(){return{controller:new f2,data:new Map,refCount:0}}function zu(s){s.refCount--,s.refCount===0&&m2(p2,function(){s.controller.abort()})}var Fu=null,n0=0,Il=0,Pl=null;function g2(s,a){if(Fu===null){var n=Fu=[];n0=0,Il=ox(),Pl={status:"pending",value:void 0,then:function(l){n.push(l)}}}return n0++,a.then(Iy,Iy),a}function Iy(){if(--n0===0&&Fu!==null){Pl!==null&&(Pl.status="fulfilled");var s=Fu;Fu=null,Il=0,Pl=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function x2(s,a){var n=[],l={status:"pending",value:null,reason:null,then:function(g){n.push(g)}};return s.then(function(){l.status="fulfilled",l.value=a;for(var g=0;g<n.length;g++)(0,n[g])(a)},function(g){for(l.status="rejected",l.reason=g,g=0;g<n.length;g++)(0,n[g])(void 0)}),l}var Py=G.S;G.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&g2(s,a),Py!==null&&Py(s,a)};var Kr=k(null);function r0(){var s=Kr.current;return s!==null?s:At.pooledCache}function am(s,a){a===null?q(Kr,Kr.current):q(Kr,a.pool)}function Uy(){var s=r0();return s===null?null:{parent:Bt._currentValue,pool:s}}var Bu=Error(i(460)),zy=Error(i(474)),im=Error(i(542)),o0={then:function(){}};function Fy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function nm(){}function By(s,a,n){switch(n=s[n],n===void 0?s.push(a):n!==a&&(a.then(nm,nm),a=n),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,qy(s),s;default:if(typeof a.status=="string")a.then(nm,nm);else{if(s=At,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(l){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=l}},function(l){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,qy(s),s}throw Hu=a,Bu}}var Hu=null;function Hy(){if(Hu===null)throw Error(i(459));var s=Hu;return Hu=null,s}function qy(s){if(s===Bu||s===im)throw Error(i(483))}var Un=!1;function l0(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function c0(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function zn(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Fn(s,a,n){var l=s.updateQueue;if(l===null)return null;if(l=l.shared,(rt&2)!==0){var g=l.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),l.pending=a,a=Wf(s),jy(s,null,n),a}return Kf(s,l,a,n),Wf(s)}function qu(s,a,n){if(a=a.updateQueue,a!==null&&(a=a.shared,(n&4194048)!==0)){var l=a.lanes;l&=s.pendingLanes,n|=l,a.lanes=n,Uf(s,n)}}function u0(s,a){var n=s.updateQueue,l=s.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var g=null,b=null;if(n=n.firstBaseUpdate,n!==null){do{var A={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};b===null?g=b=A:b=b.next=A,n=n.next}while(n!==null);b===null?g=b=a:b=b.next=a}else g=b=a;n={baseState:l.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:l.shared,callbacks:l.callbacks},s.updateQueue=n;return}s=n.lastBaseUpdate,s===null?n.firstBaseUpdate=a:s.next=a,n.lastBaseUpdate=a}var d0=!1;function Gu(){if(d0){var s=Pl;if(s!==null)throw s}}function Yu(s,a,n,l){d0=!1;var g=s.updateQueue;Un=!1;var b=g.firstBaseUpdate,A=g.lastBaseUpdate,N=g.shared.pending;if(N!==null){g.shared.pending=null;var O=N,B=O.next;O.next=null,A===null?b=B:A.next=B,A=O;var K=s.alternate;K!==null&&(K=K.updateQueue,N=K.lastBaseUpdate,N!==A&&(N===null?K.firstBaseUpdate=B:N.next=B,K.lastBaseUpdate=O))}if(b!==null){var te=g.baseState;A=0,K=B=O=null,N=b;do{var V=N.lane&-536870913,$=V!==N.lane;if($?(Ke&V)===V:(l&V)===V){V!==0&&V===Il&&(d0=!0),K!==null&&(K=K.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var ke=s,Te=N;V=a;var ht=n;switch(Te.tag){case 1:if(ke=Te.payload,typeof ke=="function"){te=ke.call(ht,te,V);break e}te=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Te.payload,V=typeof ke=="function"?ke.call(ht,te,V):ke,V==null)break e;te=x({},te,V);break e;case 2:Un=!0}}V=N.callback,V!==null&&(s.flags|=64,$&&(s.flags|=8192),$=g.callbacks,$===null?g.callbacks=[V]:$.push(V))}else $={lane:V,tag:N.tag,payload:N.payload,callback:N.callback,next:null},K===null?(B=K=$,O=te):K=K.next=$,A|=V;if(N=N.next,N===null){if(N=g.shared.pending,N===null)break;$=N,N=$.next,$.next=null,g.lastBaseUpdate=$,g.shared.pending=null}}while(!0);K===null&&(O=te),g.baseState=O,g.firstBaseUpdate=B,g.lastBaseUpdate=K,b===null&&(g.shared.lanes=0),Xn|=A,s.lanes=A,s.memoizedState=te}}function Gy(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function Yy(s,a){var n=s.callbacks;if(n!==null)for(s.callbacks=null,s=0;s<n.length;s++)Gy(n[s],a)}var Ul=k(null),rm=k(0);function Vy(s,a){s=Gi,q(rm,s),q(Ul,a),Gi=s|a.baseLanes}function h0(){q(rm,Gi),q(Ul,Ul.current)}function f0(){Gi=rm.current,Q(Ul),Q(rm)}var Bn=0,He=null,ut=null,Pt=null,om=!1,zl=!1,Wr=!1,lm=0,Vu=0,Fl=null,b2=0;function kt(){throw Error(i(321))}function m0(s,a){if(a===null)return!1;for(var n=0;n<a.length&&n<s.length;n++)if(!Ks(s[n],a[n]))return!1;return!0}function p0(s,a,n,l,g,b){return Bn=b,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,G.H=s===null||s.memoizedState===null?jA:RA,Wr=!1,b=n(l,g),Wr=!1,zl&&(b=Xy(a,n,l,g)),$y(s),b}function $y(s){G.H=mm;var a=ut!==null&&ut.next!==null;if(Bn=0,Pt=ut=He=null,om=!1,Vu=0,Fl=null,a)throw Error(i(300));s===null||Wt||(s=s.dependencies,s!==null&&tm(s)&&(Wt=!0))}function Xy(s,a,n,l){He=s;var g=0;do{if(zl&&(Fl=null),Vu=0,zl=!1,25<=g)throw Error(i(301));if(g+=1,Pt=ut=null,s.updateQueue!=null){var b=s.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}G.H=w2,b=a(n,l)}while(zl);return b}function v2(){var s=G.H,a=s.useState()[0];return a=typeof a.then=="function"?$u(a):a,s=s.useState()[0],(ut!==null?ut.memoizedState:null)!==s&&(He.flags|=1024),a}function g0(){var s=lm!==0;return lm=0,s}function x0(s,a,n){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~n}function b0(s){if(om){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}om=!1}Bn=0,Pt=ut=He=null,zl=!1,Vu=lm=0,Fl=null}function Ps(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?He.memoizedState=Pt=s:Pt=Pt.next=s,Pt}function Ut(){if(ut===null){var s=He.alternate;s=s!==null?s.memoizedState:null}else s=ut.next;var a=Pt===null?He.memoizedState:Pt.next;if(a!==null)Pt=a,ut=s;else{if(s===null)throw He.alternate===null?Error(i(467)):Error(i(310));ut=s,s={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Pt===null?He.memoizedState=Pt=s:Pt=Pt.next=s}return Pt}function v0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $u(s){var a=Vu;return Vu+=1,Fl===null&&(Fl=[]),s=By(Fl,s,a),a=He,(Pt===null?a.memoizedState:Pt.next)===null&&(a=a.alternate,G.H=a===null||a.memoizedState===null?jA:RA),s}function cm(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return $u(s);if(s.$$typeof===D)return gs(s)}throw Error(i(438,String(s)))}function y0(s){var a=null,n=He.updateQueue;if(n!==null&&(a=n.memoCache),a==null){var l=He.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),n===null&&(n=v0(),He.updateQueue=n),n.memoCache=a,n=a.data[a.index],n===void 0)for(n=a.data[a.index]=Array(s),l=0;l<s;l++)n[l]=ue;return a.index++,n}function Ui(s,a){return typeof a=="function"?a(s):a}function um(s){var a=Ut();return A0(a,ut,s)}function A0(s,a,n){var l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=n;var g=s.baseQueue,b=l.pending;if(b!==null){if(g!==null){var A=g.next;g.next=b.next,b.next=A}a.baseQueue=g=b,l.pending=null}if(b=s.baseState,g===null)s.memoizedState=b;else{a=g.next;var N=A=null,O=null,B=a,K=!1;do{var te=B.lane&-536870913;if(te!==B.lane?(Ke&te)===te:(Bn&te)===te){var V=B.revertLane;if(V===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),te===Il&&(K=!0);else if((Bn&V)===V){B=B.next,V===Il&&(K=!0);continue}else te={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},O===null?(N=O=te,A=b):O=O.next=te,He.lanes|=V,Xn|=V;te=B.action,Wr&&n(b,te),b=B.hasEagerState?B.eagerState:n(b,te)}else V={lane:te,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},O===null?(N=O=V,A=b):O=O.next=V,He.lanes|=te,Xn|=te;B=B.next}while(B!==null&&B!==a);if(O===null?A=b:O.next=N,!Ks(b,s.memoizedState)&&(Wt=!0,K&&(n=Pl,n!==null)))throw n;s.memoizedState=b,s.baseState=A,s.baseQueue=O,l.lastRenderedState=b}return g===null&&(l.lanes=0),[s.memoizedState,l.dispatch]}function E0(s){var a=Ut(),n=a.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=s;var l=n.dispatch,g=n.pending,b=a.memoizedState;if(g!==null){n.pending=null;var A=g=g.next;do b=s(b,A.action),A=A.next;while(A!==g);Ks(b,a.memoizedState)||(Wt=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),n.lastRenderedState=b}return[b,l]}function Qy(s,a,n){var l=He,g=Ut(),b=tt;if(b){if(n===void 0)throw Error(i(407));n=n()}else n=a();var A=!Ks((ut||g).memoizedState,n);A&&(g.memoizedState=n,Wt=!0),g=g.queue;var N=Zy.bind(null,l,g,s);if(Xu(2048,8,N,[s]),g.getSnapshot!==a||A||Pt!==null&&Pt.memoizedState.tag&1){if(l.flags|=2048,Bl(9,dm(),Wy.bind(null,l,g,n,a),null),At===null)throw Error(i(349));b||(Bn&124)!==0||Ky(l,a,n)}return n}function Ky(s,a,n){s.flags|=16384,s={getSnapshot:a,value:n},a=He.updateQueue,a===null?(a=v0(),He.updateQueue=a,a.stores=[s]):(n=a.stores,n===null?a.stores=[s]:n.push(s))}function Wy(s,a,n,l){a.value=n,a.getSnapshot=l,Jy(a)&&eA(s)}function Zy(s,a,n){return n(function(){Jy(a)&&eA(s)})}function Jy(s){var a=s.getSnapshot;s=s.value;try{var n=a();return!Ks(s,n)}catch{return!0}}function eA(s){var a=kl(s,2);a!==null&&sa(a,s,2)}function S0(s){var a=Ps();if(typeof s=="function"){var n=s;if(s=n(),Wr){Oa(!0);try{n()}finally{Oa(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:s},a}function tA(s,a,n,l){return s.baseState=n,A0(s,ut,typeof l=="function"?l:Ui)}function y2(s,a,n,l,g){if(fm(s))throw Error(i(485));if(s=a.action,s!==null){var b={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){b.listeners.push(A)}};G.T!==null?n(!0):b.isTransition=!1,l(b),n=a.pending,n===null?(b.next=a.pending=b,sA(a,b)):(b.next=n.next,a.pending=n.next=b)}}function sA(s,a){var n=a.action,l=a.payload,g=s.state;if(a.isTransition){var b=G.T,A={};G.T=A;try{var N=n(g,l),O=G.S;O!==null&&O(A,N),aA(s,a,N)}catch(B){_0(s,a,B)}finally{G.T=b}}else try{b=n(g,l),aA(s,a,b)}catch(B){_0(s,a,B)}}function aA(s,a,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){iA(s,a,l)},function(l){return _0(s,a,l)}):iA(s,a,n)}function iA(s,a,n){a.status="fulfilled",a.value=n,nA(a),s.state=n,a=s.pending,a!==null&&(n=a.next,n===a?s.pending=null:(n=n.next,a.next=n,sA(s,n)))}function _0(s,a,n){var l=s.pending;if(s.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=n,nA(a),a=a.next;while(a!==l)}s.action=null}function nA(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function rA(s,a){return a}function oA(s,a){if(tt){var n=At.formState;if(n!==null){e:{var l=He;if(tt){if(jt){t:{for(var g=jt,b=ai;g.nodeType!==8;){if(!b){g=null;break t}if(g=Ua(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){jt=Ua(g.nextSibling),l=g.data==="F!";break e}}$r(l)}l=!1}l&&(a=n[0])}}return n=Ps(),n.memoizedState=n.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rA,lastRenderedState:a},n.queue=l,n=NA.bind(null,He,l),l.dispatch=n,l=S0(!1),b=j0.bind(null,He,!1,l.queue),l=Ps(),g={state:a,dispatch:null,action:s,pending:null},l.queue=g,n=y2.bind(null,He,g,b,n),g.dispatch=n,l.memoizedState=s,[a,n,!1]}function lA(s){var a=Ut();return cA(a,ut,s)}function cA(s,a,n){if(a=A0(s,a,rA)[0],s=um(Ui)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=$u(a)}catch(A){throw A===Bu?im:A}else l=a;a=Ut();var g=a.queue,b=g.dispatch;return n!==a.memoizedState&&(He.flags|=2048,Bl(9,dm(),A2.bind(null,g,n),null)),[l,b,s]}function A2(s,a){s.action=a}function uA(s){var a=Ut(),n=ut;if(n!==null)return cA(a,n,s);Ut(),a=a.memoizedState,n=Ut();var l=n.queue.dispatch;return n.memoizedState=s,[a,l,!1]}function Bl(s,a,n,l){return s={tag:s,create:n,deps:l,inst:a,next:null},a=He.updateQueue,a===null&&(a=v0(),He.updateQueue=a),n=a.lastEffect,n===null?a.lastEffect=s.next=s:(l=n.next,n.next=s,s.next=l,a.lastEffect=s),s}function dm(){return{destroy:void 0,resource:void 0}}function dA(){return Ut().memoizedState}function hm(s,a,n,l){var g=Ps();l=l===void 0?null:l,He.flags|=s,g.memoizedState=Bl(1|a,dm(),n,l)}function Xu(s,a,n,l){var g=Ut();l=l===void 0?null:l;var b=g.memoizedState.inst;ut!==null&&l!==null&&m0(l,ut.memoizedState.deps)?g.memoizedState=Bl(a,b,n,l):(He.flags|=s,g.memoizedState=Bl(1|a,b,n,l))}function hA(s,a){hm(8390656,8,s,a)}function fA(s,a){Xu(2048,8,s,a)}function mA(s,a){return Xu(4,2,s,a)}function pA(s,a){return Xu(4,4,s,a)}function gA(s,a){if(typeof a=="function"){s=s();var n=a(s);return function(){typeof n=="function"?n():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function xA(s,a,n){n=n!=null?n.concat([s]):null,Xu(4,4,gA.bind(null,a,s),n)}function w0(){}function bA(s,a){var n=Ut();a=a===void 0?null:a;var l=n.memoizedState;return a!==null&&m0(a,l[1])?l[0]:(n.memoizedState=[s,a],s)}function vA(s,a){var n=Ut();a=a===void 0?null:a;var l=n.memoizedState;if(a!==null&&m0(a,l[1]))return l[0];if(l=s(),Wr){Oa(!0);try{s()}finally{Oa(!1)}}return n.memoizedState=[l,a],l}function N0(s,a,n){return n===void 0||(Bn&1073741824)!==0?s.memoizedState=a:(s.memoizedState=n,s=E1(),He.lanes|=s,Xn|=s,n)}function yA(s,a,n,l){return Ks(n,a)?n:Ul.current!==null?(s=N0(s,n,l),Ks(s,a)||(Wt=!0),s):(Bn&42)===0?(Wt=!0,s.memoizedState=n):(s=E1(),He.lanes|=s,Xn|=s,a)}function AA(s,a,n,l,g){var b=Y.p;Y.p=b!==0&&8>b?b:8;var A=G.T,N={};G.T=N,j0(s,!1,a,n);try{var O=g(),B=G.S;if(B!==null&&B(N,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var K=x2(O,l);Qu(s,a,K,ta(s))}else Qu(s,a,l,ta(s))}catch(te){Qu(s,a,{then:function(){},status:"rejected",reason:te},ta())}finally{Y.p=b,G.T=A}}function E2(){}function T0(s,a,n,l){if(s.tag!==5)throw Error(i(476));var g=EA(s).queue;AA(s,g,a,W,n===null?E2:function(){return SA(s),n(l)})}function EA(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:W},next:null};var n={};return a.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:n},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function SA(s){var a=EA(s).next.queue;Qu(s,a,{},ta())}function C0(){return gs(fd)}function _A(){return Ut().memoizedState}function wA(){return Ut().memoizedState}function S2(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var n=ta();s=zn(n);var l=Fn(a,s,n);l!==null&&(sa(l,a,n),qu(l,a,n)),a={cache:i0()},s.payload=a;return}a=a.return}}function _2(s,a,n){var l=ta();n={lane:l,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},fm(s)?TA(a,n):(n=Xg(s,a,n,l),n!==null&&(sa(n,s,l),CA(n,a,l)))}function NA(s,a,n){var l=ta();Qu(s,a,n,l)}function Qu(s,a,n,l){var g={lane:l,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(fm(s))TA(a,g);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var A=a.lastRenderedState,N=b(A,n);if(g.hasEagerState=!0,g.eagerState=N,Ks(N,A))return Kf(s,a,g,0),At===null&&Qf(),!1}catch{}finally{}if(n=Xg(s,a,g,l),n!==null)return sa(n,s,l),CA(n,a,l),!0}return!1}function j0(s,a,n,l){if(l={lane:2,revertLane:ox(),action:l,hasEagerState:!1,eagerState:null,next:null},fm(s)){if(a)throw Error(i(479))}else a=Xg(s,n,l,2),a!==null&&sa(a,s,2)}function fm(s){var a=s.alternate;return s===He||a!==null&&a===He}function TA(s,a){zl=om=!0;var n=s.pending;n===null?a.next=a:(a.next=n.next,n.next=a),s.pending=a}function CA(s,a,n){if((n&4194048)!==0){var l=a.lanes;l&=s.pendingLanes,n|=l,a.lanes=n,Uf(s,n)}}var mm={readContext:gs,use:cm,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt},jA={readContext:gs,use:cm,useCallback:function(s,a){return Ps().memoizedState=[s,a===void 0?null:a],s},useContext:gs,useEffect:hA,useImperativeHandle:function(s,a,n){n=n!=null?n.concat([s]):null,hm(4194308,4,gA.bind(null,a,s),n)},useLayoutEffect:function(s,a){return hm(4194308,4,s,a)},useInsertionEffect:function(s,a){hm(4,2,s,a)},useMemo:function(s,a){var n=Ps();a=a===void 0?null:a;var l=s();if(Wr){Oa(!0);try{s()}finally{Oa(!1)}}return n.memoizedState=[l,a],l},useReducer:function(s,a,n){var l=Ps();if(n!==void 0){var g=n(a);if(Wr){Oa(!0);try{n(a)}finally{Oa(!1)}}}else g=a;return l.memoizedState=l.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},l.queue=s,s=s.dispatch=_2.bind(null,He,s),[l.memoizedState,s]},useRef:function(s){var a=Ps();return s={current:s},a.memoizedState=s},useState:function(s){s=S0(s);var a=s.queue,n=NA.bind(null,He,a);return a.dispatch=n,[s.memoizedState,n]},useDebugValue:w0,useDeferredValue:function(s,a){var n=Ps();return N0(n,s,a)},useTransition:function(){var s=S0(!1);return s=AA.bind(null,He,s.queue,!0,!1),Ps().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,n){var l=He,g=Ps();if(tt){if(n===void 0)throw Error(i(407));n=n()}else{if(n=a(),At===null)throw Error(i(349));(Ke&124)!==0||Ky(l,a,n)}g.memoizedState=n;var b={value:n,getSnapshot:a};return g.queue=b,hA(Zy.bind(null,l,b,s),[s]),l.flags|=2048,Bl(9,dm(),Wy.bind(null,l,b,n,a),null),n},useId:function(){var s=Ps(),a=At.identifierPrefix;if(tt){var n=Li,l=Oi;n=(l&~(1<<32-Ct(l)-1)).toString(32)+n,a=""+a+"R"+n,n=lm++,0<n&&(a+="H"+n.toString(32)),a+=""}else n=b2++,a=""+a+"r"+n.toString(32)+"";return s.memoizedState=a},useHostTransitionStatus:C0,useFormState:oA,useActionState:oA,useOptimistic:function(s){var a=Ps();a.memoizedState=a.baseState=s;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=n,a=j0.bind(null,He,!0,n),n.dispatch=a,[s,a]},useMemoCache:y0,useCacheRefresh:function(){return Ps().memoizedState=S2.bind(null,He)}},RA={readContext:gs,use:cm,useCallback:bA,useContext:gs,useEffect:fA,useImperativeHandle:xA,useInsertionEffect:mA,useLayoutEffect:pA,useMemo:vA,useReducer:um,useRef:dA,useState:function(){return um(Ui)},useDebugValue:w0,useDeferredValue:function(s,a){var n=Ut();return yA(n,ut.memoizedState,s,a)},useTransition:function(){var s=um(Ui)[0],a=Ut().memoizedState;return[typeof s=="boolean"?s:$u(s),a]},useSyncExternalStore:Qy,useId:_A,useHostTransitionStatus:C0,useFormState:lA,useActionState:lA,useOptimistic:function(s,a){var n=Ut();return tA(n,ut,s,a)},useMemoCache:y0,useCacheRefresh:wA},w2={readContext:gs,use:cm,useCallback:bA,useContext:gs,useEffect:fA,useImperativeHandle:xA,useInsertionEffect:mA,useLayoutEffect:pA,useMemo:vA,useReducer:E0,useRef:dA,useState:function(){return E0(Ui)},useDebugValue:w0,useDeferredValue:function(s,a){var n=Ut();return ut===null?N0(n,s,a):yA(n,ut.memoizedState,s,a)},useTransition:function(){var s=E0(Ui)[0],a=Ut().memoizedState;return[typeof s=="boolean"?s:$u(s),a]},useSyncExternalStore:Qy,useId:_A,useHostTransitionStatus:C0,useFormState:uA,useActionState:uA,useOptimistic:function(s,a){var n=Ut();return ut!==null?tA(n,ut,s,a):(n.baseState=s,[s,n.queue.dispatch])},useMemoCache:y0,useCacheRefresh:wA},Hl=null,Ku=0;function pm(s){var a=Ku;return Ku+=1,Hl===null&&(Hl=[]),By(Hl,s,a)}function Wu(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function gm(s,a){throw a.$$typeof===v?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function MA(s){var a=s._init;return a(s._payload)}function kA(s){function a(U,I){if(s){var F=U.deletions;F===null?(U.deletions=[I],U.flags|=16):F.push(I)}}function n(U,I){if(!s)return null;for(;I!==null;)a(U,I),I=I.sibling;return null}function l(U){for(var I=new Map;U!==null;)U.key!==null?I.set(U.key,U):I.set(U.index,U),U=U.sibling;return I}function g(U,I){return U=Di(U,I),U.index=0,U.sibling=null,U}function b(U,I,F){return U.index=F,s?(F=U.alternate,F!==null?(F=F.index,F<I?(U.flags|=67108866,I):F):(U.flags|=67108866,I)):(U.flags|=1048576,I)}function A(U){return s&&U.alternate===null&&(U.flags|=67108866),U}function N(U,I,F,Z){return I===null||I.tag!==6?(I=Kg(F,U.mode,Z),I.return=U,I):(I=g(I,F),I.return=U,I)}function O(U,I,F,Z){var be=F.type;return be===S?K(U,I,F.props.children,Z,F.key):I!==null&&(I.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===re&&MA(be)===I.type)?(I=g(I,F.props),Wu(I,F),I.return=U,I):(I=Zf(F.type,F.key,F.props,null,U.mode,Z),Wu(I,F),I.return=U,I)}function B(U,I,F,Z){return I===null||I.tag!==4||I.stateNode.containerInfo!==F.containerInfo||I.stateNode.implementation!==F.implementation?(I=Wg(F,U.mode,Z),I.return=U,I):(I=g(I,F.children||[]),I.return=U,I)}function K(U,I,F,Z,be){return I===null||I.tag!==7?(I=qr(F,U.mode,Z,be),I.return=U,I):(I=g(I,F),I.return=U,I)}function te(U,I,F){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=Kg(""+I,U.mode,F),I.return=U,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case y:return F=Zf(I.type,I.key,I.props,null,U.mode,F),Wu(F,I),F.return=U,F;case E:return I=Wg(I,U.mode,F),I.return=U,I;case re:var Z=I._init;return I=Z(I._payload),te(U,I,F)}if(ae(I)||ge(I))return I=qr(I,U.mode,F,null),I.return=U,I;if(typeof I.then=="function")return te(U,pm(I),F);if(I.$$typeof===D)return te(U,sm(U,I),F);gm(U,I)}return null}function V(U,I,F,Z){var be=I!==null?I.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return be!==null?null:N(U,I,""+F,Z);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case y:return F.key===be?O(U,I,F,Z):null;case E:return F.key===be?B(U,I,F,Z):null;case re:return be=F._init,F=be(F._payload),V(U,I,F,Z)}if(ae(F)||ge(F))return be!==null?null:K(U,I,F,Z,null);if(typeof F.then=="function")return V(U,I,pm(F),Z);if(F.$$typeof===D)return V(U,I,sm(U,F),Z);gm(U,F)}return null}function $(U,I,F,Z,be){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return U=U.get(F)||null,N(I,U,""+Z,be);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:return U=U.get(Z.key===null?F:Z.key)||null,O(I,U,Z,be);case E:return U=U.get(Z.key===null?F:Z.key)||null,B(I,U,Z,be);case re:var qe=Z._init;return Z=qe(Z._payload),$(U,I,F,Z,be)}if(ae(Z)||ge(Z))return U=U.get(F)||null,K(I,U,Z,be,null);if(typeof Z.then=="function")return $(U,I,F,pm(Z),be);if(Z.$$typeof===D)return $(U,I,F,sm(I,Z),be);gm(I,Z)}return null}function ke(U,I,F,Z){for(var be=null,qe=null,Se=I,Re=I=0,Jt=null;Se!==null&&Re<F.length;Re++){Se.index>Re?(Jt=Se,Se=null):Jt=Se.sibling;var Je=V(U,Se,F[Re],Z);if(Je===null){Se===null&&(Se=Jt);break}s&&Se&&Je.alternate===null&&a(U,Se),I=b(Je,I,Re),qe===null?be=Je:qe.sibling=Je,qe=Je,Se=Jt}if(Re===F.length)return n(U,Se),tt&&Yr(U,Re),be;if(Se===null){for(;Re<F.length;Re++)Se=te(U,F[Re],Z),Se!==null&&(I=b(Se,I,Re),qe===null?be=Se:qe.sibling=Se,qe=Se);return tt&&Yr(U,Re),be}for(Se=l(Se);Re<F.length;Re++)Jt=$(Se,U,Re,F[Re],Z),Jt!==null&&(s&&Jt.alternate!==null&&Se.delete(Jt.key===null?Re:Jt.key),I=b(Jt,I,Re),qe===null?be=Jt:qe.sibling=Jt,qe=Jt);return s&&Se.forEach(function(ar){return a(U,ar)}),tt&&Yr(U,Re),be}function Te(U,I,F,Z){if(F==null)throw Error(i(151));for(var be=null,qe=null,Se=I,Re=I=0,Jt=null,Je=F.next();Se!==null&&!Je.done;Re++,Je=F.next()){Se.index>Re?(Jt=Se,Se=null):Jt=Se.sibling;var ar=V(U,Se,Je.value,Z);if(ar===null){Se===null&&(Se=Jt);break}s&&Se&&ar.alternate===null&&a(U,Se),I=b(ar,I,Re),qe===null?be=ar:qe.sibling=ar,qe=ar,Se=Jt}if(Je.done)return n(U,Se),tt&&Yr(U,Re),be;if(Se===null){for(;!Je.done;Re++,Je=F.next())Je=te(U,Je.value,Z),Je!==null&&(I=b(Je,I,Re),qe===null?be=Je:qe.sibling=Je,qe=Je);return tt&&Yr(U,Re),be}for(Se=l(Se);!Je.done;Re++,Je=F.next())Je=$(Se,U,Re,Je.value,Z),Je!==null&&(s&&Je.alternate!==null&&Se.delete(Je.key===null?Re:Je.key),I=b(Je,I,Re),qe===null?be=Je:qe.sibling=Je,qe=Je);return s&&Se.forEach(function(NT){return a(U,NT)}),tt&&Yr(U,Re),be}function ht(U,I,F,Z){if(typeof F=="object"&&F!==null&&F.type===S&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case y:e:{for(var be=F.key;I!==null;){if(I.key===be){if(be=F.type,be===S){if(I.tag===7){n(U,I.sibling),Z=g(I,F.props.children),Z.return=U,U=Z;break e}}else if(I.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===re&&MA(be)===I.type){n(U,I.sibling),Z=g(I,F.props),Wu(Z,F),Z.return=U,U=Z;break e}n(U,I);break}else a(U,I);I=I.sibling}F.type===S?(Z=qr(F.props.children,U.mode,Z,F.key),Z.return=U,U=Z):(Z=Zf(F.type,F.key,F.props,null,U.mode,Z),Wu(Z,F),Z.return=U,U=Z)}return A(U);case E:e:{for(be=F.key;I!==null;){if(I.key===be)if(I.tag===4&&I.stateNode.containerInfo===F.containerInfo&&I.stateNode.implementation===F.implementation){n(U,I.sibling),Z=g(I,F.children||[]),Z.return=U,U=Z;break e}else{n(U,I);break}else a(U,I);I=I.sibling}Z=Wg(F,U.mode,Z),Z.return=U,U=Z}return A(U);case re:return be=F._init,F=be(F._payload),ht(U,I,F,Z)}if(ae(F))return ke(U,I,F,Z);if(ge(F)){if(be=ge(F),typeof be!="function")throw Error(i(150));return F=be.call(F),Te(U,I,F,Z)}if(typeof F.then=="function")return ht(U,I,pm(F),Z);if(F.$$typeof===D)return ht(U,I,sm(U,F),Z);gm(U,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,I!==null&&I.tag===6?(n(U,I.sibling),Z=g(I,F),Z.return=U,U=Z):(n(U,I),Z=Kg(F,U.mode,Z),Z.return=U,U=Z),A(U)):n(U,I)}return function(U,I,F,Z){try{Ku=0;var be=ht(U,I,F,Z);return Hl=null,be}catch(Se){if(Se===Bu||Se===im)throw Se;var qe=Ws(29,Se,null,U.mode);return qe.lanes=Z,qe.return=U,qe}finally{}}}var ql=kA(!0),DA=kA(!1),Sa=k(null),ii=null;function Hn(s){var a=s.alternate;q(Ht,Ht.current&1),q(Sa,s),ii===null&&(a===null||Ul.current!==null||a.memoizedState!==null)&&(ii=s)}function OA(s){if(s.tag===22){if(q(Ht,Ht.current),q(Sa,s),ii===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(ii=s)}}else qn()}function qn(){q(Ht,Ht.current),q(Sa,Sa.current)}function zi(s){Q(Sa),ii===s&&(ii=null),Q(Ht)}var Ht=k(0);function xm(s){for(var a=s;a!==null;){if(a.tag===13){var n=a.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||vx(n)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function R0(s,a,n,l){a=s.memoizedState,n=n(l,a),n=n==null?a:x({},a,n),s.memoizedState=n,s.lanes===0&&(s.updateQueue.baseState=n)}var M0={enqueueSetState:function(s,a,n){s=s._reactInternals;var l=ta(),g=zn(l);g.payload=a,n!=null&&(g.callback=n),a=Fn(s,g,l),a!==null&&(sa(a,s,l),qu(a,s,l))},enqueueReplaceState:function(s,a,n){s=s._reactInternals;var l=ta(),g=zn(l);g.tag=1,g.payload=a,n!=null&&(g.callback=n),a=Fn(s,g,l),a!==null&&(sa(a,s,l),qu(a,s,l))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var n=ta(),l=zn(n);l.tag=2,a!=null&&(l.callback=a),a=Fn(s,l,n),a!==null&&(sa(a,s,n),qu(a,s,n))}};function LA(s,a,n,l,g,b,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(l,b,A):a.prototype&&a.prototype.isPureReactComponent?!Du(n,l)||!Du(g,b):!0}function IA(s,a,n,l){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(n,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(n,l),a.state!==s&&M0.enqueueReplaceState(a,a.state,null)}function Zr(s,a){var n=a;if("ref"in a){n={};for(var l in a)l!=="ref"&&(n[l]=a[l])}if(s=s.defaultProps){n===a&&(n=x({},n));for(var g in s)n[g]===void 0&&(n[g]=s[g])}return n}var bm=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function PA(s){bm(s)}function UA(s){console.error(s)}function zA(s){bm(s)}function vm(s,a){try{var n=s.onUncaughtError;n(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function FA(s,a,n){try{var l=s.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function k0(s,a,n){return n=zn(n),n.tag=3,n.payload={element:null},n.callback=function(){vm(s,a)},n}function BA(s){return s=zn(s),s.tag=3,s}function HA(s,a,n,l){var g=n.type.getDerivedStateFromError;if(typeof g=="function"){var b=l.value;s.payload=function(){return g(b)},s.callback=function(){FA(a,n,l)}}var A=n.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){FA(a,n,l),typeof g!="function"&&(Qn===null?Qn=new Set([this]):Qn.add(this));var N=l.stack;this.componentDidCatch(l.value,{componentStack:N!==null?N:""})})}function N2(s,a,n,l,g){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=n.alternate,a!==null&&Uu(a,n,g,!0),n=Sa.current,n!==null){switch(n.tag){case 13:return ii===null?sx():n.alternate===null&&Rt===0&&(Rt=3),n.flags&=-257,n.flags|=65536,n.lanes=g,l===o0?n.flags|=16384:(a=n.updateQueue,a===null?n.updateQueue=new Set([l]):a.add(l),ix(s,l,g)),!1;case 22:return n.flags|=65536,l===o0?n.flags|=16384:(a=n.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=a):(n=a.retryQueue,n===null?a.retryQueue=new Set([l]):n.add(l)),ix(s,l,g)),!1}throw Error(i(435,n.tag))}return ix(s,l,g),sx(),!1}if(tt)return a=Sa.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,l!==e0&&(s=Error(i(422),{cause:l}),Pu(va(s,n)))):(l!==e0&&(a=Error(i(423),{cause:l}),Pu(va(a,n))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,l=va(l,n),g=k0(s.stateNode,l,g),u0(s,g),Rt!==4&&(Rt=2)),!1;var b=Error(i(520),{cause:l});if(b=va(b,n),id===null?id=[b]:id.push(b),Rt!==4&&(Rt=2),a===null)return!0;l=va(l,n),n=a;do{switch(n.tag){case 3:return n.flags|=65536,s=g&-g,n.lanes|=s,s=k0(n.stateNode,l,s),u0(n,s),!1;case 1:if(a=n.type,b=n.stateNode,(n.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Qn===null||!Qn.has(b))))return n.flags|=65536,g&=-g,n.lanes|=g,g=BA(g),HA(g,s,n,l),u0(n,g),!1}n=n.return}while(n!==null);return!1}var qA=Error(i(461)),Wt=!1;function ss(s,a,n,l){a.child=s===null?DA(a,null,n,l):ql(a,s.child,n,l)}function GA(s,a,n,l,g){n=n.render;var b=a.ref;if("ref"in l){var A={};for(var N in l)N!=="ref"&&(A[N]=l[N])}else A=l;return Qr(a),l=p0(s,a,n,A,b,g),N=g0(),s!==null&&!Wt?(x0(s,a,g),Fi(s,a,g)):(tt&&N&&Zg(a),a.flags|=1,ss(s,a,l,g),a.child)}function YA(s,a,n,l,g){if(s===null){var b=n.type;return typeof b=="function"&&!Qg(b)&&b.defaultProps===void 0&&n.compare===null?(a.tag=15,a.type=b,VA(s,a,b,l,g)):(s=Zf(n.type,null,l,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(b=s.child,!F0(s,g)){var A=b.memoizedProps;if(n=n.compare,n=n!==null?n:Du,n(A,l)&&s.ref===a.ref)return Fi(s,a,g)}return a.flags|=1,s=Di(b,l),s.ref=a.ref,s.return=a,a.child=s}function VA(s,a,n,l,g){if(s!==null){var b=s.memoizedProps;if(Du(b,l)&&s.ref===a.ref)if(Wt=!1,a.pendingProps=l=b,F0(s,g))(s.flags&131072)!==0&&(Wt=!0);else return a.lanes=s.lanes,Fi(s,a,g)}return D0(s,a,n,l,g)}function $A(s,a,n){var l=a.pendingProps,g=l.children,b=s!==null?s.memoizedState:null;if(l.mode==="hidden"){if((a.flags&128)!==0){if(l=b!==null?b.baseLanes|n:n,s!==null){for(g=a.child=s.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;a.childLanes=b&~l}else a.childLanes=0,a.child=null;return XA(s,a,l,n)}if((n&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&am(a,b!==null?b.cachePool:null),b!==null?Vy(a,b):h0(),OA(a);else return a.lanes=a.childLanes=536870912,XA(s,a,b!==null?b.baseLanes|n:n,n)}else b!==null?(am(a,b.cachePool),Vy(a,b),qn(),a.memoizedState=null):(s!==null&&am(a,null),h0(),qn());return ss(s,a,g,n),a.child}function XA(s,a,n,l){var g=r0();return g=g===null?null:{parent:Bt._currentValue,pool:g},a.memoizedState={baseLanes:n,cachePool:g},s!==null&&am(a,null),h0(),OA(a),s!==null&&Uu(s,a,l,!0),null}function ym(s,a){var n=a.ref;if(n===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(i(284));(s===null||s.ref!==n)&&(a.flags|=4194816)}}function D0(s,a,n,l,g){return Qr(a),n=p0(s,a,n,l,void 0,g),l=g0(),s!==null&&!Wt?(x0(s,a,g),Fi(s,a,g)):(tt&&l&&Zg(a),a.flags|=1,ss(s,a,n,g),a.child)}function QA(s,a,n,l,g,b){return Qr(a),a.updateQueue=null,n=Xy(a,l,n,g),$y(s),l=g0(),s!==null&&!Wt?(x0(s,a,b),Fi(s,a,b)):(tt&&l&&Zg(a),a.flags|=1,ss(s,a,n,b),a.child)}function KA(s,a,n,l,g){if(Qr(a),a.stateNode===null){var b=Dl,A=n.contextType;typeof A=="object"&&A!==null&&(b=gs(A)),b=new n(l,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=M0,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=l,b.state=a.memoizedState,b.refs={},l0(a),A=n.contextType,b.context=typeof A=="object"&&A!==null?gs(A):Dl,b.state=a.memoizedState,A=n.getDerivedStateFromProps,typeof A=="function"&&(R0(a,n,A,l),b.state=a.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(A=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),A!==b.state&&M0.enqueueReplaceState(b,b.state,null),Yu(a,l,b,g),Gu(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(s===null){b=a.stateNode;var N=a.memoizedProps,O=Zr(n,N);b.props=O;var B=b.context,K=n.contextType;A=Dl,typeof K=="object"&&K!==null&&(A=gs(K));var te=n.getDerivedStateFromProps;K=typeof te=="function"||typeof b.getSnapshotBeforeUpdate=="function",N=a.pendingProps!==N,K||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(N||B!==A)&&IA(a,b,l,A),Un=!1;var V=a.memoizedState;b.state=V,Yu(a,l,b,g),Gu(),B=a.memoizedState,N||V!==B||Un?(typeof te=="function"&&(R0(a,n,te,l),B=a.memoizedState),(O=Un||LA(a,n,O,l,V,B,A))?(K||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=B),b.props=l,b.state=B,b.context=A,l=O):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{b=a.stateNode,c0(s,a),A=a.memoizedProps,K=Zr(n,A),b.props=K,te=a.pendingProps,V=b.context,B=n.contextType,O=Dl,typeof B=="object"&&B!==null&&(O=gs(B)),N=n.getDerivedStateFromProps,(B=typeof N=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A!==te||V!==O)&&IA(a,b,l,O),Un=!1,V=a.memoizedState,b.state=V,Yu(a,l,b,g),Gu();var $=a.memoizedState;A!==te||V!==$||Un||s!==null&&s.dependencies!==null&&tm(s.dependencies)?(typeof N=="function"&&(R0(a,n,N,l),$=a.memoizedState),(K=Un||LA(a,n,K,l,V,$,O)||s!==null&&s.dependencies!==null&&tm(s.dependencies))?(B||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(l,$,O),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(l,$,O)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||A===s.memoizedProps&&V===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&V===s.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=$),b.props=l,b.state=$,b.context=O,l=K):(typeof b.componentDidUpdate!="function"||A===s.memoizedProps&&V===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&V===s.memoizedState||(a.flags|=1024),l=!1)}return b=l,ym(s,a),l=(a.flags&128)!==0,b||l?(b=a.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,s!==null&&l?(a.child=ql(a,s.child,null,g),a.child=ql(a,null,n,g)):ss(s,a,n,g),a.memoizedState=b.state,s=a.child):s=Fi(s,a,g),s}function WA(s,a,n,l){return Iu(),a.flags|=256,ss(s,a,n,l),a.child}var O0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function L0(s){return{baseLanes:s,cachePool:Uy()}}function I0(s,a,n){return s=s!==null?s.childLanes&~n:0,a&&(s|=_a),s}function ZA(s,a,n){var l=a.pendingProps,g=!1,b=(a.flags&128)!==0,A;if((A=b)||(A=s!==null&&s.memoizedState===null?!1:(Ht.current&2)!==0),A&&(g=!0,a.flags&=-129),A=(a.flags&32)!==0,a.flags&=-33,s===null){if(tt){if(g?Hn(a):qn(),tt){var N=jt,O;if(O=N){e:{for(O=N,N=ai;O.nodeType!==8;){if(!N){N=null;break e}if(O=Ua(O.nextSibling),O===null){N=null;break e}}N=O}N!==null?(a.memoizedState={dehydrated:N,treeContext:Gr!==null?{id:Oi,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},O=Ws(18,null,null,0),O.stateNode=N,O.return=a,a.child=O,Ts=a,jt=null,O=!0):O=!1}O||$r(a)}if(N=a.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return vx(N)?a.lanes=32:a.lanes=536870912,null;zi(a)}return N=l.children,l=l.fallback,g?(qn(),g=a.mode,N=Am({mode:"hidden",children:N},g),l=qr(l,g,n,null),N.return=a,l.return=a,N.sibling=l,a.child=N,g=a.child,g.memoizedState=L0(n),g.childLanes=I0(s,A,n),a.memoizedState=O0,l):(Hn(a),P0(a,N))}if(O=s.memoizedState,O!==null&&(N=O.dehydrated,N!==null)){if(b)a.flags&256?(Hn(a),a.flags&=-257,a=U0(s,a,n)):a.memoizedState!==null?(qn(),a.child=s.child,a.flags|=128,a=null):(qn(),g=l.fallback,N=a.mode,l=Am({mode:"visible",children:l.children},N),g=qr(g,N,n,null),g.flags|=2,l.return=a,g.return=a,l.sibling=g,a.child=l,ql(a,s.child,null,n),l=a.child,l.memoizedState=L0(n),l.childLanes=I0(s,A,n),a.memoizedState=O0,a=g);else if(Hn(a),vx(N)){if(A=N.nextSibling&&N.nextSibling.dataset,A)var B=A.dgst;A=B,l=Error(i(419)),l.stack="",l.digest=A,Pu({value:l,source:null,stack:null}),a=U0(s,a,n)}else if(Wt||Uu(s,a,n,!1),A=(n&s.childLanes)!==0,Wt||A){if(A=At,A!==null&&(l=n&-n,l=(l&42)!==0?1:Au(l),l=(l&(A.suspendedLanes|n))!==0?0:l,l!==0&&l!==O.retryLane))throw O.retryLane=l,kl(s,l),sa(A,s,l),qA;N.data==="$?"||sx(),a=U0(s,a,n)}else N.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=O.treeContext,jt=Ua(N.nextSibling),Ts=a,tt=!0,Vr=null,ai=!1,s!==null&&(Aa[Ea++]=Oi,Aa[Ea++]=Li,Aa[Ea++]=Gr,Oi=s.id,Li=s.overflow,Gr=a),a=P0(a,l.children),a.flags|=4096);return a}return g?(qn(),g=l.fallback,N=a.mode,O=s.child,B=O.sibling,l=Di(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,B!==null?g=Di(B,g):(g=qr(g,N,n,null),g.flags|=2),g.return=a,l.return=a,l.sibling=g,a.child=l,l=g,g=a.child,N=s.child.memoizedState,N===null?N=L0(n):(O=N.cachePool,O!==null?(B=Bt._currentValue,O=O.parent!==B?{parent:B,pool:B}:O):O=Uy(),N={baseLanes:N.baseLanes|n,cachePool:O}),g.memoizedState=N,g.childLanes=I0(s,A,n),a.memoizedState=O0,l):(Hn(a),n=s.child,s=n.sibling,n=Di(n,{mode:"visible",children:l.children}),n.return=a,n.sibling=null,s!==null&&(A=a.deletions,A===null?(a.deletions=[s],a.flags|=16):A.push(s)),a.child=n,a.memoizedState=null,n)}function P0(s,a){return a=Am({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Am(s,a){return s=Ws(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function U0(s,a,n){return ql(a,s.child,null,n),s=P0(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function JA(s,a,n){s.lanes|=a;var l=s.alternate;l!==null&&(l.lanes|=a),s0(s.return,a,n)}function z0(s,a,n,l,g){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:g}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=n,b.tailMode=g)}function e1(s,a,n){var l=a.pendingProps,g=l.revealOrder,b=l.tail;if(ss(s,a,l.children,n),l=Ht.current,(l&2)!==0)l=l&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&JA(s,n,a);else if(s.tag===19)JA(s,n,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}l&=1}switch(q(Ht,l),g){case"forwards":for(n=a.child,g=null;n!==null;)s=n.alternate,s!==null&&xm(s)===null&&(g=n),n=n.sibling;n=g,n===null?(g=a.child,a.child=null):(g=n.sibling,n.sibling=null),z0(a,!1,g,n,b);break;case"backwards":for(n=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&xm(s)===null){a.child=g;break}s=g.sibling,g.sibling=n,n=g,g=s}z0(a,!0,n,null,b);break;case"together":z0(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Fi(s,a,n){if(s!==null&&(a.dependencies=s.dependencies),Xn|=a.lanes,(n&a.childLanes)===0)if(s!==null){if(Uu(s,a,n,!1),(n&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,n=Di(s,s.pendingProps),a.child=n,n.return=a;s.sibling!==null;)s=s.sibling,n=n.sibling=Di(s,s.pendingProps),n.return=a;n.sibling=null}return a.child}function F0(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&tm(s)))}function T2(s,a,n){switch(a.tag){case 3:Pe(a,a.stateNode.containerInfo),Pn(a,Bt,s.memoizedState.cache),Iu();break;case 27:case 5:_s(a);break;case 4:Pe(a,a.stateNode.containerInfo);break;case 10:Pn(a,a.type,a.memoizedProps.value);break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(Hn(a),a.flags|=128,null):(n&a.child.childLanes)!==0?ZA(s,a,n):(Hn(a),s=Fi(s,a,n),s!==null?s.sibling:null);Hn(a);break;case 19:var g=(s.flags&128)!==0;if(l=(n&a.childLanes)!==0,l||(Uu(s,a,n,!1),l=(n&a.childLanes)!==0),g){if(l)return e1(s,a,n);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),q(Ht,Ht.current),l)break;return null;case 22:case 23:return a.lanes=0,$A(s,a,n);case 24:Pn(a,Bt,s.memoizedState.cache)}return Fi(s,a,n)}function t1(s,a,n){if(s!==null)if(s.memoizedProps!==a.pendingProps)Wt=!0;else{if(!F0(s,n)&&(a.flags&128)===0)return Wt=!1,T2(s,a,n);Wt=(s.flags&131072)!==0}else Wt=!1,tt&&(a.flags&1048576)!==0&&My(a,em,a.index);switch(a.lanes=0,a.tag){case 16:e:{s=a.pendingProps;var l=a.elementType,g=l._init;if(l=g(l._payload),a.type=l,typeof l=="function")Qg(l)?(s=Zr(l,s),a.tag=1,a=KA(null,a,l,s,n)):(a.tag=0,a=D0(null,a,l,s,n));else{if(l!=null){if(g=l.$$typeof,g===z){a.tag=11,a=GA(null,a,l,s,n);break e}else if(g===se){a.tag=14,a=YA(null,a,l,s,n);break e}}throw a=Ie(l)||l,Error(i(306,a,""))}}return a;case 0:return D0(s,a,a.type,a.pendingProps,n);case 1:return l=a.type,g=Zr(l,a.pendingProps),KA(s,a,l,g,n);case 3:e:{if(Pe(a,a.stateNode.containerInfo),s===null)throw Error(i(387));l=a.pendingProps;var b=a.memoizedState;g=b.element,c0(s,a),Yu(a,l,null,n);var A=a.memoizedState;if(l=A.cache,Pn(a,Bt,l),l!==b.cache&&a0(a,[Bt],n,!0),Gu(),l=A.element,b.isDehydrated)if(b={element:l,isDehydrated:!1,cache:A.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=WA(s,a,l,n);break e}else if(l!==g){g=va(Error(i(424)),a),Pu(g),a=WA(s,a,l,n);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(jt=Ua(s.firstChild),Ts=a,tt=!0,Vr=null,ai=!0,n=DA(a,null,l,n),a.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Iu(),l===g){a=Fi(s,a,n);break e}ss(s,a,l,n)}a=a.child}return a;case 26:return ym(s,a),s===null?(n=nE(a.type,null,a.pendingProps,null))?a.memoizedState=n:tt||(n=a.type,s=a.pendingProps,l=Lm(pe.current).createElement(n),l[Kt]=a,l[ps]=s,is(l,n,s),Ee(l),a.stateNode=l):a.memoizedState=nE(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return _s(a),s===null&&tt&&(l=a.stateNode=sE(a.type,a.pendingProps,pe.current),Ts=a,ai=!0,g=jt,Zn(a.type)?(yx=g,jt=Ua(l.firstChild)):jt=g),ss(s,a,a.pendingProps.children,n),ym(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&tt&&((g=l=jt)&&(l=tT(l,a.type,a.pendingProps,ai),l!==null?(a.stateNode=l,Ts=a,jt=Ua(l.firstChild),ai=!1,g=!0):g=!1),g||$r(a)),_s(a),g=a.type,b=a.pendingProps,A=s!==null?s.memoizedProps:null,l=b.children,gx(g,b)?l=null:A!==null&&gx(g,A)&&(a.flags|=32),a.memoizedState!==null&&(g=p0(s,a,v2,null,null,n),fd._currentValue=g),ym(s,a),ss(s,a,l,n),a.child;case 6:return s===null&&tt&&((s=n=jt)&&(n=sT(n,a.pendingProps,ai),n!==null?(a.stateNode=n,Ts=a,jt=null,s=!0):s=!1),s||$r(a)),null;case 13:return ZA(s,a,n);case 4:return Pe(a,a.stateNode.containerInfo),l=a.pendingProps,s===null?a.child=ql(a,null,l,n):ss(s,a,l,n),a.child;case 11:return GA(s,a,a.type,a.pendingProps,n);case 7:return ss(s,a,a.pendingProps,n),a.child;case 8:return ss(s,a,a.pendingProps.children,n),a.child;case 12:return ss(s,a,a.pendingProps.children,n),a.child;case 10:return l=a.pendingProps,Pn(a,a.type,l.value),ss(s,a,l.children,n),a.child;case 9:return g=a.type._context,l=a.pendingProps.children,Qr(a),g=gs(g),l=l(g),a.flags|=1,ss(s,a,l,n),a.child;case 14:return YA(s,a,a.type,a.pendingProps,n);case 15:return VA(s,a,a.type,a.pendingProps,n);case 19:return e1(s,a,n);case 31:return l=a.pendingProps,n=a.mode,l={mode:l.mode,children:l.children},s===null?(n=Am(l,n),n.ref=a.ref,a.child=n,n.return=a,a=n):(n=Di(s.child,l),n.ref=a.ref,a.child=n,n.return=a,a=n),a;case 22:return $A(s,a,n);case 24:return Qr(a),l=gs(Bt),s===null?(g=r0(),g===null&&(g=At,b=i0(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=n),g=b),a.memoizedState={parent:l,cache:g},l0(a),Pn(a,Bt,g)):((s.lanes&n)!==0&&(c0(s,a),Yu(a,null,null,n),Gu()),g=s.memoizedState,b=a.memoizedState,g.parent!==l?(g={parent:l,cache:l},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Pn(a,Bt,l)):(l=b.cache,Pn(a,Bt,l),l!==g.cache&&a0(a,[Bt],n,!0))),ss(s,a,a.pendingProps.children,n),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Bi(s){s.flags|=4}function s1(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!uE(a)){if(a=Sa.current,a!==null&&((Ke&4194048)===Ke?ii!==null:(Ke&62914560)!==Ke&&(Ke&536870912)===0||a!==ii))throw Hu=o0,zy;s.flags|=8192}}function Em(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?If():536870912,s.lanes|=a,$l|=a)}function Zu(s,a){if(!tt)switch(s.tailMode){case"hidden":a=s.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?s.tail=null:n.sibling=null;break;case"collapsed":n=s.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:l.sibling=null}}function wt(s){var a=s.alternate!==null&&s.alternate.child===s.child,n=0,l=0;if(a)for(var g=s.child;g!==null;)n|=g.lanes|g.childLanes,l|=g.subtreeFlags&65011712,l|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)n|=g.lanes|g.childLanes,l|=g.subtreeFlags,l|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=l,s.childLanes=n,a}function C2(s,a,n){var l=a.pendingProps;switch(Jg(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(a),null;case 1:return wt(a),null;case 3:return n=a.stateNode,l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Pi(Bt),gt(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(s===null||s.child===null)&&(Lu(a)?Bi(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Oy())),wt(a),null;case 26:return n=a.memoizedState,s===null?(Bi(a),n!==null?(wt(a),s1(a,n)):(wt(a),a.flags&=-16777217)):n?n!==s.memoizedState?(Bi(a),wt(a),s1(a,n)):(wt(a),a.flags&=-16777217):(s.memoizedProps!==l&&Bi(a),wt(a),a.flags&=-16777217),null;case 27:gl(a),n=pe.current;var g=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==l&&Bi(a);else{if(!l){if(a.stateNode===null)throw Error(i(166));return wt(a),null}s=ee.current,Lu(a)?ky(a):(s=sE(g,l,n),a.stateNode=s,Bi(a))}return wt(a),null;case 5:if(gl(a),n=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==l&&Bi(a);else{if(!l){if(a.stateNode===null)throw Error(i(166));return wt(a),null}if(s=ee.current,Lu(a))ky(a);else{switch(g=Lm(pe.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof l.is=="string"?g.createElement("select",{is:l.is}):g.createElement("select"),l.multiple?s.multiple=!0:l.size&&(s.size=l.size);break;default:s=typeof l.is=="string"?g.createElement(n,{is:l.is}):g.createElement(n)}}s[Kt]=a,s[ps]=l;e:for(g=a.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===a)break e;for(;g.sibling===null;){if(g.return===null||g.return===a)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}a.stateNode=s;e:switch(is(s,n,l),n){case"button":case"input":case"select":case"textarea":s=!!l.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Bi(a)}}return wt(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==l&&Bi(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(i(166));if(s=pe.current,Lu(a)){if(s=a.stateNode,n=a.memoizedProps,l=null,g=Ts,g!==null)switch(g.tag){case 27:case 5:l=g.memoizedProps}s[Kt]=a,s=!!(s.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||Q1(s.nodeValue,n)),s||$r(a)}else s=Lm(s).createTextNode(l),s[Kt]=a,a.stateNode=s}return wt(a),null;case 13:if(l=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Lu(a),l!==null&&l.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Kt]=a}else Iu(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;wt(a),g=!1}else g=Oy(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(zi(a),a):(zi(a),null)}if(zi(a),(a.flags&128)!==0)return a.lanes=n,a;if(n=l!==null,s=s!==null&&s.memoizedState!==null,n){l=a.child,g=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(g=l.alternate.memoizedState.cachePool.pool);var b=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(b=l.memoizedState.cachePool.pool),b!==g&&(l.flags|=2048)}return n!==s&&n&&(a.child.flags|=8192),Em(a,a.updateQueue),wt(a),null;case 4:return gt(),s===null&&dx(a.stateNode.containerInfo),wt(a),null;case 10:return Pi(a.type),wt(a),null;case 19:if(Q(Ht),g=a.memoizedState,g===null)return wt(a),null;if(l=(a.flags&128)!==0,b=g.rendering,b===null)if(l)Zu(g,!1);else{if(Rt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(b=xm(s),b!==null){for(a.flags|=128,Zu(g,!1),s=b.updateQueue,a.updateQueue=s,Em(a,s),a.subtreeFlags=0,s=n,n=a.child;n!==null;)Ry(n,s),n=n.sibling;return q(Ht,Ht.current&1|2),a.child}s=s.sibling}g.tail!==null&&Qs()>wm&&(a.flags|=128,l=!0,Zu(g,!1),a.lanes=4194304)}else{if(!l)if(s=xm(b),s!==null){if(a.flags|=128,l=!0,s=s.updateQueue,a.updateQueue=s,Em(a,s),Zu(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!tt)return wt(a),null}else 2*Qs()-g.renderingStartTime>wm&&n!==536870912&&(a.flags|=128,l=!0,Zu(g,!1),a.lanes=4194304);g.isBackwards?(b.sibling=a.child,a.child=b):(s=g.last,s!==null?s.sibling=b:a.child=b,g.last=b)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=Qs(),a.sibling=null,s=Ht.current,q(Ht,l?s&1|2:s&1),a):(wt(a),null);case 22:case 23:return zi(a),f0(),l=a.memoizedState!==null,s!==null?s.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(n&536870912)!==0&&(a.flags&128)===0&&(wt(a),a.subtreeFlags&6&&(a.flags|=8192)):wt(a),n=a.updateQueue,n!==null&&Em(a,n.retryQueue),n=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==n&&(a.flags|=2048),s!==null&&Q(Kr),null;case 24:return n=null,s!==null&&(n=s.memoizedState.cache),a.memoizedState.cache!==n&&(a.flags|=2048),Pi(Bt),wt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function j2(s,a){switch(Jg(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Pi(Bt),gt(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return gl(a),null;case 13:if(zi(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Iu()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Q(Ht),null;case 4:return gt(),null;case 10:return Pi(a.type),null;case 22:case 23:return zi(a),f0(),s!==null&&Q(Kr),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Pi(Bt),null;case 25:return null;default:return null}}function a1(s,a){switch(Jg(a),a.tag){case 3:Pi(Bt),gt();break;case 26:case 27:case 5:gl(a);break;case 4:gt();break;case 13:zi(a);break;case 19:Q(Ht);break;case 10:Pi(a.type);break;case 22:case 23:zi(a),f0(),s!==null&&Q(Kr);break;case 24:Pi(Bt)}}function Ju(s,a){try{var n=a.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var g=l.next;n=g;do{if((n.tag&s)===s){l=void 0;var b=n.create,A=n.inst;l=b(),A.destroy=l}n=n.next}while(n!==g)}}catch(N){xt(a,a.return,N)}}function Gn(s,a,n){try{var l=a.updateQueue,g=l!==null?l.lastEffect:null;if(g!==null){var b=g.next;l=b;do{if((l.tag&s)===s){var A=l.inst,N=A.destroy;if(N!==void 0){A.destroy=void 0,g=a;var O=n,B=N;try{B()}catch(K){xt(g,O,K)}}}l=l.next}while(l!==b)}}catch(K){xt(a,a.return,K)}}function i1(s){var a=s.updateQueue;if(a!==null){var n=s.stateNode;try{Yy(a,n)}catch(l){xt(s,s.return,l)}}}function n1(s,a,n){n.props=Zr(s.type,s.memoizedProps),n.state=s.memoizedState;try{n.componentWillUnmount()}catch(l){xt(s,a,l)}}function ed(s,a){try{var n=s.ref;if(n!==null){switch(s.tag){case 26:case 27:case 5:var l=s.stateNode;break;case 30:l=s.stateNode;break;default:l=s.stateNode}typeof n=="function"?s.refCleanup=n(l):n.current=l}}catch(g){xt(s,a,g)}}function ni(s,a){var n=s.ref,l=s.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(g){xt(s,a,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(g){xt(s,a,g)}else n.current=null}function r1(s){var a=s.type,n=s.memoizedProps,l=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(g){xt(s,s.return,g)}}function B0(s,a,n){try{var l=s.stateNode;K2(l,s.type,n,a),l[ps]=a}catch(g){xt(s,s.return,g)}}function o1(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Zn(s.type)||s.tag===4}function H0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||o1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Zn(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function q0(s,a,n){var l=s.tag;if(l===5||l===6)s=s.stateNode,a?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(s,a):(a=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.appendChild(s),n=n._reactRootContainer,n!=null||a.onclick!==null||(a.onclick=Om));else if(l!==4&&(l===27&&Zn(s.type)&&(n=s.stateNode,a=null),s=s.child,s!==null))for(q0(s,a,n),s=s.sibling;s!==null;)q0(s,a,n),s=s.sibling}function Sm(s,a,n){var l=s.tag;if(l===5||l===6)s=s.stateNode,a?n.insertBefore(s,a):n.appendChild(s);else if(l!==4&&(l===27&&Zn(s.type)&&(n=s.stateNode),s=s.child,s!==null))for(Sm(s,a,n),s=s.sibling;s!==null;)Sm(s,a,n),s=s.sibling}function l1(s){var a=s.stateNode,n=s.memoizedProps;try{for(var l=s.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);is(a,l,n),a[Kt]=s,a[ps]=n}catch(b){xt(s,s.return,b)}}var Hi=!1,Dt=!1,G0=!1,c1=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function R2(s,a){if(s=s.containerInfo,mx=Bm,s=yy(s),Hg(s)){if("selectionStart"in s)var n={start:s.selectionStart,end:s.selectionEnd};else e:{n=(n=s.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var g=l.anchorOffset,b=l.focusNode;l=l.focusOffset;try{n.nodeType,b.nodeType}catch{n=null;break e}var A=0,N=-1,O=-1,B=0,K=0,te=s,V=null;t:for(;;){for(var $;te!==n||g!==0&&te.nodeType!==3||(N=A+g),te!==b||l!==0&&te.nodeType!==3||(O=A+l),te.nodeType===3&&(A+=te.nodeValue.length),($=te.firstChild)!==null;)V=te,te=$;for(;;){if(te===s)break t;if(V===n&&++B===g&&(N=A),V===b&&++K===l&&(O=A),($=te.nextSibling)!==null)break;te=V,V=te.parentNode}te=$}n=N===-1||O===-1?null:{start:N,end:O}}else n=null}n=n||{start:0,end:0}}else n=null;for(px={focusedElem:s,selectionRange:n},Bm=!1,Zt=a;Zt!==null;)if(a=Zt,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,Zt=s;else for(;Zt!==null;){switch(a=Zt,b=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&b!==null){s=void 0,n=a,g=b.memoizedProps,b=b.memoizedState,l=n.stateNode;try{var ke=Zr(n.type,g,n.elementType===n.type);s=l.getSnapshotBeforeUpdate(ke,b),l.__reactInternalSnapshotBeforeUpdate=s}catch(Te){xt(n,n.return,Te)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,n=s.nodeType,n===9)bx(s);else if(n===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":bx(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Zt=s;break}Zt=a.return}}function u1(s,a,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:Yn(s,n),l&4&&Ju(5,n);break;case 1:if(Yn(s,n),l&4)if(s=n.stateNode,a===null)try{s.componentDidMount()}catch(A){xt(n,n.return,A)}else{var g=Zr(n.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(g,a,s.__reactInternalSnapshotBeforeUpdate)}catch(A){xt(n,n.return,A)}}l&64&&i1(n),l&512&&ed(n,n.return);break;case 3:if(Yn(s,n),l&64&&(s=n.updateQueue,s!==null)){if(a=null,n.child!==null)switch(n.child.tag){case 27:case 5:a=n.child.stateNode;break;case 1:a=n.child.stateNode}try{Yy(s,a)}catch(A){xt(n,n.return,A)}}break;case 27:a===null&&l&4&&l1(n);case 26:case 5:Yn(s,n),a===null&&l&4&&r1(n),l&512&&ed(n,n.return);break;case 12:Yn(s,n);break;case 13:Yn(s,n),l&4&&f1(s,n),l&64&&(s=n.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(n=z2.bind(null,n),aT(s,n))));break;case 22:if(l=n.memoizedState!==null||Hi,!l){a=a!==null&&a.memoizedState!==null||Dt,g=Hi;var b=Dt;Hi=l,(Dt=a)&&!b?Vn(s,n,(n.subtreeFlags&8772)!==0):Yn(s,n),Hi=g,Dt=b}break;case 30:break;default:Yn(s,n)}}function d1(s){var a=s.alternate;a!==null&&(s.alternate=null,d1(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&wu(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var St=null,Us=!1;function qi(s,a,n){for(n=n.child;n!==null;)h1(s,a,n),n=n.sibling}function h1(s,a,n){if(ws&&typeof ws.onCommitFiberUnmount=="function")try{ws.onCommitFiberUnmount(ji,n)}catch{}switch(n.tag){case 26:Dt||ni(n,a),qi(s,a,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Dt||ni(n,a);var l=St,g=Us;Zn(n.type)&&(St=n.stateNode,Us=!1),qi(s,a,n),cd(n.stateNode),St=l,Us=g;break;case 5:Dt||ni(n,a);case 6:if(l=St,g=Us,St=null,qi(s,a,n),St=l,Us=g,St!==null)if(Us)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(n.stateNode)}catch(b){xt(n,a,b)}else try{St.removeChild(n.stateNode)}catch(b){xt(n,a,b)}break;case 18:St!==null&&(Us?(s=St,eE(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.stateNode),xd(s)):eE(St,n.stateNode));break;case 4:l=St,g=Us,St=n.stateNode.containerInfo,Us=!0,qi(s,a,n),St=l,Us=g;break;case 0:case 11:case 14:case 15:Dt||Gn(2,n,a),Dt||Gn(4,n,a),qi(s,a,n);break;case 1:Dt||(ni(n,a),l=n.stateNode,typeof l.componentWillUnmount=="function"&&n1(n,a,l)),qi(s,a,n);break;case 21:qi(s,a,n);break;case 22:Dt=(l=Dt)||n.memoizedState!==null,qi(s,a,n),Dt=l;break;default:qi(s,a,n)}}function f1(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{xd(s)}catch(n){xt(a,a.return,n)}}function M2(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new c1),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new c1),a;default:throw Error(i(435,s.tag))}}function Y0(s,a){var n=M2(s);a.forEach(function(l){var g=F2.bind(null,s,l);n.has(l)||(n.add(l),l.then(g,g))})}function Zs(s,a){var n=a.deletions;if(n!==null)for(var l=0;l<n.length;l++){var g=n[l],b=s,A=a,N=A;e:for(;N!==null;){switch(N.tag){case 27:if(Zn(N.type)){St=N.stateNode,Us=!1;break e}break;case 5:St=N.stateNode,Us=!1;break e;case 3:case 4:St=N.stateNode.containerInfo,Us=!0;break e}N=N.return}if(St===null)throw Error(i(160));h1(b,A,g),St=null,Us=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)m1(a,s),a=a.sibling}var Pa=null;function m1(s,a){var n=s.alternate,l=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Zs(a,s),Js(s),l&4&&(Gn(3,s,s.return),Ju(3,s),Gn(5,s,s.return));break;case 1:Zs(a,s),Js(s),l&512&&(Dt||n===null||ni(n,n.return)),l&64&&Hi&&(s=s.updateQueue,s!==null&&(l=s.callbacks,l!==null&&(n=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var g=Pa;if(Zs(a,s),Js(s),l&512&&(Dt||n===null||ni(n,n.return)),l&4){var b=n!==null?n.memoizedState:null;if(l=s.memoizedState,n===null)if(l===null)if(s.stateNode===null){e:{l=s.type,n=s.memoizedProps,g=g.ownerDocument||g;t:switch(l){case"title":b=g.getElementsByTagName("title")[0],(!b||b[zr]||b[Kt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(l),g.head.insertBefore(b,g.querySelector("head > title"))),is(b,l,n),b[Kt]=s,Ee(b),l=b;break e;case"link":var A=lE("link","href",g).get(l+(n.href||""));if(A){for(var N=0;N<A.length;N++)if(b=A[N],b.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&b.getAttribute("rel")===(n.rel==null?null:n.rel)&&b.getAttribute("title")===(n.title==null?null:n.title)&&b.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){A.splice(N,1);break t}}b=g.createElement(l),is(b,l,n),g.head.appendChild(b);break;case"meta":if(A=lE("meta","content",g).get(l+(n.content||""))){for(N=0;N<A.length;N++)if(b=A[N],b.getAttribute("content")===(n.content==null?null:""+n.content)&&b.getAttribute("name")===(n.name==null?null:n.name)&&b.getAttribute("property")===(n.property==null?null:n.property)&&b.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&b.getAttribute("charset")===(n.charSet==null?null:n.charSet)){A.splice(N,1);break t}}b=g.createElement(l),is(b,l,n),g.head.appendChild(b);break;default:throw Error(i(468,l))}b[Kt]=s,Ee(b),l=b}s.stateNode=l}else cE(g,s.type,s.stateNode);else s.stateNode=oE(g,l,s.memoizedProps);else b!==l?(b===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):b.count--,l===null?cE(g,s.type,s.stateNode):oE(g,l,s.memoizedProps)):l===null&&s.stateNode!==null&&B0(s,s.memoizedProps,n.memoizedProps)}break;case 27:Zs(a,s),Js(s),l&512&&(Dt||n===null||ni(n,n.return)),n!==null&&l&4&&B0(s,s.memoizedProps,n.memoizedProps);break;case 5:if(Zs(a,s),Js(s),l&512&&(Dt||n===null||ni(n,n.return)),s.flags&32){g=s.stateNode;try{wl(g,"")}catch($){xt(s,s.return,$)}}l&4&&s.stateNode!=null&&(g=s.memoizedProps,B0(s,g,n!==null?n.memoizedProps:g)),l&1024&&(G0=!0);break;case 6:if(Zs(a,s),Js(s),l&4){if(s.stateNode===null)throw Error(i(162));l=s.memoizedProps,n=s.stateNode;try{n.nodeValue=l}catch($){xt(s,s.return,$)}}break;case 3:if(Um=null,g=Pa,Pa=Im(a.containerInfo),Zs(a,s),Pa=g,Js(s),l&4&&n!==null&&n.memoizedState.isDehydrated)try{xd(a.containerInfo)}catch($){xt(s,s.return,$)}G0&&(G0=!1,p1(s));break;case 4:l=Pa,Pa=Im(s.stateNode.containerInfo),Zs(a,s),Js(s),Pa=l;break;case 12:Zs(a,s),Js(s);break;case 13:Zs(a,s),Js(s),s.child.flags&8192&&s.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(W0=Qs()),l&4&&(l=s.updateQueue,l!==null&&(s.updateQueue=null,Y0(s,l)));break;case 22:g=s.memoizedState!==null;var O=n!==null&&n.memoizedState!==null,B=Hi,K=Dt;if(Hi=B||g,Dt=K||O,Zs(a,s),Dt=K,Hi=B,Js(s),l&8192)e:for(a=s.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(n===null||O||Hi||Dt||Jr(s)),n=null,a=s;;){if(a.tag===5||a.tag===26){if(n===null){O=n=a;try{if(b=O.stateNode,g)A=b.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{N=O.stateNode;var te=O.memoizedProps.style,V=te!=null&&te.hasOwnProperty("display")?te.display:null;N.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch($){xt(O,O.return,$)}}}else if(a.tag===6){if(n===null){O=a;try{O.stateNode.nodeValue=g?"":O.memoizedProps}catch($){xt(O,O.return,$)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;n===a&&(n=null),a=a.return}n===a&&(n=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=s.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,Y0(s,n))));break;case 19:Zs(a,s),Js(s),l&4&&(l=s.updateQueue,l!==null&&(s.updateQueue=null,Y0(s,l)));break;case 30:break;case 21:break;default:Zs(a,s),Js(s)}}function Js(s){var a=s.flags;if(a&2){try{for(var n,l=s.return;l!==null;){if(o1(l)){n=l;break}l=l.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var g=n.stateNode,b=H0(s);Sm(s,b,g);break;case 5:var A=n.stateNode;n.flags&32&&(wl(A,""),n.flags&=-33);var N=H0(s);Sm(s,N,A);break;case 3:case 4:var O=n.stateNode.containerInfo,B=H0(s);q0(s,B,O);break;default:throw Error(i(161))}}catch(K){xt(s,s.return,K)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function p1(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;p1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Yn(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)u1(s,a.alternate,a),a=a.sibling}function Jr(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Gn(4,a,a.return),Jr(a);break;case 1:ni(a,a.return);var n=a.stateNode;typeof n.componentWillUnmount=="function"&&n1(a,a.return,n),Jr(a);break;case 27:cd(a.stateNode);case 26:case 5:ni(a,a.return),Jr(a);break;case 22:a.memoizedState===null&&Jr(a);break;case 30:Jr(a);break;default:Jr(a)}s=s.sibling}}function Vn(s,a,n){for(n=n&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,g=s,b=a,A=b.flags;switch(b.tag){case 0:case 11:case 15:Vn(g,b,n),Ju(4,b);break;case 1:if(Vn(g,b,n),l=b,g=l.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(B){xt(l,l.return,B)}if(l=b,g=l.updateQueue,g!==null){var N=l.stateNode;try{var O=g.shared.hiddenCallbacks;if(O!==null)for(g.shared.hiddenCallbacks=null,g=0;g<O.length;g++)Gy(O[g],N)}catch(B){xt(l,l.return,B)}}n&&A&64&&i1(b),ed(b,b.return);break;case 27:l1(b);case 26:case 5:Vn(g,b,n),n&&l===null&&A&4&&r1(b),ed(b,b.return);break;case 12:Vn(g,b,n);break;case 13:Vn(g,b,n),n&&A&4&&f1(g,b);break;case 22:b.memoizedState===null&&Vn(g,b,n),ed(b,b.return);break;case 30:break;default:Vn(g,b,n)}a=a.sibling}}function V0(s,a){var n=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==n&&(s!=null&&s.refCount++,n!=null&&zu(n))}function $0(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&zu(s))}function ri(s,a,n,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)g1(s,a,n,l),a=a.sibling}function g1(s,a,n,l){var g=a.flags;switch(a.tag){case 0:case 11:case 15:ri(s,a,n,l),g&2048&&Ju(9,a);break;case 1:ri(s,a,n,l);break;case 3:ri(s,a,n,l),g&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&zu(s)));break;case 12:if(g&2048){ri(s,a,n,l),s=a.stateNode;try{var b=a.memoizedProps,A=b.id,N=b.onPostCommit;typeof N=="function"&&N(A,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(O){xt(a,a.return,O)}}else ri(s,a,n,l);break;case 13:ri(s,a,n,l);break;case 23:break;case 22:b=a.stateNode,A=a.alternate,a.memoizedState!==null?b._visibility&2?ri(s,a,n,l):td(s,a):b._visibility&2?ri(s,a,n,l):(b._visibility|=2,Gl(s,a,n,l,(a.subtreeFlags&10256)!==0)),g&2048&&V0(A,a);break;case 24:ri(s,a,n,l),g&2048&&$0(a.alternate,a);break;default:ri(s,a,n,l)}}function Gl(s,a,n,l,g){for(g=g&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var b=s,A=a,N=n,O=l,B=A.flags;switch(A.tag){case 0:case 11:case 15:Gl(b,A,N,O,g),Ju(8,A);break;case 23:break;case 22:var K=A.stateNode;A.memoizedState!==null?K._visibility&2?Gl(b,A,N,O,g):td(b,A):(K._visibility|=2,Gl(b,A,N,O,g)),g&&B&2048&&V0(A.alternate,A);break;case 24:Gl(b,A,N,O,g),g&&B&2048&&$0(A.alternate,A);break;default:Gl(b,A,N,O,g)}a=a.sibling}}function td(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var n=s,l=a,g=l.flags;switch(l.tag){case 22:td(n,l),g&2048&&V0(l.alternate,l);break;case 24:td(n,l),g&2048&&$0(l.alternate,l);break;default:td(n,l)}a=a.sibling}}var sd=8192;function Yl(s){if(s.subtreeFlags&sd)for(s=s.child;s!==null;)x1(s),s=s.sibling}function x1(s){switch(s.tag){case 26:Yl(s),s.flags&sd&&s.memoizedState!==null&&gT(Pa,s.memoizedState,s.memoizedProps);break;case 5:Yl(s);break;case 3:case 4:var a=Pa;Pa=Im(s.stateNode.containerInfo),Yl(s),Pa=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=sd,sd=16777216,Yl(s),sd=a):Yl(s));break;default:Yl(s)}}function b1(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function ad(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var n=0;n<a.length;n++){var l=a[n];Zt=l,y1(l,s)}b1(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)v1(s),s=s.sibling}function v1(s){switch(s.tag){case 0:case 11:case 15:ad(s),s.flags&2048&&Gn(9,s,s.return);break;case 3:ad(s);break;case 12:ad(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,_m(s)):ad(s);break;default:ad(s)}}function _m(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var n=0;n<a.length;n++){var l=a[n];Zt=l,y1(l,s)}b1(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Gn(8,a,a.return),_m(a);break;case 22:n=a.stateNode,n._visibility&2&&(n._visibility&=-3,_m(a));break;default:_m(a)}s=s.sibling}}function y1(s,a){for(;Zt!==null;){var n=Zt;switch(n.tag){case 0:case 11:case 15:Gn(8,n,a);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:zu(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,Zt=l;else e:for(n=s;Zt!==null;){l=Zt;var g=l.sibling,b=l.return;if(d1(l),l===n){Zt=null;break e}if(g!==null){g.return=b,Zt=g;break e}Zt=b}}}var k2={getCacheForType:function(s){var a=gs(Bt),n=a.data.get(s);return n===void 0&&(n=s(),a.data.set(s,n)),n}},D2=typeof WeakMap=="function"?WeakMap:Map,rt=0,At=null,Ye=null,Ke=0,ot=0,ea=null,$n=!1,Vl=!1,X0=!1,Gi=0,Rt=0,Xn=0,eo=0,Q0=0,_a=0,$l=0,id=null,zs=null,K0=!1,W0=0,wm=1/0,Nm=null,Qn=null,as=0,Kn=null,Xl=null,Ql=0,Z0=0,J0=null,A1=null,nd=0,ex=null;function ta(){if((rt&2)!==0&&Ke!==0)return Ke&-Ke;if(G.T!==null){var s=Il;return s!==0?s:ox()}return Dn()}function E1(){_a===0&&(_a=(Ke&536870912)===0||tt?Lf():536870912);var s=Sa.current;return s!==null&&(s.flags|=32),_a}function sa(s,a,n){(s===At&&(ot===2||ot===9)||s.cancelPendingCommit!==null)&&(Kl(s,0),Wn(s,Ke,_a,!1)),Pr(s,n),((rt&2)===0||s!==At)&&(s===At&&((rt&2)===0&&(eo|=n),Rt===4&&Wn(s,Ke,_a,!1)),oi(s))}function S1(s,a,n){if((rt&6)!==0)throw Error(i(327));var l=!n&&(a&124)===0&&(a&s.expiredLanes)===0||It(s,a),g=l?I2(s,a):ax(s,a,!0),b=l;do{if(g===0){Vl&&!l&&Wn(s,a,0,!1);break}else{if(n=s.current.alternate,b&&!O2(n)){g=ax(s,a,!1),b=!1;continue}if(g===2){if(b=a,s.errorRecoveryDisabledLanes&b)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){a=A;e:{var N=s;g=id;var O=N.current.memoizedState.isDehydrated;if(O&&(Kl(N,A).flags|=256),A=ax(N,A,!1),A!==2){if(X0&&!O){N.errorRecoveryDisabledLanes|=b,eo|=b,g=4;break e}b=zs,zs=g,b!==null&&(zs===null?zs=b:zs.push.apply(zs,b))}g=A}if(b=!1,g!==2)continue}}if(g===1){Kl(s,0),Wn(s,a,0,!0);break}e:{switch(l=s,b=g,b){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Wn(l,a,_a,!$n);break e;case 2:zs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(g=W0+300-Qs(),10<g)){if(Wn(l,a,_a,!$n),El(l,0,!0)!==0)break e;l.timeoutHandle=Z1(_1.bind(null,l,n,zs,Nm,K0,a,_a,eo,$l,$n,b,2,-0,0),g);break e}_1(l,n,zs,Nm,K0,a,_a,eo,$l,$n,b,0,-0,0)}}break}while(!0);oi(s)}function _1(s,a,n,l,g,b,A,N,O,B,K,te,V,$){if(s.timeoutHandle=-1,te=a.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(hd={stylesheets:null,count:0,unsuspend:pT},x1(a),te=xT(),te!==null)){s.cancelPendingCommit=te(M1.bind(null,s,a,b,n,l,g,A,N,O,K,1,V,$)),Wn(s,b,A,!B);return}M1(s,a,b,n,l,g,A,N,O)}function O2(s){for(var a=s;;){var n=a.tag;if((n===0||n===11||n===15)&&a.flags&16384&&(n=a.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var g=n[l],b=g.getSnapshot;g=g.value;try{if(!Ks(b(),g))return!1}catch{return!1}}if(n=a.child,a.subtreeFlags&16384&&n!==null)n.return=a,a=n;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Wn(s,a,n,l){a&=~Q0,a&=~eo,s.suspendedLanes|=a,s.pingedLanes&=~a,l&&(s.warmLanes|=a),l=s.expirationTimes;for(var g=a;0<g;){var b=31-Ct(g),A=1<<b;l[b]=-1,g&=~A}n!==0&&Pf(s,n,a)}function Tm(){return(rt&6)===0?(rd(0),!1):!0}function tx(){if(Ye!==null){if(ot===0)var s=Ye.return;else s=Ye,Ii=Xr=null,b0(s),Hl=null,Ku=0,s=Ye;for(;s!==null;)a1(s.alternate,s),s=s.return;Ye=null}}function Kl(s,a){var n=s.timeoutHandle;n!==-1&&(s.timeoutHandle=-1,Z2(n)),n=s.cancelPendingCommit,n!==null&&(s.cancelPendingCommit=null,n()),tx(),At=s,Ye=n=Di(s.current,null),Ke=a,ot=0,ea=null,$n=!1,Vl=It(s,a),X0=!1,$l=_a=Q0=eo=Xn=Rt=0,zs=id=null,K0=!1,(a&8)!==0&&(a|=a&32);var l=s.entangledLanes;if(l!==0)for(s=s.entanglements,l&=a;0<l;){var g=31-Ct(l),b=1<<g;a|=s[g],l&=~b}return Gi=a,Qf(),n}function w1(s,a){He=null,G.H=mm,a===Bu||a===im?(a=Hy(),ot=3):a===zy?(a=Hy(),ot=4):ot=a===qA?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ea=a,Ye===null&&(Rt=1,vm(s,va(a,s.current)))}function N1(){var s=G.H;return G.H=mm,s===null?mm:s}function T1(){var s=G.A;return G.A=k2,s}function sx(){Rt=4,$n||(Ke&4194048)!==Ke&&Sa.current!==null||(Vl=!0),(Xn&134217727)===0&&(eo&134217727)===0||At===null||Wn(At,Ke,_a,!1)}function ax(s,a,n){var l=rt;rt|=2;var g=N1(),b=T1();(At!==s||Ke!==a)&&(Nm=null,Kl(s,a)),a=!1;var A=Rt;e:do try{if(ot!==0&&Ye!==null){var N=Ye,O=ea;switch(ot){case 8:tx(),A=6;break e;case 3:case 2:case 9:case 6:Sa.current===null&&(a=!0);var B=ot;if(ot=0,ea=null,Wl(s,N,O,B),n&&Vl){A=0;break e}break;default:B=ot,ot=0,ea=null,Wl(s,N,O,B)}}L2(),A=Rt;break}catch(K){w1(s,K)}while(!0);return a&&s.shellSuspendCounter++,Ii=Xr=null,rt=l,G.H=g,G.A=b,Ye===null&&(At=null,Ke=0,Qf()),A}function L2(){for(;Ye!==null;)C1(Ye)}function I2(s,a){var n=rt;rt|=2;var l=N1(),g=T1();At!==s||Ke!==a?(Nm=null,wm=Qs()+500,Kl(s,a)):Vl=It(s,a);e:do try{if(ot!==0&&Ye!==null){a=Ye;var b=ea;t:switch(ot){case 1:ot=0,ea=null,Wl(s,a,b,1);break;case 2:case 9:if(Fy(b)){ot=0,ea=null,j1(a);break}a=function(){ot!==2&&ot!==9||At!==s||(ot=7),oi(s)},b.then(a,a);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:Fy(b)?(ot=0,ea=null,j1(a)):(ot=0,ea=null,Wl(s,a,b,7));break;case 5:var A=null;switch(Ye.tag){case 26:A=Ye.memoizedState;case 5:case 27:var N=Ye;if(!A||uE(A)){ot=0,ea=null;var O=N.sibling;if(O!==null)Ye=O;else{var B=N.return;B!==null?(Ye=B,Cm(B)):Ye=null}break t}}ot=0,ea=null,Wl(s,a,b,5);break;case 6:ot=0,ea=null,Wl(s,a,b,6);break;case 8:tx(),Rt=6;break e;default:throw Error(i(462))}}P2();break}catch(K){w1(s,K)}while(!0);return Ii=Xr=null,G.H=l,G.A=g,rt=n,Ye!==null?0:(At=null,Ke=0,Qf(),Rt)}function P2(){for(;Ye!==null&&!xl();)C1(Ye)}function C1(s){var a=t1(s.alternate,s,Gi);s.memoizedProps=s.pendingProps,a===null?Cm(s):Ye=a}function j1(s){var a=s,n=a.alternate;switch(a.tag){case 15:case 0:a=QA(n,a,a.pendingProps,a.type,void 0,Ke);break;case 11:a=QA(n,a,a.pendingProps,a.type.render,a.ref,Ke);break;case 5:b0(a);default:a1(n,a),a=Ye=Ry(a,Gi),a=t1(n,a,Gi)}s.memoizedProps=s.pendingProps,a===null?Cm(s):Ye=a}function Wl(s,a,n,l){Ii=Xr=null,b0(a),Hl=null,Ku=0;var g=a.return;try{if(N2(s,g,a,n,Ke)){Rt=1,vm(s,va(n,s.current)),Ye=null;return}}catch(b){if(g!==null)throw Ye=g,b;Rt=1,vm(s,va(n,s.current)),Ye=null;return}a.flags&32768?(tt||l===1?s=!0:Vl||(Ke&536870912)!==0?s=!1:($n=s=!0,(l===2||l===9||l===3||l===6)&&(l=Sa.current,l!==null&&l.tag===13&&(l.flags|=16384))),R1(a,s)):Cm(a)}function Cm(s){var a=s;do{if((a.flags&32768)!==0){R1(a,$n);return}s=a.return;var n=C2(a.alternate,a,Gi);if(n!==null){Ye=n;return}if(a=a.sibling,a!==null){Ye=a;return}Ye=a=s}while(a!==null);Rt===0&&(Rt=5)}function R1(s,a){do{var n=j2(s.alternate,s);if(n!==null){n.flags&=32767,Ye=n;return}if(n=s.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!a&&(s=s.sibling,s!==null)){Ye=s;return}Ye=s=n}while(s!==null);Rt=6,Ye=null}function M1(s,a,n,l,g,b,A,N,O){s.cancelPendingCommit=null;do jm();while(as!==0);if((rt&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(b=a.lanes|a.childLanes,b|=$g,yu(s,n,b,A,N,O),s===At&&(Ye=At=null,Ke=0),Xl=a,Kn=s,Ql=n,Z0=b,J0=g,A1=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,B2(vl,function(){return I1(),null})):(s.callbackNode=null,s.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=G.T,G.T=null,g=Y.p,Y.p=2,A=rt,rt|=4;try{R2(s,a,n)}finally{rt=A,Y.p=g,G.T=l}}as=1,k1(),D1(),O1()}}function k1(){if(as===1){as=0;var s=Kn,a=Xl,n=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||n){n=G.T,G.T=null;var l=Y.p;Y.p=2;var g=rt;rt|=4;try{m1(a,s);var b=px,A=yy(s.containerInfo),N=b.focusedElem,O=b.selectionRange;if(A!==N&&N&&N.ownerDocument&&vy(N.ownerDocument.documentElement,N)){if(O!==null&&Hg(N)){var B=O.start,K=O.end;if(K===void 0&&(K=B),"selectionStart"in N)N.selectionStart=B,N.selectionEnd=Math.min(K,N.value.length);else{var te=N.ownerDocument||document,V=te&&te.defaultView||window;if(V.getSelection){var $=V.getSelection(),ke=N.textContent.length,Te=Math.min(O.start,ke),ht=O.end===void 0?Te:Math.min(O.end,ke);!$.extend&&Te>ht&&(A=ht,ht=Te,Te=A);var U=by(N,Te),I=by(N,ht);if(U&&I&&($.rangeCount!==1||$.anchorNode!==U.node||$.anchorOffset!==U.offset||$.focusNode!==I.node||$.focusOffset!==I.offset)){var F=te.createRange();F.setStart(U.node,U.offset),$.removeAllRanges(),Te>ht?($.addRange(F),$.extend(I.node,I.offset)):(F.setEnd(I.node,I.offset),$.addRange(F))}}}}for(te=[],$=N;$=$.parentNode;)$.nodeType===1&&te.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<te.length;N++){var Z=te[N];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Bm=!!mx,px=mx=null}finally{rt=g,Y.p=l,G.T=n}}s.current=a,as=2}}function D1(){if(as===2){as=0;var s=Kn,a=Xl,n=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||n){n=G.T,G.T=null;var l=Y.p;Y.p=2;var g=rt;rt|=4;try{u1(s,a.alternate,a)}finally{rt=g,Y.p=l,G.T=n}}as=3}}function O1(){if(as===4||as===3){as=0,bl();var s=Kn,a=Xl,n=Ql,l=A1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?as=5:(as=0,Xl=Kn=null,L1(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Qn=null),Eu(n),a=a.stateNode,ws&&typeof ws.onCommitFiberRoot=="function")try{ws.onCommitFiberRoot(ji,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=G.T,g=Y.p,Y.p=2,G.T=null;try{for(var b=s.onRecoverableError,A=0;A<l.length;A++){var N=l[A];b(N.value,{componentStack:N.stack})}}finally{G.T=a,Y.p=g}}(Ql&3)!==0&&jm(),oi(s),g=s.pendingLanes,(n&4194090)!==0&&(g&42)!==0?s===ex?nd++:(nd=0,ex=s):nd=0,rd(0)}}function L1(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,zu(a)))}function jm(s){return k1(),D1(),O1(),I1()}function I1(){if(as!==5)return!1;var s=Kn,a=Z0;Z0=0;var n=Eu(Ql),l=G.T,g=Y.p;try{Y.p=32>n?32:n,G.T=null,n=J0,J0=null;var b=Kn,A=Ql;if(as=0,Xl=Kn=null,Ql=0,(rt&6)!==0)throw Error(i(331));var N=rt;if(rt|=4,v1(b.current),g1(b,b.current,A,n),rt=N,rd(0,!1),ws&&typeof ws.onPostCommitFiberRoot=="function")try{ws.onPostCommitFiberRoot(ji,b)}catch{}return!0}finally{Y.p=g,G.T=l,L1(s,a)}}function P1(s,a,n){a=va(n,a),a=k0(s.stateNode,a,2),s=Fn(s,a,2),s!==null&&(Pr(s,2),oi(s))}function xt(s,a,n){if(s.tag===3)P1(s,s,n);else for(;a!==null;){if(a.tag===3){P1(a,s,n);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Qn===null||!Qn.has(l))){s=va(n,s),n=BA(2),l=Fn(a,n,2),l!==null&&(HA(n,l,a,s),Pr(l,2),oi(l));break}}a=a.return}}function ix(s,a,n){var l=s.pingCache;if(l===null){l=s.pingCache=new D2;var g=new Set;l.set(a,g)}else g=l.get(a),g===void 0&&(g=new Set,l.set(a,g));g.has(n)||(X0=!0,g.add(n),s=U2.bind(null,s,a,n),a.then(s,s))}function U2(s,a,n){var l=s.pingCache;l!==null&&l.delete(a),s.pingedLanes|=s.suspendedLanes&n,s.warmLanes&=~n,At===s&&(Ke&n)===n&&(Rt===4||Rt===3&&(Ke&62914560)===Ke&&300>Qs()-W0?(rt&2)===0&&Kl(s,0):Q0|=n,$l===Ke&&($l=0)),oi(s)}function U1(s,a){a===0&&(a=If()),s=kl(s,a),s!==null&&(Pr(s,a),oi(s))}function z2(s){var a=s.memoizedState,n=0;a!==null&&(n=a.retryLane),U1(s,n)}function F2(s,a){var n=0;switch(s.tag){case 13:var l=s.stateNode,g=s.memoizedState;g!==null&&(n=g.retryLane);break;case 19:l=s.stateNode;break;case 22:l=s.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(a),U1(s,n)}function B2(s,a){return mu(s,a)}var Rm=null,Zl=null,nx=!1,Mm=!1,rx=!1,to=0;function oi(s){s!==Zl&&s.next===null&&(Zl===null?Rm=Zl=s:Zl=Zl.next=s),Mm=!0,nx||(nx=!0,q2())}function rd(s,a){if(!rx&&Mm){rx=!0;do for(var n=!1,l=Rm;l!==null;){if(s!==0){var g=l.pendingLanes;if(g===0)var b=0;else{var A=l.suspendedLanes,N=l.pingedLanes;b=(1<<31-Ct(42|s)+1)-1,b&=g&~(A&~N),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(n=!0,H1(l,b))}else b=Ke,b=El(l,l===At?b:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(b&3)===0||It(l,b)||(n=!0,H1(l,b));l=l.next}while(n);rx=!1}}function H2(){z1()}function z1(){Mm=nx=!1;var s=0;to!==0&&(W2()&&(s=to),to=0);for(var a=Qs(),n=null,l=Rm;l!==null;){var g=l.next,b=F1(l,a);b===0?(l.next=null,n===null?Rm=g:n.next=g,g===null&&(Zl=n)):(n=l,(s!==0||(b&3)!==0)&&(Mm=!0)),l=g}rd(s)}function F1(s,a){for(var n=s.suspendedLanes,l=s.pingedLanes,g=s.expirationTimes,b=s.pendingLanes&-62914561;0<b;){var A=31-Ct(b),N=1<<A,O=g[A];O===-1?((N&n)===0||(N&l)!==0)&&(g[A]=Ag(N,a)):O<=a&&(s.expiredLanes|=N),b&=~N}if(a=At,n=Ke,n=El(s,s===a?n:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),l=s.callbackNode,n===0||s===a&&(ot===2||ot===9)||s.cancelPendingCommit!==null)return l!==null&&l!==null&&pu(l),s.callbackNode=null,s.callbackPriority=0;if((n&3)===0||It(s,n)){if(a=n&-n,a===s.callbackPriority)return a;switch(l!==null&&pu(l),Eu(n)){case 2:case 8:n=gu;break;case 32:n=vl;break;case 268435456:n=Of;break;default:n=vl}return l=B1.bind(null,s),n=mu(n,l),s.callbackPriority=a,s.callbackNode=n,a}return l!==null&&l!==null&&pu(l),s.callbackPriority=2,s.callbackNode=null,2}function B1(s,a){if(as!==0&&as!==5)return s.callbackNode=null,s.callbackPriority=0,null;var n=s.callbackNode;if(jm()&&s.callbackNode!==n)return null;var l=Ke;return l=El(s,s===At?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),l===0?null:(S1(s,l,a),F1(s,Qs()),s.callbackNode!=null&&s.callbackNode===n?B1.bind(null,s):null)}function H1(s,a){if(jm())return null;S1(s,a,!0)}function q2(){J2(function(){(rt&6)!==0?mu(Df,H2):z1()})}function ox(){return to===0&&(to=Lf()),to}function q1(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Hf(""+s)}function G1(s,a){var n=a.ownerDocument.createElement("input");return n.name=a.name,n.value=a.value,s.id&&n.setAttribute("form",s.id),a.parentNode.insertBefore(n,a),s=new FormData(s),n.parentNode.removeChild(n),s}function G2(s,a,n,l,g){if(a==="submit"&&n&&n.stateNode===g){var b=q1((g[ps]||null).action),A=l.submitter;A&&(a=(a=A[ps]||null)?q1(a.formAction):A.getAttribute("formAction"),a!==null&&(b=a,A=null));var N=new Vf("action","action",null,l,g);s.push({event:N,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(to!==0){var O=A?G1(g,A):new FormData(g);T0(n,{pending:!0,data:O,method:g.method,action:b},null,O)}}else typeof b=="function"&&(N.preventDefault(),O=A?G1(g,A):new FormData(g),T0(n,{pending:!0,data:O,method:g.method,action:b},b,O))},currentTarget:g}]})}}for(var lx=0;lx<Vg.length;lx++){var cx=Vg[lx],Y2=cx.toLowerCase(),V2=cx[0].toUpperCase()+cx.slice(1);Ia(Y2,"on"+V2)}Ia(Sy,"onAnimationEnd"),Ia(_y,"onAnimationIteration"),Ia(wy,"onAnimationStart"),Ia("dblclick","onDoubleClick"),Ia("focusin","onFocus"),Ia("focusout","onBlur"),Ia(c2,"onTransitionRun"),Ia(u2,"onTransitionStart"),Ia(d2,"onTransitionCancel"),Ia(Ny,"onTransitionEnd"),Le("onMouseEnter",["mouseout","mouseover"]),Le("onMouseLeave",["mouseout","mouseover"]),Le("onPointerEnter",["pointerout","pointerover"]),Le("onPointerLeave",["pointerout","pointerover"]),De("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),De("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),De("onBeforeInput",["compositionend","keypress","textInput","paste"]),De("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),De("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),De("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var od="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(od));function Y1(s,a){a=(a&4)!==0;for(var n=0;n<s.length;n++){var l=s[n],g=l.event;l=l.listeners;e:{var b=void 0;if(a)for(var A=l.length-1;0<=A;A--){var N=l[A],O=N.instance,B=N.currentTarget;if(N=N.listener,O!==b&&g.isPropagationStopped())break e;b=N,g.currentTarget=B;try{b(g)}catch(K){bm(K)}g.currentTarget=null,b=O}else for(A=0;A<l.length;A++){if(N=l[A],O=N.instance,B=N.currentTarget,N=N.listener,O!==b&&g.isPropagationStopped())break e;b=N,g.currentTarget=B;try{b(g)}catch(K){bm(K)}g.currentTarget=null,b=O}}}}function Ve(s,a){var n=a[Ur];n===void 0&&(n=a[Ur]=new Set);var l=s+"__bubble";n.has(l)||(V1(a,s,2,!1),n.add(l))}function ux(s,a,n){var l=0;a&&(l|=4),V1(n,s,l,a)}var km="_reactListening"+Math.random().toString(36).slice(2);function dx(s){if(!s[km]){s[km]=!0,we.forEach(function(n){n!=="selectionchange"&&($2.has(n)||ux(n,!1,s),ux(n,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[km]||(a[km]=!0,ux("selectionchange",!1,a))}}function V1(s,a,n,l){switch(gE(a)){case 2:var g=yT;break;case 8:g=AT;break;default:g=wx}n=g.bind(null,a,n,s),g=void 0,!Dg||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),l?g!==void 0?s.addEventListener(a,n,{capture:!0,passive:g}):s.addEventListener(a,n,!0):g!==void 0?s.addEventListener(a,n,{passive:g}):s.addEventListener(a,n,!1)}function hx(s,a,n,l,g){var b=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var A=l.tag;if(A===3||A===4){var N=l.stateNode.containerInfo;if(N===g)break;if(A===4)for(A=l.return;A!==null;){var O=A.tag;if((O===3||O===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;N!==null;){if(A=On(N),A===null)return;if(O=A.tag,O===5||O===6||O===26||O===27){l=b=A;continue e}N=N.parentNode}}l=l.return}Jv(function(){var B=b,K=Mg(n),te=[];e:{var V=Ty.get(s);if(V!==void 0){var $=Vf,ke=s;switch(s){case"keypress":if(Gf(n)===0)break e;case"keydown":case"keyup":$=BN;break;case"focusin":ke="focus",$=Pg;break;case"focusout":ke="blur",$=Pg;break;case"beforeblur":case"afterblur":$=Pg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=sy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=jN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=GN;break;case Sy:case _y:case wy:$=kN;break;case Ny:$=VN;break;case"scroll":case"scrollend":$=TN;break;case"wheel":$=XN;break;case"copy":case"cut":case"paste":$=ON;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=iy;break;case"toggle":case"beforetoggle":$=KN}var Te=(a&4)!==0,ht=!Te&&(s==="scroll"||s==="scrollend"),U=Te?V!==null?V+"Capture":null:V;Te=[];for(var I=B,F;I!==null;){var Z=I;if(F=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||F===null||U===null||(Z=Nu(I,U),Z!=null&&Te.push(ld(I,Z,F))),ht)break;I=I.return}0<Te.length&&(V=new $(V,ke,null,n,K),te.push({event:V,listeners:Te}))}}if((a&7)===0){e:{if(V=s==="mouseover"||s==="pointerover",$=s==="mouseout"||s==="pointerout",V&&n!==Rg&&(ke=n.relatedTarget||n.fromElement)&&(On(ke)||ke[ga]))break e;if(($||V)&&(V=K.window===K?K:(V=K.ownerDocument)?V.defaultView||V.parentWindow:window,$?(ke=n.relatedTarget||n.toElement,$=B,ke=ke?On(ke):null,ke!==null&&(ht=o(ke),Te=ke.tag,ke!==ht||Te!==5&&Te!==27&&Te!==6)&&(ke=null)):($=null,ke=B),$!==ke)){if(Te=sy,Z="onMouseLeave",U="onMouseEnter",I="mouse",(s==="pointerout"||s==="pointerover")&&(Te=iy,Z="onPointerLeave",U="onPointerEnter",I="pointer"),ht=$==null?V:de($),F=ke==null?V:de(ke),V=new Te(Z,I+"leave",$,n,K),V.target=ht,V.relatedTarget=F,Z=null,On(K)===B&&(Te=new Te(U,I+"enter",ke,n,K),Te.target=F,Te.relatedTarget=ht,Z=Te),ht=Z,$&&ke)t:{for(Te=$,U=ke,I=0,F=Te;F;F=Jl(F))I++;for(F=0,Z=U;Z;Z=Jl(Z))F++;for(;0<I-F;)Te=Jl(Te),I--;for(;0<F-I;)U=Jl(U),F--;for(;I--;){if(Te===U||U!==null&&Te===U.alternate)break t;Te=Jl(Te),U=Jl(U)}Te=null}else Te=null;$!==null&&$1(te,V,$,Te,!1),ke!==null&&ht!==null&&$1(te,ht,ke,Te,!0)}}e:{if(V=B?de(B):window,$=V.nodeName&&V.nodeName.toLowerCase(),$==="select"||$==="input"&&V.type==="file")var be=hy;else if(uy(V))if(fy)be=r2;else{be=i2;var qe=a2}else $=V.nodeName,!$||$.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?B&&jg(B.elementType)&&(be=hy):be=n2;if(be&&(be=be(s,B))){dy(te,be,n,K);break e}qe&&qe(s,V,B),s==="focusout"&&B&&V.type==="number"&&B.memoizedProps.value!=null&&Cg(V,"number",V.value)}switch(qe=B?de(B):window,s){case"focusin":(uy(qe)||qe.contentEditable==="true")&&(jl=qe,qg=B,Ou=null);break;case"focusout":Ou=qg=jl=null;break;case"mousedown":Gg=!0;break;case"contextmenu":case"mouseup":case"dragend":Gg=!1,Ay(te,n,K);break;case"selectionchange":if(l2)break;case"keydown":case"keyup":Ay(te,n,K)}var Se;if(zg)e:{switch(s){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Cl?ly(s,n)&&(Re="onCompositionEnd"):s==="keydown"&&n.keyCode===229&&(Re="onCompositionStart");Re&&(ny&&n.locale!=="ko"&&(Cl||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Cl&&(Se=ey()):(In=K,Og="value"in In?In.value:In.textContent,Cl=!0)),qe=Dm(B,Re),0<qe.length&&(Re=new ay(Re,s,null,n,K),te.push({event:Re,listeners:qe}),Se?Re.data=Se:(Se=cy(n),Se!==null&&(Re.data=Se)))),(Se=ZN?JN(s,n):e2(s,n))&&(Re=Dm(B,"onBeforeInput"),0<Re.length&&(qe=new ay("onBeforeInput","beforeinput",null,n,K),te.push({event:qe,listeners:Re}),qe.data=Se)),G2(te,s,B,n,K)}Y1(te,a)})}function ld(s,a,n){return{instance:s,listener:a,currentTarget:n}}function Dm(s,a){for(var n=a+"Capture",l=[];s!==null;){var g=s,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=Nu(s,n),g!=null&&l.unshift(ld(s,g,b)),g=Nu(s,a),g!=null&&l.push(ld(s,g,b))),s.tag===3)return l;s=s.return}return[]}function Jl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function $1(s,a,n,l,g){for(var b=a._reactName,A=[];n!==null&&n!==l;){var N=n,O=N.alternate,B=N.stateNode;if(N=N.tag,O!==null&&O===l)break;N!==5&&N!==26&&N!==27||B===null||(O=B,g?(B=Nu(n,b),B!=null&&A.unshift(ld(n,B,O))):g||(B=Nu(n,b),B!=null&&A.push(ld(n,B,O)))),n=n.return}A.length!==0&&s.push({event:a,listeners:A})}var X2=/\r\n?/g,Q2=/\u0000|\uFFFD/g;function X1(s){return(typeof s=="string"?s:""+s).replace(X2,`
`).replace(Q2,"")}function Q1(s,a){return a=X1(a),X1(s)===a}function Om(){}function dt(s,a,n,l,g,b){switch(n){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||wl(s,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&wl(s,""+l);break;case"className":zf(s,"class",l);break;case"tabIndex":zf(s,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":zf(s,n,l);break;case"style":Wv(s,l,b);break;case"data":if(a!=="object"){zf(s,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||n!=="href")){s.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){s.removeAttribute(n);break}l=Hf(""+l),s.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){s.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(n==="formAction"?(a!=="input"&&dt(s,a,"name",g.name,g,null),dt(s,a,"formEncType",g.formEncType,g,null),dt(s,a,"formMethod",g.formMethod,g,null),dt(s,a,"formTarget",g.formTarget,g,null)):(dt(s,a,"encType",g.encType,g,null),dt(s,a,"method",g.method,g,null),dt(s,a,"target",g.target,g,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){s.removeAttribute(n);break}l=Hf(""+l),s.setAttribute(n,l);break;case"onClick":l!=null&&(s.onclick=Om);break;case"onScroll":l!=null&&Ve("scroll",s);break;case"onScrollEnd":l!=null&&Ve("scrollend",s);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(n=l.__html,n!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=n}}break;case"multiple":s.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":s.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){s.removeAttribute("xlink:href");break}n=Hf(""+l),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?s.setAttribute(n,""+l):s.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?s.setAttribute(n,""):s.removeAttribute(n);break;case"capture":case"download":l===!0?s.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?s.setAttribute(n,l):s.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?s.setAttribute(n,l):s.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?s.removeAttribute(n):s.setAttribute(n,l);break;case"popover":Ve("beforetoggle",s),Ve("toggle",s),Ri(s,"popover",l);break;case"xlinkActuate":Mi(s,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Mi(s,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Mi(s,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Mi(s,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Mi(s,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Mi(s,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Mi(s,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Mi(s,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Mi(s,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ri(s,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=wN.get(n)||n,Ri(s,n,l))}}function fx(s,a,n,l,g,b){switch(n){case"style":Wv(s,l,b);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(n=l.__html,n!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=n}}break;case"children":typeof l=="string"?wl(s,l):(typeof l=="number"||typeof l=="bigint")&&wl(s,""+l);break;case"onScroll":l!=null&&Ve("scroll",s);break;case"onScrollEnd":l!=null&&Ve("scrollend",s);break;case"onClick":l!=null&&(s.onclick=Om);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ne.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(g=n.endsWith("Capture"),a=n.slice(2,g?n.length-7:void 0),b=s[ps]||null,b=b!=null?b[n]:null,typeof b=="function"&&s.removeEventListener(a,b,g),typeof l=="function")){typeof b!="function"&&b!==null&&(n in s?s[n]=null:s.hasAttribute(n)&&s.removeAttribute(n)),s.addEventListener(a,l,g);break e}n in s?s[n]=l:l===!0?s.setAttribute(n,""):Ri(s,n,l)}}}function is(s,a,n){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",s),Ve("load",s);var l=!1,g=!1,b;for(b in n)if(n.hasOwnProperty(b)){var A=n[b];if(A!=null)switch(b){case"src":l=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:dt(s,a,b,A,n,null)}}g&&dt(s,a,"srcSet",n.srcSet,n,null),l&&dt(s,a,"src",n.src,n,null);return;case"input":Ve("invalid",s);var N=b=A=g=null,O=null,B=null;for(l in n)if(n.hasOwnProperty(l)){var K=n[l];if(K!=null)switch(l){case"name":g=K;break;case"type":A=K;break;case"checked":O=K;break;case"defaultChecked":B=K;break;case"value":b=K;break;case"defaultValue":N=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,a));break;default:dt(s,a,l,K,n,null)}}$v(s,b,N,O,B,A,g,!1),Ff(s);return;case"select":Ve("invalid",s),l=A=b=null;for(g in n)if(n.hasOwnProperty(g)&&(N=n[g],N!=null))switch(g){case"value":b=N;break;case"defaultValue":A=N;break;case"multiple":l=N;default:dt(s,a,g,N,n,null)}a=b,n=A,s.multiple=!!l,a!=null?_l(s,!!l,a,!1):n!=null&&_l(s,!!l,n,!0);return;case"textarea":Ve("invalid",s),b=g=l=null;for(A in n)if(n.hasOwnProperty(A)&&(N=n[A],N!=null))switch(A){case"value":l=N;break;case"defaultValue":g=N;break;case"children":b=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:dt(s,a,A,N,n,null)}Qv(s,l,g,b),Ff(s);return;case"option":for(O in n)if(n.hasOwnProperty(O)&&(l=n[O],l!=null))switch(O){case"selected":s.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:dt(s,a,O,l,n,null)}return;case"dialog":Ve("beforetoggle",s),Ve("toggle",s),Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":Ve("load",s);break;case"video":case"audio":for(l=0;l<od.length;l++)Ve(od[l],s);break;case"image":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"embed":case"source":case"link":Ve("error",s),Ve("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in n)if(n.hasOwnProperty(B)&&(l=n[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:dt(s,a,B,l,n,null)}return;default:if(jg(a)){for(K in n)n.hasOwnProperty(K)&&(l=n[K],l!==void 0&&fx(s,a,K,l,n,void 0));return}}for(N in n)n.hasOwnProperty(N)&&(l=n[N],l!=null&&dt(s,a,N,l,n,null))}function K2(s,a,n,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,A=null,N=null,O=null,B=null,K=null;for($ in n){var te=n[$];if(n.hasOwnProperty($)&&te!=null)switch($){case"checked":break;case"value":break;case"defaultValue":O=te;default:l.hasOwnProperty($)||dt(s,a,$,null,l,te)}}for(var V in l){var $=l[V];if(te=n[V],l.hasOwnProperty(V)&&($!=null||te!=null))switch(V){case"type":b=$;break;case"name":g=$;break;case"checked":B=$;break;case"defaultChecked":K=$;break;case"value":A=$;break;case"defaultValue":N=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,a));break;default:$!==te&&dt(s,a,V,$,l,te)}}Tg(s,A,N,O,B,K,b,g);return;case"select":$=A=N=V=null;for(b in n)if(O=n[b],n.hasOwnProperty(b)&&O!=null)switch(b){case"value":break;case"multiple":$=O;default:l.hasOwnProperty(b)||dt(s,a,b,null,l,O)}for(g in l)if(b=l[g],O=n[g],l.hasOwnProperty(g)&&(b!=null||O!=null))switch(g){case"value":V=b;break;case"defaultValue":N=b;break;case"multiple":A=b;default:b!==O&&dt(s,a,g,b,l,O)}a=N,n=A,l=$,V!=null?_l(s,!!n,V,!1):!!l!=!!n&&(a!=null?_l(s,!!n,a,!0):_l(s,!!n,n?[]:"",!1));return;case"textarea":$=V=null;for(N in n)if(g=n[N],n.hasOwnProperty(N)&&g!=null&&!l.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:dt(s,a,N,null,l,g)}for(A in l)if(g=l[A],b=n[A],l.hasOwnProperty(A)&&(g!=null||b!=null))switch(A){case"value":V=g;break;case"defaultValue":$=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==b&&dt(s,a,A,g,l,b)}Xv(s,V,$);return;case"option":for(var ke in n)if(V=n[ke],n.hasOwnProperty(ke)&&V!=null&&!l.hasOwnProperty(ke))switch(ke){case"selected":s.selected=!1;break;default:dt(s,a,ke,null,l,V)}for(O in l)if(V=l[O],$=n[O],l.hasOwnProperty(O)&&V!==$&&(V!=null||$!=null))switch(O){case"selected":s.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:dt(s,a,O,V,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in n)V=n[Te],n.hasOwnProperty(Te)&&V!=null&&!l.hasOwnProperty(Te)&&dt(s,a,Te,null,l,V);for(B in l)if(V=l[B],$=n[B],l.hasOwnProperty(B)&&V!==$&&(V!=null||$!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,a));break;default:dt(s,a,B,V,l,$)}return;default:if(jg(a)){for(var ht in n)V=n[ht],n.hasOwnProperty(ht)&&V!==void 0&&!l.hasOwnProperty(ht)&&fx(s,a,ht,void 0,l,V);for(K in l)V=l[K],$=n[K],!l.hasOwnProperty(K)||V===$||V===void 0&&$===void 0||fx(s,a,K,V,l,$);return}}for(var U in n)V=n[U],n.hasOwnProperty(U)&&V!=null&&!l.hasOwnProperty(U)&&dt(s,a,U,null,l,V);for(te in l)V=l[te],$=n[te],!l.hasOwnProperty(te)||V===$||V==null&&$==null||dt(s,a,te,V,l,$)}var mx=null,px=null;function Lm(s){return s.nodeType===9?s:s.ownerDocument}function K1(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function W1(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function gx(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var xx=null;function W2(){var s=window.event;return s&&s.type==="popstate"?s===xx?!1:(xx=s,!0):(xx=null,!1)}var Z1=typeof setTimeout=="function"?setTimeout:void 0,Z2=typeof clearTimeout=="function"?clearTimeout:void 0,J1=typeof Promise=="function"?Promise:void 0,J2=typeof queueMicrotask=="function"?queueMicrotask:typeof J1<"u"?function(s){return J1.resolve(null).then(s).catch(eT)}:Z1;function eT(s){setTimeout(function(){throw s})}function Zn(s){return s==="head"}function eE(s,a){var n=a,l=0,g=0;do{var b=n.nextSibling;if(s.removeChild(n),b&&b.nodeType===8)if(n=b.data,n==="/$"){if(0<l&&8>l){n=l;var A=s.ownerDocument;if(n&1&&cd(A.documentElement),n&2&&cd(A.body),n&4)for(n=A.head,cd(n),A=n.firstChild;A;){var N=A.nextSibling,O=A.nodeName;A[zr]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&A.rel.toLowerCase()==="stylesheet"||n.removeChild(A),A=N}}if(g===0){s.removeChild(b),xd(a);return}g--}else n==="$"||n==="$?"||n==="$!"?g++:l=n.charCodeAt(0)-48;else l=0;n=b}while(n);xd(a)}function bx(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var n=a;switch(a=a.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":bx(n),wu(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}s.removeChild(n)}}function tT(s,a,n,l){for(;s.nodeType===1;){var g=n;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(l){if(!s[zr])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(b=s.getAttribute("rel"),b==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(b!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(b=s.getAttribute("src"),(b!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===b)return s}else return s;if(s=Ua(s.nextSibling),s===null)break}return null}function sT(s,a,n){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!n||(s=Ua(s.nextSibling),s===null))return null;return s}function vx(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function aT(s,a){var n=s.ownerDocument;if(s.data!=="$?"||n.readyState==="complete")a();else{var l=function(){a(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),s._reactRetry=l}}function Ua(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var yx=null;function tE(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var n=s.data;if(n==="$"||n==="$!"||n==="$?"){if(a===0)return s;a--}else n==="/$"&&a++}s=s.previousSibling}return null}function sE(s,a,n){switch(a=Lm(n),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function cd(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);wu(s)}var wa=new Map,aE=new Set;function Im(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Yi=Y.d;Y.d={f:iT,r:nT,D:rT,C:oT,L:lT,m:cT,X:dT,S:uT,M:hT};function iT(){var s=Yi.f(),a=Tm();return s||a}function nT(s){var a=ie(s);a!==null&&a.tag===5&&a.type==="form"?SA(a):Yi.r(s)}var ec=typeof document>"u"?null:document;function iE(s,a,n){var l=ec;if(l&&typeof a=="string"&&a){var g=ba(a);g='link[rel="'+s+'"][href="'+g+'"]',typeof n=="string"&&(g+='[crossorigin="'+n+'"]'),aE.has(g)||(aE.add(g),s={rel:s,crossOrigin:n,href:a},l.querySelector(g)===null&&(a=l.createElement("link"),is(a,"link",s),Ee(a),l.head.appendChild(a)))}}function rT(s){Yi.D(s),iE("dns-prefetch",s,null)}function oT(s,a){Yi.C(s,a),iE("preconnect",s,a)}function lT(s,a,n){Yi.L(s,a,n);var l=ec;if(l&&s&&a){var g='link[rel="preload"][as="'+ba(a)+'"]';a==="image"&&n&&n.imageSrcSet?(g+='[imagesrcset="'+ba(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(g+='[imagesizes="'+ba(n.imageSizes)+'"]')):g+='[href="'+ba(s)+'"]';var b=g;switch(a){case"style":b=tc(s);break;case"script":b=sc(s)}wa.has(b)||(s=x({rel:"preload",href:a==="image"&&n&&n.imageSrcSet?void 0:s,as:a},n),wa.set(b,s),l.querySelector(g)!==null||a==="style"&&l.querySelector(ud(b))||a==="script"&&l.querySelector(dd(b))||(a=l.createElement("link"),is(a,"link",s),Ee(a),l.head.appendChild(a)))}}function cT(s,a){Yi.m(s,a);var n=ec;if(n&&s){var l=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+ba(l)+'"][href="'+ba(s)+'"]',b=g;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=sc(s)}if(!wa.has(b)&&(s=x({rel:"modulepreload",href:s},a),wa.set(b,s),n.querySelector(g)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(dd(b)))return}l=n.createElement("link"),is(l,"link",s),Ee(l),n.head.appendChild(l)}}}function uT(s,a,n){Yi.S(s,a,n);var l=ec;if(l&&s){var g=je(l).hoistableStyles,b=tc(s);a=a||"default";var A=g.get(b);if(!A){var N={loading:0,preload:null};if(A=l.querySelector(ud(b)))N.loading=5;else{s=x({rel:"stylesheet",href:s,"data-precedence":a},n),(n=wa.get(b))&&Ax(s,n);var O=A=l.createElement("link");Ee(O),is(O,"link",s),O._p=new Promise(function(B,K){O.onload=B,O.onerror=K}),O.addEventListener("load",function(){N.loading|=1}),O.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Pm(A,a,l)}A={type:"stylesheet",instance:A,count:1,state:N},g.set(b,A)}}}function dT(s,a){Yi.X(s,a);var n=ec;if(n&&s){var l=je(n).hoistableScripts,g=sc(s),b=l.get(g);b||(b=n.querySelector(dd(g)),b||(s=x({src:s,async:!0},a),(a=wa.get(g))&&Ex(s,a),b=n.createElement("script"),Ee(b),is(b,"link",s),n.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},l.set(g,b))}}function hT(s,a){Yi.M(s,a);var n=ec;if(n&&s){var l=je(n).hoistableScripts,g=sc(s),b=l.get(g);b||(b=n.querySelector(dd(g)),b||(s=x({src:s,async:!0,type:"module"},a),(a=wa.get(g))&&Ex(s,a),b=n.createElement("script"),Ee(b),is(b,"link",s),n.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},l.set(g,b))}}function nE(s,a,n,l){var g=(g=pe.current)?Im(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(a=tc(n.href),n=je(g).hoistableStyles,l=n.get(a),l||(l={type:"style",instance:null,count:0,state:null},n.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){s=tc(n.href);var b=je(g).hoistableStyles,A=b.get(s);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(s,A),(b=g.querySelector(ud(s)))&&!b._p&&(A.instance=b,A.state.loading=5),wa.has(s)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},wa.set(s,n),b||fT(g,s,n,A.state))),a&&l===null)throw Error(i(528,""));return A}if(a&&l!==null)throw Error(i(529,""));return null;case"script":return a=n.async,n=n.src,typeof n=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=sc(n),n=je(g).hoistableScripts,l=n.get(a),l||(l={type:"script",instance:null,count:0,state:null},n.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function tc(s){return'href="'+ba(s)+'"'}function ud(s){return'link[rel="stylesheet"]['+s+"]"}function rE(s){return x({},s,{"data-precedence":s.precedence,precedence:null})}function fT(s,a,n,l){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=s.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),is(a,"link",n),Ee(a),s.head.appendChild(a))}function sc(s){return'[src="'+ba(s)+'"]'}function dd(s){return"script[async]"+s}function oE(s,a,n){if(a.count++,a.instance===null)switch(a.type){case"style":var l=s.querySelector('style[data-href~="'+ba(n.href)+'"]');if(l)return a.instance=l,Ee(l),l;var g=x({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(s.ownerDocument||s).createElement("style"),Ee(l),is(l,"style",g),Pm(l,n.precedence,s),a.instance=l;case"stylesheet":g=tc(n.href);var b=s.querySelector(ud(g));if(b)return a.state.loading|=4,a.instance=b,Ee(b),b;l=rE(n),(g=wa.get(g))&&Ax(l,g),b=(s.ownerDocument||s).createElement("link"),Ee(b);var A=b;return A._p=new Promise(function(N,O){A.onload=N,A.onerror=O}),is(b,"link",l),a.state.loading|=4,Pm(b,n.precedence,s),a.instance=b;case"script":return b=sc(n.src),(g=s.querySelector(dd(b)))?(a.instance=g,Ee(g),g):(l=n,(g=wa.get(b))&&(l=x({},n),Ex(l,g)),s=s.ownerDocument||s,g=s.createElement("script"),Ee(g),is(g,"link",l),s.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,Pm(l,n.precedence,s));return a.instance}function Pm(s,a,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=l.length?l[l.length-1]:null,b=g,A=0;A<l.length;A++){var N=l[A];if(N.dataset.precedence===a)b=N;else if(b!==g)break}b?b.parentNode.insertBefore(s,b.nextSibling):(a=n.nodeType===9?n.head:n,a.insertBefore(s,a.firstChild))}function Ax(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Ex(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Um=null;function lE(s,a,n){if(Um===null){var l=new Map,g=Um=new Map;g.set(n,l)}else g=Um,l=g.get(n),l||(l=new Map,g.set(n,l));if(l.has(s))return l;for(l.set(s,null),n=n.getElementsByTagName(s),g=0;g<n.length;g++){var b=n[g];if(!(b[zr]||b[Kt]||s==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var A=b.getAttribute(a)||"";A=s+A;var N=l.get(A);N?N.push(b):l.set(A,[b])}}return l}function cE(s,a,n){s=s.ownerDocument||s,s.head.insertBefore(n,a==="title"?s.querySelector("head > title"):null)}function mT(s,a,n){if(n===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function uE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var hd=null;function pT(){}function gT(s,a,n){if(hd===null)throw Error(i(475));var l=hd;if(a.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=tc(n.href),b=s.querySelector(ud(g));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(l.count++,l=zm.bind(l),s.then(l,l)),a.state.loading|=4,a.instance=b,Ee(b);return}b=s.ownerDocument||s,n=rE(n),(g=wa.get(g))&&Ax(n,g),b=b.createElement("link"),Ee(b);var A=b;A._p=new Promise(function(N,O){A.onload=N,A.onerror=O}),is(b,"link",n),a.instance=b}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(l.count++,a=zm.bind(l),s.addEventListener("load",a),s.addEventListener("error",a))}}function xT(){if(hd===null)throw Error(i(475));var s=hd;return s.stylesheets&&s.count===0&&Sx(s,s.stylesheets),0<s.count?function(a){var n=setTimeout(function(){if(s.stylesheets&&Sx(s,s.stylesheets),s.unsuspend){var l=s.unsuspend;s.unsuspend=null,l()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(n)}}:null}function zm(){if(this.count--,this.count===0){if(this.stylesheets)Sx(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Fm=null;function Sx(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Fm=new Map,a.forEach(bT,s),Fm=null,zm.call(s))}function bT(s,a){if(!(a.state.loading&4)){var n=Fm.get(s);if(n)var l=n.get(null);else{n=new Map,Fm.set(s,n);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var A=g[b];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(n.set(A.dataset.precedence,A),l=A)}l&&n.set(null,l)}g=a.instance,A=g.getAttribute("data-precedence"),b=n.get(A)||l,b===l&&n.set(null,g),n.set(A,g),this.count++,l=zm.bind(this),g.addEventListener("load",l),g.addEventListener("error",l),b?b.parentNode.insertBefore(g,b.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),a.state.loading|=4}}var fd={$$typeof:D,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function vT(s,a,n,l,g,b,A,N){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vu(0),this.hiddenUpdates=vu(null),this.identifierPrefix=l,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function dE(s,a,n,l,g,b,A,N,O,B,K,te){return s=new vT(s,a,n,A,N,O,B,te),a=1,b===!0&&(a|=24),b=Ws(3,null,null,a),s.current=b,b.stateNode=s,a=i0(),a.refCount++,s.pooledCache=a,a.refCount++,b.memoizedState={element:l,isDehydrated:n,cache:a},l0(b),s}function hE(s){return s?(s=Dl,s):Dl}function fE(s,a,n,l,g,b){g=hE(g),l.context===null?l.context=g:l.pendingContext=g,l=zn(a),l.payload={element:n},b=b===void 0?null:b,b!==null&&(l.callback=b),n=Fn(s,l,a),n!==null&&(sa(n,s,a),qu(n,s,a))}function mE(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var n=s.retryLane;s.retryLane=n!==0&&n<a?n:a}}function _x(s,a){mE(s,a),(s=s.alternate)&&mE(s,a)}function pE(s){if(s.tag===13){var a=kl(s,67108864);a!==null&&sa(a,s,67108864),_x(s,67108864)}}var Bm=!0;function yT(s,a,n,l){var g=G.T;G.T=null;var b=Y.p;try{Y.p=2,wx(s,a,n,l)}finally{Y.p=b,G.T=g}}function AT(s,a,n,l){var g=G.T;G.T=null;var b=Y.p;try{Y.p=8,wx(s,a,n,l)}finally{Y.p=b,G.T=g}}function wx(s,a,n,l){if(Bm){var g=Nx(l);if(g===null)hx(s,a,l,Hm,n),xE(s,l);else if(ST(g,s,a,n,l))l.stopPropagation();else if(xE(s,l),a&4&&-1<ET.indexOf(s)){for(;g!==null;){var b=ie(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var A=La(b.pendingLanes);if(A!==0){var N=b;for(N.pendingLanes|=2,N.entangledLanes|=2;A;){var O=1<<31-Ct(A);N.entanglements[1]|=O,A&=~O}oi(b),(rt&6)===0&&(wm=Qs()+500,rd(0))}}break;case 13:N=kl(b,2),N!==null&&sa(N,b,2),Tm(),_x(b,2)}if(b=Nx(l),b===null&&hx(s,a,l,Hm,n),b===g)break;g=b}g!==null&&l.stopPropagation()}else hx(s,a,l,null,n)}}function Nx(s){return s=Mg(s),Tx(s)}var Hm=null;function Tx(s){if(Hm=null,s=On(s),s!==null){var a=o(s);if(a===null)s=null;else{var n=a.tag;if(n===13){if(s=d(a),s!==null)return s;s=null}else if(n===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Hm=s,null}function gE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kf()){case Df:return 2;case gu:return 8;case vl:case xu:return 32;case Of:return 268435456;default:return 32}default:return 32}}var Cx=!1,Jn=null,er=null,tr=null,md=new Map,pd=new Map,sr=[],ET="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xE(s,a){switch(s){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":md.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":pd.delete(a.pointerId)}}function gd(s,a,n,l,g,b){return s===null||s.nativeEvent!==b?(s={blockedOn:a,domEventName:n,eventSystemFlags:l,nativeEvent:b,targetContainers:[g]},a!==null&&(a=ie(a),a!==null&&pE(a)),s):(s.eventSystemFlags|=l,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function ST(s,a,n,l,g){switch(a){case"focusin":return Jn=gd(Jn,s,a,n,l,g),!0;case"dragenter":return er=gd(er,s,a,n,l,g),!0;case"mouseover":return tr=gd(tr,s,a,n,l,g),!0;case"pointerover":var b=g.pointerId;return md.set(b,gd(md.get(b)||null,s,a,n,l,g)),!0;case"gotpointercapture":return b=g.pointerId,pd.set(b,gd(pd.get(b)||null,s,a,n,l,g)),!0}return!1}function bE(s){var a=On(s.target);if(a!==null){var n=o(a);if(n!==null){if(a=n.tag,a===13){if(a=d(n),a!==null){s.blockedOn=a,Eg(s.priority,function(){if(n.tag===13){var l=ta();l=Au(l);var g=kl(n,l);g!==null&&sa(g,n,l),_x(n,l)}});return}}else if(a===3&&n.stateNode.current.memoizedState.isDehydrated){s.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}s.blockedOn=null}function qm(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var n=Nx(s.nativeEvent);if(n===null){n=s.nativeEvent;var l=new n.constructor(n.type,n);Rg=l,n.target.dispatchEvent(l),Rg=null}else return a=ie(n),a!==null&&pE(a),s.blockedOn=n,!1;a.shift()}return!0}function vE(s,a,n){qm(s)&&n.delete(a)}function _T(){Cx=!1,Jn!==null&&qm(Jn)&&(Jn=null),er!==null&&qm(er)&&(er=null),tr!==null&&qm(tr)&&(tr=null),md.forEach(vE),pd.forEach(vE)}function Gm(s,a){s.blockedOn===a&&(s.blockedOn=null,Cx||(Cx=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,_T)))}var Ym=null;function yE(s){Ym!==s&&(Ym=s,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){Ym===s&&(Ym=null);for(var a=0;a<s.length;a+=3){var n=s[a],l=s[a+1],g=s[a+2];if(typeof l!="function"){if(Tx(l||n)===null)continue;break}var b=ie(n);b!==null&&(s.splice(a,3),a-=3,T0(b,{pending:!0,data:g,method:n.method,action:l},l,g))}}))}function xd(s){function a(O){return Gm(O,s)}Jn!==null&&Gm(Jn,s),er!==null&&Gm(er,s),tr!==null&&Gm(tr,s),md.forEach(a),pd.forEach(a);for(var n=0;n<sr.length;n++){var l=sr[n];l.blockedOn===s&&(l.blockedOn=null)}for(;0<sr.length&&(n=sr[0],n.blockedOn===null);)bE(n),n.blockedOn===null&&sr.shift();if(n=(s.ownerDocument||s).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var g=n[l],b=n[l+1],A=g[ps]||null;if(typeof b=="function")A||yE(n);else if(A){var N=null;if(b&&b.hasAttribute("formAction")){if(g=b,A=b[ps]||null)N=A.formAction;else if(Tx(g)!==null)continue}else N=A.action;typeof N=="function"?n[l+1]=N:(n.splice(l,3),l-=3),yE(n)}}}function jx(s){this._internalRoot=s}Vm.prototype.render=jx.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var n=a.current,l=ta();fE(n,l,s,a,null,null)},Vm.prototype.unmount=jx.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;fE(s.current,2,null,s,null,null),Tm(),a[ga]=null}};function Vm(s){this._internalRoot=s}Vm.prototype.unstable_scheduleHydration=function(s){if(s){var a=Dn();s={blockedOn:null,target:s,priority:a};for(var n=0;n<sr.length&&a!==0&&a<sr[n].priority;n++);sr.splice(n,0,s),n===0&&bE(s)}};var AE=e.version;if(AE!=="19.1.1")throw Error(i(527,AE,"19.1.1"));Y.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=p(a),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var wT={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$m.isDisabled&&$m.supportsFiber)try{ji=$m.inject(wT),ws=$m}catch{}}return vd.createRoot=function(s,a){if(!r(s))throw Error(i(299));var n=!1,l="",g=PA,b=UA,A=zA,N=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks)),a=dE(s,1,!1,null,null,n,l,g,b,A,N,null),s[ga]=a.current,dx(s),new jx(a)},vd.hydrateRoot=function(s,a,n){if(!r(s))throw Error(i(299));var l=!1,g="",b=PA,A=UA,N=zA,O=null,B=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(g=n.identifierPrefix),n.onUncaughtError!==void 0&&(b=n.onUncaughtError),n.onCaughtError!==void 0&&(A=n.onCaughtError),n.onRecoverableError!==void 0&&(N=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(O=n.unstable_transitionCallbacks),n.formState!==void 0&&(B=n.formState)),a=dE(s,1,!0,a,n??null,l,g,b,A,N,O,B),a.context=hE(null),n=a.current,l=ta(),l=Au(l),g=zn(l),g.callback=null,Fn(n,g,l),n=l,a.current.lanes=n,Pr(a,n),oi(a),s[ga]=a.current,dx(s),new Vm(a)},vd.version="19.1.1",vd}var kE;function UT(){if(kE)return Dx.exports;kE=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(e){console.error(e)}}return c(),Dx.exports=PT(),Dx.exports}var zT=UT(),ye=(c=>(c.UPLOAD_PDF_ONLY="UPLOAD_PDF_ONLY",c.ROLE_SELECTION="ROLE_SELECTION",c.USER_PREFERENCES="USER_PREFERENCES",c.GENERATING_PLAN="GENERATING_PLAN",c.VIEW_PLAN="VIEW_PLAN",c.STUDY_TOPIC="STUDY_TOPIC",c.AI_COACH="AI_COACH",c.DASHBOARD="DASHBOARD",c.QUESTION_SYSTEM="QUESTION_SYSTEM",c.DATA_MANAGEMENT="DATA_MANAGEMENT",c))(ye||{}),Ue=(c=>(c.SUMMARY="summary",c.QUESTIONS="questions",c.FLASHCARDS="flashcards",c.DISCURSIVE_QUESTIONS="discursive_questions",c.DEEPER_UNDERSTANDING="deeperUnderstanding",c))(Ue||{});const FT="modulepreload",BT=function(c){return"/teste/"+c},DE={},Xm=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let d=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));r=d(t.map(m=>{if(m=BT(m),m in DE)return;DE[m]=!0;const x=m.endsWith(".css"),v=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const y=document.createElement("link");if(y.rel=x?"stylesheet":FT,x||(y.as="script"),y.crossOrigin="",y.href=m,p&&y.setAttribute("nonce",p),document.head.appendChild(y),x)return new Promise((E,S)=>{y.addEventListener("load",E),y.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return r.then(d=>{for(const h of d||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})};var Fd={};Fd.d=(c,e)=>{for(var t in e)Fd.o(e,t)&&!Fd.o(c,t)&&Object.defineProperty(c,t,{enumerable:!0,get:e[t]})};Fd.o=(c,e)=>Object.prototype.hasOwnProperty.call(c,e);var Oe=globalThis.pdfjsLib={};Fd.d(Oe,{AbortException:()=>dl,AnnotationEditorLayer:()=>iv,AnnotationEditorParamsType:()=>ze,AnnotationEditorType:()=>We,AnnotationEditorUIManager:()=>il,AnnotationLayer:()=>zj,AnnotationMode:()=>or,CMapCompressionType:()=>Kx,ColorPicker:()=>Op,DOMSVGFactory:()=>vv,DrawLayer:()=>lv,FeatureTest:()=>Vs,GlobalWorkerOptions:()=>Nn,ImageKind:()=>sp,InvalidPDFException:()=>l_,MissingPDFException:()=>ul,OPS:()=>Ba,Outliner:()=>zb,PDFDataRangeTransport:()=>aw,PDFDateString:()=>p_,PDFWorker:()=>dc,PasswordResponses:()=>YT,PermissionFlag:()=>GT,PixelsPerInch:()=>Rr,RenderingCancelledException:()=>yv,TextLayer:()=>cu,UnexpectedResponseException:()=>lg,Util:()=>Ae,VerbosityLevel:()=>ng,XfaLayer:()=>nw,build:()=>vj,createValidAbsoluteUrl:()=>QT,fetchData:()=>fg,getDocument:()=>uj,getFilenameFromUrl:()=>nC,getPdfFilenameFromUrl:()=>rC,getXfaPageViewport:()=>oC,isDataScheme:()=>Av,isPdfFile:()=>Ev,noContextMenu:()=>Xs,normalizeUnicode:()=>tC,renderTextLayer:()=>tj,setLayerDimensions:()=>al,shadow:()=>Ze,updateTextLayer:()=>sj,version:()=>bj});const Ss=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),o_=[1,0,0,1,0,0],Qx=[.001,0,0,.001,0,0],HT=1e7,Px=1.35,Ma={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},or={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},qT="pdfjs_internal_editor_",We={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ze={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},GT={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},bs={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},sp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},qt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},yd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ng={ERRORS:0,WARNINGS:1,INFOS:5},Kx={NONE:0,BINARY:1},Ba={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},YT={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let rg=ng.WARNINGS;function VT(c){Number.isInteger(c)&&(rg=c)}function $T(){return rg}function og(c){rg>=ng.INFOS&&console.log(`Info: ${c}`)}function Ge(c){rg>=ng.WARNINGS&&console.log(`Warning: ${c}`)}function mt(c){throw new Error(c)}function Qt(c,e){c||mt(e)}function XT(c){switch(c==null?void 0:c.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function QT(c,e=null,t=null){if(!c)return null;try{if(t&&typeof c=="string"){if(t.addDefaultProtocol&&c.startsWith("www.")){const r=c.match(/\./g);(r==null?void 0:r.length)>=2&&(c=`http://${c}`)}if(t.tryConvertEncoding)try{c=eC(c)}catch{}}const i=e?new URL(c,e):new URL(c);if(XT(i))return i}catch{}return null}function Ze(c,e,t,i=!1){return Object.defineProperty(c,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const Lr=(function(){function e(t,i){this.constructor===e&&mt("Cannot initialize BaseException."),this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e})();class Wx extends Lr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Zx extends Lr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class l_ extends Lr{constructor(e){super(e,"InvalidPDFException")}}class ul extends Lr{constructor(e){super(e,"MissingPDFException")}}class lg extends Lr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class KT extends Lr{constructor(e){super(e,"FormatError")}}class dl extends Lr{constructor(e){super(e,"AbortException")}}function c_(c){(typeof c!="object"||(c==null?void 0:c.length)===void 0)&&mt("Invalid argument for bytesToString");const e=c.length,t=8192;if(e<t)return String.fromCharCode.apply(null,c);const i=[];for(let r=0;r<e;r+=t){const o=Math.min(r+t,e),d=c.subarray(r,o);i.push(String.fromCharCode.apply(null,d))}return i.join("")}function cg(c){typeof c!="string"&&mt("Invalid argument for stringToBytes");const e=c.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=c.charCodeAt(i)&255;return t}function WT(c){return String.fromCharCode(c>>24&255,c>>16&255,c>>8&255,c&255)}function xv(c){const e=Object.create(null);for(const[t,i]of c)e[t]=i;return e}function ZT(){const c=new Uint8Array(4);return c[0]=1,new Uint32Array(c.buffer,0,1)[0]===1}function JT(){try{return new Function(""),!0}catch{return!1}}class Vs{static get isLittleEndian(){return Ze(this,"isLittleEndian",ZT())}static get isEvalSupported(){return Ze(this,"isEvalSupported",JT())}static get isOffscreenCanvasSupported(){return Ze(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Ze(this,"platform",{isMac:navigator.platform.includes("Mac")}):Ze(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,t;return Ze(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Ux=Array.from(Array(256).keys(),c=>c.toString(16).padStart(2,"0"));var Cn,ap,Jx;class Ae{static makeHexColor(e,t,i){return`#${Ux[e]}${Ux[t]}${Ux[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[i,r]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,o=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[r,o]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),o=this.applyTransform([e[0],e[3]],t),d=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],r[0],o[0],d[0]),Math.min(i[1],r[1],o[1],d[1]),Math.max(i[0],r[0],o[0],d[0]),Math.max(i[1],r[1],o[1],d[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],o=e[2]*t[0]+e[3]*t[2],d=e[2]*t[1]+e[3]*t[3],h=(i+d)/2,p=Math.sqrt((i+d)**2-4*(i*d-o*r))/2,m=h+p||1,x=h-p||1;return[Math.sqrt(m),Math.sqrt(x)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>r)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),d=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>d?null:[i,o,r,d]}static bezierBoundingBox(e,t,i,r,o,d,h,p,m){return m?(m[0]=Math.min(m[0],e,h),m[1]=Math.min(m[1],t,p),m[2]=Math.max(m[2],e,h),m[3]=Math.max(m[3],t,p)):m=[Math.min(e,h),Math.min(t,p),Math.max(e,h),Math.max(t,p)],T(this,Cn,Jx).call(this,e,i,o,h,t,r,d,p,3*(-e+3*(i-o)+h),6*(e-2*i+o),3*(i-e),m),T(this,Cn,Jx).call(this,e,i,o,h,t,r,d,p,3*(-t+3*(r-d)+p),6*(t-2*r+d),3*(r-t),m),m}}Cn=new WeakSet,ap=function(e,t,i,r,o,d,h,p,m,x){if(m<=0||m>=1)return;const v=1-m,y=m*m,E=y*m,S=v*(v*(v*e+3*m*t)+3*y*i)+E*r,_=v*(v*(v*o+3*m*d)+3*y*h)+E*p;x[0]=Math.min(x[0],S),x[1]=Math.min(x[1],_),x[2]=Math.max(x[2],S),x[3]=Math.max(x[3],_)},Jx=function(e,t,i,r,o,d,h,p,m,x,v,y){if(Math.abs(m)<1e-12){Math.abs(x)>=1e-12&&T(this,Cn,ap).call(this,e,t,i,r,o,d,h,p,-v/x,y);return}const E=x**2-4*v*m;if(E<0)return;const S=Math.sqrt(E),_=2*m;T(this,Cn,ap).call(this,e,t,i,r,o,d,h,p,(-x+S)/_,y),T(this,Cn,ap).call(this,e,t,i,r,o,d,h,p,(-x-S)/_,y)},C(Ae,Cn);function eC(c){return decodeURIComponent(escape(c))}let zx=null,OE=null;function tC(c){return zx||(zx=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,OE=new Map([["","t"]])),c.replaceAll(zx,(e,t,i)=>t?t.normalize("NFKC"):OE.get(i))}function sC(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const c=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(c);else for(let e=0;e<32;e++)c[e]=Math.floor(Math.random()*255);return c_(c)}const u_="pdfjs_internal_id_",Vi={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class ug{constructor(){this.constructor===ug&&mt("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,r,o){return"none"}destroy(e=!1){}}var $d;const zv=class zv{constructor({enableHWA:e=!1}={}){C(this,$d,!1);this.constructor===zv&&mt("Cannot initialize BaseCanvasFactory."),w(this,$d,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!f(this,$d)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){mt("Abstract method `_createCanvas` called.")}};$d=new WeakMap;let jp=zv;class dg{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===dg&&mt("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),i=this.isCompressed?Kx.BINARY:Kx.NONE;return this._fetchData(t,i).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){mt("Abstract method `_fetchData` called.")}}class hg{constructor({baseUrl:e=null}){this.constructor===hg&&mt("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}_fetchData(e){mt("Abstract method `_fetchData` called.")}}class bv{constructor(){this.constructor===bv&&mt("Cannot initialize BaseSVGFactory.")}create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){mt("Abstract method `_createSVG` called.")}}const Xi="http://www.w3.org/2000/svg",no=class no{};xe(no,"CSS",96),xe(no,"PDF",72),xe(no,"PDF_TO_CSS_UNITS",no.CSS/no.PDF);let Rr=no;var oo,ui,Ji,Bs,zp,lo,ve,vs,ac,ic,ip,d_,eb,nc,wd,Nd,tb,Td;class aC extends ug{constructor({docId:t,ownerDocument:i=globalThis.document}={}){super();C(this,ve);C(this,oo);C(this,ui);C(this,Ji);C(this,Bs);C(this,zp);C(this,lo,0);w(this,Ji,t),w(this,Bs,i)}addFilter(t){if(!t)return"none";let i=f(this,ve,vs).get(t);if(i)return i;const[r,o,d]=T(this,ve,ip).call(this,t),h=t.length===1?r:`${r}${o}${d}`;if(i=f(this,ve,vs).get(h),i)return f(this,ve,vs).set(t,i),i;const p=`g_${f(this,Ji)}_transfer_map_${aa(this,lo)._++}`,m=`url(#${p})`;f(this,ve,vs).set(t,m),f(this,ve,vs).set(h,m);const x=T(this,ve,nc).call(this,p);return T(this,ve,Nd).call(this,r,o,d,x),m}addHCMFilter(t,i){var S;const r=`${t}-${i}`,o="base";let d=f(this,ve,ac).get(o);if((d==null?void 0:d.key)===r||(d?((S=d.filter)==null||S.remove(),d.key=r,d.url="none",d.filter=null):(d={key:r,url:"none",filter:null},f(this,ve,ac).set(o,d)),!t||!i))return d.url;const h=T(this,ve,Td).call(this,t);t=Ae.makeHexColor(...h);const p=T(this,ve,Td).call(this,i);if(i=Ae.makeHexColor(...p),f(this,ve,ic).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return d.url;const m=new Array(256);for(let _=0;_<=255;_++){const j=_/255;m[_]=j<=.03928?j/12.92:((j+.055)/1.055)**2.4}const x=m.join(","),v=`g_${f(this,Ji)}_hcm_filter`,y=d.filter=T(this,ve,nc).call(this,v);T(this,ve,Nd).call(this,x,x,x,y),T(this,ve,eb).call(this,y);const E=(_,j)=>{const R=h[_]/255,L=p[_]/255,D=new Array(j+1);for(let z=0;z<=j;z++)D[z]=R+z/j*(L-R);return D.join(",")};return T(this,ve,Nd).call(this,E(0,5),E(1,5),E(2,5),y),d.url=`url(#${v})`,d.url}addAlphaFilter(t){let i=f(this,ve,vs).get(t);if(i)return i;const[r]=T(this,ve,ip).call(this,[t]),o=`alpha_${r}`;if(i=f(this,ve,vs).get(o),i)return f(this,ve,vs).set(t,i),i;const d=`g_${f(this,Ji)}_alpha_map_${aa(this,lo)._++}`,h=`url(#${d})`;f(this,ve,vs).set(t,h),f(this,ve,vs).set(o,h);const p=T(this,ve,nc).call(this,d);return T(this,ve,tb).call(this,r,p),h}addLuminosityFilter(t){let i=f(this,ve,vs).get(t||"luminosity");if(i)return i;let r,o;if(t?([r]=T(this,ve,ip).call(this,[t]),o=`luminosity_${r}`):o="luminosity",i=f(this,ve,vs).get(o),i)return f(this,ve,vs).set(t,i),i;const d=`g_${f(this,Ji)}_luminosity_map_${aa(this,lo)._++}`,h=`url(#${d})`;f(this,ve,vs).set(t,h),f(this,ve,vs).set(o,h);const p=T(this,ve,nc).call(this,d);return T(this,ve,d_).call(this,p),t&&T(this,ve,tb).call(this,r,p),h}addHighlightHCMFilter(t,i,r,o,d){var L;const h=`${i}-${r}-${o}-${d}`;let p=f(this,ve,ac).get(t);if((p==null?void 0:p.key)===h||(p?((L=p.filter)==null||L.remove(),p.key=h,p.url="none",p.filter=null):(p={key:h,url:"none",filter:null},f(this,ve,ac).set(t,p)),!i||!r))return p.url;const[m,x]=[i,r].map(T(this,ve,Td).bind(this));let v=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),y=Math.round(.2126*x[0]+.7152*x[1]+.0722*x[2]),[E,S]=[o,d].map(T(this,ve,Td).bind(this));y<v&&([v,y,E,S]=[y,v,S,E]),f(this,ve,ic).style.color="";const _=(D,z,P)=>{const H=new Array(256),se=(y-v)/P,re=D/255,ne=(z-D)/(255*P);let ue=0;for(let J=0;J<=P;J++){const ge=Math.round(v+J*se),Ce=re+J*ne;for(let Ie=ue;Ie<=ge;Ie++)H[Ie]=Ce;ue=ge+1}for(let J=ue;J<256;J++)H[J]=H[ue-1];return H.join(",")},j=`g_${f(this,Ji)}_hcm_${t}_filter`,R=p.filter=T(this,ve,nc).call(this,j);return T(this,ve,eb).call(this,R),T(this,ve,Nd).call(this,_(E[0],S[0],5),_(E[1],S[1],5),_(E[2],S[2],5),R),p.url=`url(#${j})`,p.url}destroy(t=!1){t&&f(this,ve,ac).size!==0||(f(this,ui)&&(f(this,ui).parentNode.parentNode.remove(),w(this,ui,null)),f(this,oo)&&(f(this,oo).clear(),w(this,oo,null)),w(this,lo,0))}}oo=new WeakMap,ui=new WeakMap,Ji=new WeakMap,Bs=new WeakMap,zp=new WeakMap,lo=new WeakMap,ve=new WeakSet,vs=function(){return f(this,oo)||w(this,oo,new Map)},ac=function(){return f(this,zp)||w(this,zp,new Map)},ic=function(){if(!f(this,ui)){const t=f(this,Bs).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=f(this,Bs).createElementNS(Xi,"svg");r.setAttribute("width",0),r.setAttribute("height",0),w(this,ui,f(this,Bs).createElementNS(Xi,"defs")),t.append(r),r.append(f(this,ui)),f(this,Bs).body.append(t)}return f(this,ui)},ip=function(t){if(t.length===1){const m=t[0],x=new Array(256);for(let y=0;y<256;y++)x[y]=m[y]/255;const v=x.join(",");return[v,v,v]}const[i,r,o]=t,d=new Array(256),h=new Array(256),p=new Array(256);for(let m=0;m<256;m++)d[m]=i[m]/255,h[m]=r[m]/255,p[m]=o[m]/255;return[d.join(","),h.join(","),p.join(",")]},d_=function(t){const i=f(this,Bs).createElementNS(Xi,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},eb=function(t){const i=f(this,Bs).createElementNS(Xi,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},nc=function(t){const i=f(this,Bs).createElementNS(Xi,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),f(this,ve,ic).append(i),i},wd=function(t,i,r){const o=f(this,Bs).createElementNS(Xi,i);o.setAttribute("type","discrete"),o.setAttribute("tableValues",r),t.append(o)},Nd=function(t,i,r,o){const d=f(this,Bs).createElementNS(Xi,"feComponentTransfer");o.append(d),T(this,ve,wd).call(this,d,"feFuncR",t),T(this,ve,wd).call(this,d,"feFuncG",i),T(this,ve,wd).call(this,d,"feFuncB",r)},tb=function(t,i){const r=f(this,Bs).createElementNS(Xi,"feComponentTransfer");i.append(r),T(this,ve,wd).call(this,r,"feFuncA",t)},Td=function(t){return f(this,ve,ic).style.color=t,Sv(getComputedStyle(f(this,ve,ic)).getPropertyValue("color"))};class iC extends jp{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}={}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}async function fg(c,e="text"){if(Cd(c,document.baseURI)){const t=await fetch(c);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const r=new XMLHttpRequest;r.open("GET",c,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class h_ extends dg{_fetchData(e,t){return fg(e,this.isCompressed?"arraybuffer":"text").then(i=>({cMapData:i instanceof ArrayBuffer?new Uint8Array(i):cg(i),compressionType:t}))}}class f_ extends hg{_fetchData(e){return fg(e,"arraybuffer").then(t=>new Uint8Array(t))}}class vv extends bv{_createSVG(e){return document.createElementNS(Xi,e)}}class Nf{constructor({viewBox:e,scale:t,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:d=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=r,this.offsetY=o;const h=(e[2]+e[0])/2,p=(e[3]+e[1])/2;let m,x,v,y;switch(i%=360,i<0&&(i+=360),i){case 180:m=-1,x=0,v=0,y=1;break;case 90:m=0,x=1,v=1,y=0;break;case 270:m=0,x=-1,v=-1,y=0;break;case 0:m=1,x=0,v=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}d&&(v=-v,y=-y);let E,S,_,j;m===0?(E=Math.abs(p-e[1])*t+r,S=Math.abs(h-e[0])*t+o,_=(e[3]-e[1])*t,j=(e[2]-e[0])*t):(E=Math.abs(h-e[0])*t+r,S=Math.abs(p-e[1])*t+o,_=(e[2]-e[0])*t,j=(e[3]-e[1])*t),this.transform=[m*t,x*t,v*t,y*t,E-m*t*h-v*t*p,S-x*t*h-y*t*p],this.width=_,this.height=j}get rawDims(){const{viewBox:e}=this;return Ze(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Nf({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:o})}convertToViewportPoint(e,t){return Ae.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=Ae.applyTransform([e[0],e[1]],this.transform),i=Ae.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return Ae.applyInverseTransform([e,t],this.transform)}}class yv extends Lr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Av(c){const e=c.length;let t=0;for(;t<e&&c[t].trim()==="";)t++;return c.substring(t,t+5).toLowerCase()==="data:"}function Ev(c){return typeof c=="string"&&/\.pdf$/i.test(c)}function nC(c){return[c]=c.split(/[#?]/,1),c.substring(c.lastIndexOf("/")+1)}function rC(c,e="document.pdf"){if(typeof c!="string")return e;if(Av(c))return Ge('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(c);let o=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(o&&(o=o[0],o.includes("%")))try{o=i.exec(decodeURIComponent(o))[0]}catch{}return o||e}class LE{constructor(){xe(this,"started",Object.create(null));xe(this,"times",[])}time(e){e in this.started&&Ge(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ge(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:r,end:o}of this.times)e.push(`${i.padEnd(t)} ${o-r}ms
`);return e.join("")}}function Cd(c,e){try{const{protocol:t}=e?new URL(c,e):new URL(c);return t==="http:"||t==="https:"}catch{return!1}}function Xs(c){c.preventDefault()}function m_(c){console.log("Deprecated API usage: "+c)}let IE;class p_{static toDateObject(e){if(!e||typeof e!="string")return null;IE||(IE=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=IE.exec(e);if(!t)return null;const i=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let d=parseInt(t[4],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[5],10);h=h>=0&&h<=59?h:0;let p=parseInt(t[6],10);p=p>=0&&p<=59?p:0;const m=t[7]||"Z";let x=parseInt(t[8],10);x=x>=0&&x<=23?x:0;let v=parseInt(t[9],10)||0;return v=v>=0&&v<=59?v:0,m==="-"?(d+=x,h+=v):m==="+"&&(d-=x,h-=v),new Date(Date.UTC(i,r,o,d,h,p))}}function oC(c,{scale:e=1,rotation:t=0}){const{width:i,height:r}=c.attributes.style,o=[0,0,parseInt(i),parseInt(r)];return new Nf({viewBox:o,scale:e,rotation:t})}function Sv(c){if(c.startsWith("#")){const e=parseInt(c.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return c.startsWith("rgb(")?c.slice(4,-1).split(",").map(e=>parseInt(e)):c.startsWith("rgba(")?c.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ge(`Not a valid color format: "${c}"`),[0,0,0])}function lC(c){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of c.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;c.set(t,Sv(i))}e.remove()}function Tt(c){const{a:e,b:t,c:i,d:r,e:o,f:d}=c.getTransform();return[e,t,i,r,o,d]}function $i(c){const{a:e,b:t,c:i,d:r,e:o,f:d}=c.getTransform().invertSelf();return[e,t,i,r,o,d]}function al(c,e,t=!1,i=!0){if(e instanceof Nf){const{pageWidth:r,pageHeight:o}=e.rawDims,{style:d}=c,h=Vs.isCSSRoundSupported,p=`var(--scale-factor) * ${r}px`,m=`var(--scale-factor) * ${o}px`,x=h?`round(${p}, 1px)`:`calc(${p})`,v=h?`round(${m}, 1px)`:`calc(${m})`;!t||e.rotation%180===0?(d.width=x,d.height=v):(d.width=v,d.height=x)}i&&c.setAttribute("data-main-rotation",e.rotation)}var co,uo,ra,ho,Fp,g_,Os,x_,b_,np,v_,ab;const Bp=class Bp{constructor(e){C(this,Os);C(this,co,null);C(this,uo,null);C(this,ra);C(this,ho,null);w(this,ra,e)}render(){const e=w(this,co,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=f(this,ra)._uiManager._signal;e.addEventListener("contextmenu",Xs,{signal:t}),e.addEventListener("pointerdown",T(Bp,Fp,g_),{signal:t});const i=w(this,ho,document.createElement("div"));i.className="buttons",e.append(i);const r=f(this,ra).toolbarPosition;if(r){const{style:o}=e,d=f(this,ra)._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*d}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return T(this,Os,v_).call(this),e}hide(){var e;f(this,co).classList.add("hidden"),(e=f(this,uo))==null||e.hideDropdown()}show(){f(this,co).classList.remove("hidden")}addAltTextButton(e){T(this,Os,np).call(this,e),f(this,ho).prepend(e,f(this,Os,ab))}addColorPicker(e){w(this,uo,e);const t=e.renderButton();T(this,Os,np).call(this,t),f(this,ho).prepend(t,f(this,Os,ab))}remove(){var e;f(this,co).remove(),(e=f(this,uo))==null||e.destroy(),w(this,uo,null)}};co=new WeakMap,uo=new WeakMap,ra=new WeakMap,ho=new WeakMap,Fp=new WeakSet,g_=function(e){e.stopPropagation()},Os=new WeakSet,x_=function(e){f(this,ra)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},b_=function(e){f(this,ra)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},np=function(e){const t=f(this,ra)._uiManager._signal;e.addEventListener("focusin",T(this,Os,x_).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",T(this,Os,b_).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Xs,{signal:t})},v_=function(){const e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id",`pdfjs-editor-remove-${f(this,ra).editorType}-button`),T(this,Os,np).call(this,e),e.addEventListener("click",t=>{f(this,ra)._uiManager.delete()},{signal:f(this,ra)._uiManager._signal}),f(this,ho).append(e)},ab=function(){const e=document.createElement("div");return e.className="divider",e},C(Bp,Fp);let sb=Bp;var Xd,fo,mo,Dr,y_,A_,E_;class cC{constructor(e){C(this,Dr);C(this,Xd,null);C(this,fo,null);C(this,mo);w(this,mo,e)}show(e,t,i){const[r,o]=T(this,Dr,A_).call(this,t,i),{style:d}=f(this,fo)||w(this,fo,T(this,Dr,y_).call(this));e.append(f(this,fo)),d.insetInlineEnd=`${100*r}%`,d.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){f(this,fo).remove()}}Xd=new WeakMap,fo=new WeakMap,mo=new WeakMap,Dr=new WeakSet,y_=function(){const e=w(this,fo,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Xs,{signal:f(this,mo)._signal});const t=w(this,Xd,document.createElement("div"));return t.className="buttons",e.append(t),T(this,Dr,E_).call(this),e},A_=function(e,t){let i=0,r=0;for(const o of e){const d=o.y+o.height;if(d<i)continue;const h=o.x+(t?o.width:0);if(d>i){r=h,i=d;continue}t?h>r&&(r=h):h<r&&(r=h)}return[t?1-r:r,i]},E_=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=f(this,mo)._signal;e.addEventListener("contextmenu",Xs,{signal:i}),e.addEventListener("click",()=>{f(this,mo).highlightSelection("floating_button")},{signal:i}),f(this,Xd).append(e)};function Rp(c,e,t){for(const i of t)e.addEventListener(i,c[i].bind(c))}function uC(c){return Math.round(Math.min(255,Math.max(1,255*c))).toString(16).padStart(2,"0")}var Hp;class dC{constructor(){C(this,Hp,0)}get id(){return`${qT}${aa(this,Hp)._++}`}}Hp=new WeakMap;var Qd,qp,Ta,Kd,nb;const Fv=class Fv{constructor(){C(this,Kd);C(this,Qd,sC());C(this,qp,0);C(this,Ta,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const o=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Ze(this,"_isSVGFittingCanvas",o)}async getFromFile(e){const{lastModified:t,name:i,size:r,type:o}=e;return T(this,Kd,nb).call(this,`${t}_${i}_${r}_${o}`,e)}async getFromUrl(e){return T(this,Kd,nb).call(this,e,e)}async getFromId(e){f(this,Ta)||w(this,Ta,new Map);const t=f(this,Ta).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=f(this,Ta).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){f(this,Ta)||w(this,Ta,new Map);const t=f(this,Ta).get(e);t&&(t.refCounter-=1,t.refCounter===0&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${f(this,Qd)}_`)}};Qd=new WeakMap,qp=new WeakMap,Ta=new WeakMap,Kd=new WeakSet,nb=async function(e,t){f(this,Ta)||w(this,Ta,new Map);let i=f(this,Ta).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${f(this,Qd)}_${aa(this,qp)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(i.url=t,r=await fg(t,"blob")):r=i.file=t,r.type==="image/svg+xml"){const o=Fv._isSVGFittingCanvas,d=new FileReader,h=new Image,p=new Promise((m,x)=>{h.onload=()=>{i.bitmap=h,i.isSvg=!0,m()},d.onload=async()=>{const v=i.svgUrl=d.result;h.src=await o?`${v}#svgView(preserveAspectRatio(none))`:v},h.onerror=d.onerror=x});d.readAsDataURL(r),await p}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){console.error(r),i=null}return f(this,Ta).set(e,i),i&&f(this,Ta).set(i.id,i),i};let ib=Fv;var es,lr,Wd,ts;class hC{constructor(e=128){C(this,es,[]);C(this,lr,!1);C(this,Wd);C(this,ts,-1);w(this,Wd,e)}add({cmd:e,undo:t,post:i,mustExec:r,type:o=NaN,overwriteIfSameType:d=!1,keepUndo:h=!1}){if(r&&e(),f(this,lr))return;const p={cmd:e,undo:t,post:i,type:o};if(f(this,ts)===-1){f(this,es).length>0&&(f(this,es).length=0),w(this,ts,0),f(this,es).push(p);return}if(d&&f(this,es)[f(this,ts)].type===o){h&&(p.undo=f(this,es)[f(this,ts)].undo),f(this,es)[f(this,ts)]=p;return}const m=f(this,ts)+1;m===f(this,Wd)?f(this,es).splice(0,1):(w(this,ts,m),m<f(this,es).length&&f(this,es).splice(m)),f(this,es).push(p)}undo(){if(f(this,ts)===-1)return;w(this,lr,!0);const{undo:e,post:t}=f(this,es)[f(this,ts)];e(),t==null||t(),w(this,lr,!1),w(this,ts,f(this,ts)-1)}redo(){if(f(this,ts)<f(this,es).length-1){w(this,ts,f(this,ts)+1),w(this,lr,!0);const{cmd:e,post:t}=f(this,es)[f(this,ts)];e(),t==null||t(),w(this,lr,!1)}}hasSomethingToUndo(){return f(this,ts)!==-1}hasSomethingToRedo(){return f(this,ts)<f(this,es).length-1}destroy(){w(this,es,null)}}es=new WeakMap,lr=new WeakMap,Wd=new WeakMap,ts=new WeakMap;var Gp,S_;class Tf{constructor(e){C(this,Gp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Vs.platform;for(const[i,r,o={}]of e)for(const d of i){const h=d.startsWith("mac+");t&&h?(this.callbacks.set(d.slice(4),{callback:r,options:o}),this.allKeys.add(d.split("+").at(-1))):!t&&!h&&(this.callbacks.set(d,{callback:r,options:o}),this.allKeys.add(d.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(T(this,Gp,S_).call(this,t));if(!i)return;const{callback:r,options:{bubbles:o=!1,args:d=[],checker:h=null}}=i;h&&!h(e,t)||(r.bind(e,...d,t)(),o||(t.stopPropagation(),t.preventDefault()))}}Gp=new WeakSet,S_=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Yp=class Yp{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return lC(e),Ze(this,"_colors",e)}convert(e){const t=Sv(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,r]of this._colors)if(r.every((o,d)=>o===t[d]))return Yp._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?Ae.makeHexColor(...t):e}};xe(Yp,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let rb=Yp;var mc,oa,Gt,os,pc,en,gc,Ha,xc,po,di,qa,go,Zd,Jd,hi,bc,cr,fi,Vp,ur,eh,xo,th,vc,ls,lt,tn,bo,sh,ah,ih,nh,rh,oh,lh,ch,uh,dh,hh,fh,mh,dr,mi,sn,ph,fe,rp,__,w_,op,N_,T_,C_,ob,j_,lb,cb,R_,Cs,ir,M_,k_,ub,D_,jd,db;const cc=class cc{constructor(e,t,i,r,o,d,h,p,m){C(this,fe);C(this,mc,new AbortController);C(this,oa,null);C(this,Gt,new Map);C(this,os,new Map);C(this,pc,null);C(this,en,null);C(this,gc,null);C(this,Ha,new hC);C(this,xc,0);C(this,po,new Set);C(this,di,null);C(this,qa,null);C(this,go,new Set);C(this,Zd,!1);C(this,Jd,null);C(this,hi,null);C(this,bc,null);C(this,cr,!1);C(this,fi,null);C(this,Vp,new dC);C(this,ur,!1);C(this,eh,!1);C(this,xo,null);C(this,th,null);C(this,vc,null);C(this,ls,We.NONE);C(this,lt,new Set);C(this,tn,null);C(this,bo,null);C(this,sh,null);C(this,ah,this.blur.bind(this));C(this,ih,this.focus.bind(this));C(this,nh,this.copy.bind(this));C(this,rh,this.cut.bind(this));C(this,oh,this.paste.bind(this));C(this,lh,this.keydown.bind(this));C(this,ch,this.keyup.bind(this));C(this,uh,this.onEditingAction.bind(this));C(this,dh,this.onPageChanging.bind(this));C(this,hh,this.onScaleChanging.bind(this));C(this,fh,this.onRotationChanging.bind(this));C(this,mh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});C(this,dr,[0,0]);C(this,mi,null);C(this,sn,null);C(this,ph,null);this._signal=f(this,mc).signal,w(this,sn,e),w(this,ph,t),w(this,pc,i),this._eventBus=r,this._eventBus._on("editingaction",f(this,uh)),this._eventBus._on("pagechanging",f(this,dh)),this._eventBus._on("scalechanging",f(this,hh)),this._eventBus._on("rotationchanging",f(this,fh)),T(this,fe,N_).call(this),T(this,fe,R_).call(this),T(this,fe,ob).call(this),w(this,en,o.annotationStorage),w(this,Jd,o.filterFactory),w(this,bo,d),w(this,bc,h||null),w(this,Zd,p),w(this,vc,m||null),this.viewParameters={realScale:Rr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=cc.prototype,t=d=>f(d,sn).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&d.hasSomethingToControl(),i=(d,{target:h})=>{if(h instanceof HTMLInputElement){const{type:p}=h;return p!=="text"&&p!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Ze(this,"_keyboardManager",new Tf([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(d,{target:h})=>!(h instanceof HTMLButtonElement)&&f(d,sn).contains(h)&&!d.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(d,{target:h})=>!(h instanceof HTMLButtonElement)&&f(d,sn).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}destroy(){var e,t,i;(e=f(this,mc))==null||e.abort(),w(this,mc,null),this._signal=null,this._eventBus._off("editingaction",f(this,uh)),this._eventBus._off("pagechanging",f(this,dh)),this._eventBus._off("scalechanging",f(this,hh)),this._eventBus._off("rotationchanging",f(this,fh));for(const r of f(this,os).values())r.destroy();f(this,os).clear(),f(this,Gt).clear(),f(this,go).clear(),w(this,oa,null),f(this,lt).clear(),f(this,Ha).destroy(),(t=f(this,pc))==null||t.destroy(),(i=f(this,fi))==null||i.hide(),w(this,fi,null),f(this,hi)&&(clearTimeout(f(this,hi)),w(this,hi,null)),f(this,mi)&&(clearTimeout(f(this,mi)),w(this,mi,null))}async mlGuess(e){var t;return((t=f(this,vc))==null?void 0:t.guess(e))||null}get hasMLManager(){return!!f(this,vc)}get hcmFilter(){return Ze(this,"hcmFilter",f(this,bo)?f(this,Jd).addHCMFilter(f(this,bo).foreground,f(this,bo).background):"none")}get direction(){return Ze(this,"direction",getComputedStyle(f(this,sn)).direction)}get highlightColors(){return Ze(this,"highlightColors",f(this,bc)?new Map(f(this,bc).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Ze(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){w(this,th,e)}editAltText(e){var t;(t=f(this,pc))==null||t.editAltText(this,e)}onPageChanging({pageNumber:e}){w(this,xc,e-1)}focusMainContainer(){f(this,sn).focus()}findParent(e,t){for(const i of f(this,os).values()){const{x:r,y:o,width:d,height:h}=i.div.getBoundingClientRect();if(e>=r&&e<=r+d&&t>=o&&t<=o+h)return i}return null}disableUserSelect(e=!1){f(this,ph).classList.toggle("noUserSelect",e)}addShouldRescale(e){f(this,go).add(e)}removeShouldRescale(e){f(this,go).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Rr.PDF_TO_CSS_UNITS;for(const t of f(this,go))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:d}=t,h=t.toString(),m=T(this,fe,rp).call(this,t).closest(".textLayer"),x=this.getSelectionBoxes(m);if(x){t.empty(),f(this,ls)===We.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:We.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const v of f(this,os).values())if(v.hasTextLayer(m)){v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:x,anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:d,text:h});break}}}addToAnnotationStorage(e){!e.isEmpty()&&f(this,en)&&!f(this,en).has(e.id)&&f(this,en).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,f(this,cr)&&(w(this,cr,!1),T(this,fe,op).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of f(this,lt))if(t.div.contains(e)){w(this,xo,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!f(this,xo))return;const[e,t]=f(this,xo);w(this,xo,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){T(this,fe,ob).call(this),T(this,fe,lb).call(this)}removeEditListeners(){T(this,fe,j_).call(this),T(this,fe,cb).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of f(this,qa))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of f(this,qa))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=f(this,oa))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of f(this,lt)){const o=r.serialize(!0);o&&t.push(o)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const d of f(this,qa))if(d.isHandlingMimeForPasting(o.type)){d.paste(o,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){Ge(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const p of i){const m=r.deserialize(p);if(!m)return;o.push(m)}const d=()=>{for(const p of o)T(this,fe,ub).call(this,p);T(this,fe,db).call(this,o)},h=()=>{for(const p of o)p.remove()};this.addCommands({cmd:d,undo:h,mustExec:!0})}catch(o){Ge(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),f(this,ls)!==We.NONE&&!this.isEditorHandlingKeyboard&&cc._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,f(this,cr)&&(w(this,cr,!1),T(this,fe,op).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(T(this,fe,T_).call(this),T(this,fe,lb).call(this),T(this,fe,Cs).call(this,{isEditing:f(this,ls)!==We.NONE,isEmpty:T(this,fe,jd).call(this),hasSomethingToUndo:f(this,Ha).hasSomethingToUndo(),hasSomethingToRedo:f(this,Ha).hasSomethingToRedo(),hasSelectedEditor:!1})):(T(this,fe,C_).call(this),T(this,fe,cb).call(this),T(this,fe,Cs).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!f(this,qa)){w(this,qa,e);for(const t of f(this,qa))T(this,fe,ir).call(this,t.defaultPropertiesToUpdate)}}getId(){return f(this,Vp).id}get currentLayer(){return f(this,os).get(f(this,xc))}getLayer(e){return f(this,os).get(e)}get currentPageIndex(){return f(this,xc)}addLayer(e){f(this,os).set(e.pageIndex,e),f(this,ur)?e.enable():e.disable()}removeLayer(e){f(this,os).delete(e.pageIndex)}updateMode(e,t=null,i=!1){if(f(this,ls)!==e){if(w(this,ls,e),e===We.NONE){this.setEditingState(!1),T(this,fe,k_).call(this);return}this.setEditingState(!0),T(this,fe,M_).call(this),this.unselectAll();for(const r of f(this,os).values())r.updateMode(e);if(!t&&i){this.addNewEditorFromKeyboard();return}if(t){for(const r of f(this,Gt).values())if(r.annotationElementId===t){this.setSelected(r),r.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==f(this,ls)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(f(this,qa)){switch(e){case ze.CREATE:this.currentLayer.addNewEditor();return;case ze.HIGHLIGHT_DEFAULT_COLOR:(i=f(this,th))==null||i.updateColor(t);break;case ze.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(f(this,sh)||w(this,sh,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of f(this,lt))r.updateParams(e,t);for(const r of f(this,qa))r.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var o;for(const d of f(this,Gt).values())d.editorType===e&&d.show(t);(((o=f(this,sh))==null?void 0:o.get(ze.HIGHLIGHT_SHOW_ALL))??!0)!==t&&T(this,fe,ir).call(this,[[ze.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(f(this,eh)!==e){w(this,eh,e);for(const t of f(this,os).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of f(this,Gt).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return f(this,Gt).get(e)}addEditor(e){f(this,Gt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(f(this,hi)&&clearTimeout(f(this,hi)),w(this,hi,setTimeout(()=>{this.focusMainContainer(),w(this,hi,null)},0))),f(this,Gt).delete(e.id),this.unselect(e),(!e.annotationElementId||!f(this,po).has(e.annotationElementId))&&((t=f(this,en))==null||t.remove(e.id))}addDeletedAnnotationElement(e){f(this,po).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return f(this,po).has(e)}removeDeletedAnnotationElement(e){f(this,po).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){f(this,oa)!==e&&(w(this,oa,e),e&&T(this,fe,ir).call(this,e.propertiesToUpdate))}updateUI(e){f(this,fe,D_)===e&&T(this,fe,ir).call(this,e.propertiesToUpdate)}toggleSelected(e){if(f(this,lt).has(e)){f(this,lt).delete(e),e.unselect(),T(this,fe,Cs).call(this,{hasSelectedEditor:this.hasSelection});return}f(this,lt).add(e),e.select(),T(this,fe,ir).call(this,e.propertiesToUpdate),T(this,fe,Cs).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of f(this,lt))t!==e&&t.unselect();f(this,lt).clear(),f(this,lt).add(e),e.select(),T(this,fe,ir).call(this,e.propertiesToUpdate),T(this,fe,Cs).call(this,{hasSelectedEditor:!0})}isSelected(e){return f(this,lt).has(e)}get firstSelectedEditor(){return f(this,lt).values().next().value}unselect(e){e.unselect(),f(this,lt).delete(e),T(this,fe,Cs).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return f(this,lt).size!==0}get isEnterHandled(){return f(this,lt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){f(this,Ha).undo(),T(this,fe,Cs).call(this,{hasSomethingToUndo:f(this,Ha).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:T(this,fe,jd).call(this)})}redo(){f(this,Ha).redo(),T(this,fe,Cs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:f(this,Ha).hasSomethingToRedo(),isEmpty:T(this,fe,jd).call(this)})}addCommands(e){f(this,Ha).add(e),T(this,fe,Cs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:T(this,fe,jd).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...f(this,lt)],t=()=>{for(const r of e)r.remove()},i=()=>{for(const r of e)T(this,fe,ub).call(this,r)};this.addCommands({cmd:t,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=f(this,oa))==null||e.commitOrRemove()}hasSomethingToControl(){return f(this,oa)||this.hasSelection}selectAll(){for(const e of f(this,lt))e.commit();T(this,fe,db).call(this,f(this,Gt).values())}unselectAll(){if(!(f(this,oa)&&(f(this,oa).commitOrRemove(),f(this,ls)!==We.NONE))&&this.hasSelection){for(const e of f(this,lt))e.unselect();f(this,lt).clear(),T(this,fe,Cs).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;f(this,dr)[0]+=e,f(this,dr)[1]+=t;const[r,o]=f(this,dr),d=[...f(this,lt)],h=1e3;f(this,mi)&&clearTimeout(f(this,mi)),w(this,mi,setTimeout(()=>{w(this,mi,null),f(this,dr)[0]=f(this,dr)[1]=0,this.addCommands({cmd:()=>{for(const p of d)f(this,Gt).has(p.id)&&p.translateInPage(r,o)},undo:()=>{for(const p of d)f(this,Gt).has(p.id)&&p.translateInPage(-r,-o)},mustExec:!1})},h));for(const p of d)p.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),w(this,di,new Map);for(const e of f(this,lt))f(this,di).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!f(this,di))return!1;this.disableUserSelect(!1);const e=f(this,di);w(this,di,null);let t=!1;for(const[{x:r,y:o,pageIndex:d},h]of e)h.newX=r,h.newY=o,h.newPageIndex=d,t||(t=r!==h.savedX||o!==h.savedY||d!==h.savedPageIndex);if(!t)return!1;const i=(r,o,d,h)=>{if(f(this,Gt).has(r.id)){const p=f(this,os).get(h);p?r._setParentAndPosition(p,o,d):(r.pageIndex=h,r.x=o,r.y=d)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:d,newPageIndex:h}]of e)i(r,o,d,h)},undo:()=>{for(const[r,{savedX:o,savedY:d,savedPageIndex:h}]of e)i(r,o,d,h)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(f(this,di))for(const i of f(this,di).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||f(this,lt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return f(this,oa)===e}getActive(){return f(this,oa)}getMode(){return f(this,ls)}get imageManager(){return Ze(this,"imageManager",new ib)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let m=0,x=t.rangeCount;m<x;m++)if(!e.contains(t.getRangeAt(m).commonAncestorContainer))return null;const{x:i,y:r,width:o,height:d}=e.getBoundingClientRect();let h;switch(e.getAttribute("data-main-rotation")){case"90":h=(m,x,v,y)=>({x:(x-r)/d,y:1-(m+v-i)/o,width:y/d,height:v/o});break;case"180":h=(m,x,v,y)=>({x:1-(m+v-i)/o,y:1-(x+y-r)/d,width:v/o,height:y/d});break;case"270":h=(m,x,v,y)=>({x:1-(x+y-r)/d,y:(m-i)/o,width:y/d,height:v/o});break;default:h=(m,x,v,y)=>({x:(m-i)/o,y:(x-r)/d,width:v/o,height:y/d});break}const p=[];for(let m=0,x=t.rangeCount;m<x;m++){const v=t.getRangeAt(m);if(!v.collapsed)for(const{x:y,y:E,width:S,height:_}of v.getClientRects())S===0||_===0||p.push(h(y,E,S,_))}return p.length===0?null:p}addChangedExistingAnnotation({annotationElementId:e,id:t}){(f(this,gc)||w(this,gc,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=f(this,gc))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=f(this,gc))==null?void 0:r.get(e.data.id);if(!t)return;const i=f(this,en).getRawValue(t);i&&(f(this,ls)===We.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};mc=new WeakMap,oa=new WeakMap,Gt=new WeakMap,os=new WeakMap,pc=new WeakMap,en=new WeakMap,gc=new WeakMap,Ha=new WeakMap,xc=new WeakMap,po=new WeakMap,di=new WeakMap,qa=new WeakMap,go=new WeakMap,Zd=new WeakMap,Jd=new WeakMap,hi=new WeakMap,bc=new WeakMap,cr=new WeakMap,fi=new WeakMap,Vp=new WeakMap,ur=new WeakMap,eh=new WeakMap,xo=new WeakMap,th=new WeakMap,vc=new WeakMap,ls=new WeakMap,lt=new WeakMap,tn=new WeakMap,bo=new WeakMap,sh=new WeakMap,ah=new WeakMap,ih=new WeakMap,nh=new WeakMap,rh=new WeakMap,oh=new WeakMap,lh=new WeakMap,ch=new WeakMap,uh=new WeakMap,dh=new WeakMap,hh=new WeakMap,fh=new WeakMap,mh=new WeakMap,dr=new WeakMap,mi=new WeakMap,sn=new WeakMap,ph=new WeakMap,fe=new WeakSet,rp=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},__=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=T(this,fe,rp).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(f(this,fi)||w(this,fi,new cC(this)),f(this,fi).show(i,r,this.direction==="ltr"))},w_=function(){var o,d,h;const e=document.getSelection();if(!e||e.isCollapsed){f(this,tn)&&((o=f(this,fi))==null||o.hide(),w(this,tn,null),T(this,fe,Cs).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===f(this,tn))return;if(!T(this,fe,rp).call(this,e).closest(".textLayer")){f(this,tn)&&((d=f(this,fi))==null||d.hide(),w(this,tn,null),T(this,fe,Cs).call(this,{hasSelectedText:!1}));return}if((h=f(this,fi))==null||h.hide(),w(this,tn,t),T(this,fe,Cs).call(this,{hasSelectedText:!0}),!(f(this,ls)!==We.HIGHLIGHT&&f(this,ls)!==We.NONE)&&(f(this,ls)===We.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),w(this,cr,this.isShiftKeyDown),!this.isShiftKeyDown)){const p=this._signal,m=x=>{x.type==="pointerup"&&x.button!==0||(window.removeEventListener("pointerup",m),window.removeEventListener("blur",m),x.type==="pointerup"&&T(this,fe,op).call(this,"main_toolbar"))};window.addEventListener("pointerup",m,{signal:p}),window.addEventListener("blur",m,{signal:p})}},op=function(e=""){f(this,ls)===We.HIGHLIGHT?this.highlightSelection(e):f(this,Zd)&&T(this,fe,__).call(this)},N_=function(){document.addEventListener("selectionchange",T(this,fe,w_).bind(this),{signal:this._signal})},T_=function(){const e=this._signal;window.addEventListener("focus",f(this,ih),{signal:e}),window.addEventListener("blur",f(this,ah),{signal:e})},C_=function(){window.removeEventListener("focus",f(this,ih)),window.removeEventListener("blur",f(this,ah))},ob=function(){const e=this._signal;window.addEventListener("keydown",f(this,lh),{signal:e}),window.addEventListener("keyup",f(this,ch),{signal:e})},j_=function(){window.removeEventListener("keydown",f(this,lh)),window.removeEventListener("keyup",f(this,ch))},lb=function(){const e=this._signal;document.addEventListener("copy",f(this,nh),{signal:e}),document.addEventListener("cut",f(this,rh),{signal:e}),document.addEventListener("paste",f(this,oh),{signal:e})},cb=function(){document.removeEventListener("copy",f(this,nh)),document.removeEventListener("cut",f(this,rh)),document.removeEventListener("paste",f(this,oh))},R_=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Cs=function(e){Object.entries(e).some(([i,r])=>f(this,mh)[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(f(this,mh),e)}),f(this,ls)===We.HIGHLIGHT&&e.hasSelectedEditor===!1&&T(this,fe,ir).call(this,[[ze.HIGHLIGHT_FREE,!0]]))},ir=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},M_=function(){if(!f(this,ur)){w(this,ur,!0);for(const e of f(this,os).values())e.enable();for(const e of f(this,Gt).values())e.enable()}},k_=function(){if(this.unselectAll(),f(this,ur)){w(this,ur,!1);for(const e of f(this,os).values())e.disable();for(const e of f(this,Gt).values())e.disable()}},ub=function(e){const t=f(this,os).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},D_=function(){let e=null;for(e of f(this,lt));return e},jd=function(){if(f(this,Gt).size===0)return!0;if(f(this,Gt).size===1)for(const e of f(this,Gt).values())return e.isEmpty();return!1},db=function(e){for(const t of f(this,lt))t.unselect();f(this,lt).clear();for(const t of e)t.isEmpty()||(f(this,lt).add(t),t.select());T(this,fe,Cs).call(this,{hasSelectedEditor:this.hasSelection})},xe(cc,"TRANSLATE_SMALL",1),xe(cc,"TRANSLATE_BIG",10);let il=cc;var an,nn,Ga,rn,la,yc,Ya,gh,hb;const Qi=class Qi{constructor(e){C(this,gh);C(this,an,"");C(this,nn,!1);C(this,Ga,null);C(this,rn,null);C(this,la,null);C(this,yc,!1);C(this,Ya,null);w(this,Ya,e)}static initialize(e){Qi._l10nPromise||(Qi._l10nPromise=e)}async render(){const e=w(this,Ga,document.createElement("button"));e.className="altText";const t=await Qi._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0";const i=f(this,Ya)._uiManager._signal;e.addEventListener("contextmenu",Xs,{signal:i}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const r=o=>{o.preventDefault(),f(this,Ya)._uiManager.editAltText(f(this,Ya))};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(w(this,yc,!0),r(o))},{signal:i}),await T(this,gh,hb).call(this),e}finish(){f(this,Ga)&&(f(this,Ga).focus({focusVisible:f(this,yc)}),w(this,yc,!1))}isEmpty(){return!f(this,an)&&!f(this,nn)}get data(){return{altText:f(this,an),decorative:f(this,nn)}}set data({altText:e,decorative:t}){f(this,an)===e&&f(this,nn)===t||(w(this,an,e),w(this,nn,t),T(this,gh,hb).call(this))}toggle(e=!1){f(this,Ga)&&(!e&&f(this,la)&&(clearTimeout(f(this,la)),w(this,la,null)),f(this,Ga).disabled=!e)}destroy(){var e;(e=f(this,Ga))==null||e.remove(),w(this,Ga,null),w(this,rn,null)}};an=new WeakMap,nn=new WeakMap,Ga=new WeakMap,rn=new WeakMap,la=new WeakMap,yc=new WeakMap,Ya=new WeakMap,gh=new WeakSet,hb=async function(){var r;const e=f(this,Ga);if(!e)return;if(!f(this,an)&&!f(this,nn)){e.classList.remove("done"),(r=f(this,rn))==null||r.remove();return}e.classList.add("done"),Qi._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(o=>{e.setAttribute("aria-label",o)});let t=f(this,rn);if(!t){w(this,rn,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip");const o=t.id=`alt-text-tooltip-${f(this,Ya).id}`;e.setAttribute("aria-describedby",o);const d=100,h=f(this,Ya)._uiManager._signal;h.addEventListener("abort",()=>{clearTimeout(f(this,la)),w(this,la,null)},{once:!0}),e.addEventListener("mouseenter",()=>{w(this,la,setTimeout(()=>{w(this,la,null),f(this,rn).classList.add("show"),f(this,Ya)._reportTelemetry({action:"alt_text_tooltip"})},d))},{signal:h}),e.addEventListener("mouseleave",()=>{var p;f(this,la)&&(clearTimeout(f(this,la)),w(this,la,null)),(p=f(this,rn))==null||p.classList.remove("show")},{signal:h})}t.innerText=f(this,nn)?await Qi._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):f(this,an),t.parentNode||e.append(t);const i=f(this,Ya).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},xe(Qi,"_l10nPromise",null);let Mp=Qi;var vo,Va,As,Ac,yo,cs,Ao,Ec,Sc,Es,xh,Eo,hr,bh,So,on,pi,_c,wc,Ca,vh,$p,$e,fb,yh,mb,pb,O_,L_,gb,xb,bb,I_,P_,U_,z_,vb,Rd;const bt=class bt{constructor(e){C(this,$e);C(this,vo,null);C(this,Va,null);C(this,As,null);C(this,Ac,!1);C(this,yo,!1);C(this,cs,null);C(this,Ao,null);C(this,Ec,this.focusin.bind(this));C(this,Sc,this.focusout.bind(this));C(this,Es,null);C(this,xh,"");C(this,Eo,!1);C(this,hr,null);C(this,bh,!1);C(this,So,!1);C(this,on,!1);C(this,pi,null);C(this,_c,0);C(this,wc,0);C(this,Ca,null);xe(this,"_initialOptions",Object.create(null));xe(this,"_isVisible",!0);xe(this,"_uiManager",null);xe(this,"_focusEventsAllowed",!0);xe(this,"_l10nPromise",null);C(this,vh,!1);C(this,$p,bt._zIndex++);this.constructor===bt&&mt("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:r,pageX:o,pageY:d}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[o,d];const[h,p]=this.parentDimensions;this.x=e.x/h,this.y=e.y/p,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=bt.prototype._resizeWithKeyboard,t=il.TRANSLATE_SMALL,i=il.TRANSLATE_BIG;return Ze(this,"_resizerKeyboardManager",new Tf([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],bt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Ze(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new fC({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,i){if(bt._l10nPromise||(bt._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(o=>[o,e.get(o.replaceAll(/([A-Z])/g,d=>`-${d.toLowerCase()}`))]))),i!=null&&i.strings)for(const o of i.strings)bt._l10nPromise.set(o,e.get(o));if(bt._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);bt._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){mt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return f(this,vh)}set _isDraggable(e){var t;w(this,vh,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=f(this,$p)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):T(this,$e,Rd).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(f(this,Eo)?w(this,Eo,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,r){const[o,d]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/o,this.y=(t+r)/d,this.fixAndSetPosition()}translate(e,t){T(this,$e,fb).call(this,this.parentDimensions,e,t)}translateInPage(e,t){f(this,hr)||w(this,hr,[this.x,this.y]),T(this,$e,fb).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){f(this,hr)||w(this,hr,[this.x,this.y]);const[i,r]=this.parentDimensions;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y:x}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,x)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:d}=this;const[h,p]=this.getBaseTranslation();o+=h,d+=p,this.div.style.left=`${(100*o).toFixed(2)}%`,this.div.style.top=`${(100*d).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!f(this,hr)&&(f(this,hr)[0]!==this.x||f(this,hr)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=bt,r=i/e,o=i/t;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:r,y:o,width:d,height:h}=this;if(d*=t,h*=i,r*=t,o*=i,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-d,r)),o=Math.max(0,Math.min(i-h,o));break;case 90:r=Math.max(0,Math.min(t-h,r)),o=Math.min(i,Math.max(d,o));break;case 180:r=Math.min(t,Math.max(d,r)),o=Math.min(i,Math.max(h,o));break;case 270:r=Math.min(t,Math.max(h,r)),o=Math.max(0,Math.min(i-d,o));break}this.x=r/=t,this.y=o/=i;const[p,m]=this.getBaseTranslation();r+=p,o+=m;const{style:x}=this.div;x.left=`${(100*r).toFixed(2)}%`,x.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return T(i=bt,yh,mb).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return T(i=bt,yh,mb).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this,r=t*e,o=i*e;return Vs.isCSSRoundSupported?[Math.round(r),Math.round(o)]:[r,o]}setDims(e,t){const[i,r]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,f(this,yo)||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,r=i.endsWith("%"),o=!f(this,yo)&&t.endsWith("%");if(r&&o)return;const[d,h]=this.parentDimensions;r||(e.width=`${(100*parseFloat(i)/d).toFixed(2)}%`),!f(this,yo)&&!o&&(e.height=`${(100*parseFloat(t)/h).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=f(this,As))==null||e.finish()}async addEditToolbar(){return f(this,Es)||f(this,So)?f(this,Es):(w(this,Es,new sb(this)),this.div.append(f(this,Es).render()),f(this,As)&&f(this,Es).addAltTextButton(await f(this,As).render()),f(this,Es))}removeEditToolbar(){var e;f(this,Es)&&(f(this,Es).remove(),w(this,Es,null),(e=f(this,As))==null||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){f(this,As)||(Mp.initialize(bt._l10nPromise),w(this,As,new Mp(this)),f(this,vo)&&(f(this,As).data=f(this,vo),w(this,vo,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=f(this,As))==null?void 0:e.data}set altTextData(e){f(this,As)&&(f(this,As).data=e)}hasAltText(){var e;return!((e=f(this,As))!=null&&e.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=f(this,Ac)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const e=this._uiManager._signal;this.div.addEventListener("focusin",f(this,Ec),{signal:e}),this.div.addEventListener("focusout",f(this,Sc),{signal:e});const[t,i]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*i/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/i).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),Rp(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Vs.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(w(this,Eo,!0),this._isDraggable){T(this,$e,I_).call(this,e);return}T(this,$e,bb).call(this,e)}moveInDOM(){f(this,pi)&&clearTimeout(f(this,pi)),w(this,pi,setTimeout(()=>{var e;w(this,pi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const r=this.parentScale,[o,d]=this.pageDimensions,[h,p]=this.pageTranslation,m=e/r,x=t/r,v=this.x*o,y=this.y*d,E=this.width*o,S=this.height*d;switch(i){case 0:return[v+m+h,d-y-x-S+p,v+m+E+h,d-y-x+p];case 90:return[v+x+h,d-y+m+p,v+x+S+h,d-y+m+E+p];case 180:return[v-m-E+h,d-y+x+p,v-m+h,d-y+x+S+p];case 270:return[v-x-S+h,d-y-m-E+p,v-x+h,d-y-m+p];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,r,o,d]=e,h=o-i,p=d-r;switch(this.rotation){case 0:return[i,t-d,h,p];case 90:return[i,t-r,p,h];case 180:return[o,t-r,h,p];case 270:return[o,t-d,p,h];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){w(this,So,!0)}disableEditMode(){w(this,So,!1)}isInEditMode(){return f(this,So)}shouldGetKeyboardEvents(){return f(this,on)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var t,i;const e=this._uiManager._signal;(t=this.div)==null||t.addEventListener("focusin",f(this,Ec),{signal:e}),(i=this.div)==null||i.addEventListener("focusout",f(this,Sc),{signal:e})}rotate(e){}serialize(e=!1,t=null){mt("An editor must be serializable")}static deserialize(e,t,i){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});r.rotation=e.rotation,w(r,vo,e.accessibilityData);const[o,d]=r.pageDimensions,[h,p,m,x]=r.getRectInCurrentCoords(e.rect,d);return r.x=h/o,r.y=p/d,r.width=m/o,r.height=x/d,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",f(this,Ec)),this.div.removeEventListener("focusout",f(this,Sc)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),f(this,pi)&&(clearTimeout(f(this,pi)),w(this,pi,null)),T(this,$e,Rd).call(this),this.removeEditToolbar(),f(this,Ca)){for(const e of f(this,Ca).values())clearTimeout(e);w(this,Ca,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(T(this,$e,O_).call(this),f(this,cs).classList.remove("hidden"),Rp(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),w(this,Ao,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=f(this,cs).children;if(!f(this,Va)){w(this,Va,Array.from(t));const d=T(this,$e,P_).bind(this),h=T(this,$e,U_).bind(this),p=this._uiManager._signal;for(const m of f(this,Va)){const x=m.getAttribute("data-resizer-name");m.setAttribute("role","spinbutton"),m.addEventListener("keydown",d,{signal:p}),m.addEventListener("blur",h,{signal:p}),m.addEventListener("focus",T(this,$e,z_).bind(this,x),{signal:p}),bt._l10nPromise.get(`pdfjs-editor-resizer-label-${x}`).then(v=>m.setAttribute("aria-label",v))}}const i=f(this,Va)[0];let r=0;for(const d of t){if(d===i)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(f(this,Va).length/4);if(o!==r){if(o<r)for(let h=0;h<r-o;h++)f(this,cs).append(f(this,cs).firstChild);else if(o>r)for(let h=0;h<o-r;h++)f(this,cs).firstChild.before(f(this,cs).lastChild);let d=0;for(const h of t){const m=f(this,Va)[d++].getAttribute("data-resizer-name");bt._l10nPromise.get(`pdfjs-editor-resizer-label-${m}`).then(x=>h.setAttribute("aria-label",x))}}T(this,$e,vb).call(this,0),w(this,on,!0),f(this,cs).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){f(this,on)&&T(this,$e,xb).call(this,f(this,xh),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){T(this,$e,Rd).call(this),this.div.focus()}select(){var e,t;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!f(this,Es)){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=f(this,Es))==null||r.show())});return}(t=f(this,Es))==null||t.show()}unselect(){var e,t,i,r;(e=f(this,cs))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=f(this,Es))==null||r.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return f(this,bh)}set isEditing(e){w(this,bh,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){w(this,yo,!0);const i=e/t,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){f(this,Ca)||w(this,Ca,new Map);const{action:i}=e;let r=f(this,Ca).get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),f(this,Ca).delete(i),f(this,Ca).size===0&&w(this,Ca,null)},bt._telemetryTimeout),f(this,Ca).set(i,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),w(this,Ac,!1)}disable(){this.div&&(this.div.tabIndex=-1),w(this,Ac,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};vo=new WeakMap,Va=new WeakMap,As=new WeakMap,Ac=new WeakMap,yo=new WeakMap,cs=new WeakMap,Ao=new WeakMap,Ec=new WeakMap,Sc=new WeakMap,Es=new WeakMap,xh=new WeakMap,Eo=new WeakMap,hr=new WeakMap,bh=new WeakMap,So=new WeakMap,on=new WeakMap,pi=new WeakMap,_c=new WeakMap,wc=new WeakMap,Ca=new WeakMap,vh=new WeakMap,$p=new WeakMap,$e=new WeakSet,fb=function([e,t],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/t,this.fixAndSetPosition()},yh=new WeakSet,mb=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},pb=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},O_=function(){if(f(this,cs))return;w(this,cs,document.createElement("div")),f(this,cs).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const r=document.createElement("div");f(this,cs).append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",T(this,$e,L_).bind(this,i),{signal:t}),r.addEventListener("contextmenu",Xs,{signal:t}),r.tabIndex=-1}this.div.prepend(f(this,cs))},L_=function(e,t){var _;t.preventDefault();const{isMac:i}=Vs.platform;if(t.button!==0||t.ctrlKey&&i)return;(_=f(this,As))==null||_.toggle(!1);const r=T(this,$e,xb).bind(this,e),o=this._isDraggable;this._isDraggable=!1;const d=this._uiManager._signal,h={passive:!0,capture:!0,signal:d};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",r,h),window.addEventListener("contextmenu",Xs,{signal:d});const p=this.x,m=this.y,x=this.width,v=this.height,y=this.parent.div.style.cursor,E=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const S=()=>{var j;this.parent.togglePointerEvents(!0),(j=f(this,As))==null||j.toggle(!0),this._isDraggable=o,window.removeEventListener("pointerup",S),window.removeEventListener("blur",S),window.removeEventListener("pointermove",r,h),window.removeEventListener("contextmenu",Xs),this.parent.div.style.cursor=y,this.div.style.cursor=E,T(this,$e,gb).call(this,p,m,x,v)};window.addEventListener("pointerup",S,{signal:d}),window.addEventListener("blur",S,{signal:d})},gb=function(e,t,i,r){const o=this.x,d=this.y,h=this.width,p=this.height;o===e&&d===t&&h===i&&p===r||this.addCommands({cmd:()=>{this.width=h,this.height=p,this.x=o,this.y=d;const[m,x]=this.parentDimensions;this.setDims(m*h,x*p),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=r,this.x=e,this.y=t;const[m,x]=this.parentDimensions;this.setDims(m*i,x*r),this.fixAndSetPosition()},mustExec:!0})},xb=function(e,t){const[i,r]=this.parentDimensions,o=this.x,d=this.y,h=this.width,p=this.height,m=bt.MIN_SIZE/i,x=bt.MIN_SIZE/r,v=Y=>Math.round(Y*1e4)/1e4,y=T(this,$e,pb).call(this,this.rotation),E=(Y,W)=>[y[0]*Y+y[2]*W,y[1]*Y+y[3]*W],S=T(this,$e,pb).call(this,360-this.rotation),_=(Y,W)=>[S[0]*Y+S[2]*W,S[1]*Y+S[3]*W];let j,R,L=!1,D=!1;switch(e){case"topLeft":L=!0,j=(Y,W)=>[0,0],R=(Y,W)=>[Y,W];break;case"topMiddle":j=(Y,W)=>[Y/2,0],R=(Y,W)=>[Y/2,W];break;case"topRight":L=!0,j=(Y,W)=>[Y,0],R=(Y,W)=>[0,W];break;case"middleRight":D=!0,j=(Y,W)=>[Y,W/2],R=(Y,W)=>[0,W/2];break;case"bottomRight":L=!0,j=(Y,W)=>[Y,W],R=(Y,W)=>[0,0];break;case"bottomMiddle":j=(Y,W)=>[Y/2,W],R=(Y,W)=>[Y/2,0];break;case"bottomLeft":L=!0,j=(Y,W)=>[0,W],R=(Y,W)=>[Y,0];break;case"middleLeft":D=!0,j=(Y,W)=>[0,W/2],R=(Y,W)=>[Y,W/2];break}const z=j(h,p),P=R(h,p);let H=E(...P);const se=v(o+H[0]),re=v(d+H[1]);let ne=1,ue=1,[J,ge]=this.screenToPageTranslation(t.movementX,t.movementY);if([J,ge]=_(J/i,ge/r),L){const Y=Math.hypot(h,p);ne=ue=Math.max(Math.min(Math.hypot(P[0]-z[0]-J,P[1]-z[1]-ge)/Y,1/h,1/p),m/h,x/p)}else D?ne=Math.max(m,Math.min(1,Math.abs(P[0]-z[0]-J)))/h:ue=Math.max(x,Math.min(1,Math.abs(P[1]-z[1]-ge)))/p;const Ce=v(h*ne),Ie=v(p*ue);H=E(...R(Ce,Ie));const ae=se-H[0],G=re-H[1];this.width=Ce,this.height=Ie,this.x=ae,this.y=G,this.setDims(i*Ce,r*Ie),this.fixAndSetPosition()},bb=function(e){const{isMac:t}=Vs.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},I_=function(e){const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let i,r;const o=this._uiManager._signal;t&&(this.div.classList.add("moving"),i={passive:!0,capture:!0,signal:o},w(this,_c,e.clientX),w(this,wc,e.clientY),r=h=>{const{clientX:p,clientY:m}=h,[x,v]=this.screenToPageTranslation(p-f(this,_c),m-f(this,wc));w(this,_c,p),w(this,wc,m),this._uiManager.dragSelectedEditors(x,v)},window.addEventListener("pointermove",r,i));const d=()=>{window.removeEventListener("pointerup",d),window.removeEventListener("blur",d),t&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",r,i)),w(this,Eo,!1),this._uiManager.endDragSession()||T(this,$e,bb).call(this,e)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})},P_=function(e){bt._resizerKeyboardManager.exec(this,e)},U_=function(e){var t;f(this,on)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==f(this,cs)&&T(this,$e,Rd).call(this)},z_=function(e){w(this,xh,f(this,on)?e:"")},vb=function(e){if(f(this,Va))for(const t of f(this,Va))t.tabIndex=e},Rd=function(){if(w(this,on,!1),T(this,$e,vb).call(this,-1),f(this,Ao)){const{savedX:e,savedY:t,savedWidth:i,savedHeight:r}=f(this,Ao);T(this,$e,gb).call(this,e,t,i,r),w(this,Ao,null)}},C(bt,yh),xe(bt,"_borderLineWidth",-1),xe(bt,"_colorManager",new rb),xe(bt,"_zIndex",1),xe(bt,"_telemetryTimeout",1e3);let ct=bt;class fC extends ct{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const PE=3285377520,Na=4294901760,li=65535;class F_{constructor(e){this.h1=e?e&4294967295:PE,this.h2=e?e&4294967295:PE}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let _=0,j=e.length;_<j;_++){const R=e.charCodeAt(_);R<=255?t[i++]=R:(t[i++]=R>>>8,t[i++]=R&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,o=i-r*4,d=new Uint32Array(t.buffer,0,r);let h=0,p=0,m=this.h1,x=this.h2;const v=3432918353,y=461845907,E=v&li,S=y&li;for(let _=0;_<r;_++)_&1?(h=d[_],h=h*v&Na|h*E&li,h=h<<15|h>>>17,h=h*y&Na|h*S&li,m^=h,m=m<<13|m>>>19,m=m*5+3864292196):(p=d[_],p=p*v&Na|p*E&li,p=p<<15|p>>>17,p=p*y&Na|p*S&li,x^=p,x=x<<13|x>>>19,x=x*5+3864292196);switch(h=0,o){case 3:h^=t[r*4+2]<<16;case 2:h^=t[r*4+1]<<8;case 1:h^=t[r*4],h=h*v&Na|h*E&li,h=h<<15|h>>>17,h=h*y&Na|h*S&li,r&1?m^=h:x^=h}this.h1=m,this.h2=x}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Na|e*36045&li,t=t*4283543511&Na|((t<<16|e>>>16)*2950163797&Na)>>>16,e^=t>>>1,e=e*444984403&Na|e*60499&li,t=t*3301882366&Na|((t<<16|e>>>16)*3120437893&Na)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const yb=Object.freeze({map:null,hash:"",transfer:void 0});var _o,us,Xp,B_;class _v{constructor(){C(this,Xp);C(this,_o,!1);C(this,us,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=f(this,us).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return f(this,us).get(e)}remove(e){if(f(this,us).delete(e),f(this,us).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of f(this,us).values())if(t instanceof ct)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=f(this,us).get(e);let r=!1;if(i!==void 0)for(const[o,d]of Object.entries(t))i[o]!==d&&(r=!0,i[o]=d);else r=!0,f(this,us).set(e,t);r&&T(this,Xp,B_).call(this),t instanceof ct&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return f(this,us).has(e)}getAll(){return f(this,us).size>0?xv(f(this,us)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return f(this,us).size}resetModified(){f(this,_o)&&(w(this,_o,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new H_(this)}get serializable(){if(f(this,us).size===0)return yb;const e=new Map,t=new F_,i=[],r=Object.create(null);let o=!1;for(const[d,h]of f(this,us)){const p=h instanceof ct?h.serialize(!1,r):h;p&&(e.set(d,p),t.update(`${d}:${JSON.stringify(p)}`),o||(o=!!p.bitmap))}if(o)for(const d of e.values())d.bitmap&&i.push(d.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:yb}get editorStats(){let e=null;const t=new Map;for(const i of f(this,us).values()){if(!(i instanceof ct))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:o}=r;t.has(o)||t.set(o,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const d=e[o]||(e[o]=new Map);for(const[h,p]of Object.entries(r)){if(h==="type")continue;let m=d.get(h);m||(m=new Map,d.set(h,m));const x=m.get(p)??0;m.set(p,x+1)}}for(const[i,r]of t)e[i]=r.computeTelemetryFinalData(e[i]);return e}}_o=new WeakMap,us=new WeakMap,Xp=new WeakSet,B_=function(){f(this,_o)||(w(this,_o,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Ah;class H_ extends _v{constructor(t){super();C(this,Ah);const{map:i,hash:r,transfer:o}=t.serializable,d=structuredClone(i,o?{transfer:o}:null);w(this,Ah,{map:d,hash:r,transfer:o})}get print(){mt("Should not call PrintAnnotationStorage.print")}get serializable(){return f(this,Ah)}}Ah=new WeakMap;var Nc;class mC{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){C(this,Nc,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),f(this,Nc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||f(this,Nc).has(e.loadedName))){if(Qt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:o}=e,d=new FontFace(i,r,o);this.addNativeFontFace(d);try{await d.load(),f(this,Nc).add(i),t==null||t(e)}catch{Ge(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(d)}return}mt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw Ge(`Failed to load font '${i.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Ze(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Ss||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Ze(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Qt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const o=i.shift();setTimeout(o.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:t,callback:e};return i.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ze(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(z,P){return z.charCodeAt(P)<<24|z.charCodeAt(P+1)<<16|z.charCodeAt(P+2)<<8|z.charCodeAt(P+3)&255}function r(z,P,H,se){const re=z.substring(0,P),ne=z.substring(P+H);return re+se+ne}let o,d;const h=this._document.createElement("canvas");h.width=1,h.height=1;const p=h.getContext("2d");let m=0;function x(z,P){if(++m>30){Ge("Load test font never loaded."),P();return}if(p.font="30px "+z,p.fillText(".",0,20),p.getImageData(0,0,1,1).data[3]>0){P();return}setTimeout(x.bind(null,z,P))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=r(y,976,v.length,v);const S=16,_=1482184792;let j=i(y,S);for(o=0,d=v.length-3;o<d;o+=4)j=j-_+i(v,o)|0;o<v.length&&(j=j-_+i(v+"XXX",o)|0),y=r(y,S,4,WT(j));const R=`url(data:font/opentype;base64,${btoa(y)});`,L=`@font-face {font-family:"${v}";src:${R}}`;this.insertRule(L);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const z of[e.loadedName,v]){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=z,D.append(P)}this._document.body.append(D),x(v,()=>{D.remove(),t.complete()})}}Nc=new WeakMap;class pC{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=c_(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let o=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(o+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${o}src:${t}}`}return(r=this._inspectFont)==null||r.call(this,this,t),i}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(o){Ge(`getPathGenerator - ignoring character: "${o}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[t]=function(o,d){};const r=[];for(let o=0,d=i.length;o<d;)switch(i[o++]){case Vi.BEZIER_CURVE_TO:{const[h,p,m,x,v,y]=i.slice(o,o+6);r.push(E=>E.bezierCurveTo(h,p,m,x,v,y)),o+=6}break;case Vi.MOVE_TO:{const[h,p]=i.slice(o,o+2);r.push(m=>m.moveTo(h,p)),o+=2}break;case Vi.LINE_TO:{const[h,p]=i.slice(o,o+2);r.push(m=>m.lineTo(h,p)),o+=2}break;case Vi.QUADRATIC_CURVE_TO:{const[h,p,m,x]=i.slice(o,o+4);r.push(v=>v.quadraticCurveTo(h,p,m,x)),o+=4}break;case Vi.RESTORE:r.push(h=>h.restore());break;case Vi.SAVE:r.push(h=>h.save());break;case Vi.SCALE:Qt(r.length===2,"Scale command is only valid at the third position.");break;case Vi.TRANSFORM:{const[h,p,m,x,v,y]=i.slice(o,o+6);r.push(E=>E.transform(h,p,m,x,v,y)),o+=6}break;case Vi.TRANSLATE:{const[h,p]=i.slice(o,o+2);r.push(m=>m.translate(h,p)),o+=2}break}return this.compiledGlyphs[t]=function(d,h){r[0](d),r[1](d),d.scale(h,-h);for(let p=2,m=r.length;p<m;p++)r[p](d)}}}if(Ss){var Ab=Promise.withResolvers(),Bd=null;(async()=>{const e=await Xm(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Xm(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Xm(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await Xm(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let o,d;return new Map(Object.entries({fs:e,http:t,https:i,url:r,canvas:o,path2d:d}))})().then(e=>{Bd=e,Ab.resolve()},e=>{Ge(`loadPackages: ${e}`),Bd=new Map,Ab.resolve()})}class Ci{static get promise(){return Ab.promise}static get(e){return Bd==null?void 0:Bd.get(e)}}const q_=function(c){return Ci.get("fs").promises.readFile(c).then(t=>new Uint8Array(t))};class gC extends ug{}class xC extends jp{_createCanvas(e,t){return Ci.get("canvas").createCanvas(e,t)}}class bC extends dg{_fetchData(e,t){return q_(e).then(i=>({cMapData:i,compressionType:t}))}}class vC extends hg{_fetchData(e){return q_(e)}}const ks={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Eb(c,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,i),c.clip(r)}class Cf{constructor(){this.constructor===Cf&&mt("Cannot initialize BaseShadingPattern.")}getPattern(){mt("Abstract method `getPattern` called.")}}class yC extends Cf{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,r){let o;if(r===ks.STROKE||r===ks.FILL){const d=t.current.getClippedPathBoundingBox(r,Tt(e))||[0,0,0,0],h=Math.ceil(d[2]-d[0])||1,p=Math.ceil(d[3]-d[1])||1,m=t.cachedCanvases.getCanvas("pattern",h,p,!0),x=m.context;x.clearRect(0,0,x.canvas.width,x.canvas.height),x.beginPath(),x.rect(0,0,x.canvas.width,x.canvas.height),x.translate(-d[0],-d[1]),i=Ae.transform(i,[1,0,0,1,d[0],d[1]]),x.transform(...t.baseTransform),this.matrix&&x.transform(...this.matrix),Eb(x,this._bbox),x.fillStyle=this._createGradient(x),x.fill(),o=e.createPattern(m.canvas,"no-repeat");const v=new DOMMatrix(i);o.setTransform(v)}else Eb(e,this._bbox),o=this._createGradient(e);return o}}function Fx(c,e,t,i,r,o,d,h){const p=e.coords,m=e.colors,x=c.data,v=c.width*4;let y;p[t+1]>p[i+1]&&(y=t,t=i,i=y,y=o,o=d,d=y),p[i+1]>p[r+1]&&(y=i,i=r,r=y,y=d,d=h,h=y),p[t+1]>p[i+1]&&(y=t,t=i,i=y,y=o,o=d,d=y);const E=(p[t]+e.offsetX)*e.scaleX,S=(p[t+1]+e.offsetY)*e.scaleY,_=(p[i]+e.offsetX)*e.scaleX,j=(p[i+1]+e.offsetY)*e.scaleY,R=(p[r]+e.offsetX)*e.scaleX,L=(p[r+1]+e.offsetY)*e.scaleY;if(S>=L)return;const D=m[o],z=m[o+1],P=m[o+2],H=m[d],se=m[d+1],re=m[d+2],ne=m[h],ue=m[h+1],J=m[h+2],ge=Math.round(S),Ce=Math.round(L);let Ie,ae,G,Y,W,oe,M,k;for(let Q=ge;Q<=Ce;Q++){if(Q<j){const Me=Q<S?0:(S-Q)/(S-j);Ie=E-(E-_)*Me,ae=D-(D-H)*Me,G=z-(z-se)*Me,Y=P-(P-re)*Me}else{let Me;Q>L?Me=1:j===L?Me=0:Me=(j-Q)/(j-L),Ie=_-(_-R)*Me,ae=H-(H-ne)*Me,G=se-(se-ue)*Me,Y=re-(re-J)*Me}let q;Q<S?q=0:Q>L?q=1:q=(S-Q)/(S-L),W=E-(E-R)*q,oe=D-(D-ne)*q,M=z-(z-ue)*q,k=P-(P-J)*q;const ee=Math.round(Math.min(Ie,W)),le=Math.round(Math.max(Ie,W));let pe=v*Q+ee*4;for(let Me=ee;Me<=le;Me++)q=(Ie-Me)/(Ie-W),q<0?q=0:q>1&&(q=1),x[pe++]=ae-(ae-oe)*q|0,x[pe++]=G-(G-M)*q|0,x[pe++]=Y-(Y-k)*q|0,x[pe++]=255}}function AC(c,e,t){const i=e.coords,r=e.colors;let o,d;switch(e.type){case"lattice":const h=e.verticesPerRow,p=Math.floor(i.length/h)-1,m=h-1;for(o=0;o<p;o++){let x=o*h;for(let v=0;v<m;v++,x++)Fx(c,t,i[x],i[x+1],i[x+h],r[x],r[x+1],r[x+h]),Fx(c,t,i[x+h+1],i[x+1],i[x+h],r[x+h+1],r[x+1],r[x+h])}break;case"triangles":for(o=0,d=i.length;o<d;o+=3)Fx(c,t,i[o],i[o+1],i[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class EC extends Cf{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const h=Math.floor(this._bounds[0]),p=Math.floor(this._bounds[1]),m=Math.ceil(this._bounds[2])-h,x=Math.ceil(this._bounds[3])-p,v=Math.min(Math.ceil(Math.abs(m*e[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(x*e[1]*1.1)),3e3),E=m/v,S=x/y,_={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-p,scaleX:1/E,scaleY:1/S},j=v+4,R=y+4,L=i.getCanvas("mesh",j,R,!1),D=L.context,z=D.createImageData(v,y);if(t){const H=z.data;for(let se=0,re=H.length;se<re;se+=4)H[se]=t[0],H[se+1]=t[1],H[se+2]=t[2],H[se+3]=255}for(const H of this._figures)AC(z,H,_);return D.putImageData(z,2,2),{canvas:L.canvas,offsetX:h-2*E,offsetY:p-2*S,scaleX:E,scaleY:S}}getPattern(e,t,i,r){Eb(e,this._bbox);let o;if(r===ks.SHADING)o=Ae.singularValueDecompose2dScale(Tt(e));else if(o=Ae.singularValueDecompose2dScale(t.baseTransform),this.matrix){const h=Ae.singularValueDecompose2dScale(this.matrix);o=[o[0]*h[0],o[1]*h[1]]}const d=this._createMeshCanvas(o,r===ks.SHADING?null:this._background,t.cachedCanvases);return r!==ks.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(d.offsetX,d.offsetY),e.scale(d.scaleX,d.scaleY),e.createPattern(d.canvas,"no-repeat")}}class SC extends Cf{getPattern(){return"hotpink"}}function _C(c){switch(c[0]){case"RadialAxial":return new yC(c);case"Mesh":return new EC(c);case"Dummy":return new SC}throw new Error(`Unknown IR type: ${c[0]}`)}const UE={COLORED:1,UNCOLORED:2},Qp=class Qp{constructor(e,t,i,r,o){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=o}createPatternCanvas(e){const t=this.operatorList,i=this.bbox,r=this.xstep,o=this.ystep,d=this.paintType,h=this.tilingType,p=this.color,m=this.canvasGraphicsFactory;og("TilingType: "+h);const x=i[0],v=i[1],y=i[2],E=i[3],S=Ae.singularValueDecompose2dScale(this.matrix),_=Ae.singularValueDecompose2dScale(this.baseTransform),j=[S[0]*_[0],S[1]*_[1]],R=this.getSizeAndScale(r,this.ctx.canvas.width,j[0]),L=this.getSizeAndScale(o,this.ctx.canvas.height,j[1]),D=e.cachedCanvases.getCanvas("pattern",R.size,L.size,!0),z=D.context,P=m.createCanvasGraphics(z);P.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(P,d,p);let H=x,se=v,re=y,ne=E;return x<0&&(H=0,re+=Math.abs(x)),v<0&&(se=0,ne+=Math.abs(v)),z.translate(-(R.scale*H),-(L.scale*se)),P.transform(R.scale,0,0,L.scale,0,0),z.save(),this.clipBbox(P,H,se,re,ne),P.baseTransform=Tt(P.ctx),P.executeOperatorList(t),P.endDrawing(),{canvas:D.canvas,scaleX:R.scale,scaleY:L.scale,offsetX:H,offsetY:se}}getSizeAndScale(e,t,i){e=Math.abs(e);const r=Math.max(Qp.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*i);return o>=r?o=r:i=o/e,{scale:i,size:o}}clipBbox(e,t,i,r,o){const d=r-t,h=o-i;e.ctx.rect(t,i,d,h),e.current.updateRectMinMax(Tt(e.ctx),[t,i,r,o]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const r=e.ctx,o=e.current;switch(t){case UE.COLORED:const d=this.ctx;r.fillStyle=d.fillStyle,r.strokeStyle=d.strokeStyle,o.fillColor=d.fillStyle,o.strokeColor=d.strokeStyle;break;case UE.UNCOLORED:const h=Ae.makeHexColor(i[0],i[1],i[2]);r.fillStyle=h,r.strokeStyle=h,o.fillColor=h,o.strokeColor=h;break;default:throw new KT(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,r){let o=i;r!==ks.SHADING&&(o=Ae.transform(o,t.baseTransform),this.matrix&&(o=Ae.transform(o,this.matrix)));const d=this.createPatternCanvas(t);let h=new DOMMatrix(o);h=h.translate(d.offsetX,d.offsetY),h=h.scale(1/d.scaleX,1/d.scaleY);const p=e.createPattern(d.canvas,"repeat");return p.setTransform(h),p}};xe(Qp,"MAX_PATTERN_SIZE",3e3);let Sb=Qp;function wC({src:c,srcPos:e=0,dest:t,width:i,height:r,nonBlackColor:o=4294967295,inverseDecode:d=!1}){const h=Vs.isLittleEndian?4278190080:255,[p,m]=d?[o,h]:[h,o],x=i>>3,v=i&7,y=c.length;t=new Uint32Array(t.buffer);let E=0;for(let S=0;S<r;S++){for(const j=e+x;e<j;e++){const R=e<y?c[e]:255;t[E++]=R&128?m:p,t[E++]=R&64?m:p,t[E++]=R&32?m:p,t[E++]=R&16?m:p,t[E++]=R&8?m:p,t[E++]=R&4?m:p,t[E++]=R&2?m:p,t[E++]=R&1?m:p}if(v===0)continue;const _=e<y?c[e++]:255;for(let j=0;j<v;j++)t[E++]=_&1<<7-j?m:p}return{srcPos:e,destPos:E}}const zE=16,FE=100,NC=15,BE=10,HE=1e3,qs=16;function TC(c,e){if(c._removeMirroring)throw new Error("Context is already forwarding operations.");c.__originalSave=c.save,c.__originalRestore=c.restore,c.__originalRotate=c.rotate,c.__originalScale=c.scale,c.__originalTranslate=c.translate,c.__originalTransform=c.transform,c.__originalSetTransform=c.setTransform,c.__originalResetTransform=c.resetTransform,c.__originalClip=c.clip,c.__originalMoveTo=c.moveTo,c.__originalLineTo=c.lineTo,c.__originalBezierCurveTo=c.bezierCurveTo,c.__originalRect=c.rect,c.__originalClosePath=c.closePath,c.__originalBeginPath=c.beginPath,c._removeMirroring=()=>{c.save=c.__originalSave,c.restore=c.__originalRestore,c.rotate=c.__originalRotate,c.scale=c.__originalScale,c.translate=c.__originalTranslate,c.transform=c.__originalTransform,c.setTransform=c.__originalSetTransform,c.resetTransform=c.__originalResetTransform,c.clip=c.__originalClip,c.moveTo=c.__originalMoveTo,c.lineTo=c.__originalLineTo,c.bezierCurveTo=c.__originalBezierCurveTo,c.rect=c.__originalRect,c.closePath=c.__originalClosePath,c.beginPath=c.__originalBeginPath,delete c._removeMirroring},c.save=function(){e.save(),this.__originalSave()},c.restore=function(){e.restore(),this.__originalRestore()},c.translate=function(i,r){e.translate(i,r),this.__originalTranslate(i,r)},c.scale=function(i,r){e.scale(i,r),this.__originalScale(i,r)},c.transform=function(i,r,o,d,h,p){e.transform(i,r,o,d,h,p),this.__originalTransform(i,r,o,d,h,p)},c.setTransform=function(i,r,o,d,h,p){e.setTransform(i,r,o,d,h,p),this.__originalSetTransform(i,r,o,d,h,p)},c.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},c.rotate=function(i){e.rotate(i),this.__originalRotate(i)},c.clip=function(i){e.clip(i),this.__originalClip(i)},c.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},c.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},c.bezierCurveTo=function(t,i,r,o,d,h){e.bezierCurveTo(t,i,r,o,d,h),this.__originalBezierCurveTo(t,i,r,o,d,h)},c.rect=function(t,i,r,o){e.rect(t,i,r,o),this.__originalRect(t,i,r,o)},c.closePath=function(){e.closePath(),this.__originalClosePath()},c.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class CC{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,i)):(r=this.canvasFactory.create(t,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Qm(c,e,t,i,r,o,d,h,p,m){const[x,v,y,E,S,_]=Tt(c);if(v===0&&y===0){const L=d*x+S,D=Math.round(L),z=h*E+_,P=Math.round(z),H=(d+p)*x+S,se=Math.abs(Math.round(H)-D)||1,re=(h+m)*E+_,ne=Math.abs(Math.round(re)-P)||1;return c.setTransform(Math.sign(x),0,0,Math.sign(E),D,P),c.drawImage(e,t,i,r,o,0,0,se,ne),c.setTransform(x,v,y,E,S,_),[se,ne]}if(x===0&&E===0){const L=h*y+S,D=Math.round(L),z=d*v+_,P=Math.round(z),H=(h+m)*y+S,se=Math.abs(Math.round(H)-D)||1,re=(d+p)*v+_,ne=Math.abs(Math.round(re)-P)||1;return c.setTransform(0,Math.sign(v),Math.sign(y),0,D,P),c.drawImage(e,t,i,r,o,0,0,ne,se),c.setTransform(x,v,y,E,S,_),[ne,se]}c.drawImage(e,t,i,r,o,d,h,p,m);const j=Math.hypot(x,v),R=Math.hypot(y,E);return[j*p,R*m]}function jC(c){const{width:e,height:t}=c;if(e>HE||t>HE)return null;const i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=e+1;let d=new Uint8Array(o*(t+1)),h,p,m;const x=e+7&-8;let v=new Uint8Array(x*t),y=0;for(const R of c.data){let L=128;for(;L>0;)v[y++]=R&L?0:255,L>>=1}let E=0;for(y=0,v[y]!==0&&(d[0]=1,++E),p=1;p<e;p++)v[y]!==v[y+1]&&(d[p]=v[y]?2:1,++E),y++;for(v[y]!==0&&(d[p]=2,++E),h=1;h<t;h++){y=h*x,m=h*o,v[y-x]!==v[y]&&(d[m]=v[y]?1:8,++E);let R=(v[y]?4:0)+(v[y-x]?8:0);for(p=1;p<e;p++)R=(R>>2)+(v[y+1]?4:0)+(v[y-x+1]?8:0),r[R]&&(d[m+p]=r[R],++E),y++;if(v[y-x]!==v[y]&&(d[m+p]=v[y]?2:4,++E),E>i)return null}for(y=x*(t-1),m=h*o,v[y]!==0&&(d[m]=8,++E),p=1;p<e;p++)v[y]!==v[y+1]&&(d[m+p]=v[y]?4:8,++E),y++;if(v[y]!==0&&(d[m+p]=4,++E),E>i)return null;const S=new Int32Array([0,o,-1,0,-o,0,0,0,1]),_=new Path2D;for(h=0;E&&h<=t;h++){let R=h*o;const L=R+e;for(;R<L&&!d[R];)R++;if(R===L)continue;_.moveTo(R%o,h);const D=R;let z=d[R];do{const P=S[z];do R+=P;while(!d[R]);const H=d[R];H!==5&&H!==10?(z=H,d[R]=0):(z=H&51*z>>4,d[R]&=z>>2|z<<2),_.lineTo(R%o,R/o|0),d[R]||--E}while(D!==R);--h}return v=null,d=null,function(R){R.save(),R.scale(1/e,-1/t),R.translate(0,-t),R.fill(_),R.beginPath(),R.restore()}}class qE{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o_,this.textMatrixScale=1,this.fontMatrix=Qx,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=bs.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=Ae.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=Ae.applyTransform(t,e),r=Ae.applyTransform(t.slice(2),e),o=Ae.applyTransform([t[0],t[3]],e),d=Ae.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],r[0],o[0],d[0]),this.minY=Math.min(this.minY,i[1],r[1],o[1],d[1]),this.maxX=Math.max(this.maxX,i[0],r[0],o[0],d[0]),this.maxY=Math.max(this.maxY,i[1],r[1],o[1],d[1])}updateScalingPathMinMax(e,t){Ae.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,r,o,d,h,p,m,x){const v=Ae.bezierBoundingBox(t,i,r,o,d,h,p,m,x);x||this.updateRectMinMax(e,v)}getPathBoundingBox(e=ks.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===ks.STROKE){t||mt("Stroke bounding box must include transform.");const r=Ae.singularValueDecompose2dScale(t),o=r[0]*this.lineWidth/2,d=r[1]*this.lineWidth/2;i[0]-=o,i[1]-=d,i[2]+=o,i[3]+=d}return i}updateClipFromPath(){const e=Ae.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=ks.FILL,t=null){return Ae.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function GE(c,e){if(typeof ImageData<"u"&&e instanceof ImageData){c.putImageData(e,0,0);return}const t=e.height,i=e.width,r=t%qs,o=(t-r)/qs,d=r===0?o:o+1,h=c.createImageData(i,qs);let p=0,m;const x=e.data,v=h.data;let y,E,S,_;if(e.kind===sp.GRAYSCALE_1BPP){const j=x.byteLength,R=new Uint32Array(v.buffer,0,v.byteLength>>2),L=R.length,D=i+7>>3,z=4294967295,P=Vs.isLittleEndian?4278190080:255;for(y=0;y<d;y++){for(S=y<o?qs:r,m=0,E=0;E<S;E++){const H=j-p;let se=0;const re=H>D?i:H*8-7,ne=re&-8;let ue=0,J=0;for(;se<ne;se+=8)J=x[p++],R[m++]=J&128?z:P,R[m++]=J&64?z:P,R[m++]=J&32?z:P,R[m++]=J&16?z:P,R[m++]=J&8?z:P,R[m++]=J&4?z:P,R[m++]=J&2?z:P,R[m++]=J&1?z:P;for(;se<re;se++)ue===0&&(J=x[p++],ue=128),R[m++]=J&ue?z:P,ue>>=1}for(;m<L;)R[m++]=0;c.putImageData(h,0,y*qs)}}else if(e.kind===sp.RGBA_32BPP){for(E=0,_=i*qs*4,y=0;y<o;y++)v.set(x.subarray(p,p+_)),p+=_,c.putImageData(h,0,E),E+=qs;y<d&&(_=i*r*4,v.set(x.subarray(p,p+_)),c.putImageData(h,0,E))}else if(e.kind===sp.RGB_24BPP)for(S=qs,_=i*S,y=0;y<d;y++){for(y>=o&&(S=r,_=i*S),m=0,E=_;E--;)v[m++]=x[p++],v[m++]=x[p++],v[m++]=x[p++],v[m++]=255;c.putImageData(h,0,y*qs)}else throw new Error(`bad image kind: ${e.kind}`)}function YE(c,e){if(e.bitmap){c.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,r=t%qs,o=(t-r)/qs,d=r===0?o:o+1,h=c.createImageData(i,qs);let p=0;const m=e.data,x=h.data;for(let v=0;v<d;v++){const y=v<o?qs:r;({srcPos:p}=wC({src:m,srcPos:p,dest:x,width:i,height:y,nonBlackColor:0})),c.putImageData(h,0,v*qs)}}function Ad(c,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)c[i]!==void 0&&(e[i]=c[i]);c.setLineDash!==void 0&&(e.setLineDash(c.getLineDash()),e.lineDashOffset=c.lineDashOffset)}function Km(c){if(c.strokeStyle=c.fillStyle="#000000",c.fillRule="nonzero",c.globalAlpha=1,c.lineWidth=1,c.lineCap="butt",c.lineJoin="miter",c.miterLimit=10,c.globalCompositeOperation="source-over",c.font="10px sans-serif",c.setLineDash!==void 0&&(c.setLineDash([]),c.lineDashOffset=0),!Ss){const{filter:e}=c;e!=="none"&&e!==""&&(c.filter="none")}}function VE(c,e){if(e)return!0;const t=Ae.singularValueDecompose2dScale(c);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*Rr.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const RC=["butt","round","square"],MC=["miter","round","bevel"],kC={},$E={};var Or,_b,wb;const Bv=class Bv{constructor(e,t,i,r,o,{optionalContentConfig:d,markedContentStack:h=null},p,m){C(this,Or);this.ctx=e,this.current=new qE(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=d,this.cachedCanvases=new CC(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=p,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=m,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:r=null}){const o=this.ctx.canvas.width,d=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,d),this.ctx.fillStyle=h,i){const p=this.cachedCanvases.getCanvas("transparent",o,d);this.compositeCtx=this.ctx,this.transparentCanvas=p.canvas,this.ctx=p.context,this.ctx.save(),this.ctx.transform(...Tt(this.compositeCtx))}this.ctx.save(),Km(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Tt(this.ctx)}executeOperatorList(e,t,i,r){const o=e.argsArray,d=e.fnArray;let h=t||0;const p=o.length;if(p===h)return h;const m=p-h>BE&&typeof i=="function",x=m?Date.now()+NC:0;let v=0;const y=this.commonObjs,E=this.objs;let S;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,i),h;if(S=d[h],S!==Ba.dependency)this[S].apply(this,o[h]);else for(const _ of o[h]){const j=_.startsWith("g_")?y:E;if(!j.has(_))return j.get(_,i),h}if(h++,h===p)return h;if(m&&++v>BE){if(Date.now()>x)return i(),h;v=0}}}endDrawing(){T(this,Or,_b).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),T(this,Or,wb).call(this)}_scaleImage(e,t){const i=e.width,r=e.height;let o=Math.max(Math.hypot(t[0],t[1]),1),d=Math.max(Math.hypot(t[2],t[3]),1),h=i,p=r,m="prescale1",x,v;for(;o>2&&h>1||d>2&&p>1;){let y=h,E=p;o>2&&h>1&&(y=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),o/=h/y),d>2&&p>1&&(E=p>=16384?Math.floor(p/2)-1||1:Math.ceil(p)/2,d/=p/E),x=this.cachedCanvases.getCanvas(m,y,E),v=x.context,v.clearRect(0,0,y,E),v.drawImage(e,0,0,h,p,0,0,y,E),e=x.canvas,h=y,p=E,m=m==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:h,paintHeight:p}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:r}=e,o=this.current.fillColor,d=this.current.patternFill,h=Tt(t);let p,m,x,v;if((e.bitmap||e.data)&&e.count>1){const re=e.bitmap||e.data.buffer;m=JSON.stringify(d?h:[h.slice(0,4),o]),p=this._cachedBitmapsMap.get(re),p||(p=new Map,this._cachedBitmapsMap.set(re,p));const ne=p.get(m);if(ne&&!d){const ue=Math.round(Math.min(h[0],h[2])+h[4]),J=Math.round(Math.min(h[1],h[3])+h[5]);return{canvas:ne,offsetX:ue,offsetY:J}}x=ne}x||(v=this.cachedCanvases.getCanvas("maskCanvas",i,r),YE(v.context,e));let y=Ae.transform(h,[1/i,0,0,-1/r,0,0]);y=Ae.transform(y,[1,0,0,1,0,-r]);const[E,S,_,j]=Ae.getAxialAlignedBoundingBox([0,0,i,r],y),R=Math.round(_-E)||1,L=Math.round(j-S)||1,D=this.cachedCanvases.getCanvas("fillCanvas",R,L),z=D.context,P=E,H=S;z.translate(-P,-H),z.transform(...y),x||(x=this._scaleImage(v.canvas,$i(z)),x=x.img,p&&d&&p.set(m,x)),z.imageSmoothingEnabled=VE(Tt(z),e.interpolate),Qm(z,x,0,0,x.width,x.height,0,0,i,r),z.globalCompositeOperation="source-in";const se=Ae.transform($i(z),[1,0,0,1,-P,-H]);return z.fillStyle=d?o.getPattern(t,this,se,ks.FILL):o,z.fillRect(0,0,i,r),p&&!d&&(this.cachedCanvases.delete("fillCanvas"),p.set(m,D.canvas)),{canvas:D.canvas,offsetX:Math.round(P),offsetY:Math.round(H)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=RC[e]}setLineJoin(e){this.ctx.lineJoin=MC[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const o=this.ctx;o.setTransform(...Tt(this.suspendedCtx)),Ad(this.suspendedCtx,o),TC(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ad(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,r){const o=r[0],d=r[1],h=r[2]-o,p=r[3]-d;h===0||p===0||(this.genericComposeSMask(t.context,i,h,p,t.subtype,t.backdrop,t.transferMap,o,d,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,r,o,d,h,p,m,x,v){let y=e.canvas,E=p-x,S=m-v;if(d){if(E<0||S<0||E+i>y.width||S+r>y.height){const j=this.cachedCanvases.getCanvas("maskExtension",i,r),R=j.context;R.drawImage(y,-E,-S),d.some(L=>L!==0)&&(R.globalCompositeOperation="destination-atop",R.fillStyle=Ae.makeHexColor(...d),R.fillRect(0,0,i,r),R.globalCompositeOperation="source-over"),y=j.canvas,E=S=0}else if(d.some(j=>j!==0)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const j=new Path2D;j.rect(E,S,i,r),e.clip(j),e.globalCompositeOperation="destination-atop",e.fillStyle=Ae.makeHexColor(...d),e.fillRect(E,S,i,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&h?t.filter=this.filterFactory.addAlphaFilter(h):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(h));const _=new Path2D;_.rect(p,m,i,r),t.clip(_),t.globalCompositeOperation="destination-in",t.drawImage(y,E,S,i,r,p,m,i,r),t.restore()}save(){this.inSMaskMode?(Ad(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Ad(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,r,o,d){this.ctx.transform(e,t,i,r,o,d),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const r=this.ctx,o=this.current;let d=o.x,h=o.y,p,m;const x=Tt(r),v=x[0]===0&&x[3]===0||x[1]===0&&x[2]===0,y=v?i.slice(0):null;for(let E=0,S=0,_=e.length;E<_;E++)switch(e[E]|0){case Ba.rectangle:d=t[S++],h=t[S++];const j=t[S++],R=t[S++],L=d+j,D=h+R;r.moveTo(d,h),j===0||R===0?r.lineTo(L,D):(r.lineTo(L,h),r.lineTo(L,D),r.lineTo(d,D)),v||o.updateRectMinMax(x,[d,h,L,D]),r.closePath();break;case Ba.moveTo:d=t[S++],h=t[S++],r.moveTo(d,h),v||o.updatePathMinMax(x,d,h);break;case Ba.lineTo:d=t[S++],h=t[S++],r.lineTo(d,h),v||o.updatePathMinMax(x,d,h);break;case Ba.curveTo:p=d,m=h,d=t[S+4],h=t[S+5],r.bezierCurveTo(t[S],t[S+1],t[S+2],t[S+3],d,h),o.updateCurvePathMinMax(x,p,m,t[S],t[S+1],t[S+2],t[S+3],d,h,y),S+=6;break;case Ba.curveTo2:p=d,m=h,r.bezierCurveTo(d,h,t[S],t[S+1],t[S+2],t[S+3]),o.updateCurvePathMinMax(x,p,m,d,h,t[S],t[S+1],t[S+2],t[S+3],y),d=t[S+2],h=t[S+3],S+=4;break;case Ba.curveTo3:p=d,m=h,d=t[S+2],h=t[S+3],r.bezierCurveTo(t[S],t[S+1],d,h,d,h),o.updateCurvePathMinMax(x,p,m,t[S],t[S+1],d,h,d,h,y),S+=4;break;case Ba.closePath:r.closePath();break}v&&o.updateScalingPathMinMax(x,y),o.setCurrentPoint(d,h)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,$i(t),ks.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let o=!1;r&&(t.save(),t.fillStyle=i.getPattern(t,this,$i(t),ks.FILL),o=!0);const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),o&&t.restore(),e&&this.consumePath(d)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=kC}eoClip(){this.pendingClip=$E}beginText(){this.current.textMatrix=o_,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var x;const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||Qx,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Ge("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const o=i.loadedName||"sans-serif",d=((x=i.systemFontInfo)==null?void 0:x.css)||`"${o}", ${i.fallbackName}`;let h="normal";i.black?h="900":i.bold&&(h="bold");const p=i.italic?"italic":"normal";let m=t;t<zE?m=zE:t>FE&&(m=FE),this.current.fontSizeScale=t/m,this.ctx.font=`${p} ${h} ${m}px ${d}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,r,o,d){this.current.textMatrix=[e,t,i,r,o,d],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,r){const o=this.ctx,d=this.current,h=d.font,p=d.textRenderingMode,m=d.fontSize/d.fontSizeScale,x=p&bs.FILL_STROKE_MASK,v=!!(p&bs.ADD_TO_PATH_FLAG),y=d.patternFill&&!h.missingFile;let E;(h.disableFontFace||v||y)&&(E=h.getPathGenerator(this.commonObjs,e)),h.disableFontFace||y?(o.save(),o.translate(t,i),o.beginPath(),E(o,m),r&&o.setTransform(...r),(x===bs.FILL||x===bs.FILL_STROKE)&&o.fill(),(x===bs.STROKE||x===bs.FILL_STROKE)&&o.stroke(),o.restore()):((x===bs.FILL||x===bs.FILL_STROKE)&&o.fillText(e,t,i),(x===bs.STROKE||x===bs.FILL_STROKE)&&o.strokeText(e,t,i)),v&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Tt(o),x:t,y:i,fontSize:m,addToPath:E})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){i=!0;break}return Ze(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const o=this.ctx,d=t.fontSizeScale,h=t.charSpacing,p=t.wordSpacing,m=t.fontDirection,x=t.textHScale*m,v=e.length,y=i.vertical,E=y?1:-1,S=i.defaultVMetrics,_=r*t.fontMatrix[0],j=t.textRenderingMode===bs.FILL&&!i.disableFontFace&&!t.patternFill;o.save(),o.transform(...t.textMatrix),o.translate(t.x,t.y+t.textRise),m>0?o.scale(x,-1):o.scale(x,1);let R;if(t.patternFill){o.save();const H=t.fillColor.getPattern(o,this,$i(o),ks.FILL);R=Tt(o),o.restore(),o.fillStyle=H}let L=t.lineWidth;const D=t.textMatrixScale;if(D===0||L===0){const H=t.textRenderingMode&bs.FILL_STROKE_MASK;(H===bs.STROKE||H===bs.FILL_STROKE)&&(L=this.getSinglePixelWidth())}else L/=D;if(d!==1&&(o.scale(d,d),L/=d),o.lineWidth=L,i.isInvalidPDFjsFont){const H=[];let se=0;for(const re of e)H.push(re.unicode),se+=re.width;o.fillText(H.join(""),0,0),t.x+=se*_*x,o.restore(),this.compose();return}let z=0,P;for(P=0;P<v;++P){const H=e[P];if(typeof H=="number"){z+=E*H*r/1e3;continue}let se=!1;const re=(H.isSpace?p:0)+h,ne=H.fontChar,ue=H.accent;let J,ge,Ce=H.width;if(y){const ae=H.vmetric||S,G=-(H.vmetric?ae[1]:Ce*.5)*_,Y=ae[2]*_;Ce=ae?-ae[0]:Ce,J=G/d,ge=(z+Y)/d}else J=z/d,ge=0;if(i.remeasure&&Ce>0){const ae=o.measureText(ne).width*1e3/r*d;if(Ce<ae&&this.isFontSubpixelAAEnabled){const G=Ce/ae;se=!0,o.save(),o.scale(G,1),J/=G}else Ce!==ae&&(J+=(Ce-ae)/2e3*r/d)}if(this.contentVisible&&(H.isInFont||i.missingFile)){if(j&&!ue)o.fillText(ne,J,ge);else if(this.paintChar(ne,J,ge,R),ue){const ae=J+r*ue.offset.x/d,G=ge-r*ue.offset.y/d;this.paintChar(ue.fontChar,ae,G,R)}}const Ie=y?Ce*_-re*m:Ce*_+re*m;z+=Ie,se&&o.restore()}y?t.y-=z:t.x+=z*x,o.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,r=i.font,o=i.fontSize,d=i.fontDirection,h=r.vertical?1:-1,p=i.charSpacing,m=i.wordSpacing,x=i.textHScale*d,v=i.fontMatrix||Qx,y=e.length,E=i.textRenderingMode===bs.INVISIBLE;let S,_,j,R;if(!(E||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(x,d),S=0;S<y;++S){if(_=e[S],typeof _=="number"){R=h*_*o/1e3,this.ctx.translate(R,0),i.x+=R*x;continue}const L=(_.isSpace?m:0)+p,D=r.charProcOperatorList[_.operatorListId];if(!D){Ge(`Type3 character "${_.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=_,this.save(),t.scale(o,o),t.transform(...v),this.executeOperatorList(D),this.restore()),j=Ae.applyTransform([_.width,0],v)[0]*o+L,t.translate(j,0),i.x+=j*x}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,r,o,d){this.ctx.rect(i,r,o-i,d-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],r=this.baseTransform||Tt(this.ctx),o={createCanvasGraphics:d=>new Bv(d,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Sb(e,i,this.ctx,o,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){const r=Ae.makeHexColor(e,t,i);this.ctx.strokeStyle=r,this.current.strokeColor=r}setFillRGBColor(e,t,i){const r=Ae.makeHexColor(e,t,i);this.ctx.fillStyle=r,this.current.fillColor=r,this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=_C(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,$i(t),ks.SHADING);const r=$i(t);if(r){const{width:o,height:d}=t.canvas,[h,p,m,x]=Ae.getAxialAlignedBoundingBox([0,0,o,d],r);this.ctx.fillRect(h,p,m-h,x-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){mt("Should not call beginInlineImage")}beginImageData(){mt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Tt(this.ctx),t)){const i=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],i,r),this.current.updateRectMinMax(Tt(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||og("TODO: Support non-isolated groups."),e.knockout&&Ge("Knockout groups not supported.");const i=Tt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=Ae.getAxialAlignedBoundingBox(e.bbox,Tt(t));const o=[0,0,t.canvas.width,t.canvas.height];r=Ae.intersect(r,o)||[0,0,0,0];const d=Math.floor(r[0]),h=Math.floor(r[1]),p=Math.max(Math.ceil(r[2])-d,1),m=Math.max(Math.ceil(r[3])-h,1);this.current.startNewPathAndClipBox([0,0,p,m]);let x="groupAt"+this.groupLevel;e.smask&&(x+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(x,p,m),y=v.context;y.translate(-d,-h),y.transform(...i),e.smask?this.smaskStack.push({canvas:v.canvas,context:y,offsetX:d,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(d,h),t.save()),Ad(t,y),this.ctx=y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Tt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const o=Ae.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,i,r,o){if(T(this,Or,_b).call(this),Km(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const d=t[2]-t[0],h=t[3]-t[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=d,t[3]=h;const[p,m]=Ae.singularValueDecompose2dScale(Tt(this.ctx)),{viewportScale:x}=this,v=Math.ceil(d*this.outputScaleX*x),y=Math.ceil(h*this.outputScaleY*x);this.annotationCanvas=this.canvasFactory.create(v,y);const{canvas:E,context:S}=this.annotationCanvas;this.annotationCanvasMap.set(e,E),this.annotationCanvas.savedCtx=this.ctx,this.ctx=S,this.ctx.save(),this.ctx.setTransform(p,0,0,-m,0,h*m),Km(this.ctx)}else Km(this.ctx),this.ctx.rect(t[0],t[1],d,h),this.ctx.clip(),this.endPath()}this.current=new qE(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),T(this,Or,wb).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=jC(e)),r.compiled)){r.compiled(i);return}const o=this._createMaskCanvas(e),d=o.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(d,o.offsetX,o.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,r=0,o,d){if(!this.contentVisible)return;e=this.getObject(e.data,e);const h=this.ctx;h.save();const p=Tt(h);h.transform(t,i,r,o,0,0);const m=this._createMaskCanvas(e);h.setTransform(1,0,0,1,m.offsetX-p[4],m.offsetY-p[5]);for(let x=0,v=d.length;x<v;x+=2){const y=Ae.transform(p,[t,i,r,o,d[x],d[x+1]]),[E,S]=Ae.applyTransform([0,0],y);h.drawImage(m.canvas,E,S)}h.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const o of e){const{data:d,width:h,height:p,transform:m}=o,x=this.cachedCanvases.getCanvas("maskCanvas",h,p),v=x.context;v.save();const y=this.getObject(d,o);YE(v,y),v.globalCompositeOperation="source-in",v.fillStyle=r?i.getPattern(v,this,$i(t),ks.FILL):i,v.fillRect(0,0,h,p),v.restore(),t.save(),t.transform(...m),t.scale(1,-1),Qm(t,x.canvas,0,0,h,p,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Ge("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,r){if(!this.contentVisible)return;const o=this.getObject(e);if(!o){Ge("Dependent image isn't ready yet");return}const d=o.width,h=o.height,p=[];for(let m=0,x=r.length;m<x;m+=2)p.push({transform:[t,0,0,i,r[m],r[m+1]],x:0,y:0,w:d,h});this.paintInlineImageXObjectGroup(o,p)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:r}=e,o=this.cachedCanvases.getCanvas("inlineImage",i,r),d=o.context;return d.filter=this.current.transferMaps,d.drawImage(t,0,0),d.filter="none",o.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,r=this.ctx;if(this.save(),!Ss){const{filter:h}=r;h!=="none"&&h!==""&&(r.filter="none")}r.scale(1/t,-1/i);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const p=this.cachedCanvases.getCanvas("inlineImage",t,i).context;GE(p,e),o=this.applyTransferMapsToCanvas(p)}const d=this._scaleImage(o,$i(r));r.imageSmoothingEnabled=VE(Tt(r),e.interpolate),Qm(r,d.img,0,0,d.paintWidth,d.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const o=e.width,d=e.height,p=this.cachedCanvases.getCanvas("inlineImage",o,d).context;GE(p,e),r=this.applyTransferMapsToCanvas(p)}for(const o of t)i.save(),i.transform(...o.transform),i.scale(1,-1),Qm(i,r,o.x,o.y,o.w,o.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===$E?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Tt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:r,d:o}=this.ctx.getTransform();let d,h;if(i===0&&r===0){const p=Math.abs(t),m=Math.abs(o);if(p===m)if(e===0)d=h=1/p;else{const x=p*e;d=h=x<1?1/x:1}else if(e===0)d=1/p,h=1/m;else{const x=p*e,v=m*e;d=x<1?1/x:1,h=v<1?1/v:1}}else{const p=Math.abs(t*o-i*r),m=Math.hypot(t,i),x=Math.hypot(r,o);if(e===0)d=x/p,h=m/p;else{const v=e*p;d=x>v?x/v:1,h=m>v?m/v:1}}this._cachedScaleForStroking[0]=d,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[r,o]=this.getScaleForStroking();if(t.lineWidth=i||1,r===1&&o===1){t.stroke();return}const d=t.getLineDash();if(e&&t.save(),t.scale(r,o),d.length>0){const h=Math.max(r,o);t.setLineDash(d.map(p=>p/h)),t.lineDashOffset/=h}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Or=new WeakSet,_b=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},wb=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let uc=Bv;for(const c in Ba)uc.prototype[c]!==void 0&&(uc.prototype[Ba[c]]=uc.prototype[c]);var Eh,Sh;class Nn{static get workerPort(){return f(this,Eh)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");w(this,Eh,e)}static get workerSrc(){return f(this,Sh)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");w(this,Sh,e)}}Eh=new WeakMap,Sh=new WeakMap,C(Nn,Eh,null),C(Nn,Sh,"");const Wm={DATA:1,ERROR:2},zt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ia(c){switch(c instanceof Error||typeof c=="object"&&c!==null||mt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),c.name){case"AbortException":return new dl(c.message);case"MissingPDFException":return new ul(c.message);case"PasswordException":return new Wx(c.message,c.code);case"UnexpectedResponseException":return new lg(c.message,c.status);case"UnknownErrorException":return new Zx(c.message,c.details);default:return new Zx(c.message,c.toString())}}var Ni,G_,Y_,lp;class Md{constructor(e,t,i){C(this,Ni);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=r=>{const o=r.data;if(o.targetName!==this.sourceName)return;if(o.stream){T(this,Ni,Y_).call(this,o);return}if(o.callback){const h=o.callbackId,p=this.callbackCapabilities[h];if(!p)throw new Error(`Cannot resolve callback ${h}`);if(delete this.callbackCapabilities[h],o.callback===Wm.DATA)p.resolve(o.data);else if(o.callback===Wm.ERROR)p.reject(ia(o.reason));else throw new Error("Unexpected callback case");return}const d=this.actionHandler[o.action];if(!d)throw new Error(`Unknown action from worker: ${o.action}`);if(o.callbackId){const h=this.sourceName,p=o.sourceName;new Promise(function(m){m(d(o.data))}).then(function(m){i.postMessage({sourceName:h,targetName:p,callback:Wm.DATA,callbackId:o.callbackId,data:m})},function(m){i.postMessage({sourceName:h,targetName:p,callback:Wm.ERROR,callbackId:o.callbackId,reason:ia(m)})});return}if(o.streamId){T(this,Ni,G_).call(this,o);return}d(o.data)},i.addEventListener("message",this._onComObjOnMessage)}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(d){o.reject(d)}return o.promise}sendWithStream(e,t,i,r){const o=this.streamId++,d=this.sourceName,h=this.targetName,p=this.comObj;return new ReadableStream({start:m=>{const x=Promise.withResolvers();return this.streamControllers[o]={controller:m,startCall:x,pullCall:null,cancelCall:null,isClosed:!1},p.postMessage({sourceName:d,targetName:h,action:e,streamId:o,data:t,desiredSize:m.desiredSize},r),x.promise},pull:m=>{const x=Promise.withResolvers();return this.streamControllers[o].pullCall=x,p.postMessage({sourceName:d,targetName:h,stream:zt.PULL,streamId:o,desiredSize:m.desiredSize}),x.promise},cancel:m=>{Qt(m instanceof Error,"cancel must have a valid reason");const x=Promise.withResolvers();return this.streamControllers[o].cancelCall=x,this.streamControllers[o].isClosed=!0,p.postMessage({sourceName:d,targetName:h,stream:zt.CANCEL,streamId:o,reason:ia(m)}),x.promise}},i)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Ni=new WeakSet,G_=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,o=this.comObj,d=this,h=this.actionHandler[e.action],p={enqueue(m,x=1,v){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=x,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:r,stream:zt.ENQUEUE,streamId:t,chunk:m},v)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:r,stream:zt.CLOSE,streamId:t}),delete d.streamSinks[t])},error(m){Qt(m instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:r,stream:zt.ERROR,streamId:t,reason:ia(m)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};p.sinkCapability.resolve(),p.ready=p.sinkCapability.promise,this.streamSinks[t]=p,new Promise(function(m){m(h(e.data,p))}).then(function(){o.postMessage({sourceName:i,targetName:r,stream:zt.START_COMPLETE,streamId:t,success:!0})},function(m){o.postMessage({sourceName:i,targetName:r,stream:zt.START_COMPLETE,streamId:t,reason:ia(m)})})},Y_=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,o=this.comObj,d=this.streamControllers[t],h=this.streamSinks[t];switch(e.stream){case zt.START_COMPLETE:e.success?d.startCall.resolve():d.startCall.reject(ia(e.reason));break;case zt.PULL_COMPLETE:e.success?d.pullCall.resolve():d.pullCall.reject(ia(e.reason));break;case zt.PULL:if(!h){o.postMessage({sourceName:i,targetName:r,stream:zt.PULL_COMPLETE,streamId:t,success:!0});break}h.desiredSize<=0&&e.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=e.desiredSize,new Promise(function(p){var m;p((m=h.onPull)==null?void 0:m.call(h))}).then(function(){o.postMessage({sourceName:i,targetName:r,stream:zt.PULL_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:i,targetName:r,stream:zt.PULL_COMPLETE,streamId:t,reason:ia(p)})});break;case zt.ENQUEUE:if(Qt(d,"enqueue should have stream controller"),d.isClosed)break;d.controller.enqueue(e.chunk);break;case zt.CLOSE:if(Qt(d,"close should have stream controller"),d.isClosed)break;d.isClosed=!0,d.controller.close(),T(this,Ni,lp).call(this,d,t);break;case zt.ERROR:Qt(d,"error should have stream controller"),d.controller.error(ia(e.reason)),T(this,Ni,lp).call(this,d,t);break;case zt.CANCEL_COMPLETE:e.success?d.cancelCall.resolve():d.cancelCall.reject(ia(e.reason)),T(this,Ni,lp).call(this,d,t);break;case zt.CANCEL:if(!h)break;new Promise(function(p){var m;p((m=h.onCancel)==null?void 0:m.call(h,ia(e.reason)))}).then(function(){o.postMessage({sourceName:i,targetName:r,stream:zt.CANCEL_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:i,targetName:r,stream:zt.CANCEL_COMPLETE,streamId:t,reason:ia(p)})}),h.sinkCapability.reject(ia(e.reason)),h.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},lp=async function(e,t){var i,r,o;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(r=e.pullCall)==null?void 0:r.promise,(o=e.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[t]};var wo,_h;class DC{constructor({parsedData:e,rawData:t}){C(this,wo);C(this,_h);w(this,wo,e),w(this,_h,t)}getRaw(){return f(this,_h)}get(e){return f(this,wo).get(e)??null}getAll(){return xv(f(this,wo))}has(e){return f(this,wo).has(e)}}wo=new WeakMap,_h=new WeakMap;const nr=Symbol("INTERNAL");var wh,Nh,Th,Tc;class OC{constructor(e,{name:t,intent:i,usage:r}){C(this,wh,!1);C(this,Nh,!1);C(this,Th,!1);C(this,Tc,!0);w(this,wh,!!(e&Ma.DISPLAY)),w(this,Nh,!!(e&Ma.PRINT)),this.name=t,this.intent=i,this.usage=r}get visible(){if(f(this,Th))return f(this,Tc);if(!f(this,Tc))return!1;const{print:e,view:t}=this.usage;return f(this,wh)?(t==null?void 0:t.viewState)!=="OFF":f(this,Nh)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==nr&&mt("Internal method `_setVisible` called."),w(this,Th,i),w(this,Tc,t)}}wh=new WeakMap,Nh=new WeakMap,Th=new WeakMap,Tc=new WeakMap;var fr,ft,Cc,jc,Ch,Nb;class LC{constructor(e,t=Ma.DISPLAY){C(this,Ch);C(this,fr,null);C(this,ft,new Map);C(this,Cc,null);C(this,jc,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,w(this,jc,e.order);for(const i of e.groups)f(this,ft).set(i.id,new OC(t,i));if(e.baseState==="OFF")for(const i of f(this,ft).values())i._setVisible(nr,!1);for(const i of e.on)f(this,ft).get(i)._setVisible(nr,!0);for(const i of e.off)f(this,ft).get(i)._setVisible(nr,!1);w(this,Cc,this.getHash())}}isVisible(e){if(f(this,ft).size===0)return!0;if(!e)return og("Optional content group not defined."),!0;if(e.type==="OCG")return f(this,ft).has(e.id)?f(this,ft).get(e.id).visible:(Ge(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return T(this,Ch,Nb).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!f(this,ft).has(t))return Ge(`Optional content group not found: ${t}`),!0;if(f(this,ft).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!f(this,ft).has(t))return Ge(`Optional content group not found: ${t}`),!0;if(!f(this,ft).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!f(this,ft).has(t))return Ge(`Optional content group not found: ${t}`),!0;if(!f(this,ft).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!f(this,ft).has(t))return Ge(`Optional content group not found: ${t}`),!0;if(f(this,ft).get(t).visible)return!1}return!0}return Ge(`Unknown optional content policy ${e.policy}.`),!0}return Ge(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){const i=f(this,ft).get(e);if(!i){Ge(`Optional content group not found: ${e}`);return}i._setVisible(nr,!!t,!0),w(this,fr,null)}setOCGState({state:e,preserveRB:t}){let i;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const o=f(this,ft).get(r);if(o)switch(i){case"ON":o._setVisible(nr,!0);break;case"OFF":o._setVisible(nr,!1);break;case"Toggle":o._setVisible(nr,!o.visible);break}}w(this,fr,null)}get hasInitialVisibility(){return f(this,Cc)===null||this.getHash()===f(this,Cc)}getOrder(){return f(this,ft).size?f(this,jc)?f(this,jc).slice():[...f(this,ft).keys()]:null}getGroups(){return f(this,ft).size>0?xv(f(this,ft)):null}getGroup(e){return f(this,ft).get(e)||null}getHash(){if(f(this,fr)!==null)return f(this,fr);const e=new F_;for(const[t,i]of f(this,ft))e.update(`${t}:${i.visible}`);return w(this,fr,e.hexdigest())}}fr=new WeakMap,ft=new WeakMap,Cc=new WeakMap,jc=new WeakMap,Ch=new WeakSet,Nb=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let r=1;r<t;r++){const o=e[r];let d;if(Array.isArray(o))d=T(this,Ch,Nb).call(this,o);else if(f(this,ft).has(o))d=f(this,ft).get(o).visible;else return Ge(`Optional content group not found: ${o}`),!0;switch(i){case"And":if(!d)return!1;break;case"Or":if(d)return!0;break;case"Not":return!d;default:return!0}}return i==="And"};class IC{constructor(e,{disableRange:t=!1,disableStream:i=!1}){Qt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:d,contentDispositionFilename:h}=e;if(this._queuedChunks=[],this._progressiveDone=d,this._contentDispositionFilename=h,(o==null?void 0:o.length)>0){const p=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(p)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((p,m)=>{this._onReceiveData({begin:p,chunk:m})}),e.addProgressListener((p,m)=>{this._onProgress({loaded:p,total:m})}),e.addProgressiveReadListener(p=>{this._onReceiveData({chunk:p})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(i),!0)});Qt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,r,o;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(o=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||o.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Qt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new PC(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new UC(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class PC{constructor(e,t,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=Ev(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class UC{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function zC(c){let e=!0,t=i("filename\\*","i").exec(c);if(t){t=t[1];let x=h(t);return x=unescape(x),x=p(x),x=m(x),o(x)}if(t=d(c),t){const x=m(t);return o(x)}if(t=i("filename","i").exec(c),t){t=t[1];let x=h(t);return x=m(x),o(x)}function i(x,v){return new RegExp("(?:^|;)\\s*"+x+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function r(x,v){if(x){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const y=new TextDecoder(x,{fatal:!0}),E=cg(v);v=y.decode(E),e=!1}catch{}}return v}function o(x){return e&&/[\x80-\xff]/.test(x)&&(x=r("utf-8",x),e&&(x=r("iso-8859-1",x))),x}function d(x){const v=[];let y;const E=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=E.exec(x))!==null;){let[,_,j,R]=y;if(_=parseInt(_,10),_ in v){if(_===0)break;continue}v[_]=[j,R]}const S=[];for(let _=0;_<v.length&&_ in v;++_){let[j,R]=v[_];R=h(R),j&&(R=unescape(R),_===0&&(R=p(R))),S.push(R)}return S.join("")}function h(x){if(x.startsWith('"')){const v=x.slice(1).split('\\"');for(let y=0;y<v.length;++y){const E=v[y].indexOf('"');E!==-1&&(v[y]=v[y].slice(0,E),v.length=y+1),v[y]=v[y].replaceAll(/\\(.)/g,"$1")}x=v.join('"')}return x}function p(x){const v=x.indexOf("'");if(v===-1)return x;const y=x.slice(0,v),S=x.slice(v+1).replace(/^[^']*'/,"");return r(y,S)}function m(x){return!x.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(x)?x:x.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,y,E,S){if(E==="q"||E==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,j){return String.fromCharCode(parseInt(j,16))}),r(y,S);try{S=atob(S)}catch{}return r(y,S)})}return""}function wv({getResponseHeader:c,isHttp:e,rangeChunkSize:t,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(c("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*t)||i||!e||c("Accept-Ranges")!=="bytes"||(c("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Nv(c){const e=c("Content-Disposition");if(e){let t=zC(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Ev(t))return t}return null}function mg(c,e){return c===404||c===0&&e.startsWith("file:")?new ul('Missing PDF "'+e+'".'):new lg(`Unexpected server response (${c}) while retrieving PDF "${e}".`,c)}function V_(c){return c===200||c===206}function $_(c,e,t){return{method:"GET",headers:c,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function X_(c){const e=new Headers;for(const t in c){const i=c[t];i!==void 0&&e.append(t,i)}return e}function Q_(c){return c instanceof Uint8Array?c.buffer:c instanceof ArrayBuffer?c:(Ge(`getArrayBuffer - unexpected data format: ${c}`),new Uint8Array(c).buffer)}class XE{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Qt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new FC(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new BC(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class FC{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=X_(this._stream.httpHeaders);const i=t.url;fetch(i,$_(this._headers,this._withCredentials,this._abortController)).then(r=>{if(!V_(r.status))throw mg(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=p=>r.headers.get(p),{allowRangeRequests:d,suggestedLength:h}=wv({getResponseHeader:o,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=d,this._contentLength=h||this._contentLength,this._filename=Nv(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new dl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Q_(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class BC{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController,this._headers=X_(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${i-1}`);const o=r.url;fetch(o,$_(this._headers,this._withCredentials,this._abortController)).then(d=>{if(!V_(d.status))throw mg(d.status,o);this._readCapability.resolve(),this._reader=d.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:Q_(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Bx=200,Hx=206;function HC(c){const e=c.response;return typeof e!="string"?e:cg(e).buffer}class qC{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const r={begin:e,end:t};for(const o in i)r[o]=i[o];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const o in this.httpHeaders){const d=this.httpHeaders[o];d!==void 0&&t.setRequestHeader(o,d)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=Hx):r.expectedStatus=Bx,t.responseType="arraybuffer",e.onError&&(t.onerror=function(o){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var r;const i=this.pendingRequests[e];i&&((r=i.onProgress)==null||r.call(i,t))}onStateChange(e,t){var p,m,x;const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){(p=i.onError)==null||p.call(i,r.status);return}const o=r.status||Bx;if(!(o===Bx&&i.expectedStatus===Hx)&&o!==i.expectedStatus){(m=i.onError)==null||m.call(i,r.status);return}const h=HC(r);if(o===Hx){const v=r.getResponseHeader("Content-Range"),y=/bytes (\d+)-(\d+)\/(\d+)/.exec(v);i.onDone({begin:parseInt(y[1],10),chunk:h})}else h?i.onDone({begin:0,chunk:h}):(x=i.onError)==null||x.call(i,r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class GC{constructor(e){this._source=e,this._manager=new qC(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Qt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new YC(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new VC(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class YC{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=d=>t.getResponseHeader(d),{allowRangeRequests:r,suggestedLength:o}=wv({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=Nv(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=mg(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class VC{constructor(e,t,i){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=mg(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const K_=/^file:\/\/\/[a-zA-Z]:\//;function $C(c){const e=Ci.get("url"),t=e.parse(c);return t.protocol==="file:"||t.host?t:/^[a-z]:[/\\]/i.test(c)?e.parse(`file:///${c}`):(t.host||(t.protocol="file:"),t)}class XC{constructor(e){this.source=e,this.url=$C(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Qt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new WC(this):new QC(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new ZC(this,e,t):new KC(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class W_{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new dl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Z_{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function kp(c,e){return{protocol:c.protocol,auth:c.auth,host:c.hostname,port:c.port,path:c.path,method:"GET",headers:e}}class QC extends W_{constructor(e){super(e);const t=i=>{if(i.statusCode===404){const h=new ul(`Missing PDF "${this._url}".`);this._storedError=h,this._headersCapability.reject(h);return}this._headersCapability.resolve(),this._setReadableStream(i);const r=h=>this._readableStream.headers[h.toLowerCase()],{allowRangeRequests:o,suggestedLength:d}=wv({getResponseHeader:r,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=d||this._contentLength,this._filename=Nv(r)};if(this._request=null,this._url.protocol==="http:"){const i=Ci.get("http");this._request=i.request(kp(this._url,e.httpHeaders),t)}else{const i=Ci.get("https");this._request=i.request(kp(this._url,e.httpHeaders),t)}this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class KC extends Z_{constructor(e,t,i){super(e),this._httpHeaders={};for(const o in e.httpHeaders){const d=e.httpHeaders[o];d!==void 0&&(this._httpHeaders[o]=d)}this._httpHeaders.Range=`bytes=${t}-${i-1}`;const r=o=>{if(o.statusCode===404){const d=new ul(`Missing PDF "${this._url}".`);this._storedError=d;return}this._setReadableStream(o)};if(this._request=null,this._url.protocol==="http:"){const o=Ci.get("http");this._request=o.request(kp(this._url,this._httpHeaders),r)}else{const o=Ci.get("https");this._request=o.request(kp(this._url,this._httpHeaders),r)}this._request.on("error",o=>{this._storedError=o}),this._request.end()}}class WC extends W_{constructor(e){super(e);let t=decodeURIComponent(this._url.path);K_.test(this._url.href)&&(t=t.replace(/^\//,""));const i=Ci.get("fs");i.promises.lstat(t).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(t)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new ul(`Missing PDF "${t}".`)),this._storedError=r,this._headersCapability.reject(r)})}}class ZC extends Z_{constructor(e,t,i){super(e);let r=decodeURIComponent(this._url.path);K_.test(this._url.href)&&(r=r.replace(/^\//,""));const o=Ci.get("fs");this._setReadableStream(o.createReadStream(r,{start:t,end:i-1}))}}const JC=1e5,Fs=30,ej=.8;var r_,mr,Hs,jh,Rh,No,ln,Mh,kh,To,Rc,Mc,pr,kc,Dh,Dc,Co,Oh,Lh,jo,Ro,gr,Oc,Rn,J_,ew,Tb,Ti,cp,tw,sw;const ys=class ys{constructor({textContentSource:e,container:t,viewport:i}){C(this,Rn);C(this,mr,Promise.withResolvers());C(this,Hs,null);C(this,jh,!1);C(this,Rh,!!((r_=globalThis.FontInspector)!=null&&r_.enabled));C(this,No,null);C(this,ln,null);C(this,Mh,0);C(this,kh,0);C(this,To,null);C(this,Rc,null);C(this,Mc,0);C(this,pr,0);C(this,kc,Object.create(null));C(this,Dh,[]);C(this,Dc,null);C(this,Co,[]);C(this,Oh,new WeakMap);C(this,Lh,null);var p;if(e instanceof ReadableStream)w(this,Dc,e);else if(typeof e=="object")w(this,Dc,new ReadableStream({start(m){m.enqueue(e),m.close()}}));else throw new Error('No "textContentSource" parameter specified.');w(this,Hs,w(this,Rc,t)),w(this,pr,i.scale*(globalThis.devicePixelRatio||1)),w(this,Mc,i.rotation),w(this,ln,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:o,pageX:d,pageY:h}=i.rawDims;w(this,Lh,[1,0,0,-1,-d,h+o]),w(this,kh,r),w(this,Mh,o),T(p=ys,Ti,tw).call(p),al(t,i),f(this,mr).promise.catch(()=>{}).then(()=>{f(ys,Oc).delete(this),w(this,ln,null),w(this,kc,null)})}render(){const e=()=>{f(this,To).read().then(({value:t,done:i})=>{if(i){f(this,mr).resolve();return}f(this,No)??w(this,No,t.lang),Object.assign(f(this,kc),t.styles),T(this,Rn,J_).call(this,t.items),e()},f(this,mr).reject)};return w(this,To,f(this,Dc).getReader()),f(ys,Oc).add(this),e(),f(this,mr).promise}update({viewport:e,onBefore:t=null}){var o;const i=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==f(this,Mc)&&(t==null||t(),w(this,Mc,r),al(f(this,Rc),{rotation:r})),i!==f(this,pr)){t==null||t(),w(this,pr,i);const d={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:T(o=ys,Ti,cp).call(o,f(this,No))};for(const h of f(this,Co))d.properties=f(this,Oh).get(h),d.div=h,T(this,Rn,Tb).call(this,d)}}cancel(){var t;const e=new dl("TextLayer task cancelled.");(t=f(this,To))==null||t.cancel(e).catch(()=>{}),w(this,To,null),f(this,mr).reject(e)}get textDivs(){return f(this,Co)}get textContentItemsStr(){return f(this,Dh)}static cleanup(){if(!(f(this,Oc).size>0)){f(this,jo).clear();for(const{canvas:e}of f(this,Ro).values())e.remove();f(this,Ro).clear()}}};mr=new WeakMap,Hs=new WeakMap,jh=new WeakMap,Rh=new WeakMap,No=new WeakMap,ln=new WeakMap,Mh=new WeakMap,kh=new WeakMap,To=new WeakMap,Rc=new WeakMap,Mc=new WeakMap,pr=new WeakMap,kc=new WeakMap,Dh=new WeakMap,Dc=new WeakMap,Co=new WeakMap,Oh=new WeakMap,Lh=new WeakMap,jo=new WeakMap,Ro=new WeakMap,gr=new WeakMap,Oc=new WeakMap,Rn=new WeakSet,J_=function(e){var r,o;if(f(this,jh))return;(o=f(this,ln)).ctx??(o.ctx=T(r=ys,Ti,cp).call(r,f(this,No)));const t=f(this,Co),i=f(this,Dh);for(const d of e){if(t.length>JC){Ge("Ignoring additional textDivs for performance reasons."),w(this,jh,!0);return}if(d.str===void 0){if(d.type==="beginMarkedContentProps"||d.type==="beginMarkedContent"){const h=f(this,Hs);w(this,Hs,document.createElement("span")),f(this,Hs).classList.add("markedContent"),d.id!==null&&f(this,Hs).setAttribute("id",`${d.id}`),h.append(f(this,Hs))}else d.type==="endMarkedContent"&&w(this,Hs,f(this,Hs).parentNode);continue}i.push(d.str),T(this,Rn,ew).call(this,d)}},ew=function(e){var _;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};f(this,Co).push(t);const r=Ae.transform(f(this,Lh),e.transform);let o=Math.atan2(r[1],r[0]);const d=f(this,kc)[e.fontName];d.vertical&&(o+=Math.PI/2);const h=f(this,Rh)&&d.fontSubstitution||d.fontFamily,p=Math.hypot(r[2],r[3]),m=p*T(_=ys,Ti,sw).call(_,h,f(this,No));let x,v;o===0?(x=r[4],v=r[5]-m):(x=r[4]+m*Math.sin(o),v=r[5]-m*Math.cos(o));const y="calc(var(--scale-factor)*",E=t.style;f(this,Hs)===f(this,Rc)?(E.left=`${(100*x/f(this,kh)).toFixed(2)}%`,E.top=`${(100*v/f(this,Mh)).toFixed(2)}%`):(E.left=`${y}${x.toFixed(2)}px)`,E.top=`${y}${v.toFixed(2)}px)`),E.fontSize=`${y}${(f(ys,gr)*p).toFixed(2)}px)`,E.fontFamily=h,i.fontSize=p,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,f(this,Rh)&&(t.dataset.fontName=d.fontSubstitutionLoadedName||e.fontName),o!==0&&(i.angle=o*(180/Math.PI));let S=!1;if(e.str.length>1)S=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const j=Math.abs(e.transform[0]),R=Math.abs(e.transform[3]);j!==R&&Math.max(j,R)/Math.min(j,R)>1.5&&(S=!0)}if(S&&(i.canvasWidth=d.vertical?e.height:e.width),f(this,Oh).set(t,i),f(this,ln).div=t,f(this,ln).properties=i,T(this,Rn,Tb).call(this,f(this,ln)),i.hasText&&f(this,Hs).append(t),i.hasEOL){const j=document.createElement("br");j.setAttribute("role","presentation"),f(this,Hs).append(j)}},Tb=function(e){const{div:t,properties:i,ctx:r,prevFontSize:o,prevFontFamily:d}=e,{style:h}=t;let p="";if(f(ys,gr)>1&&(p=`scale(${1/f(ys,gr)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:m}=h,{canvasWidth:x,fontSize:v}=i;(o!==v||d!==m)&&(r.font=`${v*f(this,pr)}px ${m}`,e.prevFontSize=v,e.prevFontFamily=m);const{width:y}=r.measureText(t.textContent);y>0&&(p=`scaleX(${x*f(this,pr)/y}) ${p}`)}i.angle!==0&&(p=`rotate(${i.angle}deg) ${p}`),p.length>0&&(h.transform=p)},Ti=new WeakSet,cp=function(e=null){let t=f(this,Ro).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),f(this,Ro).set(e,t)}return t},tw=function(){if(f(this,gr)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.textContent="X",document.body.append(e),w(this,gr,e.getBoundingClientRect().height),e.remove()},sw=function(e,t){const i=f(this,jo).get(e);if(i)return i;const r=T(this,Ti,cp).call(this,t),o=r.font;r.canvas.width=r.canvas.height=Fs,r.font=`${Fs}px ${e}`;const d=r.measureText("");let h=d.fontBoundingBoxAscent,p=Math.abs(d.fontBoundingBoxDescent);if(h){const v=h/(h+p);return f(this,jo).set(e,v),r.canvas.width=r.canvas.height=0,r.font=o,v}r.strokeStyle="red",r.clearRect(0,0,Fs,Fs),r.strokeText("g",0,0);let m=r.getImageData(0,0,Fs,Fs).data;p=0;for(let v=m.length-1-3;v>=0;v-=4)if(m[v]>0){p=Math.ceil(v/4/Fs);break}r.clearRect(0,0,Fs,Fs),r.strokeText("A",0,Fs),m=r.getImageData(0,0,Fs,Fs).data,h=0;for(let v=0,y=m.length;v<y;v+=4)if(m[v]>0){h=Fs-Math.floor(v/4/Fs);break}r.canvas.width=r.canvas.height=0,r.font=o;const x=h?h/(h+p):ej;return f(this,jo).set(e,x),x},C(ys,Ti),C(ys,jo,new Map),C(ys,Ro,new Map),C(ys,gr,null),C(ys,Oc,new Set);let cu=ys;function tj(){m_("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:c,container:e,viewport:t,...i}=arguments[0],r=Object.keys(i);r.length>0&&Ge("Ignoring `renderTextLayer` parameters: "+r.join(", "));const o=new cu({textContentSource:c,container:e,viewport:t}),{textDivs:d,textContentItemsStr:h}=o;return{promise:o.render(),textDivs:d,textContentItemsStr:h}}function sj(){m_("`updateTextLayer`, please use `TextLayer` instead.")}class Yd{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function r(o){var p;if(!o)return;let d=null;const h=o.name;if(h==="#text")d=o.value;else if(Yd.shouldBuildText(h))(p=o==null?void 0:o.attributes)!=null&&p.textContent?d=o.attributes.textContent:o.value&&(d=o.value);else return;if(d!==null&&t.push({str:d}),!!o.children)for(const m of o.children)r(m)}return r(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const aj=65536,ij=100,nj=5e3,rj=Ss?xC:iC,oj=Ss?bC:h_,lj=Ss?gC:aC,cj=Ss?vC:f_;function uj(c={}){typeof c=="string"||c instanceof URL?c={url:c}:(c instanceof ArrayBuffer||ArrayBuffer.isView(c))&&(c={data:c});const e=new Cb,{docId:t}=e,i=c.url?dj(c.url):null,r=c.data?hj(c.data):null,o=c.httpHeaders||null,d=c.withCredentials===!0,h=c.password??null,p=c.range instanceof aw?c.range:null,m=Number.isInteger(c.rangeChunkSize)&&c.rangeChunkSize>0?c.rangeChunkSize:aj;let x=c.worker instanceof dc?c.worker:null;const v=c.verbosity,y=typeof c.docBaseUrl=="string"&&!Av(c.docBaseUrl)?c.docBaseUrl:null,E=typeof c.cMapUrl=="string"?c.cMapUrl:null,S=c.cMapPacked!==!1,_=c.CMapReaderFactory||oj,j=typeof c.standardFontDataUrl=="string"?c.standardFontDataUrl:null,R=c.StandardFontDataFactory||cj,L=c.stopAtErrors!==!0,D=Number.isInteger(c.maxImageSize)&&c.maxImageSize>-1?c.maxImageSize:-1,z=c.isEvalSupported!==!1,P=typeof c.isOffscreenCanvasSupported=="boolean"?c.isOffscreenCanvasSupported:!Ss,H=Number.isInteger(c.canvasMaxAreaInBytes)?c.canvasMaxAreaInBytes:-1,se=typeof c.disableFontFace=="boolean"?c.disableFontFace:Ss,re=c.fontExtraProperties===!0,ne=c.enableXfa===!0,ue=c.ownerDocument||globalThis.document,J=c.disableRange===!0,ge=c.disableStream===!0,Ce=c.disableAutoFetch===!0,Ie=c.pdfBug===!0,ae=c.enableHWA===!0,G=p?p.length:c.length??NaN,Y=typeof c.useSystemFonts=="boolean"?c.useSystemFonts:!Ss&&!se,W=typeof c.useWorkerFetch=="boolean"?c.useWorkerFetch:_===h_&&R===f_&&E&&j&&Cd(E,document.baseURI)&&Cd(j,document.baseURI),oe=c.canvasFactory||new rj({ownerDocument:ue,enableHWA:ae}),M=c.filterFactory||new lj({docId:t,ownerDocument:ue}),k=null;VT(v);const Q={canvasFactory:oe,filterFactory:M};if(W||(Q.cMapReaderFactory=new _({baseUrl:E,isCompressed:S}),Q.standardFontDataFactory=new R({baseUrl:j})),!x){const le={verbosity:v,port:Nn.workerPort};x=le.port?dc.fromPort(le):new dc(le),e._worker=x}const q={docId:t,apiVersion:"4.4.168",data:r,password:h,disableAutoFetch:Ce,rangeChunkSize:m,length:G,docBaseUrl:y,enableXfa:ne,evaluatorOptions:{maxImageSize:D,disableFontFace:se,ignoreErrors:L,isEvalSupported:z,isOffscreenCanvasSupported:P,canvasMaxAreaInBytes:H,fontExtraProperties:re,useSystemFonts:Y,cMapUrl:W?E:null,standardFontDataUrl:W?j:null}},ee={disableFontFace:se,fontExtraProperties:re,ownerDocument:ue,pdfBug:Ie,styleElement:k,loadingParams:{disableAutoFetch:Ce,enableXfa:ne}};return x.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(x.destroyed)throw new Error("Worker was destroyed");const le=x.messageHandler.sendWithPromise("GetDocRequest",q,r?[r.buffer]:null);let pe;if(p)pe=new IC(p,{disableRange:J,disableStream:ge});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");pe=(Pe=>Ss?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&Cd(Pe.url)?new XE(Pe):new XC(Pe):Cd(Pe.url)?new XE(Pe):new GC(Pe))({url:i,length:G,httpHeaders:o,withCredentials:d,rangeChunkSize:m,disableRange:J,disableStream:ge})}return le.then(Me=>{if(e.destroyed)throw new Error("Loading aborted");if(x.destroyed)throw new Error("Worker was destroyed");const Pe=new Md(t,Me,x.port),gt=new gj(Pe,e,pe,ee,Q);e._transport=gt,Pe.send("Ready",null)})}).catch(e._capability.reject),e}function dj(c){if(c instanceof URL)return c.href;try{return new URL(c,window.location).href}catch{if(Ss&&typeof c=="string")return c}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function hj(c){if(Ss&&typeof Buffer<"u"&&c instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength)return c;if(typeof c=="string")return cg(c);if(c instanceof ArrayBuffer||ArrayBuffer.isView(c)||typeof c=="object"&&!isNaN(c==null?void 0:c.length))return new Uint8Array(c);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function QE(c){return typeof c=="object"&&Number.isInteger(c==null?void 0:c.num)&&c.num>=0&&Number.isInteger(c==null?void 0:c.gen)&&c.gen>=0}var Kp;const Wp=class Wp{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${aa(Wp,Kp)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Kp=new WeakMap,C(Wp,Kp,0);let Cb=Wp;class aw{constructor(e,t,i=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){mt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class fj{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ze(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var xr,cn,ka,rc,up;class mj{constructor(e,t,i,r=!1){C(this,ka);C(this,xr,null);C(this,cn,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=r?new LE:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new iw,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:o=!1}={}){return new Nf({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ze(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:r=or.ENABLE,transform:o=null,background:d=null,optionalContentConfigPromise:h=null,annotationCanvasMap:p=null,pageColors:m=null,printAnnotationStorage:x=null}){var D,z;(D=this._stats)==null||D.time("Overall");const v=this._transport.getRenderingIntent(i,r,x),{renderingIntent:y,cacheKey:E}=v;w(this,cn,!1),T(this,ka,up).call(this),h||(h=this._transport.getOptionalContentConfig(y));let S=this._intentStates.get(E);S||(S=Object.create(null),this._intentStates.set(E,S)),S.streamReaderCancelTimeout&&(clearTimeout(S.streamReaderCancelTimeout),S.streamReaderCancelTimeout=null);const _=!!(y&Ma.PRINT);S.displayReadyCapability||(S.displayReadyCapability=Promise.withResolvers(),S.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(z=this._stats)==null||z.time("Page Request"),this._pumpOperatorList(v));const j=P=>{var H;S.renderTasks.delete(R),(this._maybeCleanupAfterRender||_)&&w(this,cn,!0),T(this,ka,rc).call(this,!_),P?(R.capability.reject(P),this._abortOperatorList({intentState:S,reason:P instanceof Error?P:new Error(P)})):R.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(H=globalThis.Stats)!=null&&H.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},R=new Rb({callback:j,params:{canvasContext:e,viewport:t,transform:o,background:d},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:S.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:m});(S.renderTasks||(S.renderTasks=new Set)).add(R);const L=R.task;return Promise.all([S.displayReadyCapability.promise,h]).then(([P,H])=>{var se;if(this.destroyed){j();return}if((se=this._stats)==null||se.time("Rendering"),!(H.renderingIntent&y))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");R.initializeGraphics({transparency:P,optionalContentConfig:H}),R.operatorListChanged()}).catch(j),L}getOperatorList({intent:e="display",annotationMode:t=or.ENABLE,printAnnotationStorage:i=null}={}){var p;function r(){d.operatorList.lastChunk&&(d.opListReadCapability.resolve(d.operatorList),d.renderTasks.delete(h))}const o=this._transport.getRenderingIntent(e,t,i,!0);let d=this._intentStates.get(o.cacheKey);d||(d=Object.create(null),this._intentStates.set(o.cacheKey,d));let h;return d.opListReadCapability||(h=Object.create(null),h.operatorListChanged=r,d.opListReadCapability=Promise.withResolvers(),(d.renderTasks||(d.renderTasks=new Set)).add(h),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(o)),d.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Yd.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,r){function o(){d.read().then(function({value:p,done:m}){if(m){i(h);return}h.lang??(h.lang=p.lang),Object.assign(h.styles,p.styles),h.items.push(...p.items),o()},r)}const d=t.getReader(),h={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),w(this,cn,!1),T(this,ka,up).call(this),Promise.all(e)}cleanup(e=!1){w(this,cn,!0);const t=T(this,ka,rc).call(this,!1);return e&&t&&this._stats&&(this._stats=new LE),t}_startRenderPage(e,t){var r,o;const i=this._intentStates.get(t);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(o=i.displayReadyCapability)==null||o.resolve(e))}_renderPageChunk(e,t){for(let i=0,r=e.length;i<r;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&T(this,ka,rc).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i}){const{map:r,transfer:o}=i,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r},o).getReader(),p=this._intentStates.get(t);p.streamReader=h;const m=()=>{h.read().then(({value:x,done:v})=>{if(v){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(x,p),m())},x=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const v of p.renderTasks)v.operatorListChanged();T(this,ka,rc).call(this,!0)}if(p.displayReadyCapability)p.displayReadyCapability.reject(x);else if(p.opListReadCapability)p.opListReadCapability.reject(x);else throw x}})};m()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof yv){let r=ij;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new dl(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}xr=new WeakMap,cn=new WeakMap,ka=new WeakSet,rc=function(e=!1){if(T(this,ka,up).call(this),!f(this,cn)||this.destroyed)return!1;if(e)return w(this,xr,setTimeout(()=>{w(this,xr,null),T(this,ka,rc).call(this,!1)},nj)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),w(this,cn,!1),!0},up=function(){f(this,xr)&&(clearTimeout(f(this,xr)),w(this,xr,null))};var Mo,Zp;class pj{constructor(){C(this,Mo,new Set);C(this,Zp,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};f(this,Zp).then(()=>{for(const r of f(this,Mo))r.call(this,i)})}addEventListener(e,t){f(this,Mo).add(t)}removeEventListener(e,t){f(this,Mo).delete(t)}terminate(){f(this,Mo).clear()}}Mo=new WeakMap,Zp=new WeakMap;const Zi={isWorkerDisabled:!1,fakeWorkerId:0};Ss&&(Zi.isWorkerDisabled=!0,Nn.workerSrc||(Nn.workerSrc="./pdf.worker.mjs")),Zi.isSameOrigin=function(c,e){let t;try{if(t=new URL(c),!t.origin||t.origin==="null")return!1}catch{return!1}const i=new URL(e,t);return t.origin===i.origin},Zi.createCDNWrapper=function(c){const e=`await import("${c}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};var ko,Lc,dp,Ic,hp;const na=class na{constructor({name:e=null,port:t=null,verbosity:i=$T()}={}){C(this,Lc);var r;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=f(na,ko))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(f(na,ko)||w(na,ko,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Ss?Promise.all([Ci.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Md("main","worker",e),this._messageHandler.on("ready",function(){}),T(this,Lc,dp).call(this)}_initialize(){if(Zi.isWorkerDisabled||f(na,Ic,hp)){this._setupFakeWorker();return}let{workerSrc:e}=na;try{Zi.isSameOrigin(window.location.href,e)||(e=Zi.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new Md("main","worker",t),r=()=>{o.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:o.signal}),i.on("test",h=>{if(o.abort(),this.destroyed||!h){r();return}this._messageHandler=i,this._port=t,this._webWorker=t,T(this,Lc,dp).call(this)}),i.on("ready",h=>{if(o.abort(),this.destroyed){r();return}try{d()}catch{this._setupFakeWorker()}});const d=()=>{const h=new Uint8Array;i.send("test",h,[h.buffer])};d();return}catch{og("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Zi.isWorkerDisabled||(Ge("Setting up fake worker."),Zi.isWorkerDisabled=!0),na._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new pj;this._port=t;const i=`fake${Zi.fakeWorkerId++}`,r=new Md(i+"_worker",i,t);e.setup(r,t),this._messageHandler=new Md(i,i+"_worker",t),T(this,Lc,dp).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=f(na,ko))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=f(this,ko))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new na(e)}static get workerSrc(){if(Nn.workerSrc)return Nn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ze(this,"_setupFakeWorkerGlobal",(async()=>f(this,Ic,hp)?f(this,Ic,hp):(await import(this.workerSrc)).WorkerMessageHandler)())}};ko=new WeakMap,Lc=new WeakSet,dp=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Ic=new WeakSet,hp=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},C(na,Ic),C(na,ko);let dc=na;var un,gi,Pc,Uc,xi,Do,kd;class gj{constructor(e,t,i,r,o){C(this,Do);C(this,un,new Map);C(this,gi,new Map);C(this,Pc,new Map);C(this,Uc,new Map);C(this,xi,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new iw,this.fontLoader=new mC({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Ze(this,"annotationStorage",new _v)}getRenderingIntent(e,t=or.ENABLE,i=null,r=!1){let o=Ma.DISPLAY,d=yb;switch(e){case"any":o=Ma.ANY;break;case"display":break;case"print":o=Ma.PRINT;break;default:Ge(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case or.DISABLE:o+=Ma.ANNOTATIONS_DISABLE;break;case or.ENABLE:break;case or.ENABLE_FORMS:o+=Ma.ANNOTATIONS_FORMS;break;case or.ENABLE_STORAGE:o+=Ma.ANNOTATIONS_STORAGE,d=(o&Ma.PRINT&&i instanceof H_?i:this.annotationStorage).serializable;break;default:Ge(`getRenderingIntent - invalid annotationMode: ${t}`)}return r&&(o+=Ma.OPLIST),{renderingIntent:o,cacheKey:`${o}_${d.hash}`,annotationStorageSerializable:d}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=f(this,xi))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of f(this,gi).values())e.push(r._destroy());f(this,gi).clear(),f(this,Pc).clear(),f(this,Uc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r;this.commonObjs.clear(),this.fontLoader.clear(),f(this,un).clear(),this.filterFactory.destroy(),cu.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new dl("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,r)=>{Qt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:d}){if(d){r.close();return}Qt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(d=>{if(!this.destroyed)throw d})}}),e.on("ReaderHeadersReady",i=>{const r=Promise.withResolvers(),o=this._fullReader;return o.headersReady.then(()=>{var d;(!o.isStreamingSupported||!o.isRangeSupported)&&(this._lastProgress&&((d=t.onProgress)==null||d.call(t,this._lastProgress)),o.onProgress=h=>{var p;(p=t.onProgress)==null||p.call(t,{loaded:h.loaded,total:h.total})}),r.resolve({isStreamingSupported:o.isStreamingSupported,isRangeSupported:o.isRangeSupported,contentLength:o.contentLength})},r.reject),r.promise}),e.on("GetRangeReader",(i,r)=>{Qt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(i.begin,i.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:d,done:h}){if(h){r.close();return}Qt(d instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(d),1,[d])}).catch(d=>{r.error(d)})},r.onCancel=d=>{o.cancel(d),r.ready.catch(h=>{if(!this.destroyed)throw h})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new fj(i,this))}),e.on("DocException",function(i){let r;switch(i.name){case"PasswordException":r=new Wx(i.message,i.code);break;case"InvalidPDFException":r=new l_(i.message);break;case"MissingPDFException":r=new ul(i.message);break;case"UnexpectedResponseException":r=new lg(i.message,i.status);break;case"UnknownErrorException":r=new Zx(i.message,i.details);break;default:mt("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",i=>{if(w(this,xi,Promise.withResolvers()),t.onPassword){const r=o=>{o instanceof Error?f(this,xi).reject(o):f(this,xi).resolve({password:o})};try{t.onPassword(r,i.code)}catch(o){f(this,xi).reject(o)}}else f(this,xi).reject(new Wx(i.message,i.code));return f(this,xi).promise}),e.on("DataLoaded",i=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;f(this,gi).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,r,o])=>{var d;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:h,fontExtraProperties:p,pdfBug:m}=this._params;if("error"in o){const E=o.error;Ge(`Error during font loading: ${E}`),this.commonObjs.resolve(i,E);break}const x=m&&((d=globalThis.FontInspector)!=null&&d.enabled)?(E,S)=>globalThis.FontInspector.fontAdded(E,S):null,v=new pC(o,{disableFontFace:h,inspectFont:x});this.fontLoader.bind(v).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!p&&v.data&&(v.data=null),this.commonObjs.resolve(i,v)});break;case"CopyLocalImage":const{imageRef:y}=o;Qt(y,"The imageRef must be defined.");for(const E of f(this,gi).values())for(const[,S]of E.objs)if((S==null?void 0:S.ref)===y)return S.dataLen?(this.commonObjs.resolve(i,structuredClone(S)),S.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([i,r,o,d])=>{var p;if(this.destroyed)return;const h=f(this,gi).get(r);if(!h.objs.has(i)){if(h._intentStates.size===0){(p=d==null?void 0:d.bitmap)==null||p.close();return}switch(o){case"Image":h.objs.resolve(i,d),(d==null?void 0:d.dataLen)>HT&&(h._maybeCleanupAfterRender=!0);break;case"Pattern":h.objs.resolve(i,d);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",i=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&Ge("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=f(this,Pc).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&f(this,Uc).set(o.refStr,e);const d=new mj(t,o,this,this._params.pdfBug);return f(this,gi).set(t,d),d});return f(this,Pc).set(t,r),r}getPageIndex(e){return QE(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return T(this,Do,kd).call(this,"GetFieldObjects")}hasJSActions(){return T(this,Do,kd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return T(this,Do,kd).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return T(this,Do,kd).call(this,"GetOptionalContentConfig").then(t=>new LC(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=f(this,un).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(r=>{var o,d;return{info:r[0],metadata:r[1]?new DC(r[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((d=this._fullReader)==null?void 0:d.contentLength)??null}});return f(this,un).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of f(this,gi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),f(this,un).clear(),this.filterFactory.destroy(!0),cu.cleanup()}}cachedPageNumber(e){if(!QE(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return f(this,Uc).get(t)??null}}un=new WeakMap,gi=new WeakMap,Pc=new WeakMap,Uc=new WeakMap,xi=new WeakMap,Do=new WeakSet,kd=function(e,t=null){const i=f(this,un).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,t);return f(this,un).set(e,r),r};const Zm=Symbol("INITIAL_DATA");var $a,Ih,jb;class iw{constructor(){C(this,Ih);C(this,$a,Object.create(null))}get(e,t=null){if(t){const r=T(this,Ih,jb).call(this,e);return r.promise.then(()=>t(r.data)),null}const i=f(this,$a)[e];if(!i||i.data===Zm)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=f(this,$a)[e];return!!t&&t.data!==Zm}resolve(e,t=null){const i=T(this,Ih,jb).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in f(this,$a)){const{data:i}=f(this,$a)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}w(this,$a,Object.create(null))}*[Symbol.iterator](){for(const e in f(this,$a)){const{data:t}=f(this,$a)[e];t!==Zm&&(yield[e,t])}}}$a=new WeakMap,Ih=new WeakSet,jb=function(e){var t;return(t=f(this,$a))[e]||(t[e]={...Promise.withResolvers(),data:Zm})};var br;class xj{constructor(e){C(this,br,null);w(this,br,e),this.onContinue=null}get promise(){return f(this,br).capability.promise}cancel(e=0){f(this,br).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=f(this,br).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=f(this,br);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}br=new WeakMap;var vr,Oo;const ro=class ro{constructor({callback:e,params:t,objs:i,commonObjs:r,annotationCanvasMap:o,operatorList:d,pageIndex:h,canvasFactory:p,filterFactory:m,useRequestAnimationFrame:x=!1,pdfBug:v=!1,pageColors:y=null}){C(this,vr,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=d,this._pageIndex=h,this.canvasFactory=p,this.filterFactory=m,this._pdfBug=v,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=x===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new xj(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var h,p;if(this.cancelled)return;if(this._canvas){if(f(ro,Oo).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");f(ro,Oo).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:o,background:d}=this.params;this.gfx=new uc(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:r,transparency:e,background:d}),this.operatorListIdx=0,this.graphicsReady=!0,(p=this.graphicsReadyCallback)==null||p.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),f(this,vr)&&(window.cancelAnimationFrame(f(this,vr)),w(this,vr,null)),f(ro,Oo).delete(this._canvas),this.callback(e||new yv(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?w(this,vr,window.requestAnimationFrame(()=>{w(this,vr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),f(ro,Oo).delete(this._canvas),this.callback())))}};vr=new WeakMap,Oo=new WeakMap,C(ro,Oo,new WeakSet);let Rb=ro;const bj="4.4.168",vj="19fbc8998";function KE(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}function Ed(c){return Math.max(0,Math.min(255,255*c))}class WE{static CMYK_G([e,t,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Ed(e),[e,e,e]}static G_HTML([e]){const t=KE(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(Ed)}static RGB_HTML(e){return`#${e.map(KE).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,i,r]){return[Ed(1-Math.min(1,e+r)),Ed(1-Math.min(1,i+r)),Ed(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const r=1-e,o=1-t,d=1-i,h=Math.min(r,o,d);return["CMYK",r,o,d,h]}}class nw{static setupStorage(e,t,i,r,o){const d=r.getValue(t,{value:null});switch(i.name){case"textarea":if(d.value!==null&&(e.textContent=d.value),o==="print")break;e.addEventListener("input",h=>{r.setValue(t,{value:h.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(d.value===i.attributes.xfaOn?e.setAttribute("checked",!0):d.value===i.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",h=>{r.setValue(t,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(d.value!==null&&e.setAttribute("value",d.value),o==="print")break;e.addEventListener("input",h=>{r.setValue(t,{value:h.target.value})})}break;case"select":if(d.value!==null){e.setAttribute("value",d.value);for(const h of i.children)h.attributes.value===d.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}e.addEventListener("input",h=>{const p=h.target.options,m=p.selectedIndex===-1?"":p[p.selectedIndex].value;r.setValue(t,{value:m})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:r,linkService:o}){const{attributes:d}=t,h=e instanceof HTMLAnchorElement;d.type==="radio"&&(d.name=`${d.name}-${r}`);for(const[p,m]of Object.entries(d))if(m!=null)switch(p){case"class":m.length&&e.setAttribute(p,m.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",m);break;case"style":Object.assign(e.style,m);break;case"textContent":e.textContent=m;break;default:(!h||p!=="href"&&p!=="newWindow")&&e.setAttribute(p,m)}h&&o.addLinkAttributes(e,d.href,d.newWindow),i&&d.dataId&&this.setupStorage(e,d.dataId,t,i)}static render(e){var v,y;const t=e.annotationStorage,i=e.linkService,r=e.xfaHtml,o=e.intent||"display",d=document.createElement(r.name);r.attributes&&this.setAttributes({html:d,element:r,intent:o,linkService:i});const h=o!=="richText",p=e.div;if(p.append(d),e.viewport){const E=`matrix(${e.viewport.transform.join(",")})`;p.style.transform=E}h&&p.setAttribute("class","xfaLayer xfaFont");const m=[];if(r.children.length===0){if(r.value){const E=document.createTextNode(r.value);d.append(E),h&&Yd.shouldBuildText(r.name)&&m.push(E)}return{textDivs:m}}const x=[[r,-1,d]];for(;x.length>0;){const[E,S,_]=x.at(-1);if(S+1===E.children.length){x.pop();continue}const j=E.children[++x.at(-1)[1]];if(j===null)continue;const{name:R}=j;if(R==="#text"){const D=document.createTextNode(j.value);m.push(D),_.append(D);continue}const L=(v=j==null?void 0:j.attributes)!=null&&v.xmlns?document.createElementNS(j.attributes.xmlns,R):document.createElement(R);if(_.append(L),j.attributes&&this.setAttributes({html:L,element:j,storage:t,intent:o,linkService:i}),((y=j.children)==null?void 0:y.length)>0)x.push([j,-1,L]);else if(j.value){const D=document.createTextNode(j.value);h&&Yd.shouldBuildText(R)&&m.push(D),L.append(D)}}for(const E of p.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))E.setAttribute("readOnly",!0);return{textDivs:m}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const jf=1e3,yj=9,nl=new WeakSet;function Tn(c){return{width:c[2]-c[0],height:c[3]-c[1]}}class Aj{static create(e){switch(e.data.annotationType){case qt.LINK:return new rw(e);case qt.TEXT:return new Ej(e);case qt.WIDGET:switch(e.data.fieldType){case"Tx":return new Sj(e);case"Btn":return e.data.radioButton?new cw(e):e.data.checkBox?new wj(e):new Nj(e);case"Ch":return new Tj(e);case"Sig":return new _j(e)}return new hl(e);case qt.POPUP:return new kb(e);case qt.FREETEXT:return new mw(e);case qt.LINE:return new jj(e);case qt.SQUARE:return new Rj(e);case qt.CIRCLE:return new Mj(e);case qt.POLYLINE:return new pw(e);case qt.CARET:return new Dj(e);case qt.INK:return new gw(e);case qt.POLYGON:return new kj(e);case qt.HIGHLIGHT:return new Oj(e);case qt.UNDERLINE:return new Lj(e);case qt.SQUIGGLY:return new Ij(e);case qt.STRIKEOUT:return new Pj(e);case qt.STAMP:return new xw(e);case qt.FILEATTACHMENT:return new Uj(e);default:return new Lt(e)}}}var Lo,zc,Fc,Ph,Mb;const Hv=class Hv{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){C(this,Ph);C(this,Lo,null);C(this,zc,!1);C(this,Fc,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get hasPopupData(){return Hv._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;f(this,Lo)||w(this,Lo,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&T(this,Ph,Mb).call(this,t),(i=f(this,Fc))==null||i.popup.updateEdited(e)}resetEdited(){var e;f(this,Lo)&&(T(this,Ph,Mb).call(this,f(this,Lo).rect),(e=f(this,Fc))==null||e.popup.resetEdited(),w(this,Lo,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),this instanceof hl||(o.tabIndex=jf);const{style:d}=o;if(d.zIndex=this.parent.zIndex++,t.popupRef&&o.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof kb){const{rotation:_}=t;return!t.hasOwnCanvas&&_!==0&&this.setRotation(_,o),o}const{width:h,height:p}=Tn(t.rect);if(!e&&t.borderStyle.width>0){d.borderWidth=`${t.borderStyle.width}px`;const _=t.borderStyle.horizontalCornerRadius,j=t.borderStyle.verticalCornerRadius;if(_>0||j>0){const L=`calc(${_}px * var(--scale-factor)) / calc(${j}px * var(--scale-factor))`;d.borderRadius=L}else if(this instanceof cw){const L=`calc(${h}px * var(--scale-factor)) / calc(${p}px * var(--scale-factor))`;d.borderRadius=L}switch(t.borderStyle.style){case yd.SOLID:d.borderStyle="solid";break;case yd.DASHED:d.borderStyle="dashed";break;case yd.BEVELED:Ge("Unimplemented border style: beveled");break;case yd.INSET:Ge("Unimplemented border style: inset");break;case yd.UNDERLINE:d.borderBottomStyle="solid";break}const R=t.borderColor||null;R?(w(this,zc,!0),d.borderColor=Ae.makeHexColor(R[0]|0,R[1]|0,R[2]|0)):d.borderWidth=0}const m=Ae.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:x,pageHeight:v,pageX:y,pageY:E}=r.rawDims;d.left=`${100*(m[0]-y)/x}%`,d.top=`${100*(m[1]-E)/v}%`;const{rotation:S}=t;return t.hasOwnCanvas||S===0?(d.width=`${100*h/x}%`,d.height=`${100*p/v}%`):this.setRotation(S,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:o,height:d}=Tn(this.data.rect);let h,p;e%180===0?(h=100*o/i,p=100*d/r):(h=100*d/i,p=100*o/r),t.style.width=`${h}%`,t.style.height=`${p}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,r)=>{const o=r.detail[t],d=o[0],h=o.slice(1);r.target.style[i]=WE[`${d}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[i]:WE[`${d}_rgb`](h)})};return Ze(this,"_commonActions",{display:t=>{const{display:i}=t.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const r of Object.keys(t.detail)){const o=e[r]||i[r];o==null||o(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[r,o]of Object.entries(t)){const d=i[r];if(d){const h={detail:{[r]:o},target:e};d(h),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,r,o]=this.data.rect.map(_=>Math.fround(_));if(e.length===8){const[_,j,R,L]=e.subarray(2,6);if(r===_&&o===j&&t===R&&i===L)return}const{style:d}=this.container;let h;if(f(this,zc)){const{borderColor:_,borderWidth:j}=d;d.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_}" stroke-width="${j}">`],this.container.classList.add("hasBorder")}const p=r-t,m=o-i,{svgFactory:x}=this,v=x.createElement("svg");v.classList.add("quadrilateralsContainer"),v.setAttribute("width",0),v.setAttribute("height",0);const y=x.createElement("defs");v.append(y);const E=x.createElement("clipPath"),S=`clippath_${this.data.id}`;E.setAttribute("id",S),E.setAttribute("clipPathUnits","objectBoundingBox"),y.append(E);for(let _=2,j=e.length;_<j;_+=8){const R=e[_],L=e[_+1],D=e[_+2],z=e[_+3],P=x.createElement("rect"),H=(D-t)/p,se=(o-L)/m,re=(R-D)/p,ne=(L-z)/m;P.setAttribute("x",H),P.setAttribute("y",se),P.setAttribute("width",re),P.setAttribute("height",ne),E.append(P),h==null||h.push(`<rect vector-effect="non-scaling-stroke" x="${H}" y="${se}" width="${re}" height="${ne}"/>`)}f(this,zc)&&(h.push("</g></svg>')"),d.backgroundImage=h.join("")),this.container.append(v),this.container.style.clipPath=`url(#${S})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const i=w(this,Fc,new kb({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(i.render())}render(){mt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:o,id:d,exportValues:h}of r){if(o===-1||d===t)continue;const p=typeof h=="string"?h:null,m=document.querySelector(`[data-element-id="${d}"]`);if(m&&!nl.has(m)){Ge(`_getElementsByName - element not allowed: ${d}`);continue}i.push({id:d,exportValue:p,domElement:m})}return i}for(const r of document.getElementsByName(e)){const{exportValue:o}=r,d=r.getAttribute("data-element-id");d!==t&&nl.has(r)&&i.push({id:d,exportValue:o,domElement:r})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Lo=new WeakMap,zc=new WeakMap,Fc=new WeakMap,Ph=new WeakSet,Mb=function(e){const{container:{style:t},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:d,pageX:h,pageY:p}}}}=this;i==null||i.splice(0,4,...e);const{width:m,height:x}=Tn(e);t.left=`${100*(e[0]-h)/o}%`,t.top=`${100*(d-e[3]+p)/d}%`,r===0?(t.width=`${100*m/o}%`,t.height=`${100*x/d}%`):this.setRotation(r)};let Lt=Hv;var ma,so,ow,lw;class rw extends Lt{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});C(this,ma);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let o=!1;return t.url?(i.addLinkAttributes(r,t.url,t.newWindow),o=!0):t.action?(this._bindNamedAction(r,t.action),o=!0):t.attachment?(T(this,ma,ow).call(this,r,t.attachment,t.attachmentDest),o=!0):t.setOCGState?(T(this,ma,lw).call(this,r,t.setOCGState),o=!0):t.dest?(this._bindLink(r,t.dest),o=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),o=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(r,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(r),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&T(this,ma,so).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),T(this,ma,so).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(i.actions)){const d=r.get(o);d&&(t[d]=()=>{var h;return(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:o}}),!1})}t.onclick||(t.onclick=()=>!1),T(this,ma,so).call(this)}_bindResetFormAction(t,i){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),T(this,ma,so).call(this),!this._fieldObjects){Ge('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var v;r==null||r();const{fields:o,refs:d,include:h}=i,p=[];if(o.length!==0||d.length!==0){const y=new Set(d);for(const E of o){const S=this._fieldObjects[E]||[];for(const{id:_}of S)y.add(_)}for(const E of Object.values(this._fieldObjects))for(const S of E)y.has(S.id)===h&&p.push(S)}else for(const y of Object.values(this._fieldObjects))p.push(...y);const m=this.annotationStorage,x=[];for(const y of p){const{id:E}=y;switch(x.push(E),y.type){case"text":{const _=y.defaultValue||"";m.setValue(E,{value:_});break}case"checkbox":case"radiobutton":{const _=y.defaultValue===y.exportValues;m.setValue(E,{value:_});break}case"combobox":case"listbox":{const _=y.defaultValue||"";m.setValue(E,{value:_});break}default:continue}const S=document.querySelector(`[data-element-id="${E}"]`);if(S){if(!nl.has(S)){Ge(`_bindResetFormAction - element not allowed: ${E}`);continue}}else continue;S.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:x,name:"ResetForm"}})),!1}}}ma=new WeakSet,so=function(){this.container.setAttribute("data-internal-link","")},ow=function(t,i,r=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(i.content,i.filename,r),!1},T(this,ma,so).call(this)},lw=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),T(this,ma,so).call(this)};class Ej extends Lt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class hl extends Lt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Vs.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,r,o){i.includes("mouse")?e.addEventListener(i,d=>{var h;(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(d),shift:d.shiftKey,modifier:this._getKeyModifier(d)}})}):e.addEventListener(i,d=>{var h;if(i==="blur"){if(!t.focused||!d.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}o&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(d)}}))})}_setEventListeners(e,t,i,r){var o,d,h;for(const[p,m]of i)(m==="Action"||(o=this.data.actions)!=null&&o[m])&&((m==="Focus"||m==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,p,m,r),m==="Focus"&&!((d=this.data.actions)!=null&&d.Blur)?this._setEventListener(e,t,"blur","Blur",null):m==="Blur"&&!((h=this.data.actions)!=null&&h.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Ae.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||yj,o=e.style;let d;const h=2,p=m=>Math.round(10*m)/10;if(this.data.multiLine){const m=Math.abs(this.data.rect[3]-this.data.rect[1]-h),x=Math.round(m/(Px*r))||1,v=m/x;d=Math.min(r,p(v/Px))}else{const m=Math.abs(this.data.rect[3]-this.data.rect[1]-h);d=Math.min(r,p(m/Px))}o.fontSize=`calc(${d}px * var(--scale-factor))`,o.color=Ae.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Sj extends hl{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,r){const o=this.annotationStorage;for(const d of this._getElementsByName(e.name,e.id))d.domElement&&(d.domElement[t]=i),o.setValue(d.id,{[r]:i})}render(){var r,o;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const d=e.getValue(t,{value:this.data.fieldValue});let h=d.value||"";const p=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;p&&h.length>p&&(h=h.slice(0,p));let m=d.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;m&&this.data.comb&&(m=m.replaceAll(/\s+/g,""));const x={userValue:h,formattedValue:m,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=m??h,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",m??h),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),nl.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=jf,this._setRequired(i,this.data.required),p&&(i.maxLength=p),i.addEventListener("input",y=>{e.setValue(t,{value:y.target.value}),this.setPropertyOnSiblings(i,"value",y.target.value,"value"),x.formattedValue=null}),i.addEventListener("resetform",y=>{const E=this.data.defaultFieldValue??"";i.value=x.userValue=E,x.formattedValue=null});let v=y=>{const{formattedValue:E}=x;E!=null&&(y.target.value=E),y.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",E=>{var _;if(x.focused)return;const{target:S}=E;x.userValue&&(S.value=x.userValue),x.lastCommittedValue=S.value,x.commitKey=1,(_=this.data.actions)!=null&&_.Focus||(x.focused=!0)}),i.addEventListener("updatefromsandbox",E=>{this.showElementAndHideCanvas(E.target);const S={value(_){x.userValue=_.detail.value??"",e.setValue(t,{value:x.userValue.toString()}),_.target.value=x.userValue},formattedValue(_){const{formattedValue:j}=_.detail;x.formattedValue=j,j!=null&&_.target!==document.activeElement&&(_.target.value=j),e.setValue(t,{formattedValue:j})},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{var D;const{charLimit:j}=_.detail,{target:R}=_;if(j===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",j);let L=x.userValue;!L||L.length<=j||(L=L.slice(0,j),R.value=x.userValue=L,e.setValue(t,{value:L}),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:L,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(S,E)}),i.addEventListener("keydown",E=>{var j;x.commitKey=1;let S=-1;if(E.key==="Escape"?S=0:E.key==="Enter"&&!this.data.multiLine?S=2:E.key==="Tab"&&(x.commitKey=3),S===-1)return;const{value:_}=E.target;x.lastCommittedValue!==_&&(x.lastCommittedValue=_,x.userValue=_,(j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:S,selStart:E.target.selectionStart,selEnd:E.target.selectionEnd}}))});const y=v;v=null,i.addEventListener("blur",E=>{var _,j;if(!x.focused||!E.relatedTarget)return;(_=this.data.actions)!=null&&_.Blur||(x.focused=!1);const{value:S}=E.target;x.userValue=S,x.lastCommittedValue!==S&&((j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:x.commitKey,selStart:E.target.selectionStart,selEnd:E.target.selectionEnd}})),y(E)}),(o=this.data.actions)!=null&&o.Keystroke&&i.addEventListener("beforeinput",E=>{var P;x.lastCommittedValue=null;const{data:S,target:_}=E,{value:j,selectionStart:R,selectionEnd:L}=_;let D=R,z=L;switch(E.inputType){case"deleteWordBackward":{const H=j.substring(0,R).match(/\w*[^\w]*$/);H&&(D-=H[0].length);break}case"deleteWordForward":{const H=j.substring(R).match(/^[^\w]*\w*/);H&&(z+=H[0].length);break}case"deleteContentBackward":R===L&&(D-=1);break;case"deleteContentForward":R===L&&(z+=1);break}E.preventDefault(),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:j,change:S||"",willCommit:!1,selStart:D,selEnd:z}})}),this._setEventListeners(i,x,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],E=>E.target.value)}if(v&&i.addEventListener("blur",v),this.data.comb){const E=(this.data.rect[2]-this.data.rect[0])/p;i.classList.add("comb"),i.style.letterSpacing=`calc(${E}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class _j extends hl{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class wj extends hl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return nl.add(o),o.setAttribute("data-element-id",i),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=jf,o.addEventListener("change",d=>{const{name:h,checked:p}=d.target;for(const m of this._getElementsByName(h,i)){const x=p&&m.exportValue===t.exportValue;m.domElement&&(m.domElement.checked=x),e.setValue(m.id,{value:x})}e.setValue(i,{value:p})}),o.addEventListener("resetform",d=>{const h=t.defaultFieldValue||"Off";d.target.checked=h===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",d=>{const h={value(p){p.target.checked=p.detail.value!=="Off",e.setValue(i,{value:p.target.checked})}};this._dispatchEventFromSandbox(h,d)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class cw extends hl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(i,{value:r})),r)for(const d of this._getElementsByName(t.fieldName,i))e.setValue(d.id,{value:!1});const o=document.createElement("input");if(nl.add(o),o.setAttribute("data-element-id",i),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=jf,o.addEventListener("change",d=>{const{name:h,checked:p}=d.target;for(const m of this._getElementsByName(h,i))e.setValue(m.id,{value:!1});e.setValue(i,{value:p})}),o.addEventListener("resetform",d=>{const h=t.defaultFieldValue;d.target.checked=h!=null&&h===t.buttonValue}),this.enableScripting&&this.hasJSActions){const d=t.buttonValue;o.addEventListener("updatefromsandbox",h=>{const p={value:m=>{const x=d===m.detail.value;for(const v of this._getElementsByName(m.target.name)){const y=x&&v.id===i;v.domElement&&(v.domElement.checked=y),e.setValue(v.id,{value:y})}}};this._dispatchEventFromSandbox(p,h)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Nj extends rw{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class Tj extends hl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");nl.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=jf;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",x=>{const v=this.data.defaultFieldValue;for(const y of r.options)y.selected=y.value===v});for(const x of this.data.options){const v=document.createElement("option");v.textContent=x.displayValue,v.value=x.exportValue,i.value.includes(x.exportValue)&&(v.setAttribute("selected",!0),o=!1),r.append(v)}let d=null;if(o){const x=document.createElement("option");x.value=" ",x.setAttribute("hidden",!0),x.setAttribute("selected",!0),r.prepend(x),d=()=>{x.remove(),r.removeEventListener("input",d),d=null},r.addEventListener("input",d)}const h=x=>{const v=x?"value":"textContent",{options:y,multiple:E}=r;return E?Array.prototype.filter.call(y,S=>S.selected).map(S=>S[v]):y.selectedIndex===-1?null:y[y.selectedIndex][v]};let p=h(!1);const m=x=>{const v=x.target.options;return Array.prototype.map.call(v,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",x=>{const v={value(y){d==null||d();const E=y.detail.value,S=new Set(Array.isArray(E)?E:[E]);for(const _ of r.options)_.selected=S.has(_.value);e.setValue(t,{value:h(!0)}),p=h(!1)},multipleSelection(y){r.multiple=!0},remove(y){const E=r.options,S=y.detail.remove;E[S].selected=!1,r.remove(S),E.length>0&&Array.prototype.findIndex.call(E,j=>j.selected)===-1&&(E[0].selected=!0),e.setValue(t,{value:h(!0),items:m(y)}),p=h(!1)},clear(y){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),p=h(!1)},insert(y){const{index:E,displayValue:S,exportValue:_}=y.detail.insert,j=r.children[E],R=document.createElement("option");R.textContent=S,R.value=_,j?j.before(R):r.append(R),e.setValue(t,{value:h(!0),items:m(y)}),p=h(!1)},items(y){const{items:E}=y.detail;for(;r.length!==0;)r.remove(0);for(const S of E){const{displayValue:_,exportValue:j}=S,R=document.createElement("option");R.textContent=_,R.value=j,r.append(R)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:h(!0),items:m(y)}),p=h(!1)},indices(y){const E=new Set(y.detail.indices);for(const S of y.target.options)S.selected=E.has(S.index);e.setValue(t,{value:h(!0)}),p=h(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(v,x)}),r.addEventListener("input",x=>{var E;const v=h(!0),y=h(!1);e.setValue(t,{value:v}),x.preventDefault(),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:p,change:y,changeEx:v,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],x=>x.target.value)):r.addEventListener("input",function(x){e.setValue(t,{value:h(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class kb extends Lt{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:Lt._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new Cj({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${u_}${i}`).join(",")),this.container}}var Bc,Jp,eg,Hc,Io,Mt,dn,Po,Uh,zh,qc,hn,Xa,fn,Fh,mn,Bh,Uo,zo,pt,fp,Db,uw,dw,hw,fw,mp,pp,Ob;class Cj{constructor({container:e,color:t,elements:i,titleObj:r,modificationDate:o,contentsObj:d,richText:h,parent:p,rect:m,parentRect:x,open:v}){C(this,pt);C(this,Bc,T(this,pt,hw).bind(this));C(this,Jp,T(this,pt,Ob).bind(this));C(this,eg,T(this,pt,pp).bind(this));C(this,Hc,T(this,pt,mp).bind(this));C(this,Io,null);C(this,Mt,null);C(this,dn,null);C(this,Po,null);C(this,Uh,null);C(this,zh,null);C(this,qc,null);C(this,hn,!1);C(this,Xa,null);C(this,fn,null);C(this,Fh,null);C(this,mn,null);C(this,Bh,null);C(this,Uo,null);C(this,zo,!1);var y;w(this,Mt,e),w(this,Bh,r),w(this,dn,d),w(this,mn,h),w(this,zh,p),w(this,Io,t),w(this,Fh,m),w(this,qc,x),w(this,Uh,i),w(this,Po,p_.toDateObject(o)),this.trigger=i.flatMap(E=>E.getElementsToTriggerPopup());for(const E of this.trigger)E.addEventListener("click",f(this,Hc)),E.addEventListener("mouseenter",f(this,eg)),E.addEventListener("mouseleave",f(this,Jp)),E.classList.add("popupTriggerArea");for(const E of i)(y=E.container)==null||y.addEventListener("keydown",f(this,Bc));f(this,Mt).hidden=!0,v&&T(this,pt,mp).call(this)}render(){if(f(this,Xa))return;const e=w(this,Xa,document.createElement("div"));if(e.className="popup",f(this,Io)){const o=e.style.outlineColor=Ae.makeHexColor(...f(this,Io));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:e.style.backgroundColor=Ae.makeHexColor(...f(this,Io).map(h=>Math.floor(.7*(255-h)+h)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=f(this,Bh),e.append(t),f(this,Po)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),o.setAttribute("data-l10n-args",JSON.stringify({date:f(this,Po).toLocaleDateString(),time:f(this,Po).toLocaleTimeString()})),t.append(o)}const r=f(this,pt,fp);if(r)nw.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(f(this,dn));e.append(o)}f(this,Mt).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let o=0,d=r.length;o<d;++o){const h=r[o];i.append(document.createTextNode(h)),o<d-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;f(this,Uo)||w(this,Uo,{contentsObj:f(this,dn),richText:f(this,mn)}),e&&w(this,fn,null),t&&(w(this,mn,T(this,pt,dw).call(this,t)),w(this,dn,null)),(i=f(this,Xa))==null||i.remove(),w(this,Xa,null)}resetEdited(){var e;f(this,Uo)&&({contentsObj:aa(this,dn)._,richText:aa(this,mn)._}=f(this,Uo),w(this,Uo,null),(e=f(this,Xa))==null||e.remove(),w(this,Xa,null),w(this,fn,null))}forceHide(){w(this,zo,this.isVisible),f(this,zo)&&(f(this,Mt).hidden=!0)}maybeShow(){f(this,zo)&&(f(this,Xa)||T(this,pt,pp).call(this),w(this,zo,!1),f(this,Mt).hidden=!1)}get isVisible(){return f(this,Mt).hidden===!1}}Bc=new WeakMap,Jp=new WeakMap,eg=new WeakMap,Hc=new WeakMap,Io=new WeakMap,Mt=new WeakMap,dn=new WeakMap,Po=new WeakMap,Uh=new WeakMap,zh=new WeakMap,qc=new WeakMap,hn=new WeakMap,Xa=new WeakMap,fn=new WeakMap,Fh=new WeakMap,mn=new WeakMap,Bh=new WeakMap,Uo=new WeakMap,zo=new WeakMap,pt=new WeakSet,fp=function(){const e=f(this,mn),t=f(this,dn);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&f(this,mn).html||null},Db=function(){var e,t,i;return((i=(t=(e=f(this,pt,fp))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},uw=function(){var e,t,i;return((i=(t=(e=f(this,pt,fp))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},dw=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:f(this,pt,uw),fontSize:f(this,pt,Db)?`calc(${f(this,pt,Db)}px * var(--scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:r});return i},hw=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&f(this,hn))&&T(this,pt,mp).call(this)},fw=function(){if(f(this,fn)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:r,pageY:o}}}=f(this,zh);let d=!!f(this,qc),h=d?f(this,qc):f(this,Fh);for(const S of f(this,Uh))if(!h||Ae.intersect(S.data.rect,h)!==null){h=S.data.rect,d=!0;break}const p=Ae.normalizeRect([h[0],e[3]-h[1]+e[1],h[2],e[3]-h[3]+e[1]]),x=d?h[2]-h[0]+5:0,v=p[0]+x,y=p[1];w(this,fn,[100*(v-r)/t,100*(y-o)/i]);const{style:E}=f(this,Mt);E.left=`${f(this,fn)[0]}%`,E.top=`${f(this,fn)[1]}%`},mp=function(){w(this,hn,!f(this,hn)),f(this,hn)?(T(this,pt,pp).call(this),f(this,Mt).addEventListener("click",f(this,Hc)),f(this,Mt).addEventListener("keydown",f(this,Bc))):(T(this,pt,Ob).call(this),f(this,Mt).removeEventListener("click",f(this,Hc)),f(this,Mt).removeEventListener("keydown",f(this,Bc)))},pp=function(){f(this,Xa)||this.render(),this.isVisible?f(this,hn)&&f(this,Mt).classList.add("focused"):(T(this,pt,fw).call(this),f(this,Mt).hidden=!1,f(this,Mt).style.zIndex=parseInt(f(this,Mt).style.zIndex)+1e3)},Ob=function(){f(this,Mt).classList.remove("focused"),!(f(this,hn)||!this.isVisible)&&(f(this,Mt).hidden=!0,f(this,Mt).style.zIndex=parseInt(f(this,Mt).style.zIndex)-1e3)};class mw extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=We.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var Hh;class jj extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Hh,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:r}=Tn(t.rect),o=this.svgFactory.create(i,r,!0),d=w(this,Hh,this.svgFactory.createElement("svg:line"));return d.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),d.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),d.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),d.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),d.setAttribute("stroke-width",t.borderStyle.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),o.append(d),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Hh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hh=new WeakMap;var qh;class Rj extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,qh,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:r}=Tn(t.rect),o=this.svgFactory.create(i,r,!0),d=t.borderStyle.width,h=w(this,qh,this.svgFactory.createElement("svg:rect"));return h.setAttribute("x",d/2),h.setAttribute("y",d/2),h.setAttribute("width",i-d),h.setAttribute("height",r-d),h.setAttribute("stroke-width",d||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,qh)}addHighlightArea(){this.container.classList.add("highlightArea")}}qh=new WeakMap;var Gh;class Mj extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Gh,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:r}=Tn(t.rect),o=this.svgFactory.create(i,r,!0),d=t.borderStyle.width,h=w(this,Gh,this.svgFactory.createElement("svg:ellipse"));return h.setAttribute("cx",i/2),h.setAttribute("cy",r/2),h.setAttribute("rx",i/2-d/2),h.setAttribute("ry",r/2-d/2),h.setAttribute("stroke-width",d||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Gh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gh=new WeakMap;var Yh;class pw extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Yh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:r,popupRef:o}}=this;if(!i)return this.container;const{width:d,height:h}=Tn(t),p=this.svgFactory.create(d,h,!0);let m=[];for(let v=0,y=i.length;v<y;v+=2){const E=i[v]-t[0],S=t[3]-i[v+1];m.push(`${E},${S}`)}m=m.join(" ");const x=w(this,Yh,this.svgFactory.createElement(this.svgElementName));return x.setAttribute("points",m),x.setAttribute("stroke-width",r.width||1),x.setAttribute("stroke","transparent"),x.setAttribute("fill","transparent"),p.append(x),this.container.append(p),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Yh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yh=new WeakMap;class kj extends pw{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Dj extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Vh;class gw extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Vh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=We.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:i,borderStyle:r,popupRef:o}}=this,{width:d,height:h}=Tn(t),p=this.svgFactory.create(d,h,!0);for(const m of i){let x=[];for(let y=0,E=m.length;y<E;y+=2){const S=m[y]-t[0],_=t[3]-m[y+1];x.push(`${S},${_}`)}x=x.join(" ");const v=this.svgFactory.createElement(this.svgElementName);f(this,Vh).push(v),v.setAttribute("points",x),v.setAttribute("stroke-width",r.width||1),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),!o&&this.hasPopupData&&this._createPopup(),p.append(v)}return this.container.append(p),this.container}getElementsToTriggerPopup(){return f(this,Vh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vh=new WeakMap;class Oj extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Lj extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Ij extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Pj extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class xw extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var $h,Xh,Lb;class Uj extends Lt{constructor(t){var r;super(t,{isRenderable:!0});C(this,Xh);C(this,$h,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",T(this,Xh,Lb).bind(this)),w(this,$h,r);const{isMac:o}=Vs.platform;return t.addEventListener("keydown",d=>{d.key==="Enter"&&(o?d.metaKey:d.ctrlKey)&&T(this,Xh,Lb).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return f(this,$h)}addHighlightArea(){this.container.classList.add("highlightArea")}}$h=new WeakMap,Xh=new WeakSet,Lb=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Qh,Fo,Gc,ll,bw,Ib;class zj{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:r,page:o,viewport:d}){C(this,ll);C(this,Qh,null);C(this,Fo,null);C(this,Gc,new Map);this.div=e,w(this,Qh,t),w(this,Fo,i),this.page=o,this.viewport=d,this.zIndex=0,this._annotationEditorUIManager=r}async render(e){var d;const{annotations:t}=e,i=this.div;al(i,this.viewport);const r=new Map,o={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new vv,annotationStorage:e.annotationStorage||new _v,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const h of t){if(h.noHTML)continue;const p=h.annotationType===qt.POPUP;if(p){const v=r.get(h.id);if(!v)continue;o.elements=v}else{const{width:v,height:y}=Tn(h.rect);if(v<=0||y<=0)continue}o.data=h;const m=Aj.create(o);if(!m.isRenderable)continue;if(!p&&h.popupRef){const v=r.get(h.popupRef);v?v.push(m):r.set(h.popupRef,[m])}const x=m.render();h.hidden&&(x.style.visibility="hidden"),T(this,ll,bw).call(this,x,h.id),m.annotationEditorType>0&&(f(this,Gc).set(m.data.id,m),(d=this._annotationEditorUIManager)==null||d.renderAnnotationElement(m))}T(this,ll,Ib).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,al(t,{rotation:e.rotation}),T(this,ll,Ib).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(f(this,Gc).values())}getEditableAnnotation(e){return f(this,Gc).get(e)}}Qh=new WeakMap,Fo=new WeakMap,Gc=new WeakMap,ll=new WeakSet,bw=function(e,t){var r;const i=e.firstChild||e;i.id=`${u_}${t}`,this.div.append(e),(r=f(this,Qh))==null||r.moveElementInDOM(this.div,e,i,!1)},Ib=function(){if(!f(this,Fo))return;const e=this.div;for(const[t,i]of f(this,Fo)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):r.append(i)}f(this,Fo).clear()};const Jm=/\r\n?|\n/g;var Kh,Wh,Zh,Jh,ef,Qa,ca,tf,ua,Yc,Ft,vw,yw,Aw,gp,jn,xp,bp,Ew,Ub,Sw;const Et=class Et extends ct{constructor(t){super({...t,name:"freeTextEditor"});C(this,Ft);C(this,Kh,this.editorDivBlur.bind(this));C(this,Wh,this.editorDivFocus.bind(this));C(this,Zh,this.editorDivInput.bind(this));C(this,Jh,this.editorDivKeydown.bind(this));C(this,ef,this.editorDivPaste.bind(this));C(this,Qa);C(this,ca,"");C(this,tf,`${this.id}-editor`);C(this,ua);C(this,Yc,null);w(this,Qa,t.color||Et._defaultColor||ct._defaultLineColor),w(this,ua,t.fontSize||Et._defaultFontSize)}static get _keyboardManager(){const t=Et.prototype,i=d=>d.isEmpty(),r=il.TRANSLATE_SMALL,o=il.TRANSLATE_BIG;return Ze(this,"_keyboardManager",new Tf([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,o],checker:i}]]))}static initialize(t,i){ct.initialize(t,i,{strings:["pdfjs-free-text-default-content"]});const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case ze.FREETEXT_SIZE:Et._defaultFontSize=i;break;case ze.FREETEXT_COLOR:Et._defaultColor=i;break}}updateParams(t,i){switch(t){case ze.FREETEXT_SIZE:T(this,Ft,vw).call(this,i);break;case ze.FREETEXT_COLOR:T(this,Ft,yw).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ze.FREETEXT_SIZE,Et._defaultFontSize],[ze.FREETEXT_COLOR,Et._defaultColor||ct._defaultLineColor]]}get propertiesToUpdate(){return[[ze.FREETEXT_SIZE,f(this,ua)],[ze.FREETEXT_COLOR,f(this,Qa)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-Et._internalPadding*t,-(Et._internalPadding+f(this,ua))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(We.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const t=this._uiManager._signal;this.editorDiv.addEventListener("keydown",f(this,Jh),{signal:t}),this.editorDiv.addEventListener("focus",f(this,Wh),{signal:t}),this.editorDiv.addEventListener("blur",f(this,Kh),{signal:t}),this.editorDiv.addEventListener("input",f(this,Zh),{signal:t}),this.editorDiv.addEventListener("paste",f(this,ef),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",f(this,tf)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",f(this,Jh)),this.editorDiv.removeEventListener("focus",f(this,Wh)),this.editorDiv.removeEventListener("blur",f(this,Kh)),this.editorDiv.removeEventListener("input",f(this,Zh)),this.editorDiv.removeEventListener("paste",f(this,ef)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=f(this,ca),i=w(this,ca,T(this,Ft,Aw).call(this).trimEnd());if(t===i)return;const r=o=>{if(w(this,ca,o),!o){this.remove();return}T(this,Ft,bp).call(this),this._uiManager.rebuild(this),T(this,Ft,gp).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(t)},mustExec:!1}),T(this,Ft,gp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Et._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",f(this,tf)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),ct._l10nPromise.get("pdfjs-free-text-default-content").then(o=>{var d;return(d=this.editorDiv)==null?void 0:d.setAttribute("default-content",o)}),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${f(this,ua)}px * var(--scale-factor))`,r.color=f(this,Qa),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Rp(this,this.div,["dblclick","keydown"]),this.width){const[o,d]=this.parentDimensions;if(this.annotationElementId){const{position:h}=f(this,Yc);let[p,m]=this.getInitialTranslation();[p,m]=this.pageTranslationToScreen(p,m);const[x,v]=this.pageDimensions,[y,E]=this.pageTranslation;let S,_;switch(this.rotation){case 0:S=t+(h[0]-y)/x,_=i+this.height-(h[1]-E)/v;break;case 90:S=t+(h[0]-y)/x,_=i-(h[1]-E)/v,[p,m]=[m,-p];break;case 180:S=t-this.width+(h[0]-y)/x,_=i-(h[1]-E)/v,[p,m]=[-p,-m];break;case 270:S=t+(h[0]-y-this.height*v)/x,_=i+(h[1]-E-this.width*x)/v,[p,m]=[-m,p];break}this.setAt(S*o,_*d,p,m)}else this.setAt(t*o,i*d,this.width*o,this.height*d);T(this,Ft,bp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var S,_,j;const i=t.clipboardData||window.clipboardData,{types:r}=i;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const o=T(S=Et,jn,Ub).call(S,i.getData("text")||"").replaceAll(Jm,`
`);if(!o)return;const d=window.getSelection();if(!d.rangeCount)return;this.editorDiv.normalize(),d.deleteFromDocument();const h=d.getRangeAt(0);if(!o.includes(`
`)){h.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),d.collapseToStart();return}const{startContainer:p,startOffset:m}=h,x=[],v=[];if(p.nodeType===Node.TEXT_NODE){const R=p.parentElement;if(v.push(p.nodeValue.slice(m).replaceAll(Jm,"")),R!==this.editorDiv){let L=x;for(const D of this.editorDiv.childNodes){if(D===R){L=v;continue}L.push(T(_=Et,jn,xp).call(_,D))}}x.push(p.nodeValue.slice(0,m).replaceAll(Jm,""))}else if(p===this.editorDiv){let R=x,L=0;for(const D of this.editorDiv.childNodes)L++===m&&(R=v),R.push(T(j=Et,jn,xp).call(j,D))}w(this,ca,`${x.join(`
`)}${o}${v.join(`
`)}`),T(this,Ft,bp).call(this);const y=new Range;let E=x.reduce((R,L)=>R+L.length,0);for(const{firstChild:R}of this.editorDiv.childNodes)if(R.nodeType===Node.TEXT_NODE){const L=R.nodeValue.length;if(E<=L){y.setStart(R,E),y.setEnd(R,E);break}E-=L}d.removeAllRanges(),d.addRange(y)}get contentDiv(){return this.editorDiv}static deserialize(t,i,r){var h;let o=null;if(t instanceof mw){const{data:{defaultAppearanceData:{fontSize:p,fontColor:m},rect:x,rotation:v,id:y},textContent:E,textPosition:S,parent:{page:{pageNumber:_}}}=t;if(!E||E.length===0)return null;o=t={annotationType:We.FREETEXT,color:Array.from(m),fontSize:p,value:E.join(`
`),position:S,pageIndex:_-1,rect:x.slice(0),rotation:v,id:y,deleted:!1}}const d=super.deserialize(t,i,r);return w(d,ua,t.fontSize),w(d,Qa,Ae.makeHexColor(...t.color)),w(d,ca,T(h=Et,jn,Ub).call(h,t.value)),d.annotationElementId=t.id||null,w(d,Yc,o),d}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const i=Et._internalPadding*this.parentScale,r=this.getRect(i,i),o=ct._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:f(this,Qa)),d={annotationType:We.FREETEXT,color:o,fontSize:f(this,ua),value:T(this,Ft,Ew).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?d:this.annotationElementId&&!T(this,Ft,Sw).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:r}=i;r.fontSize=`calc(${f(this,ua)}px * var(--scale-factor))`,r.color=f(this,Qa),i.replaceChildren();for(const d of f(this,ca).split(`
`)){const h=document.createElement("div");h.append(d?document.createTextNode(d):document.createElement("br")),i.append(h)}const o=Et._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(o,o),popupContent:f(this,ca)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Kh=new WeakMap,Wh=new WeakMap,Zh=new WeakMap,Jh=new WeakMap,ef=new WeakMap,Qa=new WeakMap,ca=new WeakMap,tf=new WeakMap,ua=new WeakMap,Yc=new WeakMap,Ft=new WeakSet,vw=function(t){const i=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-f(this,ua))*this.parentScale),w(this,ua,o),T(this,Ft,gp).call(this)},r=f(this,ua);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},yw=function(t){const i=o=>{w(this,Qa,this.editorDiv.style.color=o)},r=f(this,Qa);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Aw=function(){var i;const t=[];this.editorDiv.normalize();for(const r of this.editorDiv.childNodes)t.push(T(i=Et,jn,xp).call(i,r));return t.join(`
`)},gp=function(){const[t,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:o,div:d}=this,h=d.style.display,p=d.classList.contains("hidden");d.classList.remove("hidden"),d.style.display="hidden",o.div.append(this.div),r=d.getBoundingClientRect(),d.remove(),d.style.display=h,d.classList.toggle("hidden",p)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/i):(this.width=r.height/t,this.height=r.width/i),this.fixAndSetPosition()},jn=new WeakSet,xp=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Jm,"")},bp=function(){if(this.editorDiv.replaceChildren(),!!f(this,ca))for(const t of f(this,ca).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},Ew=function(){return f(this,ca).replaceAll(""," ")},Ub=function(t){return t.replaceAll(" ","")},Sw=function(t){const{value:i,fontSize:r,color:o,pageIndex:d}=f(this,Yc);return this._hasBeenMoved||t.value!==i||t.fontSize!==r||t.color.some((h,p)=>h!==o[p])||t.pageIndex!==d},C(Et,jn),xe(Et,"_freeTextDefaultContent",""),xe(Et,"_internalPadding",0),xe(Et,"_defaultColor",null),xe(Et,"_defaultFontSize",10),xe(Et,"_type","freetext"),xe(Et,"_editorType",We.FREETEXT);let Pb=Et;var sf,yr,Ka,Ls,_w,vp,ww,Nw,Fb;class zb{constructor(e,t=0,i=0,r=!0){C(this,Ls);C(this,sf);C(this,yr,[]);C(this,Ka,[]);let o=1/0,d=-1/0,h=1/0,p=-1/0;const m=10**-4;for(const{x:j,y:R,width:L,height:D}of e){const z=Math.floor((j-t)/m)*m,P=Math.ceil((j+L+t)/m)*m,H=Math.floor((R-t)/m)*m,se=Math.ceil((R+D+t)/m)*m,re=[z,H,se,!0],ne=[P,H,se,!1];f(this,yr).push(re,ne),o=Math.min(o,z),d=Math.max(d,P),h=Math.min(h,H),p=Math.max(p,se)}const x=d-o+2*i,v=p-h+2*i,y=o-i,E=h-i,S=f(this,yr).at(r?-1:-2),_=[S[0],S[2]];for(const j of f(this,yr)){const[R,L,D]=j;j[0]=(R-y)/x,j[1]=(L-E)/v,j[2]=(D-E)/v}w(this,sf,{x:y,y:E,width:x,height:v,lastPoint:_})}getOutlines(){f(this,yr).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of f(this,yr))t[3]?(e.push(...T(this,Ls,Fb).call(this,t)),T(this,Ls,ww).call(this,t)):(T(this,Ls,Nw).call(this,t),e.push(...T(this,Ls,Fb).call(this,t)));return T(this,Ls,_w).call(this,e)}}sf=new WeakMap,yr=new WeakMap,Ka=new WeakMap,Ls=new WeakSet,_w=function(e){const t=[],i=new Set;for(const d of e){const[h,p,m]=d;t.push([h,p,d],[h,m,d])}t.sort((d,h)=>d[1]-h[1]||d[0]-h[0]);for(let d=0,h=t.length;d<h;d+=2){const p=t[d][2],m=t[d+1][2];p.push(m),m.push(p),i.add(p),i.add(m)}const r=[];let o;for(;i.size>0;){const d=i.values().next().value;let[h,p,m,x,v]=d;i.delete(d);let y=h,E=p;for(o=[h,m],r.push(o);;){let S;if(i.has(x))S=x;else if(i.has(v))S=v;else break;i.delete(S),[h,p,m,x,v]=S,y!==h&&(o.push(y,E,h,E===p?p:m),y=h),E=E===p?m:p}o.push(y,E)}return new Fj(r,f(this,sf))},vp=function(e){const t=f(this,Ka);let i=0,r=t.length-1;for(;i<=r;){const o=i+r>>1,d=t[o][0];if(d===e)return o;d<e?i=o+1:r=o-1}return r+1},ww=function([,e,t]){const i=T(this,Ls,vp).call(this,e);f(this,Ka).splice(i,0,[e,t])},Nw=function([,e,t]){const i=T(this,Ls,vp).call(this,e);for(let r=i;r<f(this,Ka).length;r++){const[o,d]=f(this,Ka)[r];if(o!==e)break;if(o===e&&d===t){f(this,Ka).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[o,d]=f(this,Ka)[r];if(o!==e)break;if(o===e&&d===t){f(this,Ka).splice(r,1);return}}},Fb=function(e){const[t,i,r]=e,o=[[t,i,r]],d=T(this,Ls,vp).call(this,r);for(let h=0;h<d;h++){const[p,m]=f(this,Ka)[h];for(let x=0,v=o.length;x<v;x++){const[,y,E]=o[x];if(!(m<=y||E<=p)){if(y>=p){if(E>m)o[x][1]=m;else{if(v===1)return[];o.splice(x,1),x--,v--}continue}o[x][2]=p,E>m&&o.push([t,m,E])}}}return o};class Tw{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof Hb}}var af,Vc;class Fj extends Tw{constructor(t,i){super();C(this,af);C(this,Vc);w(this,Vc,t),w(this,af,i)}toSVGPath(){const t=[];for(const i of f(this,Vc)){let[r,o]=i;t.push(`M${r} ${o}`);for(let d=2;d<i.length;d+=2){const h=i[d],p=i[d+1];h===r?(t.push(`V${p}`),o=p):p===o&&(t.push(`H${h}`),r=h)}t.push("Z")}return t.join(" ")}serialize([t,i,r,o],d){const h=[],p=r-t,m=o-i;for(const x of f(this,Vc)){const v=new Array(x.length);for(let y=0;y<x.length;y+=2)v[y]=t+x[y]*p,v[y+1]=o-x[y+1]*m;h.push(v)}return h}get box(){return f(this,af)}}af=new WeakMap,Vc=new WeakMap;var bi,pn,$c,Xc,vi,Qe,Bo,Ho,nf,rf,Qc,Kc,Ar,of,tg,sg,lf,Bb;const Ki=class Ki{constructor({x:e,y:t},i,r,o,d,h=0){C(this,lf);C(this,bi);C(this,pn,[]);C(this,$c);C(this,Xc);C(this,vi,[]);C(this,Qe,new Float64Array(18));C(this,Bo);C(this,Ho);C(this,nf);C(this,rf);C(this,Qc);C(this,Kc);C(this,Ar,[]);w(this,bi,i),w(this,Kc,o*r),w(this,Xc,d),f(this,Qe).set([NaN,NaN,NaN,NaN,e,t],6),w(this,$c,h),w(this,rf,f(Ki,of)*r),w(this,nf,f(Ki,sg)*r),w(this,Qc,r),f(this,Ar).push(e,t)}get free(){return!0}isEmpty(){return isNaN(f(this,Qe)[8])}add({x:e,y:t}){var ne;w(this,Bo,e),w(this,Ho,t);const[i,r,o,d]=f(this,bi);let[h,p,m,x]=f(this,Qe).subarray(8,12);const v=e-m,y=t-x,E=Math.hypot(v,y);if(E<f(this,nf))return!1;const S=E-f(this,rf),_=S/E,j=_*v,R=_*y;let L=h,D=p;h=m,p=x,m+=j,x+=R,(ne=f(this,Ar))==null||ne.push(e,t);const z=-R/S,P=j/S,H=z*f(this,Kc),se=P*f(this,Kc);return f(this,Qe).set(f(this,Qe).subarray(2,8),0),f(this,Qe).set([m+H,x+se],4),f(this,Qe).set(f(this,Qe).subarray(14,18),12),f(this,Qe).set([m-H,x-se],16),isNaN(f(this,Qe)[6])?(f(this,vi).length===0&&(f(this,Qe).set([h+H,p+se],2),f(this,vi).push(NaN,NaN,NaN,NaN,(h+H-i)/o,(p+se-r)/d),f(this,Qe).set([h-H,p-se],14),f(this,pn).push(NaN,NaN,NaN,NaN,(h-H-i)/o,(p-se-r)/d)),f(this,Qe).set([L,D,h,p,m,x],6),!this.isEmpty()):(f(this,Qe).set([L,D,h,p,m,x],6),Math.abs(Math.atan2(D-p,L-h)-Math.atan2(R,j))<Math.PI/2?([h,p,m,x]=f(this,Qe).subarray(2,6),f(this,vi).push(NaN,NaN,NaN,NaN,((h+m)/2-i)/o,((p+x)/2-r)/d),[h,p,L,D]=f(this,Qe).subarray(14,18),f(this,pn).push(NaN,NaN,NaN,NaN,((L+h)/2-i)/o,((D+p)/2-r)/d),!0):([L,D,h,p,m,x]=f(this,Qe).subarray(0,6),f(this,vi).push(((L+5*h)/6-i)/o,((D+5*p)/6-r)/d,((5*h+m)/6-i)/o,((5*p+x)/6-r)/d,((h+m)/2-i)/o,((p+x)/2-r)/d),[m,x,h,p,L,D]=f(this,Qe).subarray(12,18),f(this,pn).push(((L+5*h)/6-i)/o,((D+5*p)/6-r)/d,((5*h+m)/6-i)/o,((5*p+x)/6-r)/d,((h+m)/2-i)/o,((p+x)/2-r)/d),!0))}toSVGPath(){if(this.isEmpty())return"";const e=f(this,vi),t=f(this,pn),i=f(this,Qe).subarray(4,6),r=f(this,Qe).subarray(16,18),[o,d,h,p]=f(this,bi),[m,x,v,y]=T(this,lf,Bb).call(this);if(isNaN(f(this,Qe)[6])&&!this.isEmpty())return`M${(f(this,Qe)[2]-o)/h} ${(f(this,Qe)[3]-d)/p} L${(f(this,Qe)[4]-o)/h} ${(f(this,Qe)[5]-d)/p} L${m} ${x} L${v} ${y} L${(f(this,Qe)[16]-o)/h} ${(f(this,Qe)[17]-d)/p} L${(f(this,Qe)[14]-o)/h} ${(f(this,Qe)[15]-d)/p} Z`;const E=[];E.push(`M${e[4]} ${e[5]}`);for(let S=6;S<e.length;S+=6)isNaN(e[S])?E.push(`L${e[S+4]} ${e[S+5]}`):E.push(`C${e[S]} ${e[S+1]} ${e[S+2]} ${e[S+3]} ${e[S+4]} ${e[S+5]}`);E.push(`L${(i[0]-o)/h} ${(i[1]-d)/p} L${m} ${x} L${v} ${y} L${(r[0]-o)/h} ${(r[1]-d)/p}`);for(let S=t.length-6;S>=6;S-=6)isNaN(t[S])?E.push(`L${t[S+4]} ${t[S+5]}`):E.push(`C${t[S]} ${t[S+1]} ${t[S+2]} ${t[S+3]} ${t[S+4]} ${t[S+5]}`);return E.push(`L${t[4]} ${t[5]} Z`),E.join(" ")}getOutlines(){var R;const e=f(this,vi),t=f(this,pn),i=f(this,Qe),r=i.subarray(4,6),o=i.subarray(16,18),[d,h,p,m]=f(this,bi),x=new Float64Array((((R=f(this,Ar))==null?void 0:R.length)??0)+2);for(let L=0,D=x.length-2;L<D;L+=2)x[L]=(f(this,Ar)[L]-d)/p,x[L+1]=(f(this,Ar)[L+1]-h)/m;x[x.length-2]=(f(this,Bo)-d)/p,x[x.length-1]=(f(this,Ho)-h)/m;const[v,y,E,S]=T(this,lf,Bb).call(this);if(isNaN(i[6])&&!this.isEmpty()){const L=new Float64Array(36);return L.set([NaN,NaN,NaN,NaN,(i[2]-d)/p,(i[3]-h)/m,NaN,NaN,NaN,NaN,(i[4]-d)/p,(i[5]-h)/m,NaN,NaN,NaN,NaN,v,y,NaN,NaN,NaN,NaN,E,S,NaN,NaN,NaN,NaN,(i[16]-d)/p,(i[17]-h)/m,NaN,NaN,NaN,NaN,(i[14]-d)/p,(i[15]-h)/m],0),new Hb(L,x,f(this,bi),f(this,Qc),f(this,$c),f(this,Xc))}const _=new Float64Array(f(this,vi).length+24+f(this,pn).length);let j=e.length;for(let L=0;L<j;L+=2){if(isNaN(e[L])){_[L]=_[L+1]=NaN;continue}_[L]=e[L],_[L+1]=e[L+1]}_.set([NaN,NaN,NaN,NaN,(r[0]-d)/p,(r[1]-h)/m,NaN,NaN,NaN,NaN,v,y,NaN,NaN,NaN,NaN,E,S,NaN,NaN,NaN,NaN,(o[0]-d)/p,(o[1]-h)/m],j),j+=24;for(let L=t.length-6;L>=6;L-=6)for(let D=0;D<6;D+=2){if(isNaN(t[L+D])){_[j]=_[j+1]=NaN,j+=2;continue}_[j]=t[L+D],_[j+1]=t[L+D+1],j+=2}return _.set([NaN,NaN,NaN,NaN,t[4],t[5]],j),new Hb(_,x,f(this,bi),f(this,Qc),f(this,$c),f(this,Xc))}};bi=new WeakMap,pn=new WeakMap,$c=new WeakMap,Xc=new WeakMap,vi=new WeakMap,Qe=new WeakMap,Bo=new WeakMap,Ho=new WeakMap,nf=new WeakMap,rf=new WeakMap,Qc=new WeakMap,Kc=new WeakMap,Ar=new WeakMap,of=new WeakMap,tg=new WeakMap,sg=new WeakMap,lf=new WeakSet,Bb=function(){const e=f(this,Qe).subarray(4,6),t=f(this,Qe).subarray(16,18),[i,r,o,d]=f(this,bi);return[(f(this,Bo)+(e[0]-t[0])/2-i)/o,(f(this,Ho)+(e[1]-t[1])/2-r)/d,(f(this,Bo)+(t[0]-e[0])/2-i)/o,(f(this,Ho)+(t[1]-e[1])/2-r)/d]},C(Ki,of,8),C(Ki,tg,2),C(Ki,sg,f(Ki,of)+f(Ki,tg));let Dp=Ki;var Wc,qo,gn,cf,da,uf,Ot,$s,Dd,Od,Cw;class Hb extends Tw{constructor(t,i,r,o,d,h){super();C(this,$s);C(this,Wc);C(this,qo,null);C(this,gn);C(this,cf);C(this,da);C(this,uf);C(this,Ot);w(this,Ot,t),w(this,da,i),w(this,Wc,r),w(this,uf,o),w(this,gn,d),w(this,cf,h),T(this,$s,Cw).call(this,h);const{x:p,y:m,width:x,height:v}=f(this,qo);for(let y=0,E=t.length;y<E;y+=2)t[y]=(t[y]-p)/x,t[y+1]=(t[y+1]-m)/v;for(let y=0,E=i.length;y<E;y+=2)i[y]=(i[y]-p)/x,i[y+1]=(i[y+1]-m)/v}toSVGPath(){const t=[`M${f(this,Ot)[4]} ${f(this,Ot)[5]}`];for(let i=6,r=f(this,Ot).length;i<r;i+=6){if(isNaN(f(this,Ot)[i])){t.push(`L${f(this,Ot)[i+4]} ${f(this,Ot)[i+5]}`);continue}t.push(`C${f(this,Ot)[i]} ${f(this,Ot)[i+1]} ${f(this,Ot)[i+2]} ${f(this,Ot)[i+3]} ${f(this,Ot)[i+4]} ${f(this,Ot)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,r,o],d){const h=r-t,p=o-i;let m,x;switch(d){case 0:m=T(this,$s,Dd).call(this,f(this,Ot),t,o,h,-p),x=T(this,$s,Dd).call(this,f(this,da),t,o,h,-p);break;case 90:m=T(this,$s,Od).call(this,f(this,Ot),t,i,h,p),x=T(this,$s,Od).call(this,f(this,da),t,i,h,p);break;case 180:m=T(this,$s,Dd).call(this,f(this,Ot),r,i,-h,p),x=T(this,$s,Dd).call(this,f(this,da),r,i,-h,p);break;case 270:m=T(this,$s,Od).call(this,f(this,Ot),r,o,-h,-p),x=T(this,$s,Od).call(this,f(this,da),r,o,-h,-p);break}return{outline:Array.from(m),points:[Array.from(x)]}}get box(){return f(this,qo)}getNewOutline(t,i){const{x:r,y:o,width:d,height:h}=f(this,qo),[p,m,x,v]=f(this,Wc),y=d*x,E=h*v,S=r*x+p,_=o*v+m,j=new Dp({x:f(this,da)[0]*y+S,y:f(this,da)[1]*E+_},f(this,Wc),f(this,uf),t,f(this,cf),i??f(this,gn));for(let R=2;R<f(this,da).length;R+=2)j.add({x:f(this,da)[R]*y+S,y:f(this,da)[R+1]*E+_});return j.getOutlines()}}Wc=new WeakMap,qo=new WeakMap,gn=new WeakMap,cf=new WeakMap,da=new WeakMap,uf=new WeakMap,Ot=new WeakMap,$s=new WeakSet,Dd=function(t,i,r,o,d){const h=new Float64Array(t.length);for(let p=0,m=t.length;p<m;p+=2)h[p]=i+t[p]*o,h[p+1]=r+t[p+1]*d;return h},Od=function(t,i,r,o,d){const h=new Float64Array(t.length);for(let p=0,m=t.length;p<m;p+=2)h[p]=i+t[p+1]*o,h[p+1]=r+t[p]*d;return h},Cw=function(t){const i=f(this,Ot);let r=i[4],o=i[5],d=r,h=o,p=r,m=o,x=r,v=o;const y=t?Math.max:Math.min;for(let R=6,L=i.length;R<L;R+=6){if(isNaN(i[R]))d=Math.min(d,i[R+4]),h=Math.min(h,i[R+5]),p=Math.max(p,i[R+4]),m=Math.max(m,i[R+5]),v<i[R+5]?(x=i[R+4],v=i[R+5]):v===i[R+5]&&(x=y(x,i[R+4]));else{const D=Ae.bezierBoundingBox(r,o,...i.slice(R,R+6));d=Math.min(d,D[0]),h=Math.min(h,D[1]),p=Math.max(p,D[2]),m=Math.max(m,D[3]),v<D[3]?(x=D[2],v=D[3]):v===D[3]&&(x=y(x,D[2]))}r=i[R+4],o=i[R+5]}const E=d-f(this,gn),S=h-f(this,gn),_=p-d+2*f(this,gn),j=m-h+2*f(this,gn);w(this,qo,{x:E,y:S,width:_,height:j,lastPoint:[x,v]})};var df,hf,Wa,Go,Zc,Yt,ff,Jc,mf,pf,Za,eu,yt,qb,Gb,jw,ao,Rw,rr;const Wi=class Wi{constructor({editor:e=null,uiManager:t=null}){C(this,yt);C(this,df,T(this,yt,jw).bind(this));C(this,hf,T(this,yt,Rw).bind(this));C(this,Wa,null);C(this,Go,null);C(this,Zc);C(this,Yt,null);C(this,ff,!1);C(this,Jc,!1);C(this,mf,null);C(this,pf);C(this,Za,null);C(this,eu);var i;e?(w(this,Jc,!1),w(this,eu,ze.HIGHLIGHT_COLOR),w(this,mf,e)):(w(this,Jc,!0),w(this,eu,ze.HIGHLIGHT_DEFAULT_COLOR)),w(this,Za,(e==null?void 0:e._uiManager)||t),w(this,pf,f(this,Za)._eventBus),w(this,Zc,(e==null?void 0:e.color)||((i=f(this,Za))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return Ze(this,"_keyboardManager",new Tf([[["Escape","mac+Escape"],Wi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Wi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Wi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Wi.prototype._moveToPrevious],[["Home","mac+Home"],Wi.prototype._moveToBeginning],[["End","mac+End"],Wi.prototype._moveToEnd]]))}renderButton(){const e=w(this,Wa,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=f(this,Za)._signal;e.addEventListener("click",T(this,yt,ao).bind(this),{signal:t}),e.addEventListener("keydown",f(this,df),{signal:t});const i=w(this,Go,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=f(this,Zc),e.append(i),e}renderMainDropdown(){const e=w(this,Yt,T(this,yt,qb).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===f(this,Wa)){T(this,yt,ao).call(this,e);return}const t=e.target.getAttribute("data-color");t&&T(this,yt,Gb).call(this,t,e)}_moveToNext(e){var t,i;if(!f(this,yt,rr)){T(this,yt,ao).call(this,e);return}if(e.target===f(this,Wa)){(t=f(this,Yt).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=f(this,Yt))==null?void 0:t.firstChild)||e.target===f(this,Wa)){f(this,yt,rr)&&this._hideDropdownFromKeyboard();return}f(this,yt,rr)||T(this,yt,ao).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!f(this,yt,rr)){T(this,yt,ao).call(this,e);return}(t=f(this,Yt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!f(this,yt,rr)){T(this,yt,ao).call(this,e);return}(t=f(this,Yt).lastChild)==null||t.focus()}hideDropdown(){var e;(e=f(this,Yt))==null||e.classList.add("hidden"),window.removeEventListener("pointerdown",f(this,hf))}_hideDropdownFromKeyboard(){var e;if(!f(this,Jc)){if(!f(this,yt,rr)){(e=f(this,mf))==null||e.unselect();return}this.hideDropdown(),f(this,Wa).focus({preventScroll:!0,focusVisible:f(this,ff)})}}updateColor(e){if(f(this,Go)&&(f(this,Go).style.backgroundColor=e),!f(this,Yt))return;const t=f(this,Za).highlightColors.values();for(const i of f(this,Yt).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=f(this,Wa))==null||e.remove(),w(this,Wa,null),w(this,Go,null),(t=f(this,Yt))==null||t.remove(),w(this,Yt,null)}};df=new WeakMap,hf=new WeakMap,Wa=new WeakMap,Go=new WeakMap,Zc=new WeakMap,Yt=new WeakMap,ff=new WeakMap,Jc=new WeakMap,mf=new WeakMap,pf=new WeakMap,Za=new WeakMap,eu=new WeakMap,yt=new WeakSet,qb=function(){const e=document.createElement("div"),t=f(this,Za)._signal;e.addEventListener("contextmenu",Xs,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of f(this,Za).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=i,o.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${i}`);const d=document.createElement("span");o.append(d),d.className="swatch",d.style.backgroundColor=r,o.setAttribute("aria-selected",r===f(this,Zc)),o.addEventListener("click",T(this,yt,Gb).bind(this,r),{signal:t}),e.append(o)}return e.addEventListener("keydown",f(this,df),{signal:t}),e},Gb=function(e,t){t.stopPropagation(),f(this,pf).dispatch("switchannotationeditorparams",{source:this,type:f(this,eu),value:e})},jw=function(e){Wi._keyboardManager.exec(this,e)},ao=function(e){if(f(this,yt,rr)){this.hideDropdown();return}if(w(this,ff,e.detail===0),window.addEventListener("pointerdown",f(this,hf),{signal:f(this,Za)._signal}),f(this,Yt)){f(this,Yt).classList.remove("hidden");return}const t=w(this,Yt,T(this,yt,qb).call(this));f(this,Wa).append(t)},Rw=function(e){var t;(t=f(this,Yt))!=null&&t.contains(e.target)||this.hideDropdown()},rr=function(){return f(this,Yt)&&!f(this,Yt).classList.contains("hidden")};let Op=Wi;var tu,gf,Er,Yo,su,ja,xf,bf,Vo,Ja,js,ha,ag,au,$o,Vt,iu,yi,vf,Xe,Yb,Vb,Mw,kw,Dw,$b,Ld,Da,oc,Ow,yp,Id,Lw,Iw,Pw,Uw;const st=class st extends ct{constructor(t){super({...t,name:"highlightEditor"});C(this,Xe);C(this,tu,null);C(this,gf,0);C(this,Er);C(this,Yo,null);C(this,su,null);C(this,ja,null);C(this,xf,null);C(this,bf,0);C(this,Vo,null);C(this,Ja,null);C(this,js,null);C(this,ha,!1);C(this,ag,T(this,Xe,Ow).bind(this));C(this,au,null);C(this,$o);C(this,Vt,null);C(this,iu,"");C(this,yi);C(this,vf,"");this.color=t.color||st._defaultColor,w(this,yi,t.thickness||st._defaultThickness),w(this,$o,t.opacity||st._defaultOpacity),w(this,Er,t.boxes||null),w(this,vf,t.methodOfCreation||""),w(this,iu,t.text||""),this._isDraggable=!1,t.highlightId>-1?(w(this,ha,!0),T(this,Xe,Vb).call(this,t),T(this,Xe,Ld).call(this)):(w(this,tu,t.anchorNode),w(this,gf,t.anchorOffset),w(this,xf,t.focusNode),w(this,bf,t.focusOffset),T(this,Xe,Yb).call(this),T(this,Xe,Ld).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=st.prototype;return Ze(this,"_keyboardManager",new Tf([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:f(this,ha)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:f(this,yi),methodOfCreation:f(this,vf)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var r;ct.initialize(t,i),st._defaultColor||(st._defaultColor=((r=i.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case ze.HIGHLIGHT_DEFAULT_COLOR:st._defaultColor=i;break;case ze.HIGHLIGHT_THICKNESS:st._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return f(this,au)}updateParams(t,i){switch(t){case ze.HIGHLIGHT_COLOR:T(this,Xe,Mw).call(this,i);break;case ze.HIGHLIGHT_THICKNESS:T(this,Xe,kw).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ze.HIGHLIGHT_DEFAULT_COLOR,st._defaultColor],[ze.HIGHLIGHT_THICKNESS,st._defaultThickness]]}get propertiesToUpdate(){return[[ze.HIGHLIGHT_COLOR,this.color||st._defaultColor],[ze.HIGHLIGHT_THICKNESS,f(this,yi)||st._defaultThickness],[ze.HIGHLIGHT_FREE,f(this,ha)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(w(this,su,new Op({editor:this})),t.addColorPicker(f(this,su))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(T(this,Xe,Id).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,T(this,Xe,Id).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){T(this,Xe,$b).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(T(this,Xe,Ld).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let i=!1;this.parent&&!t?T(this,Xe,$b).call(this):t&&(T(this,Xe,Ld).call(this,t),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var o,d,h;const{drawLayer:i}=this.parent;let r;f(this,ha)?(t=(t-this.rotation+360)%360,r=T(o=st,Da,oc).call(o,f(this,Ja).box,t)):r=T(d=st,Da,oc).call(d,this,t),i.rotate(f(this,js),t),i.rotate(f(this,Vt),t),i.updateBox(f(this,js),r),i.updateBox(f(this,Vt),T(h=st,Da,oc).call(h,f(this,ja).box,t))}render(){if(this.div)return this.div;const t=super.render();f(this,iu)&&(t.setAttribute("aria-label",f(this,iu)),t.setAttribute("role","mark")),f(this,ha)?t.classList.add("free"):this.div.addEventListener("keydown",f(this,ag),{signal:this._uiManager._signal});const i=w(this,Vo,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=f(this,Yo);const[r,o]=this.parentDimensions;return this.setDims(this.width*r,this.height*o),Rp(this,f(this,Vo),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(f(this,Vt),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(f(this,Vt),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:T(this,Xe,yp).call(this,!0);break;case 1:case 3:T(this,Xe,yp).call(this,!1);break}}select(){var t,i;super.select(),f(this,Vt)&&((t=this.parent)==null||t.drawLayer.removeClass(f(this,Vt),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(f(this,Vt),"selected"))}unselect(){var t;super.unselect(),f(this,Vt)&&((t=this.parent)==null||t.drawLayer.removeClass(f(this,Vt),"selected"),f(this,ha)||T(this,Xe,yp).call(this,!1))}get _mustFixPosition(){return!f(this,ha)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(f(this,js),t),this.parent.drawLayer.show(f(this,Vt),t))}static startHighlighting(t,i,{target:r,x:o,y:d}){const{x:h,y:p,width:m,height:x}=r.getBoundingClientRect(),v=j=>{T(this,Da,Pw).call(this,t,j)},y=t._signal,E={capture:!0,passive:!1,signal:y},S=j=>{j.preventDefault(),j.stopPropagation()},_=j=>{r.removeEventListener("pointermove",v),window.removeEventListener("blur",_),window.removeEventListener("pointerup",_),window.removeEventListener("pointerdown",S,E),window.removeEventListener("contextmenu",Xs),T(this,Da,Uw).call(this,t,j)};window.addEventListener("blur",_,{signal:y}),window.addEventListener("pointerup",_,{signal:y}),window.addEventListener("pointerdown",S,E),window.addEventListener("contextmenu",Xs,{signal:y}),r.addEventListener("pointermove",v,{signal:y}),this._freeHighlight=new Dp({x:o,y:d},[h,p,m,x],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(t,i,r){var _;const o=super.deserialize(t,i,r),{rect:[d,h,p,m],color:x,quadPoints:v}=t;o.color=Ae.makeHexColor(...x),w(o,$o,t.opacity);const[y,E]=o.pageDimensions;o.width=(p-d)/y,o.height=(m-h)/E;const S=w(o,Er,[]);for(let j=0;j<v.length;j+=8)S.push({x:(v[4]-p)/y,y:(m-(1-v[j+5]))/E,width:(v[j+2]-v[j])/y,height:(v[j+5]-v[j+1])/E});return T(_=o,Xe,Yb).call(_),o}serialize(t=!1){if(this.isEmpty()||t)return null;const i=this.getRect(0,0),r=ct._colorManager.convert(this.color);return{annotationType:We.HIGHLIGHT,color:r,opacity:f(this,$o),thickness:f(this,yi),quadPoints:T(this,Xe,Lw).call(this),outlines:T(this,Xe,Iw).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:T(this,Xe,Id).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};tu=new WeakMap,gf=new WeakMap,Er=new WeakMap,Yo=new WeakMap,su=new WeakMap,ja=new WeakMap,xf=new WeakMap,bf=new WeakMap,Vo=new WeakMap,Ja=new WeakMap,js=new WeakMap,ha=new WeakMap,ag=new WeakMap,au=new WeakMap,$o=new WeakMap,Vt=new WeakMap,iu=new WeakMap,yi=new WeakMap,vf=new WeakMap,Xe=new WeakSet,Yb=function(){const t=new zb(f(this,Er),.001);w(this,Ja,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=f(this,Ja).box;const i=new zb(f(this,Er),.0025,.001,this._uiManager.direction==="ltr");w(this,ja,i.getOutlines());const{lastPoint:r}=f(this,ja).box;w(this,au,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},Vb=function({highlightOutlines:t,highlightId:i,clipPathId:r}){var v,y;if(w(this,Ja,t),w(this,ja,t.getNewOutline(f(this,yi)/2+1.5,.0025)),i>=0)w(this,js,i),w(this,Yo,r),this.parent.drawLayer.finalizeLine(i,t),w(this,Vt,this.parent.drawLayer.highlightOutline(f(this,ja)));else if(this.parent){const E=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(f(this,js),t),this.parent.drawLayer.updateBox(f(this,js),T(v=st,Da,oc).call(v,f(this,Ja).box,(E-this.rotation+360)%360)),this.parent.drawLayer.updateLine(f(this,Vt),f(this,ja)),this.parent.drawLayer.updateBox(f(this,Vt),T(y=st,Da,oc).call(y,f(this,ja).box,E))}const{x:d,y:h,width:p,height:m}=t.box;switch(this.rotation){case 0:this.x=d,this.y=h,this.width=p,this.height=m;break;case 90:{const[E,S]=this.parentDimensions;this.x=h,this.y=1-d,this.width=p*S/E,this.height=m*E/S;break}case 180:this.x=1-d,this.y=1-h,this.width=p,this.height=m;break;case 270:{const[E,S]=this.parentDimensions;this.x=1-h,this.y=d,this.width=p*S/E,this.height=m*E/S;break}}const{lastPoint:x}=f(this,ja).box;w(this,au,[(x[0]-d)/p,(x[1]-h)/m])},Mw=function(t){const i=o=>{var d,h;this.color=o,(d=this.parent)==null||d.drawLayer.changeColor(f(this,js),o),(h=f(this,su))==null||h.updateColor(o)},r=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},kw=function(t){const i=f(this,yi),r=o=>{w(this,yi,o),T(this,Xe,Dw).call(this,o)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},Dw=function(t){if(!f(this,ha))return;T(this,Xe,Vb).call(this,{highlightOutlines:f(this,Ja).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)},$b=function(){f(this,js)===null||!this.parent||(this.parent.drawLayer.remove(f(this,js)),w(this,js,null),this.parent.drawLayer.remove(f(this,Vt)),w(this,Vt,null))},Ld=function(t=this.parent){f(this,js)===null&&({id:aa(this,js)._,clipPathId:aa(this,Yo)._}=t.drawLayer.highlight(f(this,Ja),this.color,f(this,$o)),w(this,Vt,t.drawLayer.highlightOutline(f(this,ja))),f(this,Vo)&&(f(this,Vo).style.clipPath=f(this,Yo)))},Da=new WeakSet,oc=function({x:t,y:i,width:r,height:o},d){switch(d){case 90:return{x:1-i-o,y:t,width:o,height:r};case 180:return{x:1-t-r,y:1-i-o,width:r,height:o};case 270:return{x:i,y:1-t-r,width:o,height:r}}return{x:t,y:i,width:r,height:o}},Ow=function(t){st._keyboardManager.exec(this,t)},yp=function(t){if(!f(this,tu))return;const i=window.getSelection();t?i.setPosition(f(this,tu),f(this,gf)):i.setPosition(f(this,xf),f(this,bf))},Id=function(){return f(this,ha)?this.rotation:0},Lw=function(){if(f(this,ha))return null;const[t,i]=this.pageDimensions,r=f(this,Er),o=new Float32Array(r.length*8);let d=0;for(const{x:h,y:p,width:m,height:x}of r){const v=h*t,y=(1-p-x)*i;o[d]=o[d+4]=v,o[d+1]=o[d+3]=y,o[d+2]=o[d+6]=v+m*t,o[d+5]=o[d+7]=y+x*i,d+=8}return o},Iw=function(t){return f(this,Ja).serialize(t,T(this,Xe,Id).call(this))},Pw=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},Uw=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},C(st,Da),xe(st,"_defaultColor",null),xe(st,"_defaultOpacity",1),xe(st,"_defaultThickness",12),xe(st,"_l10nPromise"),xe(st,"_type","highlight"),xe(st,"_editorType",We.HIGHLIGHT),xe(st,"_freeHighlightId",-1),xe(st,"_freeHighlight",null),xe(st,"_freeHighlightClipId","");let Lp=st;var Xo,Qo,yf,Af,Ef,Ko,Ai,xn,Ra,Wo,Zo,bn,Jo,el,Sr,me,zw,Fw,Bw,Hw,Qb,qw,Kb,Gw,Yw,Vw,$w,Xw,io,Wb,Ap,Ep,lc,Zb,Sp,Mn,Qw,Jb,Kw,Ww,ev,_p,Pd;const Nt=class Nt extends ct{constructor(t){super({...t,name:"inkEditor"});C(this,me);C(this,Xo,0);C(this,Qo,0);C(this,yf,this.canvasPointermove.bind(this));C(this,Af,this.canvasPointerleave.bind(this));C(this,Ef,this.canvasPointerup.bind(this));C(this,Ko,this.canvasPointerdown.bind(this));C(this,Ai,null);C(this,xn,new Path2D);C(this,Ra,!1);C(this,Wo,!1);C(this,Zo,!1);C(this,bn,null);C(this,Jo,0);C(this,el,0);C(this,Sr,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,i){ct.initialize(t,i)}static updateDefaultParams(t,i){switch(t){case ze.INK_THICKNESS:Nt._defaultThickness=i;break;case ze.INK_COLOR:Nt._defaultColor=i;break;case ze.INK_OPACITY:Nt._defaultOpacity=i/100;break}}updateParams(t,i){switch(t){case ze.INK_THICKNESS:T(this,me,zw).call(this,i);break;case ze.INK_COLOR:T(this,me,Fw).call(this,i);break;case ze.INK_OPACITY:T(this,me,Bw).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ze.INK_THICKNESS,Nt._defaultThickness],[ze.INK_COLOR,Nt._defaultColor||ct._defaultLineColor],[ze.INK_OPACITY,Math.round(Nt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[ze.INK_THICKNESS,this.thickness||Nt._defaultThickness],[ze.INK_COLOR,this.color||Nt._defaultColor||ct._defaultLineColor],[ze.INK_OPACITY,Math.round(100*(this.opacity??Nt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(T(this,me,Ap).call(this),T(this,me,Ep).call(this)),this.isAttachedToDOM||(this.parent.add(this),T(this,me,lc).call(this)),T(this,me,Pd).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,f(this,Ai)&&(clearTimeout(f(this,Ai)),w(this,Ai,null)),(t=f(this,bn))==null||t.disconnect(),w(this,bn,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,i]=this.parentDimensions,r=this.width*t,o=this.height*i;this.setDimensions(r,o)}enableEditMode(){f(this,Ra)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",f(this,Ko),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",f(this,Ko)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){f(this,Ra)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),w(this,Ra,!0),this.div.classList.add("disabled"),T(this,me,Pd).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||f(this,Ra)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),T(this,me,qw).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),T(this,me,Kb).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),T(this,me,Wb).call(this,t)}canvasPointerleave(t){T(this,me,Wb).call(this,t)}get isResizable(){return!this.isEmpty()&&f(this,Ra)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,o,d,h]=T(this,me,Hw).call(this);if(this.setAt(r,o,0,0),this.setDims(d,h),T(this,me,Ap).call(this),this.width){const[p,m]=this.parentDimensions;this.setAspectRatio(this.width*p,this.height*m),this.setAt(t*p,i*m,this.width*p,this.height*m),w(this,Zo,!0),T(this,me,lc).call(this),this.setDims(this.width*p,this.height*m),T(this,me,io).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return T(this,me,Ep).call(this),this.div}setDimensions(t,i){const r=Math.round(t),o=Math.round(i);if(f(this,Jo)===r&&f(this,el)===o)return;w(this,Jo,r),w(this,el,o),this.canvas.style.visibility="hidden";const[d,h]=this.parentDimensions;this.width=t/d,this.height=i/h,this.fixAndSetPosition(),f(this,Ra)&&T(this,me,Zb).call(this,t,i),T(this,me,lc).call(this),T(this,me,io).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,i,r){var j,R,L;if(t instanceof gw)return null;const o=super.deserialize(t,i,r);o.thickness=t.thickness,o.color=Ae.makeHexColor(...t.color),o.opacity=t.opacity;const[d,h]=o.pageDimensions,p=o.width*d,m=o.height*h,x=o.parentScale,v=t.thickness/2;w(o,Ra,!0),w(o,Jo,Math.round(p)),w(o,el,Math.round(m));const{paths:y,rect:E,rotation:S}=t;for(let{bezier:D}of y){D=T(j=Nt,Mn,Kw).call(j,D,E,S);const z=[];o.paths.push(z);let P=x*(D[0]-v),H=x*(D[1]-v);for(let re=2,ne=D.length;re<ne;re+=6){const ue=x*(D[re]-v),J=x*(D[re+1]-v),ge=x*(D[re+2]-v),Ce=x*(D[re+3]-v),Ie=x*(D[re+4]-v),ae=x*(D[re+5]-v);z.push([[P,H],[ue,J],[ge,Ce],[Ie,ae]]),P=Ie,H=ae}const se=T(this,Mn,Qw).call(this,z);o.bezierPath2D.push(se)}const _=T(R=o,me,ev).call(R);return w(o,Qo,Math.max(ct.MIN_SIZE,_[2]-_[0])),w(o,Xo,Math.max(ct.MIN_SIZE,_[3]-_[1])),T(L=o,me,Zb).call(L,p,m),o}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),i=ct._colorManager.convert(this.ctx.strokeStyle);return{annotationType:We.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:T(this,me,Ww).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Xo=new WeakMap,Qo=new WeakMap,yf=new WeakMap,Af=new WeakMap,Ef=new WeakMap,Ko=new WeakMap,Ai=new WeakMap,xn=new WeakMap,Ra=new WeakMap,Wo=new WeakMap,Zo=new WeakMap,bn=new WeakMap,Jo=new WeakMap,el=new WeakMap,Sr=new WeakMap,me=new WeakSet,zw=function(t){const i=o=>{this.thickness=o,T(this,me,Pd).call(this)},r=this.thickness;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Fw=function(t){const i=o=>{this.color=o,T(this,me,io).call(this)},r=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Bw=function(t){const i=o=>{this.opacity=o,T(this,me,io).call(this)};t/=100;const r=this.opacity;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Hw=function(){const{parentRotation:t,parentDimensions:[i,r]}=this;switch(t){case 90:return[0,r,r,i];case 180:return[i,r,i,r];case 270:return[i,0,r,i];default:return[0,0,i,r]}},Qb=function(){const{ctx:t,color:i,opacity:r,thickness:o,parentScale:d,scaleFactor:h}=this;t.lineWidth=o*d/h,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${i}${uC(r)}`},qw=function(t,i){const r=this._uiManager._signal;this.canvas.addEventListener("contextmenu",Xs,{signal:r}),this.canvas.addEventListener("pointerleave",f(this,Af),{signal:r}),this.canvas.addEventListener("pointermove",f(this,yf),{signal:r}),this.canvas.addEventListener("pointerup",f(this,Ef),{signal:r}),this.canvas.removeEventListener("pointerdown",f(this,Ko)),this.isEditing=!0,f(this,Zo)||(w(this,Zo,!0),T(this,me,lc).call(this),this.thickness||(this.thickness=Nt._defaultThickness),this.color||(this.color=Nt._defaultColor||ct._defaultLineColor),this.opacity??(this.opacity=Nt._defaultOpacity)),this.currentPath.push([t,i]),w(this,Wo,!1),T(this,me,Qb).call(this),w(this,Sr,()=>{T(this,me,Vw).call(this),f(this,Sr)&&window.requestAnimationFrame(f(this,Sr))}),window.requestAnimationFrame(f(this,Sr))},Kb=function(t,i){const[r,o]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===r&&i===o)return;const d=this.currentPath;let h=f(this,xn);if(d.push([t,i]),w(this,Wo,!0),d.length<=2){h.moveTo(...d[0]),h.lineTo(t,i);return}d.length===3&&(w(this,xn,h=new Path2D),h.moveTo(...d[0])),T(this,me,$w).call(this,h,...d.at(-3),...d.at(-2),t,i)},Gw=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);f(this,xn).lineTo(...t)},Yw=function(t,i){w(this,Sr,null),t=Math.min(Math.max(t,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),T(this,me,Kb).call(this,t,i),T(this,me,Gw).call(this);let r;if(this.currentPath.length!==1)r=T(this,me,Xw).call(this);else{const m=[t,i];r=[[m,m.slice(),m.slice(),m]]}const o=f(this,xn),d=this.currentPath;this.currentPath=[],w(this,xn,new Path2D);const h=()=>{this.allRawPaths.push(d),this.paths.push(r),this.bezierPath2D.push(o),this._uiManager.rebuild(this)},p=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(T(this,me,Ap).call(this),T(this,me,Ep).call(this)),T(this,me,Pd).call(this))};this.addCommands({cmd:h,undo:p,mustExec:!0})},Vw=function(){if(!f(this,Wo))return;w(this,Wo,!1);const t=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),r=i.map(h=>h[0]),o=i.map(h=>h[1]);Math.min(...r)-t,Math.max(...r)+t,Math.min(...o)-t,Math.max(...o)+t;const{ctx:d}=this;d.save(),d.clearRect(0,0,this.canvas.width,this.canvas.height);for(const h of this.bezierPath2D)d.stroke(h);d.stroke(f(this,xn)),d.restore()},$w=function(t,i,r,o,d,h,p){const m=(i+o)/2,x=(r+d)/2,v=(o+h)/2,y=(d+p)/2;t.bezierCurveTo(m+2*(o-m)/3,x+2*(d-x)/3,v+2*(o-v)/3,y+2*(d-y)/3,v,y)},Xw=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const i=[];let r,[o,d]=t[0];for(r=1;r<t.length-2;r++){const[E,S]=t[r],[_,j]=t[r+1],R=(E+_)/2,L=(S+j)/2,D=[o+2*(E-o)/3,d+2*(S-d)/3],z=[R+2*(E-R)/3,L+2*(S-L)/3];i.push([[o,d],D,z,[R,L]]),[o,d]=[R,L]}const[h,p]=t[r],[m,x]=t[r+1],v=[o+2*(h-o)/3,d+2*(p-d)/3],y=[m+2*(h-m)/3,x+2*(p-x)/3];return i.push([[o,d],v,y,[m,x]]),i},io=function(){if(this.isEmpty()){T(this,me,Sp).call(this);return}T(this,me,Qb).call(this);const{canvas:t,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),T(this,me,Sp).call(this);for(const r of this.bezierPath2D)i.stroke(r)},Wb=function(t){this.canvas.removeEventListener("pointerleave",f(this,Af)),this.canvas.removeEventListener("pointermove",f(this,yf)),this.canvas.removeEventListener("pointerup",f(this,Ef)),this.canvas.addEventListener("pointerdown",f(this,Ko),{signal:this._uiManager._signal}),f(this,Ai)&&clearTimeout(f(this,Ai)),w(this,Ai,setTimeout(()=>{w(this,Ai,null),this.canvas.removeEventListener("contextmenu",Xs)},10)),T(this,me,Yw).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Ap=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Ep=function(){w(this,bn,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),f(this,bn).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=f(this,bn))==null||t.disconnect(),w(this,bn,null)},{once:!0})},lc=function(){if(!f(this,Zo))return;const[t,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*i),T(this,me,Sp).call(this)},Zb=function(t,i){const r=T(this,me,_p).call(this),o=(t-r)/f(this,Qo),d=(i-r)/f(this,Xo);this.scaleFactor=Math.min(o,d)},Sp=function(){const t=T(this,me,_p).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},Mn=new WeakSet,Qw=function(t){const i=new Path2D;for(let r=0,o=t.length;r<o;r++){const[d,h,p,m]=t[r];r===0&&i.moveTo(...d),i.bezierCurveTo(h[0],h[1],p[0],p[1],m[0],m[1])}return i},Jb=function(t,i,r){const[o,d,h,p]=i;switch(r){case 0:for(let m=0,x=t.length;m<x;m+=2)t[m]+=o,t[m+1]=p-t[m+1];break;case 90:for(let m=0,x=t.length;m<x;m+=2){const v=t[m];t[m]=t[m+1]+o,t[m+1]=v+d}break;case 180:for(let m=0,x=t.length;m<x;m+=2)t[m]=h-t[m],t[m+1]+=d;break;case 270:for(let m=0,x=t.length;m<x;m+=2){const v=t[m];t[m]=h-t[m+1],t[m+1]=p-v}break;default:throw new Error("Invalid rotation")}return t},Kw=function(t,i,r){const[o,d,h,p]=i;switch(r){case 0:for(let m=0,x=t.length;m<x;m+=2)t[m]-=o,t[m+1]=p-t[m+1];break;case 90:for(let m=0,x=t.length;m<x;m+=2){const v=t[m];t[m]=t[m+1]-d,t[m+1]=v-o}break;case 180:for(let m=0,x=t.length;m<x;m+=2)t[m]=h-t[m],t[m+1]-=d;break;case 270:for(let m=0,x=t.length;m<x;m+=2){const v=t[m];t[m]=p-t[m+1],t[m+1]=h-v}break;default:throw new Error("Invalid rotation")}return t},Ww=function(t,i,r,o){var x,v;const d=[],h=this.thickness/2,p=t*i+h,m=t*r+h;for(const y of this.paths){const E=[],S=[];for(let _=0,j=y.length;_<j;_++){const[R,L,D,z]=y[_];if(R[0]===z[0]&&R[1]===z[1]&&j===1){const Ce=t*R[0]+p,Ie=t*R[1]+m;E.push(Ce,Ie),S.push(Ce,Ie);break}const P=t*R[0]+p,H=t*R[1]+m,se=t*L[0]+p,re=t*L[1]+m,ne=t*D[0]+p,ue=t*D[1]+m,J=t*z[0]+p,ge=t*z[1]+m;_===0&&(E.push(P,H),S.push(P,H)),E.push(se,re,ne,ue,J,ge),S.push(se,re),_===j-1&&S.push(J,ge)}d.push({bezier:T(x=Nt,Mn,Jb).call(x,E,o,this.rotation),points:T(v=Nt,Mn,Jb).call(v,S,o,this.rotation)})}return d},ev=function(){let t=1/0,i=-1/0,r=1/0,o=-1/0;for(const d of this.paths)for(const[h,p,m,x]of d){const v=Ae.bezierBoundingBox(...h,...p,...m,...x);t=Math.min(t,v[0]),r=Math.min(r,v[1]),i=Math.max(i,v[2]),o=Math.max(o,v[3])}return[t,r,i,o]},_p=function(){return f(this,Ra)?Math.ceil(this.thickness*this.parentScale):0},Pd=function(t=!1){if(this.isEmpty())return;if(!f(this,Ra)){T(this,me,io).call(this);return}const i=T(this,me,ev).call(this),r=T(this,me,_p).call(this);w(this,Qo,Math.max(ct.MIN_SIZE,i[2]-i[0])),w(this,Xo,Math.max(ct.MIN_SIZE,i[3]-i[1]));const o=Math.ceil(r+f(this,Qo)*this.scaleFactor),d=Math.ceil(r+f(this,Xo)*this.scaleFactor),[h,p]=this.parentDimensions;this.width=o/h,this.height=d/p,this.setAspectRatio(o,d);const m=this.translationX,x=this.translationY;this.translationX=-i[0],this.translationY=-i[1],T(this,me,lc).call(this),T(this,me,io).call(this),w(this,Jo,o),w(this,el,d),this.setDims(o,d);const v=t?r/this.scaleFactor/2:0;this.translate(m-this.translationX-v,x-this.translationY-v)},C(Nt,Mn),xe(Nt,"_defaultColor",null),xe(Nt,"_defaultOpacity",1),xe(Nt,"_defaultThickness",1),xe(Nt,"_type","ink"),xe(Nt,"_editorType",We.INK);let Xb=Nt;var ds,hs,_r,vn,wr,nu,Ei,yn,Si,ei,Sf,et,Ud,zd,wp,sv,Zw,Jw,av,Np,eN;const Gd=class Gd extends ct{constructor(t){super({...t,name:"stampEditor"});C(this,et);C(this,ds,null);C(this,hs,null);C(this,_r,null);C(this,vn,null);C(this,wr,null);C(this,nu,"");C(this,Ei,null);C(this,yn,null);C(this,Si,null);C(this,ei,!1);C(this,Sf,!1);w(this,vn,t.bitmapUrl),w(this,wr,t.bitmapFile)}static initialize(t,i){ct.initialize(t,i)}static get supportedTypes(){return Ze(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return Ze(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(We.STAMP,{bitmapFile:t.getAsFile()})}remove(){var t,i;f(this,hs)&&(w(this,ds,null),this._uiManager.imageManager.deleteId(f(this,hs)),(t=f(this,Ei))==null||t.remove(),w(this,Ei,null),(i=f(this,yn))==null||i.disconnect(),w(this,yn,null),f(this,Si)&&(clearTimeout(f(this,Si)),w(this,Si,null))),super.remove()}rebuild(){if(!this.parent){f(this,hs)&&T(this,et,wp).call(this);return}super.rebuild(),this.div!==null&&(f(this,hs)&&f(this,Ei)===null&&T(this,et,wp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(f(this,_r)||f(this,ds)||f(this,vn)||f(this,wr)||f(this,hs))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),f(this,ds)?T(this,et,sv).call(this):T(this,et,wp).call(this),this.width){const[r,o]=this.parentDimensions;this.setAt(t*r,i*o,this.width*r,this.height*o)}return this.div}getImageForAltText(){return f(this,Ei)}static deserialize(t,i,r){if(t instanceof xw)return null;const o=super.deserialize(t,i,r),{rect:d,bitmapUrl:h,bitmapId:p,isSvg:m,accessibilityData:x}=t;p&&r.imageManager.isValidId(p)?w(o,hs,p):w(o,vn,h),w(o,ei,m);const[v,y]=o.pageDimensions;return o.width=(d[2]-d[0])/v,o.height=(d[3]-d[1])/y,x&&(o.altTextData=x),o}serialize(t=!1,i=null){if(this.isEmpty())return null;const r={annotationType:We.STAMP,bitmapId:f(this,hs),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:f(this,ei),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=T(this,et,Np).call(this,!0),r.accessibilityData=this.altTextData,r;const{decorative:o,altText:d}=this.altTextData;if(!o&&d&&(r.accessibilityData={type:"Figure",alt:d}),i===null)return r;i.stamps||(i.stamps=new Map);const h=f(this,ei)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(f(this,hs)))i.stamps.set(f(this,hs),{area:h,serialized:r}),r.bitmap=T(this,et,Np).call(this,!1);else if(f(this,ei)){const p=i.stamps.get(f(this,hs));h>p.area&&(p.area=h,p.serialized.bitmap.close(),p.serialized.bitmap=T(this,et,Np).call(this,!1))}return r}};ds=new WeakMap,hs=new WeakMap,_r=new WeakMap,vn=new WeakMap,wr=new WeakMap,nu=new WeakMap,Ei=new WeakMap,yn=new WeakMap,Si=new WeakMap,ei=new WeakMap,Sf=new WeakMap,et=new WeakSet,Ud=function(t,i=!1){if(!t){this.remove();return}w(this,ds,t.bitmap),i||(w(this,hs,t.id),w(this,ei,t.isSvg)),t.file&&w(this,nu,t.file.name),T(this,et,sv).call(this)},zd=function(){w(this,_r,null),this._uiManager.enableWaiting(!1),f(this,Ei)&&this.div.focus()},wp=function(){if(f(this,hs)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(f(this,hs)).then(r=>T(this,et,Ud).call(this,r,!0)).finally(()=>T(this,et,zd).call(this));return}if(f(this,vn)){const r=f(this,vn);w(this,vn,null),this._uiManager.enableWaiting(!0),w(this,_r,this._uiManager.imageManager.getFromUrl(r).then(o=>T(this,et,Ud).call(this,o)).finally(()=>T(this,et,zd).call(this)));return}if(f(this,wr)){const r=f(this,wr);w(this,wr,null),this._uiManager.enableWaiting(!0),w(this,_r,this._uiManager.imageManager.getFromFile(r).then(o=>T(this,et,Ud).call(this,o)).finally(()=>T(this,et,zd).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Gd.supportedTypesStr;const i=this._uiManager._signal;w(this,_r,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(t.files[0]);T(this,et,Ud).call(this,o)}r()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>T(this,et,zd).call(this))),t.click()},sv=function(){const{div:t}=this;let{width:i,height:r}=f(this,ds);const[o,d]=this.pageDimensions,h=.75;if(this.width)i=this.width*o,r=this.height*d;else if(i>h*o||r>h*d){const v=Math.min(h*o/i,h*d/r);i*=v,r*=v}const[p,m]=this.parentDimensions;this.setDims(i*p/o,r*m/d),this._uiManager.enableWaiting(!1);const x=w(this,Ei,document.createElement("canvas"));t.append(x),t.hidden=!1,T(this,et,av).call(this,i,r),T(this,et,eN).call(this),f(this,Sf)||(this.parent.addUndoableEditor(this),w(this,Sf,!0)),this._reportTelemetry({action:"inserted_image"}),f(this,nu)&&x.setAttribute("aria-label",f(this,nu))},Zw=function(t,i){var h;const[r,o]=this.parentDimensions;this.width=t/r,this.height=i/o,this.setDims(t,i),(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,f(this,Si)!==null&&clearTimeout(f(this,Si)),w(this,Si,setTimeout(()=>{w(this,Si,null),T(this,et,av).call(this,t,i)},200))},Jw=function(t,i){const{width:r,height:o}=f(this,ds);let d=r,h=o,p=f(this,ds);for(;d>2*t||h>2*i;){const m=d,x=h;d>2*t&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2)),h>2*i&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const v=new OffscreenCanvas(d,h);v.getContext("2d").drawImage(p,0,0,m,x,0,0,d,h),p=v.transferToImageBitmap()}return p},av=function(t,i){t=Math.ceil(t),i=Math.ceil(i);const r=f(this,Ei);if(!r||r.width===t&&r.height===i)return;r.width=t,r.height=i;const o=f(this,ei)?f(this,ds):T(this,et,Jw).call(this,t,i);if(this._uiManager.hasMLManager&&!this.hasAltText()){const p=new OffscreenCanvas(t,i).getContext("2d");p.drawImage(o,0,0,o.width,o.height,0,0,t,i),this._uiManager.mlGuess({service:"image-to-text",request:{data:p.getImageData(0,0,t,i).data,width:t,height:i,channels:4}}).then(m=>{const x=(m==null?void 0:m.output)||"";this.parent&&x&&!this.hasAltText()&&(this.altTextData={altText:x,decorative:!1})})}const d=r.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(o,0,0,o.width,o.height,0,0,t,i)},Np=function(t){if(t){if(f(this,ei)){const o=this._uiManager.imageManager.getSvgUrl(f(this,hs));if(o)return o}const i=document.createElement("canvas");return{width:i.width,height:i.height}=f(this,ds),i.getContext("2d").drawImage(f(this,ds),0,0),i.toDataURL()}if(f(this,ei)){const[i,r]=this.pageDimensions,o=Math.round(this.width*i*Rr.PDF_TO_CSS_UNITS),d=Math.round(this.height*r*Rr.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(o,d);return h.getContext("2d").drawImage(f(this,ds),0,0,f(this,ds).width,f(this,ds).height,0,0,o,d),h.transferToImageBitmap()}return structuredClone(f(this,ds))},eN=function(){this._uiManager._signal&&(w(this,yn,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&T(this,et,Zw).call(this,i.width,i.height)})),f(this,yn).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=f(this,yn))==null||t.disconnect(),w(this,yn,null)},{once:!0}))},xe(Gd,"_type","stamp"),xe(Gd,"_editorType",We.STAMP);let tv=Gd;var tl,ru,_i,sl,An,En,Sn,fa,Nr,ou,lu,Rs,_e,Tr,ms,tN,nv,rv,ov,Tp;const Fa=class Fa{constructor({uiManager:e,pageIndex:t,div:i,accessibilityManager:r,annotationLayer:o,drawLayer:d,textLayer:h,viewport:p,l10n:m}){C(this,ms);C(this,tl);C(this,ru,!1);C(this,_i,null);C(this,sl,null);C(this,An,null);C(this,En,null);C(this,Sn,null);C(this,fa,new Map);C(this,Nr,!1);C(this,ou,!1);C(this,lu,!1);C(this,Rs,null);C(this,_e);const x=[...f(Fa,Tr).values()];if(!Fa._initialized){Fa._initialized=!0;for(const v of x)v.initialize(m,e)}e.registerEditorTypes(x),w(this,_e,e),this.pageIndex=t,this.div=i,w(this,tl,r),w(this,_i,o),this.viewport=p,w(this,Rs,h),this.drawLayer=d,f(this,_e).addLayer(this)}get isEmpty(){return f(this,fa).size===0}get isInvisible(){return this.isEmpty&&f(this,_e).getMode()===We.NONE}updateToolbar(e){f(this,_e).updateToolbar(e)}updateMode(e=f(this,_e).getMode()){switch(T(this,ms,Tp).call(this),e){case We.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case We.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case We.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of f(Fa,Tr).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=f(this,Rs))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(f(this,_e).getMode()!==We.INK)return;if(!e){for(const i of f(this,fa).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){f(this,_e).setEditingState(e)}addCommands(e){f(this,_e).addCommands(e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=f(this,_i))==null||t.div.classList.toggle("disabled",!e)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of f(this,fa).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(f(this,_e).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!f(this,_i))return;const t=f(this,_i).getEditableAnnotations();for(const i of t){if(i.hide(),f(this,_e).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){var r;w(this,lu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const o of f(this,fa).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){e.set(o.annotationElementId,o);continue}else t.set(o.annotationElementId,o);(r=this.getEditableAnnotation(o.annotationElementId))==null||r.show(),o.remove()}if(f(this,_i)){const o=f(this,_i).getEditableAnnotations();for(const d of o){const{id:h}=d.data;if(f(this,_e).isDeletedAnnotationElement(h))continue;let p=t.get(h);if(p){p.resetAnnotationElement(d),p.show(!1),d.show();continue}p=e.get(h),p&&(f(this,_e).addChangedExistingAnnotation(p),p.renderAnnotationElement(d),p.show(!1)),d.show()}}T(this,ms,Tp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const o of f(Fa,Tr).values())i.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),w(this,lu,!1)}getEditableAnnotation(e){var t;return((t=f(this,_i))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){f(this,_e).getActive()!==e&&f(this,_e).setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,(e=f(this,Rs))!=null&&e.div&&!f(this,En)&&(w(this,En,T(this,ms,tN).bind(this)),f(this,Rs).div.addEventListener("pointerdown",f(this,En),{signal:f(this,_e)._signal}),f(this,Rs).div.classList.add("highlighting"))}disableTextSelection(){var e;this.div.tabIndex=0,(e=f(this,Rs))!=null&&e.div&&f(this,En)&&(f(this,Rs).div.removeEventListener("pointerdown",f(this,En)),w(this,En,null),f(this,Rs).div.classList.remove("highlighting"))}enableClick(){if(f(this,An))return;const e=f(this,_e)._signal;w(this,An,this.pointerdown.bind(this)),w(this,sl,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",f(this,An),{signal:e}),this.div.addEventListener("pointerup",f(this,sl),{signal:e})}disableClick(){f(this,An)&&(this.div.removeEventListener("pointerdown",f(this,An)),this.div.removeEventListener("pointerup",f(this,sl)),w(this,An,null),w(this,sl,null))}attach(e){f(this,fa).set(e.id,e);const{annotationElementId:t}=e;t&&f(this,_e).isDeletedAnnotationElement(t)&&f(this,_e).removeDeletedAnnotationElement(e)}detach(e){var t;f(this,fa).delete(e.id),(t=f(this,tl))==null||t.removePointerInTextLayer(e.contentDiv),!f(this,lu)&&e.annotationElementId&&f(this,_e).addDeletedAnnotationElement(e)}remove(e){this.detach(e),f(this,_e).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,f(this,ou)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(f(this,_e).addDeletedAnnotationElement(e.annotationElementId),ct.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),f(this,_e).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),f(this,_e).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!f(this,Sn)&&(e._focusEventsAllowed=!1,w(this,Sn,setTimeout(()=>{w(this,Sn,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:f(this,_e)._signal}),t.focus())},0))),e._structTreeParentId=(i=f(this,tl))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return f(this,_e).getId()}get _signal(){return f(this,_e)._signal}canCreateNewEmptyEditor(){var e;return(e=f(this,ms,nv))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){f(this,_e).updateToolbar(e),f(this,_e).updateMode(e);const{offsetX:i,offsetY:r}=T(this,ms,ov).call(this),o=this.getNextId(),d=T(this,ms,rv).call(this,{parent:this,id:o,x:i,y:r,uiManager:f(this,_e),isCentered:!0,...t});d&&this.add(d)}deserialize(e){var t;return((t=f(Fa,Tr).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,f(this,_e)))||null}createAndAddNewEditor(e,t,i={}){const r=this.getNextId(),o=T(this,ms,rv).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:f(this,_e),isCentered:t,...i});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(T(this,ms,ov).call(this),!0)}setSelected(e){f(this,_e).setSelected(e)}toggleSelected(e){f(this,_e).toggleSelected(e)}isSelected(e){return f(this,_e).isSelected(e)}unselect(e){f(this,_e).unselect(e)}pointerup(e){const{isMac:t}=Vs.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&f(this,Nr)){if(w(this,Nr,!1),!f(this,ru)){w(this,ru,!0);return}if(f(this,_e).getMode()===We.STAMP){f(this,_e).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(f(this,_e).getMode()===We.HIGHLIGHT&&this.enableTextSelection(),f(this,Nr)){w(this,Nr,!1);return}const{isMac:t}=Vs.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;w(this,Nr,!0);const i=f(this,_e).getActive();w(this,ru,!i||i.isEmpty())}findNewParent(e,t,i){const r=f(this,_e).findParent(t,i);return r===null||r===this?!1:(r.changeParent(e),!0)}destroy(){var e,t;((e=f(this,_e).getActive())==null?void 0:e.parent)===this&&(f(this,_e).commitOrRemove(),f(this,_e).setActiveEditor(null)),f(this,Sn)&&(clearTimeout(f(this,Sn)),w(this,Sn,null));for(const i of f(this,fa).values())(t=f(this,tl))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,f(this,fa).clear(),f(this,_e).removeLayer(this)}render({viewport:e}){this.viewport=e,al(this.div,e);for(const t of f(this,_e).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){f(this,_e).commitOrRemove(),T(this,ms,Tp).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,al(this.div,{rotation:i}),t!==i)for(const r of f(this,fa).values())r.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return f(this,_e).viewParameters.realScale}};tl=new WeakMap,ru=new WeakMap,_i=new WeakMap,sl=new WeakMap,An=new WeakMap,En=new WeakMap,Sn=new WeakMap,fa=new WeakMap,Nr=new WeakMap,ou=new WeakMap,lu=new WeakMap,Rs=new WeakMap,_e=new WeakMap,Tr=new WeakMap,ms=new WeakSet,tN=function(e){if(f(this,_e).unselectAll(),e.target===f(this,Rs).div){const{isMac:t}=Vs.platform;if(e.button!==0||e.ctrlKey&&t)return;f(this,_e).showAllEditors("highlight",!0,!0),f(this,Rs).div.classList.add("free"),Lp.startHighlighting(this,f(this,_e).direction==="ltr",e),f(this,Rs).div.addEventListener("pointerup",()=>{f(this,Rs).div.classList.remove("free")},{once:!0,signal:f(this,_e)._signal}),e.preventDefault()}},nv=function(){return f(Fa,Tr).get(f(this,_e).getMode())},rv=function(e){const t=f(this,ms,nv);return t?new t.prototype.constructor(e):null},ov=function(){const{x:e,y:t,width:i,height:r}=this.div.getBoundingClientRect(),o=Math.max(0,e),d=Math.max(0,t),h=Math.min(window.innerWidth,e+i),p=Math.min(window.innerHeight,t+r),m=(o+h)/2-e,x=(d+p)/2-t,[v,y]=this.viewport.rotation%180===0?[m,x]:[x,m];return{offsetX:v,offsetY:y}},Tp=function(){w(this,ou,!0);for(const e of f(this,fa).values())e.isEmpty()&&e.remove();w(this,ou,!1)},xe(Fa,"_initialized",!1),C(Fa,Tr,new Map([Pb,Xb,tv,Lp].map(e=>[e._editorType,e])));let iv=Fa;var wi,_f,$t,Cr,wf,cv,cl,uv,sN;const rs=class rs{constructor({pageIndex:e}){C(this,cl);C(this,wi,null);C(this,_f,0);C(this,$t,new Map);C(this,Cr,new Map);this.pageIndex=e}setParent(e){if(!f(this,wi)){w(this,wi,e);return}if(f(this,wi)!==e){if(f(this,$t).size>0)for(const t of f(this,$t).values())t.remove(),e.append(t);w(this,wi,e)}}static get _svgFactory(){return Ze(this,"_svgFactory",new vv)}highlight(e,t,i,r=!1){const o=aa(this,_f)._++,d=T(this,cl,uv).call(this,e.box);d.classList.add("highlight"),e.free&&d.classList.add("free");const h=rs._svgFactory.createElement("defs");d.append(h);const p=rs._svgFactory.createElement("path");h.append(p);const m=`path_p${this.pageIndex}_${o}`;p.setAttribute("id",m),p.setAttribute("d",e.toSVGPath()),r&&f(this,Cr).set(o,p);const x=T(this,cl,sN).call(this,h,m),v=rs._svgFactory.createElement("use");return d.append(v),d.setAttribute("fill",t),d.setAttribute("fill-opacity",i),v.setAttribute("href",`#${m}`),f(this,$t).set(o,d),{id:o,clipPathId:`url(#${x})`}}highlightOutline(e){const t=aa(this,_f)._++,i=T(this,cl,uv).call(this,e.box);i.classList.add("highlightOutline");const r=rs._svgFactory.createElement("defs");i.append(r);const o=rs._svgFactory.createElement("path");r.append(o);const d=`path_p${this.pageIndex}_${t}`;o.setAttribute("id",d),o.setAttribute("d",e.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke");let h;if(e.free){i.classList.add("free");const x=rs._svgFactory.createElement("mask");r.append(x),h=`mask_p${this.pageIndex}_${t}`,x.setAttribute("id",h),x.setAttribute("maskUnits","objectBoundingBox");const v=rs._svgFactory.createElement("rect");x.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const y=rs._svgFactory.createElement("use");x.append(y),y.setAttribute("href",`#${d}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const p=rs._svgFactory.createElement("use");i.append(p),p.setAttribute("href",`#${d}`),h&&p.setAttribute("mask",`url(#${h})`);const m=p.cloneNode();return i.append(m),p.classList.add("mainOutline"),m.classList.add("secondaryOutline"),f(this,$t).set(t,i),t}finalizeLine(e,t){const i=f(this,Cr).get(e);f(this,Cr).delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){f(this,$t).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),f(this,Cr).delete(e)}updatePath(e,t){f(this,Cr).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var i;T(i=rs,wf,cv).call(i,f(this,$t).get(e),t)}show(e,t){f(this,$t).get(e).classList.toggle("hidden",!t)}rotate(e,t){f(this,$t).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){f(this,$t).get(e).setAttribute("fill",t)}changeOpacity(e,t){f(this,$t).get(e).setAttribute("fill-opacity",t)}addClass(e,t){f(this,$t).get(e).classList.add(t)}removeClass(e,t){f(this,$t).get(e).classList.remove(t)}remove(e){f(this,wi)!==null&&(f(this,$t).get(e).remove(),f(this,$t).delete(e))}destroy(){w(this,wi,null);for(const e of f(this,$t).values())e.remove();f(this,$t).clear()}};wi=new WeakMap,_f=new WeakMap,$t=new WeakMap,Cr=new WeakMap,wf=new WeakSet,cv=function(e,{x:t=0,y:i=0,width:r=1,height:o=1}={}){const{style:d}=e;d.top=`${100*i}%`,d.left=`${100*t}%`,d.width=`${100*r}%`,d.height=`${100*o}%`},cl=new WeakSet,uv=function(e){var i;const t=rs._svgFactory.create(1,1,!0);return f(this,wi).append(t),t.setAttribute("aria-hidden",!0),T(i=rs,wf,cv).call(i,t,e),t},sN=function(e,t){const i=rs._svgFactory.createElement("clipPath");e.append(i);const r=`clip_${t}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const o=rs._svgFactory.createElement("use");return i.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),r},C(rs,wf);let lv=rs;Oe.AbortException;Oe.AnnotationEditorLayer;Oe.AnnotationEditorParamsType;Oe.AnnotationEditorType;Oe.AnnotationEditorUIManager;Oe.AnnotationLayer;Oe.AnnotationMode;Oe.CMapCompressionType;Oe.ColorPicker;Oe.DOMSVGFactory;Oe.DrawLayer;Oe.FeatureTest;var ZE=Oe.GlobalWorkerOptions;Oe.ImageKind;Oe.InvalidPDFException;Oe.MissingPDFException;Oe.OPS;Oe.Outliner;Oe.PDFDataRangeTransport;Oe.PDFDateString;Oe.PDFWorker;Oe.PasswordResponses;Oe.PermissionFlag;Oe.PixelsPerInch;Oe.RenderingCancelledException;Oe.TextLayer;Oe.UnexpectedResponseException;Oe.Util;Oe.VerbosityLevel;Oe.XfaLayer;Oe.build;Oe.createValidAbsoluteUrl;Oe.fetchData;var Bj=Oe.getDocument;Oe.getFilenameFromUrl;Oe.getPdfFilenameFromUrl;Oe.getXfaPageViewport;Oe.isDataScheme;Oe.isPdfFile;Oe.noContextMenu;Oe.normalizeUnicode;Oe.renderTextLayer;Oe.setLayerDimensions;Oe.shadow;Oe.updateTextLayer;var Hj=Oe.version;const he=({children:c,className:e="",title:t,titleClassName:i="text-2xl font-semibold text-slate-800",actions:r,...o})=>u.jsxs("div",{className:`bg-white shadow-lg hover:shadow-xl transition-shadow duration-300 rounded-xl p-6 sm:p-8 ${e}`,...o,children:[(t||r)&&u.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-slate-200",children:[t&&u.jsx("h3",{className:`${i} font-display`,children:t}),r&&u.jsx("div",{className:"flex space-x-3",children:r})]}),c]}),fl="models/gemini-2.0-flash-lite",qj=["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"],Vd=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),Mr=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 00-.491 6.347A48.62 48.62 0 0112 20.25c2.472 0 4.796-.646 6.824-1.756a60.439 60.439 0 00-.49-6.347m-5.482 4.756A48.636 48.636 0 0012 14.25c-2.472 0-4.796.646-6.824 1.756L3.75 14.25M3.75 14.25a2.25 2.25 0 012.25-2.25h12a2.25 2.25 0 012.25 2.25m-16.5 0L12 16.5m-8.25-2.25v-6a2.25 2.25 0 012.25-2.25h12a2.25 2.25 0 012.25 2.25v6"})}),uu=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.354a15.055 15.055 0 01-4.5 0M12 3c2.667 0 5.167 1.009 7.071 2.929S21.929 9.333 21.929 12c0 .849-.117 1.67-.337 2.454M4.409 14.454A9.007 9.007 0 014.071 12c0-2.667 1.009-5.167 2.929-7.071S10.333 3 12 3m0 18c2.013 0 3.895-.628 5.443-1.732M6.557 19.268A10.432 10.432 0 0112 18z"})}),ti=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),pg=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})}),Gj=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),aN=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),fs=({className:c="w-6 h-6 text-green-500"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),du=({className:c="w-6 h-6 text-red-500"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),_t=({className:c="w-5 h-5"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:c,children:u.jsx("path",{fillRule:"evenodd",d:"M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.39-3.423 3.252.935 4.847 4.003 2.691 2.408-4.141.002-.002.002.002 2.408 4.141 4.003-2.691.935-4.847-3.423-3.252-4.753-.39-1.83-4.401zM11.632 10.17l1.14-2.748 3.017-.246-2.176 2.07.521 3.078-2.67 1.794-1.498-2.583-.002.001-.002-.001-1.498 2.583-2.67-1.794.521-3.078-2.176-2.07 3.017-.246 1.14 2.748L10 7.499l1.632 2.671z",clipRule:"evenodd"})}),JE=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m.75 12l3 3m0 0l3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),kr=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),Rf=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Yj=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-3.75h.008v.008H12v-.008z"})}),iN=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),fu=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"})}),Vj=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.429 9.75L2.25 12l4.179 2.25m0-4.5l5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-3.75 2.25M12 15l2.25 1.5L12 18l-2.25-1.5L12 15z"})}),gg=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),$j=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})}),dv=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-3.862 8.25-8.625 8.25DB4.101 20.25 2.25 21V16.5A8.25 8.25 0 0112.375 3.75h.004v-.004A8.25 8.25 0 0121 12z"})}),Xj=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),nN=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),Qj=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5"})}),hv=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),Kj=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),eS=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z"})}),Wj=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9.75v6.75m0 0l-3-3m3 3l3-3m-8.25 6a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z"})}),hu=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 100 15 7.5 7.5 0 000-15zm0 0V3m0 3v.01M10.5 12H3m7.5 0h7.5m-7.5 0V9m0 3v3m0-15a15.002 15.002 0 00-14.122 12.035M10.5 3a15.002 15.002 0 0110.607 4.393"})}),tS=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),Tv=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.39m3.421 3.416a15.994 15.994 0 001.622-3.39m3.421 3.416a15.994 15.994 0 003.388-1.62m-5.043-.025a15.998 15.998 0 01-1.622-3.39m-3.421-3.416a15.998 15.998 0 01-1.622-3.39m-3.421-3.416a15.998 15.998 0 013.388-1.62m5.043.025a15.995 15.995 0 00-3.388-1.62m-5.043-.025a15.995 15.995 0 01-3.388-1.62m5.043.025a15.995 15.995 0 00-1.622 3.39M3.062 8.092a15.99 15.99 0 00-1.622 3.39m3.421 3.416a15.99 15.99 0 00-3.388 1.62m5.043-.025a15.99 15.99 0 01-3.388 1.62M13 3.75l1.5 1.5m0 0l1.5-1.5M13 3.75v16.5m1.5-16.5l1.5 1.5m0 0l1.5-1.5M14.5 3.75v16.5M5.75 11.25a3 3 0 00-3 3v3.75a3 3 0 003 3h3.75a3 3 0 003-3V18m-6.75-6.75a.75.75 0 00-1.5 0v3.75c0 .414.336.75.75.75h3.75a.75.75 0 00.75-.75V12a.75.75 0 00-.75-.75H5.75z"})}),hc=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.562.562 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})}),fc=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23-.693L5 14.5m14.8.8l1.402 1.402c.232.232.348.694.348 1.39s-.116 1.158-.348 1.39L19.8 21.085M5 14.5a2.25 2.25 0 00-1.8 3.6l2.165 2.165a2.25 2.25 0 001.591.659h8.088a2.25 2.25 0 001.591-.659l2.165-2.165a2.25 2.25 0 00-1.8-3.6"})}),rl=({className:c="w-6 h-6"})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0112 21 8.25 8.25 0 016.038 7.048 8.287 8.287 0 009 9.6a8.983 8.983 0 013.361-6.867 8.21 8.21 0 003 2.48z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 00.495-7.467 5.99 5.99 0 00-1.925 3.546 5.974 5.974 0 01-2.133-1A3.75 3.75 0 0012 18z"})]}),Zj=({className:c="w-6 h-6"})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Cv=({className:c="w-6 h-6"})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Jj=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.333 9-6.03 9-11.623A11.99 11.99 0 0020.402 6 11.959 11.959 0 0112 2.75z"})}),jv=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})}),qx=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),eR=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 013 3h-15a3 3 0 013-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 01-.982-3.172M9.497 14.25a7.454 7.454 0 00.981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 007.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 002.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.228a9.284 9.284 0 012.916.52 6.003 6.003 0 01-4.395 5.972m0-11.456a8.287 8.287 0 00-2.748 0m2.748 0V3.545c0 1.048-.848 1.896-1.896 1.896h-4.368c-1.048 0-1.896-.848-1.896-1.896V1.792m2.748 0a8.287 8.287 0 012.748 0"})}),tR=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),sR=({className:c="w-6 h-6"})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:c,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),Xt=({size:c="md",color:e="text-sky-600",className:t=""})=>{const i={sm:"w-5 h-5",md:"w-10 h-10",lg:"w-14 h-14"};return u.jsx("div",{className:`flex justify-center items-center ${t}`,children:u.jsx("div",{className:`animate-spin rounded-full border-4 border-transparent ${i[c]} ${e}`,style:{borderTopColor:"currentColor",borderRightColor:"currentColor",animationTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)"},role:"status","aria-label":"Carregando..."})})};if(typeof window<"u"&&!ZE.workerSrc){const c=Hj;ZE.workerSrc=`https://esm.sh/pdfjs-dist@${c}/build/pdf.worker.min.js`}const aR=({onPdfUploaded:c,isLoading:e})=>{const[t,i]=X.useState(null),[r,o]=X.useState(!1),[d,h]=X.useState(null),[p,m]=X.useState(null),x=X.useRef(null),v=async S=>{const _=await S.arrayBuffer(),j=await Bj({data:_}).promise;let R="";for(let D=1;D<=j.numPages;D++){const P=await(await j.getPage(D)).getTextContent();let H="";P.items.forEach(se=>{"str"in se&&(H+=se.str,"hasEOL"in se&&se.hasEOL?(R+=H.trim()+`
`,H=""):H+=" ")}),H.trim()&&(R+=H.trim()+`
`),R+=`
`}let L=R.replace(/[ \t]+/g," ");return L=L.replace(/\n[ \t]+/g,`
`),L=L.replace(/[ \t]+\n/g,`
`),L=L.replace(/\n{3,}/g,`

`),L.trim()},y=X.useCallback(async S=>{var j;const _=(j=S.target.files)==null?void 0:j[0];if(_){if(_.type!=="application/pdf"){m("Erro: Por favor, selecione um arquivo PDF."),h(null),i(null),x.current&&(x.current.value="");return}i(_),m(null),h(`Analisando "${_.name}"...`),o(!0);try{const R=await v(_);R.trim()?(h(`"${_.name}" processado com sucesso!`),c(R,_.name)):(m(`No foi possvel extrair texto do PDF "${_.name}". O arquivo pode estar vazio, protegido ou ser uma imagem.`),h(null))}catch(R){console.error("Erro ao processar PDF:",R),m(`Erro ao processar PDF: ${R.message}. Tente outro arquivo.`),h(null)}finally{o(!1)}}},[c]),E=()=>{var S;(S=x.current)==null||S.click()};return u.jsx("div",{className:"min-h-[80vh] flex items-center justify-center px-4",children:u.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[u.jsxs("div",{className:"text-center mb-16",children:[u.jsxs("div",{className:"relative inline-block mb-8",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-sky-400 to-blue-600 rounded-full blur-3xl opacity-20 animate-pulse"}),u.jsx("div",{className:"relative w-32 h-32 bg-gradient-to-br from-sky-500 via-blue-600 to-indigo-700 rounded-3xl flex items-center justify-center shadow-2xl transform hover:scale-105 transition-transform duration-300",children:u.jsx(_t,{className:"w-16 h-16 text-white animate-pulse"})})]}),u.jsx("h1",{className:"text-5xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-slate-800 via-sky-700 to-indigo-800 bg-clip-text text-transparent",children:"ConcursoGenius"}),u.jsx("p",{className:"text-2xl md:text-3xl text-slate-700 font-semibold mb-4",children:"Seu Plano de Estudos Inteligente"}),u.jsx("p",{className:"text-lg md:text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Revolucione seus estudos com nossa IA avanada. Envie o edital e receba um plano personalizado, otimizado especialmente para o seu perfil e objetivos."})]}),u.jsxs("div",{className:"relative max-w-4xl mx-auto",children:[u.jsx("div",{className:"absolute -top-10 -left-10 w-40 h-40 bg-gradient-to-br from-sky-200/30 to-blue-300/30 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute -bottom-10 -right-10 w-40 h-40 bg-gradient-to-br from-indigo-200/30 to-purple-300/30 rounded-full blur-3xl"}),u.jsxs(he,{className:"relative bg-white/90 backdrop-blur-sm border border-white/20 shadow-2xl p-12",children:[u.jsxs("div",{className:"text-center mb-10",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl shadow-lg mb-6 transform hover:rotate-6 transition-transform duration-300",children:u.jsx(JE,{className:"w-10 h-10 text-white"})}),u.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-4",children:"Envie seu Edital"}),u.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Nossa IA analisar cada detalhe do edital para criar o plano de estudos mais eficiente para voc."})]}),u.jsxs("div",{className:"mb-8",children:[u.jsx("input",{type:"file",id:"pdf-upload-main",accept:".pdf",onChange:y,className:"file-input-hidden",ref:x,disabled:e||r}),u.jsx("div",{className:`relative border-2 border-dashed rounded-2xl p-12 transition-all duration-300 cursor-pointer group ${r||e?"border-slate-300 bg-slate-50":"border-sky-300 bg-gradient-to-br from-sky-50 to-blue-50 hover:from-sky-100 hover:to-blue-100 hover:border-sky-400"}`,onClick:E,children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-xl flex items-center justify-center transition-all duration-300 ${r||e?"bg-slate-200":"bg-sky-500 group-hover:bg-sky-600 shadow-lg group-hover:shadow-xl"}`,children:r||e?u.jsx(Xt,{size:"md"}):u.jsx(JE,{className:"w-8 h-8 text-white"})}),u.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:r?"Analisando seu edital...":e?"Carregando...":"Clique para enviar ou arraste o arquivo aqui"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Suportamos apenas arquivos PDF  Tamanho mximo: 50MB"}),t&&!r&&u.jsxs("div",{className:"mt-4 inline-flex items-center px-4 py-2 bg-green-100 text-green-800 rounded-lg text-sm font-medium",children:[u.jsx(fs,{className:"w-4 h-4 mr-2"}),t.name]})]})})]}),r&&d&&u.jsxs("div",{className:"mb-6 flex items-center justify-center p-4 bg-blue-50 border border-blue-200 rounded-xl text-blue-700",children:[u.jsx(Xt,{size:"sm",color:"text-blue-600"}),u.jsx("span",{className:"ml-3 font-medium",children:d})]}),!r&&d&&!p&&u.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl text-green-700 flex items-center justify-center",children:[u.jsx(fs,{className:"w-5 h-5 mr-3 text-green-500"}),u.jsx("span",{className:"font-medium",children:d})]}),p&&u.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 flex items-center justify-center",children:[u.jsx(du,{className:"w-5 h-5 mr-3 text-red-500"}),u.jsx("span",{className:"font-medium",children:p})]}),u.jsxs("div",{className:"mt-12 pt-8 border-t border-slate-200",children:[u.jsxs("h3",{className:"text-2xl font-bold text-center text-slate-800 mb-8 flex items-center justify-center",children:[u.jsx(kr,{className:"w-7 h-7 text-sky-500 mr-3"}),"Como Funciona Nossa IA?"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"text-center group",children:[u.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg group-hover:shadow-xl transition-all duration-300 group-hover:scale-105",children:u.jsx("span",{className:"text-2xl font-bold text-white",children:"1"})}),u.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Anlise Inteligente"}),u.jsx("p",{className:"text-sm text-slate-600",children:"Nossa IA extrai e analisa todas as informaes do edital automaticamente"})]}),u.jsxs("div",{className:"text-center group",children:[u.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg group-hover:shadow-xl transition-all duration-300 group-hover:scale-105",children:u.jsx("span",{className:"text-2xl font-bold text-white",children:"2"})}),u.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Personalizao"}),u.jsx("p",{className:"text-sm text-slate-600",children:"Criamos um plano baseado no seu perfil, tempo disponvel e objetivos"})]}),u.jsxs("div",{className:"text-center group",children:[u.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg group-hover:shadow-xl transition-all duration-300 group-hover:scale-105",children:u.jsx("span",{className:"text-2xl font-bold text-white",children:"3"})}),u.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Acompanhamento"}),u.jsx("p",{className:"text-sm text-slate-600",children:"Dashboard inteligente e Coach IA para maximizar seus resultados"})]})]})]}),u.jsxs("div",{className:"mt-12 p-8 bg-gradient-to-r from-slate-50 to-blue-50 rounded-2xl",children:[u.jsx("h3",{className:"text-xl font-bold text-slate-800 text-center mb-6",children:" O que voc vai receber:"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-sky-500 rounded-full"}),u.jsx("span",{className:"text-slate-700",children:"Cronograma de estudos personalizado"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),u.jsx("span",{className:"text-slate-700",children:"Resumos e questes geradas por IA"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),u.jsx("span",{className:"text-slate-700",children:"Dashboard com progresso detalhado"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full"}),u.jsx("span",{className:"text-slate-700",children:"Coach IA para dvidas 24/7"})]})]})]})]})]})]})})},ce=({children:c,variant:e="primary",size:t="md",isLoading:i=!1,leftIcon:r,rightIcon:o,className:d="",fullWidth:h=!1,...p})=>{const m="font-semibold rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all ease-in-out duration-200 flex items-center justify-center shadow-sm hover:shadow-md",x={primary:"bg-gradient-to-r from-sky-600 to-cyan-500 hover:from-sky-700 hover:to-cyan-600 text-white focus:ring-sky-500",secondary:"bg-slate-200 hover:bg-slate-300 text-slate-700 focus:ring-slate-400",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",ghost:"bg-transparent hover:bg-sky-100 text-sky-700 focus:ring-sky-500 shadow-none hover:shadow-none",outline:"bg-transparent border-2 border-sky-600 text-sky-700 hover:bg-sky-50 focus:ring-sky-500 shadow-none hover:shadow-sm",link:"bg-transparent text-sky-600 hover:text-sky-700 hover:underline focus:ring-sky-500 shadow-none hover:shadow-none p-0"},y=e==="link"?t==="sm"?"text-xs":t==="md"?"text-sm":"text-base":{sm:"px-3.5 py-2 text-xs",md:"px-5 py-2.5 text-sm",lg:"px-7 py-3 text-base"}[t],E="opacity-60 cursor-not-allowed shadow-none hover:shadow-none",S=h?"w-full":"";return u.jsx("button",{className:`${e==="link"?"":m} ${x[e]} ${y} ${i||p.disabled?E:""} ${S} ${d}`,disabled:i||p.disabled,...p,children:i?u.jsx(Xt,{size:"sm",color:e==="primary"||e==="danger"?"text-white":"text-sky-600"}):u.jsxs(u.Fragment,{children:[r&&u.jsx("span",{className:`mr-2 ${t==="sm"?"w-3.5 h-3.5":"w-4 h-4"}`,children:r}),u.jsx("span",{className:e==="link"?"":"mx-1",children:c}),o&&u.jsx("span",{className:`ml-2 ${t==="sm"?"w-3.5 h-3.5":"w-4 h-4"}`,children:o})]})})},Hd=({label:c,id:e,error:t,className:i="",containerClassName:r="",leftIcon:o,...d})=>{const h=!!t;return u.jsxs("div",{className:`mb-5 ${r}`,children:[c&&u.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-slate-700 mb-1.5",children:c}),u.jsxs("div",{className:"relative",children:[o&&u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:ig.cloneElement(o,{className:"w-5 h-5 text-slate-400"})}),u.jsx("input",{id:e,className:`block w-full px-4 py-2.5 border ${h?"border-red-400 focus:ring-red-500 focus:border-red-500":"border-slate-300 focus:ring-sky-500 focus:border-sky-500"} 
                     rounded-lg shadow-sm focus:outline-none sm:text-sm transition-colors duration-150 ease-in-out
                     ${o?"pl-10":""} ${i}`,...d})]}),t&&u.jsx("p",{className:"mt-1.5 text-xs text-red-600",children:t})]})},iR=({editalFileName:c,extractedRoles:e,aiClarificationQuestions:t,aiRoleExtractionError:i,isLoadingRoles:r,onRoleSelectAndProceed:o,onBackToUpload:d,onRequestRoleExtraction:h})=>{const[p,m]=X.useState(""),[x,v]=X.useState(""),[y,E]=X.useState(!1),[S,_]=X.useState("");X.useEffect(()=>{e.length>0?(m(e[0]),E(!1),v("")):!r&&!i&&E(!0),i&&E(!0)},[e,r,i]);const j=()=>{const L=y?x.trim():p.trim();if(!L){_("Por favor, selecione ou informe o cargo desejado.");return}_(""),o(L)},R=L=>{m(L),L==="MANUAL_INPUT_TRIGGER"?(E(!0),m("")):(E(!1),v(""))};return u.jsxs(he,{className:"max-w-2xl mx-auto",title:"1. Selecione seu Cargo",children:[u.jsx(ce,{onClick:d,variant:"ghost",size:"sm",className:"absolute top-6 right-6 text-slate-500 hover:text-sky-600",leftIcon:u.jsx(ti,{className:"w-4 h-4"}),children:"Enviar Outro Edital"}),u.jsxs("p",{className:"text-slate-600 mb-2 text-sm",children:["Analisamos o edital ",u.jsx("strong",{className:"text-sky-700",children:c||"fornecido"}),"."]}),r&&u.jsxs("div",{className:"flex flex-col items-center justify-center my-10",children:[u.jsx(Xt,{size:"md"}),u.jsxs("p",{className:"mt-3 text-sky-700 flex items-center",children:[u.jsx(_t,{className:"inline w-5 h-5 mr-1.5 text-amber-500"}),"Identificando cargos no edital..."]})]}),!r&&i&&u.jsxs("div",{className:"my-4 p-4 bg-red-50 border border-red-300 rounded-lg",children:[u.jsxs("div",{className:"flex items-center text-red-700",children:[u.jsx(du,{className:"w-6 h-6 mr-2 flex-shrink-0"}),u.jsx("h4",{className:"font-semibold text-lg",children:"Erro ao Identificar Cargos"})]}),u.jsx("p",{className:"text-red-600 text-sm mt-1 mb-3",children:i}),u.jsx("p",{className:"text-sm text-slate-600",children:"No se preocupe! Voc pode informar o cargo manualmente abaixo."}),h&&u.jsx(ce,{onClick:h,variant:"outline",size:"sm",className:"mt-3",leftIcon:u.jsx(_t,{}),children:"Tentar Extrair Cargos Novamente"})]}),!r&&!i&&e.length>0&&u.jsxs("div",{className:"my-4 p-4 bg-green-50 border border-green-300 rounded-lg",children:[u.jsxs("div",{className:"flex items-center text-green-700",children:[u.jsx(fs,{className:"w-6 h-6 mr-2 flex-shrink-0"}),u.jsx("h4",{className:"font-semibold text-lg",children:"Cargos Identificados pela IA!"})]}),u.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Selecione o cargo para o qual voc est estudando. Se no estiver na lista, voc pode inform-lo manualmente."})]}),!r&&!i&&e.length===0&&!y&&u.jsxs("div",{className:"my-4 p-4 bg-amber-50 border border-amber-300 rounded-lg",children:[u.jsxs("div",{className:"flex items-center text-amber-700",children:[u.jsx(kr,{className:"w-6 h-6 mr-2 flex-shrink-0"}),u.jsx("h4",{className:"font-semibold text-lg",children:"Nenhum Cargo Identificado Automaticamente"})]}),u.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"No encontramos cargos listados automaticamente. Por favor, informe seu cargo alvo manualmente abaixo."})]}),!r&&(e.length>0||y)&&u.jsxs("div",{className:"space-y-4 my-6",children:[u.jsxs("label",{className:"block text-md font-semibold text-slate-800 mb-2",children:[u.jsx(gg,{className:"inline w-5 h-5 mr-2 text-sky-600"}),"Qual o seu cargo alvo?"]}),e.map(L=>u.jsxs("label",{className:`flex items-center p-3.5 rounded-lg border-2 transition-all duration-200 cursor-pointer ${p===L&&!y?"bg-sky-100 border-sky-500 ring-2 ring-sky-500":"hover:bg-slate-100 border-slate-300 hover:border-sky-400"}`,children:[u.jsx("input",{type:"radio",name:"extractedRole",value:L,checked:p===L&&!y,onChange:()=>R(L),className:"form-radio h-5 w-5 text-sky-600 border-slate-400 focus:ring-sky-500 mr-3 flex-shrink-0"}),u.jsx("span",{className:"text-slate-700 font-medium",children:L})]},L)),e.length>0&&u.jsxs("label",{className:`flex items-center p-3.5 rounded-lg border-2 transition-all duration-200 cursor-pointer ${y?"bg-sky-100 border-sky-500 ring-2 ring-sky-500":"hover:bg-slate-100 border-slate-300 hover:border-sky-400"}`,children:[u.jsx("input",{type:"radio",name:"extractedRole",value:"MANUAL_INPUT_TRIGGER",checked:y,onChange:()=>R("MANUAL_INPUT_TRIGGER"),className:"form-radio h-5 w-5 text-sky-600 border-slate-400 focus:ring-sky-500 mr-3 flex-shrink-0"}),u.jsx("span",{className:"text-slate-700 font-medium",children:"Outro (informar manualmente)"})]}),y&&u.jsx(Hd,{id:"manualTargetRole",label:e.length>0?"Informe seu cargo aqui:":"Informe o Cargo Desejado:",value:x,onChange:L=>v(L.target.value),placeholder:"Ex: Analista Judicirio - rea Administrativa",containerClassName:"mt-4",leftIcon:u.jsx(Mr,{})})]}),t&&t.length>0&&u.jsxs("div",{className:"my-6 p-4 bg-blue-50 border border-blue-300 rounded-lg",children:[u.jsxs("div",{className:"flex items-center text-blue-700",children:[u.jsx(kr,{className:"w-6 h-6 mr-2 flex-shrink-0"}),u.jsx("h4",{className:"font-semibold text-lg",children:"Sugestes da IA:"})]}),u.jsx("ul",{className:"list-disc list-inside text-sm text-blue-600 mt-2 space-y-1",children:t.map((L,D)=>u.jsx("li",{children:L},D))})]}),S&&u.jsx("p",{className:"text-red-600 text-sm mb-4 p-3 bg-red-50 rounded-md border border-red-200",children:S}),u.jsx(ce,{onClick:j,isLoading:r,disabled:r||!y&&!p||y&&!x.trim(),fullWidth:!0,size:"lg",className:"mt-6",leftIcon:u.jsx(_t,{className:"w-5 h-5"}),children:"Confirmar Cargo e Definir Preferncias"})]})},rN=({label:c,id:e,error:t,className:i="",containerClassName:r="",...o})=>{const d=!!t;return u.jsxs("div",{className:`mb-5 ${r}`,children:[c&&u.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-slate-700 mb-1.5",children:c}),u.jsx("textarea",{id:e,rows:o.rows||6,className:`block w-full px-4 py-2.5 border ${d?"border-red-400 focus:ring-red-500 focus:border-red-500":"border-slate-300 focus:ring-sky-500 focus:border-sky-500"} 
                   rounded-lg shadow-sm focus:outline-none sm:text-sm transition-colors duration-150 ease-in-out ${i}`,...o}),t&&u.jsx("p",{className:"mt-1.5 text-xs text-red-600",children:t})]})},nR=({targetRole:c,onPreferencesSubmit:e,isLoading:t,initialProfile:i,onGoBack:r})=>{const[o,d]=X.useState((i==null?void 0:i.dailyStudyHours)||""),[h,p]=X.useState((i==null?void 0:i.studyDays)||["Segunda","Tera","Quarta","Quinta","Sexta"]),[m,x]=X.useState((i==null?void 0:i.studyNotes)||""),[v,y]=X.useState(""),E=_=>{p(j=>j.includes(_)?j.filter(R=>R!==_):[...j,_])},S=()=>{const _=Number(o);if(isNaN(_)||_<=0||_>16){y("Por favor, insira um nmero vlido de horas de estudo (entre 1 e 16).");return}if(h.length===0){y("Por favor, selecione pelo menos um dia de estudo.");return}y(""),e({dailyStudyHours:_,studyDays:h,studyNotes:m})};return u.jsxs(he,{className:"max-w-2xl mx-auto",title:"2. Suas Preferncias de Estudo",children:[u.jsx(ce,{onClick:r,variant:"ghost",size:"sm",className:"absolute top-6 right-6 text-slate-500 hover:text-sky-600",leftIcon:u.jsx(ti,{className:"w-4 h-4"}),children:"Alterar Cargo"}),u.jsx("div",{className:"mb-6 p-4 bg-sky-50 border border-sky-200 rounded-lg",children:u.jsxs("p",{className:"text-sm text-sky-700 flex items-center",children:[u.jsx(Mr,{className:"w-5 h-5 mr-2 text-sky-600 flex-shrink-0"}),"Preparando para o cargo: ",u.jsx("strong",{className:"ml-1",children:c||"No especificado"})]})}),u.jsxs("p",{className:"text-slate-600 mb-8 text-sm",children:["Agora, conte-nos um pouco sobre sua rotina e disponibilidade. Essas informaes ajudaro a IA ",u.jsx(_t,{className:"inline w-4 h-4 text-amber-500"})," a criar um plano de estudos ainda mais personalizado e eficaz para voc."]}),u.jsx(Hd,{id:"dailyStudyHours",label:"Horas de Estudo Dirias (aproximadamente)",type:"number",value:o,onChange:_=>d(_.target.value),min:"1",max:"16",placeholder:"Ex: 4",disabled:t,leftIcon:u.jsx(Rf,{})}),u.jsxs("div",{className:"mb-5",children:[u.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center",children:[u.jsx(Yj,{className:"w-5 h-5 text-slate-400 mr-2"}),"Dias de Estudo na Semana"]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:qj.map(_=>u.jsx(ce,{variant:h.includes(_)?"primary":"outline",onClick:()=>E(_),size:"md",className:"flex-grow sm:flex-grow-0",disabled:t,children:_},_))})]}),u.jsx(rN,{id:"studyNotes",label:"Notas Adicionais sobre sua Rotina (opcional)",value:m,onChange:_=>x(_.target.value),placeholder:"Ex: Prefiro estudar de manh, tenho 2h livres no almoo, trabalho em turnos, etc.",rows:4,disabled:t}),v&&u.jsx("p",{className:"text-red-600 text-sm mb-4 p-3 bg-red-50 rounded-md border border-red-200",children:v}),u.jsx(ce,{onClick:S,isLoading:t,disabled:t||!c,fullWidth:!0,className:"mt-6",size:"lg",leftIcon:u.jsx(uu,{className:"w-5 h-5"}),children:t?"Gerando Plano...":"Gerar Plano de Estudos Otimizado"})]})},rR={Pendente:{icon:u.jsx(Rf,{className:"w-3.5 h-3.5"}),textClass:"text-amber-700",bgClass:"bg-amber-100",pillClass:"border-amber-500"},Estudando:{icon:u.jsx(_t,{className:"w-3.5 h-3.5"}),textClass:"text-sky-700",bgClass:"bg-sky-100",pillClass:"border-sky-500"},Concludo:{icon:u.jsx(fs,{className:"w-3.5 h-3.5"}),textClass:"text-green-700",bgClass:"bg-green-100",pillClass:"border-green-500"}},oR=({subject:c,topic:e,onSelectTopic:t})=>{const i=rR[e.status];return u.jsx("li",{className:"py-4 px-1 hover:bg-slate-50 rounded-md transition-colors duration-150 group",children:u.jsxs("div",{className:"flex items-center justify-between space-x-3",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-base font-medium text-slate-800 group-hover:text-sky-700 truncate",children:e.name}),u.jsxs("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i.bgClass} ${i.textClass} border ${i.pillClass} mt-1`,children:[ig.cloneElement(i.icon,{className:`w-3.5 h-3.5 mr-1.5 ${i.textClass}`}),e.status]})]}),u.jsx(ce,{size:"md",variant:"primary",onClick:()=>t(c.id,e.id),leftIcon:u.jsx(Mr,{className:"w-4 h-4"}),className:"shadow-md hover:shadow-lg transform hover:scale-105",children:"Estudar Tpico"})]})})},lR=({subject:c,index:e,onSelectTopic:t})=>{const[i,r]=X.useState(e===0);return u.jsxs(he,{className:"mb-6 overflow-hidden shadow-lg hover:shadow-xl transition-shadow",title:"",children:[u.jsxs("div",{className:"flex justify-between items-center cursor-pointer p-5 -m-6 sm:-m-8 mb-0 rounded-t-xl bg-gradient-to-r from-slate-700 via-slate-800 to-black hover:from-slate-800 hover:via-black hover:to-black transition-all duration-300",onClick:()=>r(!i),role:"button","aria-expanded":i,"aria-controls":`subject-topics-${c.id}`,children:[u.jsx("h4",{className:"text-xl font-semibold text-white font-display tracking-wide",children:c.name}),u.jsx(aN,{className:`w-6 h-6 text-white transform transition-transform duration-300 ${i?"rotate-180":""}`})]}),i&&u.jsx("div",{id:`subject-topics-${c.id}`,className:"mt-6 pt-4 border-t border-slate-200",children:c.topics.length>0?u.jsx("ul",{className:"divide-y divide-slate-200",children:c.topics.map(o=>u.jsx(oR,{subject:c,topic:o,onSelectTopic:t},o.id))}):u.jsxs("div",{className:"py-6 text-center text-slate-500",children:[u.jsx(gg,{className:"w-12 h-12 mx-auto text-slate-400 mb-3"}),u.jsx("p",{className:"text-lg font-medium",children:"Nenhum tpico detalhado."}),u.jsx("p",{className:"text-sm",children:"Parece que no foram encontrados tpicos especficos para esta matria no edital fornecido."})]})})]})},sS=({planData:c,targetRoleName:e,onSelectTopic:t,onGoBack:i})=>!c||!c.subjects&&!c.error?u.jsxs("div",{className:"flex flex-col items-center justify-center h-96 text-center",children:[u.jsx(Xt,{size:"lg",color:"text-sky-600"})," ",u.jsx("p",{className:"mt-4 text-lg text-slate-600",children:"Montando seu plano de estudos personalizado..."})]}):c.error?u.jsxs(he,{className:"max-w-2xl mx-auto text-center shadow-xl border-2 border-red-200 bg-red-50",children:[u.jsx(du,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),u.jsx("h2",{className:"text-3xl font-bold text-red-700 mb-3 font-display",children:"Ops! Algo deu Errado"}),u.jsx("p",{className:"text-slate-700 mb-5 text-base",children:c.error}),c.clarificationQuestionsFromAI&&c.clarificationQuestionsFromAI.length>0&&u.jsxs("div",{className:"mt-6 text-left bg-yellow-50 border border-yellow-300 p-4 rounded-lg shadow-sm",children:[u.jsxs("h4",{className:"font-semibold text-yellow-800 text-lg mb-2 flex items-center",children:[u.jsx(kr,{className:"w-5 h-5 mr-2 text-yellow-700"}),"Sugestes da IA para Melhorar:"]}),u.jsx("ul",{className:"list-disc list-inside text-sm text-yellow-700 space-y-1",children:c.clarificationQuestionsFromAI.map((r,o)=>u.jsx("li",{children:r},o))}),u.jsx("p",{className:"text-xs text-yellow-600 mt-3",children:"Considere revisar o edital fornecido com base nestas sugestes."})]}),u.jsx(ce,{onClick:i,variant:"danger",size:"lg",fullWidth:!0,className:"mt-8",leftIcon:u.jsx(ti,{}),children:"Voltar e Corrigir Preferncias"})]}):u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-10 pb-6 border-b-2 border-sky-200",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-4xl font-extrabold text-slate-800 font-display",children:"Seu Plano de Estudos Inteligente"}),e&&u.jsxs("p",{className:"text-xl font-medium text-slate-600 mt-1",children:["Para o cargo: ",u.jsx("span",{className:"text-sky-700 font-semibold",children:e})]}),u.jsxs("p",{className:"mt-1 text-lg text-sky-600 flex items-center",children:["Gerado por IA ",u.jsx(_t,{className:"inline h-5 w-5 text-amber-500 ml-1.5"})," para sua aprovao!"]})]}),u.jsx(ce,{onClick:i,variant:"outline",size:"md",leftIcon:u.jsx(Vd,{className:"w-4 h-4"}),className:"mt-4 sm:mt-0",children:"Revisar Preferncias"})]}),c.clarificationQuestionsFromAI&&c.clarificationQuestionsFromAI.length>0&&u.jsx(he,{className:"mb-8 bg-amber-50 border-2 border-amber-300 shadow-lg",children:u.jsxs("div",{className:"flex items-start",children:[u.jsx(kr,{className:"w-8 h-8 text-amber-500 mr-4 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-amber-800 mb-2 font-display",children:"Observaes Importantes da IA"}),u.jsx("p",{className:"text-sm text-amber-700 mb-3",children:"A IA identificou alguns pontos no edital que merecem sua ateno. Isso pode ajudar a refinar ainda mais seus estudos:"}),u.jsx("ul",{className:"list-disc list-inside text-sm text-amber-700 space-y-1.5",children:c.clarificationQuestionsFromAI.map((r,o)=>u.jsx("li",{children:r},o))})]})]})}),c.subjects&&c.subjects.length>0?c.subjects.map((r,o)=>u.jsx(lR,{subject:r,index:o,onSelectTopic:t},r.id)):u.jsxs(he,{className:"text-center py-12",children:[u.jsx(gg,{className:"w-16 h-16 mx-auto text-slate-400 mb-4"}),u.jsx("h3",{className:"text-2xl font-semibold text-slate-700 mb-2",children:"Nenhuma Matria Encontrada"}),u.jsx("p",{className:"text-slate-500",children:"No foi possvel extrair matrias ou tpicos do edital fornecido para o cargo selecionado. Por favor, verifique o texto do edital ou tente novamente."})]}),u.jsx(he,{className:"mt-10 bg-gradient-to-br from-sky-600 to-cyan-500 text-white shadow-xl",children:u.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[u.jsx(_t,{className:"w-16 h-16 text-amber-300 mb-4 md:mb-0 md:mr-6 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-bold mb-2 font-display tracking-wide",children:"Pronto para Mergulhar nos Estudos?"}),u.jsx("p",{className:"text-sky-100 text-opacity-90",children:`Seu plano est traado! Explore cada matria e clique em "Estudar Tpico" para acessar resumos, questes e flashcards gerados por IA. Marque os tpicos como 'Concludo'  medida que avana. Lembre-se, a consistncia  a chave para o sucesso. Bons estudos!`})]})]})})]}),cR=({currentMode:c,onModeChange:e})=>{const t=[{id:"structured",label:"Estruturado",icon:hc,description:"Sees organizadas por importncia",color:"bg-purple-500",activeColor:"bg-purple-600"},{id:"linear",label:"Linear",icon:jv,description:"Leitura sequencial tradicional",color:"bg-blue-500",activeColor:"bg-blue-600"},{id:"focus",label:"Foco",icon:rl,description:"Apenas contedo essencial",color:"bg-red-500",activeColor:"bg-red-600"}];return u.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-white rounded-lg border border-slate-200 shadow-sm",children:[u.jsxs("div",{className:"flex items-center mr-3",children:[u.jsx(Jj,{className:"w-4 h-4 text-slate-600 mr-2"}),u.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Modo de Leitura:"})]}),t.map(i=>{const r=c===i.id,o=i.icon;return u.jsxs("button",{onClick:()=>e(i.id),className:`
              flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium
              transition-all duration-200 transform hover:scale-105
              ${r?`${i.activeColor} text-white shadow-md`:`${i.color} bg-opacity-10 text-slate-700 hover:bg-opacity-20`}
            `,title:i.description,children:[u.jsx(o,{className:"w-4 h-4"}),u.jsx("span",{children:i.label})]},i.id)})]})};function Rv(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var ml=Rv();function oN(c){ml=c}var qd={exec:()=>null};function it(c,e=""){let t=typeof c=="string"?c:c.source;const i={replace:(r,o)=>{let d=typeof o=="string"?o:o.source;return d=d.replace(Ds.caret,"$1"),t=t.replace(r,d),i},getRegex:()=>new RegExp(t,e)};return i}var Ds={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:c=>new RegExp(`^( {0,3}${c})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:c=>new RegExp(`^ {0,${Math.min(3,c-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:c=>new RegExp(`^ {0,${Math.min(3,c-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:c=>new RegExp(`^ {0,${Math.min(3,c-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:c=>new RegExp(`^ {0,${Math.min(3,c-1)}}#`),htmlBeginRegex:c=>new RegExp(`^ {0,${Math.min(3,c-1)}}<(?:[a-z].*>|!--)`,"i")},uR=/^(?:[ \t]*(?:\n|$))+/,dR=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,hR=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Mf=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,fR=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Mv=/(?:[*+-]|\d{1,9}[.)])/,lN=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,cN=it(lN).replace(/bull/g,Mv).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),mR=it(lN).replace(/bull/g,Mv).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),kv=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,pR=/^[^\n]+/,Dv=/(?!\s*\])(?:\\.|[^\[\]\\])+/,gR=it(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Dv).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),xR=it(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Mv).getRegex(),xg="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ov=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,bR=it("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Ov).replace("tag",xg).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),uN=it(kv).replace("hr",Mf).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",xg).getRegex(),vR=it(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",uN).getRegex(),Lv={blockquote:vR,code:dR,def:gR,fences:hR,heading:fR,hr:Mf,html:bR,lheading:cN,list:xR,newline:uR,paragraph:uN,table:qd,text:pR},aS=it("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Mf).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",xg).getRegex(),yR={...Lv,lheading:mR,table:aS,paragraph:it(kv).replace("hr",Mf).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",aS).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",xg).getRegex()},AR={...Lv,html:it(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ov).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:qd,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:it(kv).replace("hr",Mf).replace("heading",` *#{1,6} *[^
]`).replace("lheading",cN).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ER=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,SR=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,dN=/^( {2,}|\\)\n(?!\s*$)/,_R=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,bg=/[\p{P}\p{S}]/u,Iv=/[\s\p{P}\p{S}]/u,hN=/[^\s\p{P}\p{S}]/u,wR=it(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Iv).getRegex(),fN=/(?!~)[\p{P}\p{S}]/u,NR=/(?!~)[\s\p{P}\p{S}]/u,TR=/(?:[^\s\p{P}\p{S}]|~)/u,CR=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,mN=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,jR=it(mN,"u").replace(/punct/g,bg).getRegex(),RR=it(mN,"u").replace(/punct/g,fN).getRegex(),pN="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",MR=it(pN,"gu").replace(/notPunctSpace/g,hN).replace(/punctSpace/g,Iv).replace(/punct/g,bg).getRegex(),kR=it(pN,"gu").replace(/notPunctSpace/g,TR).replace(/punctSpace/g,NR).replace(/punct/g,fN).getRegex(),DR=it("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,hN).replace(/punctSpace/g,Iv).replace(/punct/g,bg).getRegex(),OR=it(/\\(punct)/,"gu").replace(/punct/g,bg).getRegex(),LR=it(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),IR=it(Ov).replace("(?:-->|$)","-->").getRegex(),PR=it("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",IR).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ip=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,UR=it(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Ip).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),gN=it(/^!?\[(label)\]\[(ref)\]/).replace("label",Ip).replace("ref",Dv).getRegex(),xN=it(/^!?\[(ref)\](?:\[\])?/).replace("ref",Dv).getRegex(),zR=it("reflink|nolink(?!\\()","g").replace("reflink",gN).replace("nolink",xN).getRegex(),Pv={_backpedal:qd,anyPunctuation:OR,autolink:LR,blockSkip:CR,br:dN,code:SR,del:qd,emStrongLDelim:jR,emStrongRDelimAst:MR,emStrongRDelimUnd:DR,escape:ER,link:UR,nolink:xN,punctuation:wR,reflink:gN,reflinkSearch:zR,tag:PR,text:_R,url:qd},FR={...Pv,link:it(/^!?\[(label)\]\((.*?)\)/).replace("label",Ip).getRegex(),reflink:it(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ip).getRegex()},fv={...Pv,emStrongRDelimAst:kR,emStrongLDelim:RR,url:it(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},BR={...fv,br:it(dN).replace("{2,}","*").getRegex(),text:it(fv.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ep={normal:Lv,gfm:yR,pedantic:AR},Sd={normal:Pv,gfm:fv,breaks:BR,pedantic:FR},HR={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},iS=c=>HR[c];function ci(c,e){if(e){if(Ds.escapeTest.test(c))return c.replace(Ds.escapeReplace,iS)}else if(Ds.escapeTestNoEncode.test(c))return c.replace(Ds.escapeReplaceNoEncode,iS);return c}function nS(c){try{c=encodeURI(c).replace(Ds.percentDecode,"%")}catch{return null}return c}function rS(c,e){var o;const t=c.replace(Ds.findPipe,(d,h,p)=>{let m=!1,x=h;for(;--x>=0&&p[x]==="\\";)m=!m;return m?"|":" |"}),i=t.split(Ds.splitPipe);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!((o=i.at(-1))!=null&&o.trim())&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(Ds.slashPipe,"|");return i}function _d(c,e,t){const i=c.length;if(i===0)return"";let r=0;for(;r<i&&c.charAt(i-r-1)===e;)r++;return c.slice(0,i-r)}function qR(c,e){if(c.indexOf(e[1])===-1)return-1;let t=0;for(let i=0;i<c.length;i++)if(c[i]==="\\")i++;else if(c[i]===e[0])t++;else if(c[i]===e[1]&&(t--,t<0))return i;return t>0?-2:-1}function oS(c,e,t,i,r){const o=e.href,d=e.title||null,h=c[1].replace(r.other.outputLinkReplace,"$1");i.state.inLink=!0;const p={type:c[0].charAt(0)==="!"?"image":"link",raw:t,href:o,title:d,text:h,tokens:i.inlineTokens(h)};return i.state.inLink=!1,p}function GR(c,e,t){const i=c.match(t.other.indentCodeCompensation);if(i===null)return e;const r=i[1];return e.split(`
`).map(o=>{const d=o.match(t.other.beginningSpace);if(d===null)return o;const[h]=d;return h.length>=r.length?o.slice(r.length):o}).join(`
`)}var Pp=class{constructor(c){xe(this,"options");xe(this,"rules");xe(this,"lexer");this.options=c||ml}space(c){const e=this.rules.block.newline.exec(c);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(c){const e=this.rules.block.code.exec(c);if(e){const t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:_d(t,`
`)}}}fences(c){const e=this.rules.block.fences.exec(c);if(e){const t=e[0],i=GR(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(c){const e=this.rules.block.heading.exec(c);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){const i=_d(t,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(t=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(c){const e=this.rules.block.hr.exec(c);if(e)return{type:"hr",raw:_d(e[0],`
`)}}blockquote(c){const e=this.rules.block.blockquote.exec(c);if(e){let t=_d(e[0],`
`).split(`
`),i="",r="";const o=[];for(;t.length>0;){let d=!1;const h=[];let p;for(p=0;p<t.length;p++)if(this.rules.other.blockquoteStart.test(t[p]))h.push(t[p]),d=!0;else if(!d)h.push(t[p]);else break;t=t.slice(p);const m=h.join(`
`),x=m.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${m}`:m,r=r?`${r}
${x}`:x;const v=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(x,o,!0),this.lexer.state.top=v,t.length===0)break;const y=o.at(-1);if((y==null?void 0:y.type)==="code")break;if((y==null?void 0:y.type)==="blockquote"){const E=y,S=E.raw+`
`+t.join(`
`),_=this.blockquote(S);o[o.length-1]=_,i=i.substring(0,i.length-E.raw.length)+_.raw,r=r.substring(0,r.length-E.text.length)+_.text;break}else if((y==null?void 0:y.type)==="list"){const E=y,S=E.raw+`
`+t.join(`
`),_=this.list(S);o[o.length-1]=_,i=i.substring(0,i.length-y.raw.length)+_.raw,r=r.substring(0,r.length-E.raw.length)+_.raw,t=S.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:o,text:r}}}list(c){let e=this.rules.block.list.exec(c);if(e){let t=e[1].trim();const i=t.length>1,r={type:"list",raw:"",ordered:i,start:i?+t.slice(0,-1):"",loose:!1,items:[]};t=i?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=i?t:"[*+-]");const o=this.rules.other.listItemRegex(t);let d=!1;for(;c;){let p=!1,m="",x="";if(!(e=o.exec(c))||this.rules.block.hr.test(c))break;m=e[0],c=c.substring(m.length);let v=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,R=>" ".repeat(3*R.length)),y=c.split(`
`,1)[0],E=!v.trim(),S=0;if(this.options.pedantic?(S=2,x=v.trimStart()):E?S=e[1].length+1:(S=e[2].search(this.rules.other.nonSpaceChar),S=S>4?1:S,x=v.slice(S),S+=e[1].length),E&&this.rules.other.blankLine.test(y)&&(m+=y+`
`,c=c.substring(y.length+1),p=!0),!p){const R=this.rules.other.nextBulletRegex(S),L=this.rules.other.hrRegex(S),D=this.rules.other.fencesBeginRegex(S),z=this.rules.other.headingBeginRegex(S),P=this.rules.other.htmlBeginRegex(S);for(;c;){const H=c.split(`
`,1)[0];let se;if(y=H,this.options.pedantic?(y=y.replace(this.rules.other.listReplaceNesting,"  "),se=y):se=y.replace(this.rules.other.tabCharGlobal,"    "),D.test(y)||z.test(y)||P.test(y)||R.test(y)||L.test(y))break;if(se.search(this.rules.other.nonSpaceChar)>=S||!y.trim())x+=`
`+se.slice(S);else{if(E||v.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||D.test(v)||z.test(v)||L.test(v))break;x+=`
`+y}!E&&!y.trim()&&(E=!0),m+=H+`
`,c=c.substring(H.length+1),v=se.slice(S)}}r.loose||(d?r.loose=!0:this.rules.other.doubleBlankLine.test(m)&&(d=!0));let _=null,j;this.options.gfm&&(_=this.rules.other.listIsTask.exec(x),_&&(j=_[0]!=="[ ] ",x=x.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:m,task:!!_,checked:j,loose:!1,text:x,tokens:[]}),r.raw+=m}const h=r.items.at(-1);if(h)h.raw=h.raw.trimEnd(),h.text=h.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let p=0;p<r.items.length;p++)if(this.lexer.state.top=!1,r.items[p].tokens=this.lexer.blockTokens(r.items[p].text,[]),!r.loose){const m=r.items[p].tokens.filter(v=>v.type==="space"),x=m.length>0&&m.some(v=>this.rules.other.anyLine.test(v.raw));r.loose=x}if(r.loose)for(let p=0;p<r.items.length;p++)r.items[p].loose=!0;return r}}html(c){const e=this.rules.block.html.exec(c);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(c){const e=this.rules.block.def.exec(c);if(e){const t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:i,title:r}}}table(c){var d;const e=this.rules.block.table.exec(c);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const t=rS(e[1]),i=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=(d=e[3])!=null&&d.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===i.length){for(const h of i)this.rules.other.tableAlignRight.test(h)?o.align.push("right"):this.rules.other.tableAlignCenter.test(h)?o.align.push("center"):this.rules.other.tableAlignLeft.test(h)?o.align.push("left"):o.align.push(null);for(let h=0;h<t.length;h++)o.header.push({text:t[h],tokens:this.lexer.inline(t[h]),header:!0,align:o.align[h]});for(const h of r)o.rows.push(rS(h,o.header.length).map((p,m)=>({text:p,tokens:this.lexer.inline(p),header:!1,align:o.align[m]})));return o}}lheading(c){const e=this.rules.block.lheading.exec(c);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(c){const e=this.rules.block.paragraph.exec(c);if(e){const t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(c){const e=this.rules.block.text.exec(c);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(c){const e=this.rules.inline.escape.exec(c);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(c){const e=this.rules.inline.tag.exec(c);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(c){const e=this.rules.inline.link.exec(c);if(e){const t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;const o=_d(t.slice(0,-1),"\\");if((t.length-o.length)%2===0)return}else{const o=qR(e[2],"()");if(o===-2)return;if(o>-1){const h=(e[0].indexOf("!")===0?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,h).trim(),e[3]=""}}let i=e[2],r="";if(this.options.pedantic){const o=this.rules.other.pedanticHrefTitle.exec(i);o&&(i=o[1],r=o[3])}else r=e[3]?e[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?i=i.slice(1):i=i.slice(1,-1)),oS(e,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(c,e){let t;if((t=this.rules.inline.reflink.exec(c))||(t=this.rules.inline.nolink.exec(c))){const i=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[i.toLowerCase()];if(!r){const o=t[0].charAt(0);return{type:"text",raw:o,text:o}}return oS(t,r,t[0],this.lexer,this.rules)}}emStrong(c,e,t=""){let i=this.rules.inline.emStrongLDelim.exec(c);if(!i||i[3]&&t.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!t||this.rules.inline.punctuation.exec(t)){const o=[...i[0]].length-1;let d,h,p=o,m=0;const x=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(x.lastIndex=0,e=e.slice(-1*c.length+o);(i=x.exec(e))!=null;){if(d=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!d)continue;if(h=[...d].length,i[3]||i[4]){p+=h;continue}else if((i[5]||i[6])&&o%3&&!((o+h)%3)){m+=h;continue}if(p-=h,p>0)continue;h=Math.min(h,h+p+m);const v=[...i[0]][0].length,y=c.slice(0,o+i.index+v+h);if(Math.min(o,h)%2){const S=y.slice(1,-1);return{type:"em",raw:y,text:S,tokens:this.lexer.inlineTokens(S)}}const E=y.slice(2,-2);return{type:"strong",raw:y,text:E,tokens:this.lexer.inlineTokens(E)}}}}codespan(c){const e=this.rules.inline.code.exec(c);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(t),r=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return i&&r&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(c){const e=this.rules.inline.br.exec(c);if(e)return{type:"br",raw:e[0]}}del(c){const e=this.rules.inline.del.exec(c);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(c){const e=this.rules.inline.autolink.exec(c);if(e){let t,i;return e[2]==="@"?(t=e[1],i="mailto:"+t):(t=e[1],i=t),{type:"link",raw:e[0],text:t,href:i,tokens:[{type:"text",raw:t,text:t}]}}}url(c){var t;let e;if(e=this.rules.inline.url.exec(c)){let i,r;if(e[2]==="@")i=e[0],r="mailto:"+i;else{let o;do o=e[0],e[0]=((t=this.rules.inline._backpedal.exec(e[0]))==null?void 0:t[0])??"";while(o!==e[0]);i=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(c){const e=this.rules.inline.text.exec(c);if(e){const t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},_n=class mv{constructor(e){xe(this,"tokens");xe(this,"options");xe(this,"state");xe(this,"tokenizer");xe(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ml,this.options.tokenizer=this.options.tokenizer||new Pp,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:Ds,block:ep.normal,inline:Sd.normal};this.options.pedantic?(t.block=ep.pedantic,t.inline=Sd.pedantic):this.options.gfm&&(t.block=ep.gfm,this.options.breaks?t.inline=Sd.breaks:t.inline=Sd.gfm),this.tokenizer.rules=t}static get rules(){return{block:ep,inline:Sd}}static lex(e,t){return new mv(t).lex(e)}static lexInline(e,t){return new mv(t).inlineTokens(e)}lex(e){e=e.replace(Ds.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const i=this.inlineQueue[t];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],i=!1){var r,o,d;for(this.options.pedantic&&(e=e.replace(Ds.tabCharGlobal,"    ").replace(Ds.spaceLine,""));e;){let h;if((o=(r=this.options.extensions)==null?void 0:r.block)!=null&&o.some(m=>(h=m.call({lexer:this},e,t))?(e=e.substring(h.raw.length),t.push(h),!0):!1))continue;if(h=this.tokenizer.space(e)){e=e.substring(h.raw.length);const m=t.at(-1);h.raw.length===1&&m!==void 0?m.raw+=`
`:t.push(h);continue}if(h=this.tokenizer.code(e)){e=e.substring(h.raw.length);const m=t.at(-1);(m==null?void 0:m.type)==="paragraph"||(m==null?void 0:m.type)==="text"?(m.raw+=`
`+h.raw,m.text+=`
`+h.text,this.inlineQueue.at(-1).src=m.text):t.push(h);continue}if(h=this.tokenizer.fences(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.heading(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.hr(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.blockquote(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.list(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.html(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.def(e)){e=e.substring(h.raw.length);const m=t.at(-1);(m==null?void 0:m.type)==="paragraph"||(m==null?void 0:m.type)==="text"?(m.raw+=`
`+h.raw,m.text+=`
`+h.raw,this.inlineQueue.at(-1).src=m.text):this.tokens.links[h.tag]||(this.tokens.links[h.tag]={href:h.href,title:h.title});continue}if(h=this.tokenizer.table(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.lheading(e)){e=e.substring(h.raw.length),t.push(h);continue}let p=e;if((d=this.options.extensions)!=null&&d.startBlock){let m=1/0;const x=e.slice(1);let v;this.options.extensions.startBlock.forEach(y=>{v=y.call({lexer:this},x),typeof v=="number"&&v>=0&&(m=Math.min(m,v))}),m<1/0&&m>=0&&(p=e.substring(0,m+1))}if(this.state.top&&(h=this.tokenizer.paragraph(p))){const m=t.at(-1);i&&(m==null?void 0:m.type)==="paragraph"?(m.raw+=`
`+h.raw,m.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=m.text):t.push(h),i=p.length!==e.length,e=e.substring(h.raw.length);continue}if(h=this.tokenizer.text(e)){e=e.substring(h.raw.length);const m=t.at(-1);(m==null?void 0:m.type)==="text"?(m.raw+=`
`+h.raw,m.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=m.text):t.push(h);continue}if(e){const m="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(m);break}else throw new Error(m)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var h,p,m;let i=e,r=null;if(this.tokens.links){const x=Object.keys(this.tokens.links);if(x.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)x.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,r.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let o=!1,d="";for(;e;){o||(d=""),o=!1;let x;if((p=(h=this.options.extensions)==null?void 0:h.inline)!=null&&p.some(y=>(x=y.call({lexer:this},e,t))?(e=e.substring(x.raw.length),t.push(x),!0):!1))continue;if(x=this.tokenizer.escape(e)){e=e.substring(x.raw.length),t.push(x);continue}if(x=this.tokenizer.tag(e)){e=e.substring(x.raw.length),t.push(x);continue}if(x=this.tokenizer.link(e)){e=e.substring(x.raw.length),t.push(x);continue}if(x=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(x.raw.length);const y=t.at(-1);x.type==="text"&&(y==null?void 0:y.type)==="text"?(y.raw+=x.raw,y.text+=x.text):t.push(x);continue}if(x=this.tokenizer.emStrong(e,i,d)){e=e.substring(x.raw.length),t.push(x);continue}if(x=this.tokenizer.codespan(e)){e=e.substring(x.raw.length),t.push(x);continue}if(x=this.tokenizer.br(e)){e=e.substring(x.raw.length),t.push(x);continue}if(x=this.tokenizer.del(e)){e=e.substring(x.raw.length),t.push(x);continue}if(x=this.tokenizer.autolink(e)){e=e.substring(x.raw.length),t.push(x);continue}if(!this.state.inLink&&(x=this.tokenizer.url(e))){e=e.substring(x.raw.length),t.push(x);continue}let v=e;if((m=this.options.extensions)!=null&&m.startInline){let y=1/0;const E=e.slice(1);let S;this.options.extensions.startInline.forEach(_=>{S=_.call({lexer:this},E),typeof S=="number"&&S>=0&&(y=Math.min(y,S))}),y<1/0&&y>=0&&(v=e.substring(0,y+1))}if(x=this.tokenizer.inlineText(v)){e=e.substring(x.raw.length),x.raw.slice(-1)!=="_"&&(d=x.raw.slice(-1)),o=!0;const y=t.at(-1);(y==null?void 0:y.type)==="text"?(y.raw+=x.raw,y.text+=x.text):t.push(x);continue}if(e){const y="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(y);break}else throw new Error(y)}}return t}},Up=class{constructor(c){xe(this,"options");xe(this,"parser");this.options=c||ml}space(c){return""}code({text:c,lang:e,escaped:t}){var o;const i=(o=(e||"").match(Ds.notSpaceStart))==null?void 0:o[0],r=c.replace(Ds.endingNewline,"")+`
`;return i?'<pre><code class="language-'+ci(i)+'">'+(t?r:ci(r,!0))+`</code></pre>
`:"<pre><code>"+(t?r:ci(r,!0))+`</code></pre>
`}blockquote({tokens:c}){return`<blockquote>
${this.parser.parse(c)}</blockquote>
`}html({text:c}){return c}heading({tokens:c,depth:e}){return`<h${e}>${this.parser.parseInline(c)}</h${e}>
`}hr(c){return`<hr>
`}list(c){const e=c.ordered,t=c.start;let i="";for(let d=0;d<c.items.length;d++){const h=c.items[d];i+=this.listitem(h)}const r=e?"ol":"ul",o=e&&t!==1?' start="'+t+'"':"";return"<"+r+o+`>
`+i+"</"+r+`>
`}listitem(c){var t;let e="";if(c.task){const i=this.checkbox({checked:!!c.checked});c.loose?((t=c.tokens[0])==null?void 0:t.type)==="paragraph"?(c.tokens[0].text=i+" "+c.tokens[0].text,c.tokens[0].tokens&&c.tokens[0].tokens.length>0&&c.tokens[0].tokens[0].type==="text"&&(c.tokens[0].tokens[0].text=i+" "+ci(c.tokens[0].tokens[0].text),c.tokens[0].tokens[0].escaped=!0)):c.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):e+=i+" "}return e+=this.parser.parse(c.tokens,!!c.loose),`<li>${e}</li>
`}checkbox({checked:c}){return"<input "+(c?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:c}){return`<p>${this.parser.parseInline(c)}</p>
`}table(c){let e="",t="";for(let r=0;r<c.header.length;r++)t+=this.tablecell(c.header[r]);e+=this.tablerow({text:t});let i="";for(let r=0;r<c.rows.length;r++){const o=c.rows[r];t="";for(let d=0;d<o.length;d++)t+=this.tablecell(o[d]);i+=this.tablerow({text:t})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+i+`</table>
`}tablerow({text:c}){return`<tr>
${c}</tr>
`}tablecell(c){const e=this.parser.parseInline(c.tokens),t=c.header?"th":"td";return(c.align?`<${t} align="${c.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:c}){return`<strong>${this.parser.parseInline(c)}</strong>`}em({tokens:c}){return`<em>${this.parser.parseInline(c)}</em>`}codespan({text:c}){return`<code>${ci(c,!0)}</code>`}br(c){return"<br>"}del({tokens:c}){return`<del>${this.parser.parseInline(c)}</del>`}link({href:c,title:e,tokens:t}){const i=this.parser.parseInline(t),r=nS(c);if(r===null)return i;c=r;let o='<a href="'+c+'"';return e&&(o+=' title="'+ci(e)+'"'),o+=">"+i+"</a>",o}image({href:c,title:e,text:t,tokens:i}){i&&(t=this.parser.parseInline(i,this.parser.textRenderer));const r=nS(c);if(r===null)return ci(t);c=r;let o=`<img src="${c}" alt="${t}"`;return e&&(o+=` title="${ci(e)}"`),o+=">",o}text(c){return"tokens"in c&&c.tokens?this.parser.parseInline(c.tokens):"escaped"in c&&c.escaped?c.text:ci(c.text)}},Uv=class{strong({text:c}){return c}em({text:c}){return c}codespan({text:c}){return c}del({text:c}){return c}html({text:c}){return c}text({text:c}){return c}link({text:c}){return""+c}image({text:c}){return""+c}br(){return""}},wn=class pv{constructor(e){xe(this,"options");xe(this,"renderer");xe(this,"textRenderer");this.options=e||ml,this.options.renderer=this.options.renderer||new Up,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Uv}static parse(e,t){return new pv(t).parse(e)}static parseInline(e,t){return new pv(t).parseInline(e)}parse(e,t=!0){var r,o;let i="";for(let d=0;d<e.length;d++){const h=e[d];if((o=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&o[h.type]){const m=h,x=this.options.extensions.renderers[m.type].call({parser:this},m);if(x!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(m.type)){i+=x||"";continue}}const p=h;switch(p.type){case"space":{i+=this.renderer.space(p);continue}case"hr":{i+=this.renderer.hr(p);continue}case"heading":{i+=this.renderer.heading(p);continue}case"code":{i+=this.renderer.code(p);continue}case"table":{i+=this.renderer.table(p);continue}case"blockquote":{i+=this.renderer.blockquote(p);continue}case"list":{i+=this.renderer.list(p);continue}case"html":{i+=this.renderer.html(p);continue}case"paragraph":{i+=this.renderer.paragraph(p);continue}case"text":{let m=p,x=this.renderer.text(m);for(;d+1<e.length&&e[d+1].type==="text";)m=e[++d],x+=`
`+this.renderer.text(m);t?i+=this.renderer.paragraph({type:"paragraph",raw:x,text:x,tokens:[{type:"text",raw:x,text:x,escaped:!0}]}):i+=x;continue}default:{const m='Token with "'+p.type+'" type was not found.';if(this.options.silent)return console.error(m),"";throw new Error(m)}}}return i}parseInline(e,t=this.renderer){var r,o;let i="";for(let d=0;d<e.length;d++){const h=e[d];if((o=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&o[h.type]){const m=this.options.extensions.renderers[h.type].call({parser:this},h);if(m!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(h.type)){i+=m||"";continue}}const p=h;switch(p.type){case"escape":{i+=t.text(p);break}case"html":{i+=t.html(p);break}case"link":{i+=t.link(p);break}case"image":{i+=t.image(p);break}case"strong":{i+=t.strong(p);break}case"em":{i+=t.em(p);break}case"codespan":{i+=t.codespan(p);break}case"br":{i+=t.br(p);break}case"del":{i+=t.del(p);break}case"text":{i+=t.text(p);break}default:{const m='Token with "'+p.type+'" type was not found.';if(this.options.silent)return console.error(m),"";throw new Error(m)}}}return i}},Xx,Cp=(Xx=class{constructor(c){xe(this,"options");xe(this,"block");this.options=c||ml}preprocess(c){return c}postprocess(c){return c}processAllTokens(c){return c}provideLexer(){return this.block?_n.lex:_n.lexInline}provideParser(){return this.block?wn.parse:wn.parseInline}},xe(Xx,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),Xx),YR=class{constructor(...c){xe(this,"defaults",Rv());xe(this,"options",this.setOptions);xe(this,"parse",this.parseMarkdown(!0));xe(this,"parseInline",this.parseMarkdown(!1));xe(this,"Parser",wn);xe(this,"Renderer",Up);xe(this,"TextRenderer",Uv);xe(this,"Lexer",_n);xe(this,"Tokenizer",Pp);xe(this,"Hooks",Cp);this.use(...c)}walkTokens(c,e){var i,r;let t=[];for(const o of c)switch(t=t.concat(e.call(this,o)),o.type){case"table":{const d=o;for(const h of d.header)t=t.concat(this.walkTokens(h.tokens,e));for(const h of d.rows)for(const p of h)t=t.concat(this.walkTokens(p.tokens,e));break}case"list":{const d=o;t=t.concat(this.walkTokens(d.items,e));break}default:{const d=o;(r=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&r[d.type]?this.defaults.extensions.childTokens[d.type].forEach(h=>{const p=d[h].flat(1/0);t=t.concat(this.walkTokens(p,e))}):d.tokens&&(t=t.concat(this.walkTokens(d.tokens,e)))}}return t}use(...c){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return c.forEach(t=>{const i={...t};if(i.async=this.defaults.async||i.async||!1,t.extensions&&(t.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const o=e.renderers[r.name];o?e.renderers[r.name]=function(...d){let h=r.renderer.apply(this,d);return h===!1&&(h=o.apply(this,d)),h}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=e[r.level];o?o.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),i.extensions=e),t.renderer){const r=this.defaults.renderer||new Up(this.defaults);for(const o in t.renderer){if(!(o in r))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;const d=o,h=t.renderer[d],p=r[d];r[d]=(...m)=>{let x=h.apply(r,m);return x===!1&&(x=p.apply(r,m)),x||""}}i.renderer=r}if(t.tokenizer){const r=this.defaults.tokenizer||new Pp(this.defaults);for(const o in t.tokenizer){if(!(o in r))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const d=o,h=t.tokenizer[d],p=r[d];r[d]=(...m)=>{let x=h.apply(r,m);return x===!1&&(x=p.apply(r,m)),x}}i.tokenizer=r}if(t.hooks){const r=this.defaults.hooks||new Cp;for(const o in t.hooks){if(!(o in r))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;const d=o,h=t.hooks[d],p=r[d];Cp.passThroughHooks.has(o)?r[d]=m=>{if(this.defaults.async)return Promise.resolve(h.call(r,m)).then(v=>p.call(r,v));const x=h.call(r,m);return p.call(r,x)}:r[d]=(...m)=>{let x=h.apply(r,m);return x===!1&&(x=p.apply(r,m)),x}}i.hooks=r}if(t.walkTokens){const r=this.defaults.walkTokens,o=t.walkTokens;i.walkTokens=function(d){let h=[];return h.push(o.call(this,d)),r&&(h=h.concat(r.call(this,d))),h}}this.defaults={...this.defaults,...i}}),this}setOptions(c){return this.defaults={...this.defaults,...c},this}lexer(c,e){return _n.lex(c,e??this.defaults)}parser(c,e){return wn.parse(c,e??this.defaults)}parseMarkdown(c){return(t,i)=>{const r={...i},o={...this.defaults,...r},d=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&r.async===!1)return d(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return d(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return d(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=c);const h=o.hooks?o.hooks.provideLexer():c?_n.lex:_n.lexInline,p=o.hooks?o.hooks.provideParser():c?wn.parse:wn.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(t):t).then(m=>h(m,o)).then(m=>o.hooks?o.hooks.processAllTokens(m):m).then(m=>o.walkTokens?Promise.all(this.walkTokens(m,o.walkTokens)).then(()=>m):m).then(m=>p(m,o)).then(m=>o.hooks?o.hooks.postprocess(m):m).catch(d);try{o.hooks&&(t=o.hooks.preprocess(t));let m=h(t,o);o.hooks&&(m=o.hooks.processAllTokens(m)),o.walkTokens&&this.walkTokens(m,o.walkTokens);let x=p(m,o);return o.hooks&&(x=o.hooks.postprocess(x)),x}catch(m){return d(m)}}}onError(c,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,c){const i="<p>An error occurred:</p><pre>"+ci(t.message+"",!0)+"</pre>";return e?Promise.resolve(i):i}if(e)return Promise.reject(t);throw t}}},ol=new YR;function at(c,e){return ol.parse(c,e)}at.options=at.setOptions=function(c){return ol.setOptions(c),at.defaults=ol.defaults,oN(at.defaults),at};at.getDefaults=Rv;at.defaults=ml;at.use=function(...c){return ol.use(...c),at.defaults=ol.defaults,oN(at.defaults),at};at.walkTokens=function(c,e){return ol.walkTokens(c,e)};at.parseInline=ol.parseInline;at.Parser=wn;at.parser=wn.parse;at.Renderer=Up;at.TextRenderer=Uv;at.Lexer=_n;at.lexer=_n.lex;at.Tokenizer=Pp;at.Hooks=Cp;at.parse=at;at.options;at.setOptions;at.use;at.walkTokens;at.parseInline;wn.parse;_n.lex;const VR={concept:{icon:Tv,color:"from-purple-500 to-indigo-600",bgColor:"bg-purple-50",borderColor:"border-purple-200"},example:{icon:uu,color:"from-amber-500 to-orange-600",bgColor:"bg-amber-50",borderColor:"border-amber-200"},definition:{icon:Vd,color:"from-blue-500 to-cyan-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},procedure:{icon:Cv,color:"from-green-500 to-emerald-600",bgColor:"bg-green-50",borderColor:"border-green-200"},theory:{icon:fc,color:"from-pink-500 to-rose-600",bgColor:"bg-pink-50",borderColor:"border-pink-200"},application:{icon:jv,color:"from-red-500 to-pink-600",bgColor:"bg-red-50",borderColor:"border-red-200"}},Gx={low:{priority:1,label:"Bsico",color:"text-slate-600",bgColor:"bg-slate-100",badgeColor:"bg-slate-500"},medium:{priority:2,label:"Importante",color:"text-blue-700",bgColor:"bg-blue-100",badgeColor:"bg-blue-500"},high:{priority:3,label:"Essencial",color:"text-amber-700",bgColor:"bg-amber-100",badgeColor:"bg-amber-500"},critical:{priority:4,label:"Fundamental",color:"text-red-700",bgColor:"bg-red-100",badgeColor:"bg-red-500"}},$R=({summaryContent:c,topicName:e,onRegenerateSummary:t,isLoading:i})=>{const[r,o]=X.useState([]),[d,h]=X.useState({totalSections:0,completedSections:0,timeSpent:0,lastReadSection:null}),[p,m]=X.useState(new Set),[x,v]=X.useState("all"),[y,E]=X.useState("all"),[S,_]=X.useState(!1),[j,R]=X.useState(null),[L,D]=X.useState(new Set),[z,P]=X.useState("structured"),[H,se]=X.useState(""),[re,ne]=X.useState(!1);X.useEffect(()=>{if(c){const k=ue(c);o(k),h(Q=>({...Q,totalSections:k.length}))}},[c]),X.useEffect(()=>{h(k=>({...k,completedSections:L.size}))},[L]),X.useEffect(()=>{r.length>0&&!j&&R(Date.now())},[r,j]);const ue=k=>{const Q=k.split(`
`).filter(Me=>Me.trim()),q=[];let ee={},le=[],pe=0;for(const Me of Q)Me.startsWith("##")||Me.startsWith("#")?(ee.title&&le.length>0&&(q.push({id:`section-${pe}`,title:ee.title,content:le.join(`
`),type:J(ee.title,le.join(" ")),importance:ge(ee.title,le.join(" ")),estimatedReadTime:Math.max(1,Math.ceil(le.join(" ").split(" ").length/200)),keywords:Ce(le.join(" "))}),pe++),ee={title:Me.replace(/^#+\s*/,"").trim()},le=[]):Me.trim()&&ee.title&&le.push(Me);return ee.title&&le.length>0&&q.push({id:`section-${pe}`,title:ee.title,content:le.join(`
`),type:J(ee.title,le.join(" ")),importance:ge(ee.title,le.join(" ")),estimatedReadTime:Math.max(1,Math.ceil(le.join(" ").split(" ").length/200)),keywords:Ce(le.join(" "))}),q.length===0&&q.push({id:"section-0",title:"Resumo Principal",content:k,type:"concept",importance:"high",estimatedReadTime:Math.max(1,Math.ceil(k.split(" ").length/200)),keywords:Ce(k)}),q},J=(k,Q)=>{const q=k.toLowerCase(),ee=Q.toLowerCase();return q.includes("exemplo")||q.includes("case")||ee.includes("por exemplo")?"example":q.includes("definio")||q.includes("conceito")||q.includes("o que ")?"definition":q.includes("procedimento")||q.includes("processo")||q.includes("como")?"procedure":q.includes("teoria")||q.includes("fundamento")||q.includes("base terica")?"theory":q.includes("aplicao")||q.includes("prtica")||q.includes("uso")?"application":"concept"},ge=(k,Q)=>{const q=k.toLowerCase(),ee=Q.toLowerCase(),le=["fundamental","essencial","crtico","importante","central","principal"],pe=["relevante","significativo","destacar","notar"],Me=le.filter(gt=>q.includes(gt)||ee.includes(gt)).length,Pe=pe.filter(gt=>q.includes(gt)||ee.includes(gt)).length;return Me>0||q.includes("introduo")||q.includes("resumo")?"critical":Pe>0||Q.length>300?"high":Q.length>150?"medium":"low"},Ce=k=>{const Q=k.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(ee=>ee.length>4).filter(ee=>!["sobre","atravs","tambm","assim","quando","onde","como","para","pela","pelo"].includes(ee)),q={};return Q.forEach(ee=>{q[ee]=(q[ee]||0)+1}),Object.entries(q).sort(([,ee],[,le])=>le-ee).slice(0,5).map(([ee])=>ee)},Ie=k=>{m(Q=>{const q=new Set(Q);return q.has(k)?q.delete(k):q.add(k),q})},ae=k=>{D(Q=>new Set([...Q,k])),h(Q=>({...Q,lastReadSection:k,timeSpent:j?Math.floor((Date.now()-j)/1e3):0}))},Y=[...r.filter(k=>{const Q=x==="all"||k.importance===x,q=y==="all"||k.type===y,ee=H===""||k.title.toLowerCase().includes(H.toLowerCase())||k.content.toLowerCase().includes(H.toLowerCase())||k.keywords.some(le=>le.toLowerCase().includes(H.toLowerCase()));if(z==="focus"){const le=k.importance==="critical"||k.importance==="high";return Q&&q&&ee&&le}return Q&&q&&ee})].sort((k,Q)=>{if(z==="structured"){const q=Gx[Q.importance].priority-Gx[k.importance].priority;return q!==0?q:k.type.localeCompare(Q.type)}return 0}),W=()=>d.totalSections>0?Math.round(d.completedSections/d.totalSections*100):0,oe=()=>r.reduce((k,Q)=>k+Q.estimatedReadTime,0),M=k=>k<60?`${k} min`:`${Math.floor(k/60)}h ${k%60}min`;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs(he,{className:"bg-gradient-to-r from-sky-500 to-cyan-600 text-white shadow-xl",children:[u.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:u.jsx(iN,{className:"w-8 h-8"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold font-display",children:e}),u.jsx("p",{className:"text-sky-100 text-sm",children:"Resumo Inteligente Estruturado"})]})]}),u.jsxs("div",{className:"flex items-center space-x-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold",children:r.length}),u.jsx("div",{className:"text-xs text-sky-100",children:"Sees"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold",children:M(oe())}),u.jsx("div",{className:"text-xs text-sky-100",children:"Leitura"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-2xl font-bold",children:[W(),"%"]}),u.jsx("div",{className:"text-xs text-sky-100",children:"Progresso"})]})]})]}),u.jsx("div",{className:"mt-4",children:u.jsx("div",{className:"bg-white/20 rounded-full h-2 overflow-hidden",children:u.jsx("div",{className:"bg-white h-full rounded-full transition-all duration-300 ease-out",style:{width:`${W()}%`}})})})]}),u.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[u.jsx(cR,{currentMode:z,onModeChange:P}),u.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between flex-1",children:[u.jsx("div",{className:"flex gap-2 flex-1 max-w-md",children:u.jsxs("div",{className:"relative flex-1",children:[u.jsx(qx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),u.jsx("input",{type:"text",placeholder:"Buscar no resumo...",value:H,onChange:k=>se(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-md text-sm focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]})}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(ce,{size:"sm",variant:S?"primary":"outline",onClick:()=>_(!S),leftIcon:u.jsx(kr,{className:"w-4 h-4"}),children:[S?"Ocultar":"Ver"," Stats"]}),u.jsx(ce,{size:"sm",variant:re?"primary":"outline",onClick:()=>ne(!re),leftIcon:u.jsx(uu,{className:"w-4 h-4"}),children:"Dicas"}),u.jsx(ce,{size:"sm",variant:"outline",onClick:t,isLoading:i,leftIcon:u.jsx(_t,{className:"w-4 h-4"}),children:"Regenerar"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("select",{value:x,onChange:k=>v(k.target.value),className:"text-sm border border-slate-300 rounded-md px-3 py-1 bg-white focus:ring-2 focus:ring-sky-500 focus:border-transparent",children:[u.jsx("option",{value:"all",children:"Todas Importncias"}),u.jsx("option",{value:"critical",children:"Fundamental"}),u.jsx("option",{value:"high",children:"Essencial"}),u.jsx("option",{value:"medium",children:"Importante"}),u.jsx("option",{value:"low",children:"Bsico"})]}),u.jsxs("select",{value:y,onChange:k=>E(k.target.value),className:"text-sm border border-slate-300 rounded-md px-3 py-1 bg-white focus:ring-2 focus:ring-sky-500 focus:border-transparent",children:[u.jsx("option",{value:"all",children:"Todos os Tipos"}),u.jsx("option",{value:"concept",children:"Conceitos"}),u.jsx("option",{value:"definition",children:"Definies"}),u.jsx("option",{value:"example",children:"Exemplos"}),u.jsx("option",{value:"procedure",children:"Procedimentos"}),u.jsx("option",{value:"theory",children:"Teoria"}),u.jsx("option",{value:"application",children:"Aplicaes"})]})]})]})]}),re&&u.jsxs(he,{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-amber-200",children:[u.jsxs("h3",{className:"text-lg font-semibold text-amber-800 mb-3 flex items-center",children:[u.jsx(uu,{className:"w-5 h-5 mr-2"}),"Dicas de Leitura Eficiente"]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-amber-700",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Modo Estruturado:"})," Organiza por prioridade - comece pelos fundamentais"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Modo Linear:"})," Leitura sequencial tradicional do incio ao fim"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Modo Foco:"})," Apenas contedo crtico e essencial"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("p",{children:[u.jsx("strong",{children:" Dica:"})," Use a busca para encontrar conceitos especficos rapidamente"]}),u.jsxs("p",{children:[u.jsx("strong",{children:" Sugesto:"})," Marque sees como lidas para acompanhar seu progresso"]}),u.jsxs("p",{children:[u.jsx("strong",{children:" Estratgia:"})," Revise as palavras-chave antes de estudar outras reas"]})]})]})]}),S&&u.jsxs(he,{className:"bg-slate-50",children:[u.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center",children:[u.jsx(kr,{className:"w-5 h-5 mr-2 text-sky-600"}),"Estatsticas de Leitura"]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"text-center p-3 bg-white rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-purple-600",children:r.filter(k=>k.type==="concept").length}),u.jsx("div",{className:"text-xs text-slate-600",children:"Conceitos"})]}),u.jsxs("div",{className:"text-center p-3 bg-white rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.filter(k=>k.type==="definition").length}),u.jsx("div",{className:"text-xs text-slate-600",children:"Definies"})]}),u.jsxs("div",{className:"text-center p-3 bg-white rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-amber-600",children:r.filter(k=>k.type==="example").length}),u.jsx("div",{className:"text-xs text-slate-600",children:"Exemplos"})]}),u.jsxs("div",{className:"text-center p-3 bg-white rounded-lg",children:[u.jsxs("div",{className:"text-2xl font-bold text-slate-600",children:[Math.floor(d.timeSpent/60),"min"]}),u.jsx("div",{className:"text-xs text-slate-600",children:"Tempo Lido"})]})]})]}),u.jsxs("div",{className:"space-y-4",children:[H&&u.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:u.jsxs("p",{className:"text-blue-800 text-sm",children:[u.jsx(qx,{className:"w-4 h-4 inline mr-1"}),Y.length,' resultado(s) encontrado(s) para "',H,'"',H&&u.jsx("button",{onClick:()=>se(""),className:"ml-2 text-blue-600 hover:text-blue-800 underline text-xs",children:"limpar busca"})]})}),z==="focus"&&u.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:u.jsxs("p",{className:"text-red-800 text-sm flex items-center",children:[u.jsx(rl,{className:"w-4 h-4 mr-2"}),"Modo Foco ativo - mostrando apenas contedo essencial e fundamental"]})}),Y.map((k,Q)=>{const q=VR[k.type],ee=Gx[k.importance],le=p.has(k.id),pe=L.has(k.id),Me=q.icon;return u.jsxs(he,{className:`relative overflow-hidden border-l-4 ${q.borderColor} transition-all duration-200 hover:shadow-lg ${pe?"bg-green-50":""}`,children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[u.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-br ${q.color} text-white shadow-sm`,children:u.jsx(Me,{className:"w-5 h-5"})}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("h3",{className:"text-lg font-semibold text-slate-800 font-display",children:k.title}),u.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full text-white ${ee.badgeColor}`,children:ee.label})]}),u.jsxs("div",{className:"flex items-center space-x-4 text-sm text-slate-600",children:[u.jsxs("span",{className:"flex items-center",children:[u.jsx(Rf,{className:"w-4 h-4 mr-1"}),k.estimatedReadTime," min"]}),u.jsx("span",{className:"capitalize",children:k.type.replace("_"," ")}),k.keywords.length>0&&u.jsxs("span",{className:"flex items-center",children:[u.jsx("span",{className:"mr-1",children:""}),k.keywords.slice(0,2).join(", ")]})]})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[pe&&u.jsx(fs,{className:"w-6 h-6 text-green-600"}),u.jsx(ce,{size:"sm",variant:"ghost",onClick:()=>Ie(k.id),className:"text-slate-600 hover:text-slate-800",children:le?"":"+"})]})]}),le&&u.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[u.jsx("div",{className:`prose prose-slate max-w-none text-slate-700 leading-relaxed
                               prose-headings:font-display prose-headings:text-slate-800 
                               prose-strong:text-slate-900 prose-a:text-sky-600 hover:prose-a:text-sky-700
                               prose-code:bg-slate-100 prose-code:px-1 prose-code:py-0.5 prose-code:rounded
                               prose-blockquote:border-l-4 prose-blockquote:border-sky-300 prose-blockquote:pl-4
                               prose-ul:my-2 prose-li:my-1`,dangerouslySetInnerHTML:{__html:at.parse(k.content)}}),k.keywords.length>0&&u.jsxs("div",{className:"mt-4 p-3 bg-slate-100 rounded-lg",children:[u.jsxs("h4",{className:"text-sm font-semibold text-slate-700 mb-2 flex items-center",children:[u.jsx(qx,{className:"w-4 h-4 mr-1"}),"Palavras-chave"]}),u.jsx("div",{className:"flex flex-wrap gap-1",children:k.keywords.map((Pe,gt)=>u.jsx("span",{className:"px-2 py-1 text-xs bg-sky-100 text-sky-800 rounded-full",children:Pe},gt))})]}),!pe&&u.jsx("div",{className:"mt-4 flex justify-end",children:u.jsx(ce,{size:"sm",onClick:()=>ae(k.id),leftIcon:u.jsx(fs,{className:"w-4 h-4"}),className:"bg-green-600 hover:bg-green-700 text-white",children:"Marcar como Lido"})})]}),u.jsxs("div",{className:"absolute top-2 right-2 bg-slate-200 text-slate-600 text-xs px-2 py-1 rounded-full font-medium",children:[Q+1,"/",Y.length]})]},k.id)})]}),W()===100&&u.jsx(he,{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white text-center",children:u.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[u.jsx(fs,{className:"w-16 h-16"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold",children:"Parabns! "}),u.jsx("p",{className:"text-green-100",children:"Voc completou a leitura de todo o resumo!"}),u.jsxs("p",{className:"text-sm text-green-200 mt-1",children:["Tempo total: ",M(Math.floor(d.timeSpent/60))]})]})]})})]})},XR=(c,e)=>c===e?"primary":"secondary",QR=({subjectName:c,topic:e,onBackToPlan:t,onGenerateContent:i,onUpdateTopicStatus:r,onUpdateQuestionInteraction:o,onFlashcardSelfAssessment:d,onGetDeeperUnderstanding:h,prevTopicInfo:p,nextTopicInfo:m,onSelectTopic:x})=>{const[v,y]=X.useState(Ue.SUMMARY),[E,S]=X.useState({}),[_,j]=X.useState({}),[R,L]=X.useState(!1),D=e.content||{},z=e.userInteractions||{questions:{},flashcards:{}};X.useEffect(()=>{S({}),j({}),L(!1),y(Ue.SUMMARY)},[e.id]),X.useEffect(()=>{const J=D==null?void 0:D[v],ge=!J||Array.isArray(J)&&J.length===0||typeof J=="string"&&!J.trim();v!==Ue.DEEPER_UNDERSTANDING&&ge&&!e.isLoadingContent&&!e.errorContent&&i(e.id,v,D.summary)},[e.id,v,e.isLoadingContent,e.errorContent]);const P=J=>{S(ge=>({...ge,[J]:!ge[J]}))},H=J=>{j(ge=>({...ge,[J]:!ge[J]}))},se=()=>{h(e.id),L(!0)},re=()=>{if(e.isLoadingDeeperUnderstanding)return u.jsxs("div",{className:"flex flex-col items-center justify-center py-6",children:[u.jsx(Xt,{size:"md"}),u.jsx("p",{className:"mt-2 text-slate-500",children:"IA est pensando em como te ajudar melhor..."})]});if(e.errorDeeperUnderstanding)return u.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[u.jsx("strong",{children:"Erro:"})," ",e.errorDeeperUnderstanding]});if(D.deeperUnderstanding){const{title:J,content:ge}=D.deeperUnderstanding,Ce=ge?at.parse(ge):"<p>Contedo no disponvel.</p>";return u.jsxs("div",{children:[u.jsx("h4",{className:"text-xl font-semibold text-sky-700 mb-3 font-display",children:J}),u.jsx("div",{className:"prose prose-md max-w-none text-slate-700",dangerouslySetInnerHTML:{__html:Ce}})]})}return u.jsx("p",{className:"text-slate-500",children:"Nenhuma ajuda adicional disponvel no momento. Tente gerar."})},ne=()=>{var ge,Ce,Ie,ae;if(e.isLoadingContent&&(!D||!D[v]||v===Ue.QUESTIONS&&!((ge=D.questions)!=null&&ge.length)||v===Ue.FLASHCARDS&&!((Ce=D.flashcards)!=null&&Ce.length)||v===Ue.DISCURSIVE_QUESTIONS&&!((Ie=D.discursiveQuestions)!=null&&Ie.length)))return u.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px] text-center py-10",children:[u.jsx(Xt,{size:"lg",color:"text-sky-600"}),u.jsxs("p",{className:"mt-4 text-lg text-slate-600",children:[u.jsx(_t,{className:"inline w-5 h-5 mr-1.5 text-amber-500"}),"Nossa IA est preparando o material de ",(ae=ue.find(G=>G.type===v))==null?void 0:ae.label.toLowerCase().replace(" dinmicos","").replace(" prticas","").replace(" detalhado",""),"..."]}),u.jsx("p",{className:"text-sm text-slate-500",children:"Isso pode levar alguns segundos."})]});if(e.errorContent&&(!D||!D[v]))return u.jsxs("div",{className:"p-6 bg-red-50 border border-red-200 rounded-lg text-center",children:[u.jsx(du,{className:"w-12 h-12 text-red-500 mx-auto mb-3"}),u.jsx("p",{className:"text-red-700 font-semibold",children:"Erro ao gerar contedo"}),u.jsx("p",{className:"text-sm text-red-600 mt-1",children:e.errorContent}),u.jsx(ce,{onClick:()=>i(e.id,v,D.summary),isLoading:e.isLoadingContent,leftIcon:u.jsx(tS,{}),variant:"danger",className:"mt-4",children:"Tentar Gerar Novamente"})]});switch(v){case Ue.SUMMARY:return D!=null&&D.summary?u.jsx($R,{summaryContent:D.summary,topicName:e.name,onRegenerateSummary:()=>i(e.id,Ue.SUMMARY),isLoading:e.isLoadingContent}):u.jsx(ce,{onClick:()=>i(e.id,Ue.SUMMARY),isLoading:e.isLoadingContent,leftIcon:u.jsx(_t,{className:"w-5 h-5"}),size:"lg",fullWidth:!0,children:"Gerar Resumo Inteligente"});case Ue.QUESTIONS:const G=(D==null?void 0:D.questions)||[],Y=(z==null?void 0:z.questions)||{};return G.length===0&&!e.isLoadingContent?u.jsx(ce,{onClick:()=>i(e.id,Ue.QUESTIONS,D.summary),isLoading:e.isLoadingContent,leftIcon:u.jsx(_t,{className:"w-5 h-5"}),size:"lg",fullWidth:!0,children:"Gerar Questes Desafiadoras"}):u.jsx("div",{className:"space-y-8",children:G.map((k,Q)=>{const q=Y[k.id]||{},ee=q.userAnswerIndex,le=q.isRevealed||!1,pe=q.attempts||0,Me=gt=>{le||o(e.id,k.id,gt,!1,void 0,pe)},Pe=()=>{const gt=ee===k.correctAnswerIndex;o(e.id,k.id,ee,!0,gt,pe+1)};return u.jsxs(he,{className:"bg-slate-50 shadow-md hover:shadow-lg transition-shadow",children:[u.jsxs("div",{className:"flex justify-between items-start mb-1",children:[u.jsxs("p",{className:"font-semibold text-lg text-slate-800",children:[Q+1,". ",k.questionText]}),le&&u.jsxs("span",{className:"text-xs text-slate-500",children:["Tentativas: ",q.attempts]})]}),u.jsx("div",{className:"space-y-3 mb-4",children:k.options.map((gt,_s)=>u.jsxs("label",{className:`flex items-center p-3.5 rounded-lg border-2 transition-all duration-200 cursor-pointer 
                        ${le&&_s===k.correctAnswerIndex?"bg-green-100 border-green-500 ring-2 ring-green-500 shadow-lg":le&&_s===ee&&_s!==k.correctAnswerIndex?"bg-red-100 border-red-500 ring-2 ring-red-500 shadow-lg":!le&&_s===ee?"bg-sky-100 border-sky-500 ring-2 ring-sky-500":"hover:bg-slate-100 border-slate-300 hover:border-sky-400"}`,children:[u.jsx("input",{type:"radio",name:`question-${k.id}`,value:_s,checked:ee===_s,onChange:()=>Me(_s),className:"form-radio h-5 w-5 text-sky-600 border-slate-400 focus:ring-sky-500 mr-3 flex-shrink-0",disabled:le}),u.jsx("span",{className:"text-slate-700",children:gt})]},_s))}),!le&&ee!==void 0&&u.jsx(ce,{size:"md",variant:"primary",onClick:Pe,fullWidth:!0,children:"Verificar Resposta"}),le&&u.jsxs("div",{className:`p-4 rounded-lg mt-3 text-sm border-2 ${q.isCorrect?"bg-green-50 text-green-800 border-green-400":"bg-red-50 text-red-800 border-red-400"}`,children:[u.jsxs("div",{className:"flex items-center mb-2",children:[q.isCorrect?u.jsx(fs,{className:"w-6 h-6 mr-2 text-green-600"}):u.jsx(du,{className:"w-6 h-6 mr-2 text-red-600"}),u.jsxs("strong",{className:"text-base",children:["Sua resposta est ",q.isCorrect?"correta!":"incorreta."]})]}),u.jsxs("p",{className:"mb-1",children:["A resposta correta : ",u.jsx("strong",{children:k.options[k.correctAnswerIndex]}),"."]}),q.isCorrect===!1&&ee!==void 0&&u.jsxs("p",{className:"mb-1",children:["Sua resposta: ",u.jsx("strong",{children:k.options[ee]}),"."]}),k.explanation&&u.jsx("div",{className:"mt-2 pt-2 border-t border-opacity-50 prose prose-sm",dangerouslySetInnerHTML:{__html:`<strong>Explicao da IA:</strong> ${k.explanation.replace(/\n/g,"<br />")}`}})]})]},k.id)})});case Ue.FLASHCARDS:const W=(D==null?void 0:D.flashcards)||[],oe=(z==null?void 0:z.flashcards)||{};return W.length===0&&!e.isLoadingContent?u.jsx(ce,{onClick:()=>i(e.id,Ue.FLASHCARDS,D.summary),isLoading:e.isLoadingContent,leftIcon:u.jsx(_t,{className:"w-5 h-5"}),size:"lg",fullWidth:!0,children:"Gerar Flashcards Interativos"}):u.jsx("div",{className:"space-y-6",children:W.map(k=>{const Q=E[k.id]||!1,ee=(oe[k.id]||{selfAssessment:"unseen"}).selfAssessment;let le="border-slate-300";return ee==="easy"?le="border-green-500":ee==="medium"?le="border-amber-500":ee==="hard"&&(le="border-red-500"),u.jsxs(he,{className:`shadow-lg hover:shadow-xl transition-shadow border-b-4 ${le}`,children:[u.jsx("div",{className:"perspective h-56 cursor-pointer group",onClick:()=>P(k.id),role:"button",tabIndex:0,onKeyPress:pe=>pe.key==="Enter"&&P(k.id),"aria-pressed":Q,"aria-label":`Flashcard: ${k.front}. Clique para ver a resposta.`,children:u.jsxs("div",{className:`relative w-full h-full preserve-3d transition-transform duration-700 ease-in-out rounded-lg ${Q?"rotate-y-180":""}`,children:[u.jsxs("div",{className:"absolute w-full h-full backface-hidden flex flex-col items-center justify-center bg-gradient-to-br from-white to-slate-100 rounded-lg p-5 border border-slate-200",children:[u.jsx("p",{className:"text-slate-800 font-semibold text-lg text-center",children:k.front}),u.jsx("span",{className:"mt-3 text-xs text-slate-400 group-hover:text-sky-500 transition-colors",children:"Clique para virar"})]}),u.jsxs("div",{className:"absolute w-full h-full backface-hidden rotate-y-180 flex flex-col items-center justify-center bg-gradient-to-br from-sky-600 to-cyan-500 rounded-lg p-5 text-white",children:[u.jsx("p",{className:"font-medium text-md text-center overflow-y-auto max-h-full custom-scrollbar",children:k.back}),u.jsx("span",{className:"absolute bottom-3 text-xs text-sky-200 group-hover:text-white transition-colors",children:"Clique para virar"})]})]})}),Q&&u.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-200 flex flex-wrap justify-around items-center gap-2",children:[u.jsx(ce,{size:"sm",variant:ee==="hard"?"danger":"outline",onClick:()=>d(e.id,k.id,"hard"),children:"Errei / Revisar"}),u.jsx(ce,{size:"sm",variant:ee==="medium"?"primary":"outline",className:ee==="medium"?"bg-amber-500 hover:bg-amber-600 border-amber-500 text-white focus:ring-amber-500":"border-amber-500 text-amber-600 hover:bg-amber-50 focus:ring-amber-500",onClick:()=>d(e.id,k.id,"medium"),children:"Difcil"}),u.jsx(ce,{size:"sm",variant:ee==="easy"?"primary":"outline",className:ee==="easy"?"bg-green-500 hover:bg-green-600 border-green-500 text-white focus:ring-green-500":"border-green-500 text-green-600 hover:bg-green-50 focus:ring-green-500",onClick:()=>d(e.id,k.id,"easy"),children:"Fcil"})]})]},k.id)})});case Ue.DISCURSIVE_QUESTIONS:const M=(D==null?void 0:D.discursiveQuestions)||[];return M.length===0&&!e.isLoadingContent?u.jsx(ce,{onClick:()=>i(e.id,Ue.DISCURSIVE_QUESTIONS,D.summary),isLoading:e.isLoadingContent,leftIcon:u.jsx(_t,{className:"w-5 h-5"}),size:"lg",fullWidth:!0,children:"Gerar Questes Dissertativas"}):u.jsx("div",{className:"space-y-8",children:M.map((k,Q)=>{const q=_[k.id]||!1;return u.jsxs(he,{className:"bg-slate-50 shadow-md hover:shadow-lg transition-shadow",children:[u.jsxs("h4",{className:"font-semibold text-xl text-slate-800 mb-3 font-display",children:["Questo Dissertativa ",Q+1]}),u.jsx("p",{className:"text-lg text-slate-700 mb-5 leading-relaxed",children:k.questionText}),u.jsx(ce,{variant:"outline",size:"md",onClick:()=>H(k.id),leftIcon:u.jsx(aN,{className:`w-5 h-5 transform transition-transform ${q?"rotate-180":""}`}),children:q?"Ocultar Roteiro de Resposta":"Mostrar Roteiro de Resposta"}),q&&k.modelAnswerOutline&&u.jsxs("div",{className:"mt-5 pt-4 border-t border-slate-200",children:[u.jsx("h5",{className:"text-lg font-semibold text-sky-700 mb-2 font-display",children:"Roteiro de Resposta Esperada (IA):"}),u.jsx("div",{className:"prose prose-md prose-slate max-w-none text-slate-700",dangerouslySetInnerHTML:{__html:k.modelAnswerOutline.replace(/\n/g,"<br />")}})]})]},k.id)})});default:return u.jsx("p",{className:"text-center text-slate-500 py-10",children:"Selecione um tipo de contedo para comear seus estudos."})}},ue=[{type:Ue.SUMMARY,label:"Resumo Detalhado",icon:u.jsx(iN,{})},{type:Ue.QUESTIONS,label:"Questes Prticas",icon:u.jsx(fu,{})},{type:Ue.FLASHCARDS,label:"Flashcards Dinmicos",icon:u.jsx(Vj,{})},{type:Ue.DISCURSIVE_QUESTIONS,label:"Questes Dissertativas",icon:u.jsx($j,{})}];return u.jsxs("div",{className:"max-w-6xl mx-auto",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4",children:[u.jsx(ce,{onClick:t,variant:"ghost",size:"md",className:"text-sky-700 hover:bg-sky-50 w-full sm:w-auto justify-start",leftIcon:u.jsx(ti,{className:"w-5 h-5"}),children:"Voltar ao Painel / Plano"}),u.jsxs("div",{className:"flex items-center space-x-2 w-full sm:w-auto",children:[u.jsx(ce,{variant:"outline",size:"md",disabled:!p,onClick:()=>p&&x(p.subjectId,p.topicId),leftIcon:u.jsx(ti,{className:"w-4 h-4"}),className:"flex-1",children:"Anterior"}),u.jsx(ce,{variant:"outline",size:"md",disabled:!m,onClick:()=>m&&x(m.subjectId,m.topicId),rightIcon:u.jsx(pg,{className:"w-4 h-4"}),className:"flex-1",children:"Prximo"})]})]}),u.jsxs(he,{className:"shadow-2xl",children:[u.jsxs("div",{className:"mb-8 pb-6 border-b border-slate-200",children:[u.jsx("p",{className:"text-base text-sky-600 font-semibold tracking-wide",children:c.toUpperCase()}),u.jsx("h2",{className:"text-4xl font-bold text-slate-800 mt-1 font-display",children:e.name})]}),u.jsx("div",{className:"mb-6 border-b-2 border-slate-200",children:u.jsx("nav",{className:"-mb-0.5 flex space-x-1 sm:space-x-2 overflow-x-auto pb-px","aria-label":"Tabs",children:ue.map(J=>u.jsxs("button",{onClick:()=>y(J.type),className:`whitespace-nowrap pb-3 pt-1 px-2 sm:px-4 border-b-4 font-semibold text-xs sm:text-base transition-all duration-200 ease-in-out flex items-center group
                  ${v===J.type?"border-sky-500 text-sky-600":"border-transparent text-slate-500 hover:text-sky-600 hover:border-sky-300"}`,"aria-current":v===J.type?"page":void 0,children:[ig.cloneElement(J.icon,{className:`w-4 h-4 sm:w-5 sm:h-5 mr-1.5 sm:mr-2 transition-colors ${v===J.type?"text-sky-500":"text-slate-400 group-hover:text-sky-500"}`}),J.label,e.isLoadingContent&&v===J.type&&(!D||!D[J.type]||Array.isArray(D[J.type])&&D[J.type].length===0)&&u.jsx(Xt,{size:"sm",color:"text-sky-500",className:"ml-2"})]},J.type))})}),u.jsx("div",{className:"my-6 p-4 bg-sky-50 border border-sky-200 rounded-lg shadow-sm",children:u.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(Tv,{className:"w-8 h-8 text-sky-600 mr-3 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold text-sky-800",children:"Sentindo Dificuldade?"}),u.jsx("p",{className:"text-sm text-sky-700",children:"Nossa IA pode te ajudar a entender melhor este tpico!"})]})]}),u.jsx(ce,{variant:"primary",size:"md",onClick:se,isLoading:e.isLoadingDeeperUnderstanding,disabled:e.isLoadingDeeperUnderstanding,leftIcon:u.jsx(_t,{className:"w-5 h-5"}),className:"mt-3 sm:mt-0 w-full sm:w-auto",children:"Preciso de Mais Ajuda"})]})}),R&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",onClick:()=>L(!1),role:"dialog","aria-modal":"true","aria-labelledby":"deeper-understanding-title",children:u.jsxs(he,{title:"Assistncia Personalizada da IA",id:"deeper-understanding-title",className:"max-w-2xl w-full bg-white shadow-2xl max-h-[80vh] flex flex-col",onClick:J=>J.stopPropagation(),children:[u.jsx("div",{className:"overflow-y-auto p-1 custom-scrollbar flex-grow",children:re()}),u.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-200 flex justify-end space-x-3",children:[u.jsx(ce,{variant:"outline",onClick:se,isLoading:e.isLoadingDeeperUnderstanding,disabled:e.isLoadingDeeperUnderstanding,leftIcon:u.jsx(tS,{}),children:"Gerar Outra Ajuda"}),u.jsx(ce,{variant:"primary",onClick:()=>L(!1),children:"Entendido, Fechar"})]})]})}),u.jsx("div",{className:"min-h-[300px] py-4",children:ne()}),u.jsxs("div",{className:"mt-10 pt-8 border-t-2 border-slate-200",children:[u.jsx("h4",{className:"text-xl font-semibold text-slate-700 mb-4 font-display",children:"Atualizar Status do Tpico:"}),u.jsx("div",{className:"flex flex-wrap gap-3",children:["Pendente","Estudando","Concludo"].map(J=>u.jsx(ce,{variant:XR(e.status,J),onClick:()=>r(e.id,J),size:"md",className:`
                  ${e.status===J&&J==="Pendente"?"bg-amber-500 hover:bg-amber-600 focus:ring-amber-400 text-white":""}
                  ${e.status===J&&J==="Estudando"?"bg-sky-500 hover:bg-sky-600 focus:ring-sky-400 text-white":""}
                  ${e.status===J&&J==="Concludo"?"bg-green-500 hover:bg-green-600 focus:ring-green-400 text-white":""}
                  ${e.status!==J?"bg-slate-200 hover:bg-slate-300 text-slate-700 focus:ring-slate-300":""}
                `,children:J},J))})]})]})]})},KR=({suggestions:c,generalAdvice:e,chatMessages:t,isLoadingSuggestions:i,isLoadingChatResponse:r,suggestionsError:o,chatError:d,onRefreshSuggestions:h,onSendMessage:p,onNavigateToTopic:m,onBackToPlan:x})=>{const[v,y]=X.useState(""),E=X.useRef(null);X.useEffect(()=>{var R;(R=E.current)==null||R.scrollIntoView({behavior:"smooth"})},[t]);const S=()=>{v.trim()&&(p(v.trim()),y(""))},_=R=>{R.key==="Enter"&&!R.shiftKey&&(R.preventDefault(),S())},j=()=>i?u.jsxs("div",{className:"text-center py-8",children:[u.jsx(Xt,{}),u.jsx("p",{className:"mt-2 text-slate-500",children:"Buscando sugestes personalizadas..."})]}):o?u.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:u.jsxs("p",{children:[u.jsx("strong",{children:"Erro ao buscar sugestes:"})," ",o]})}):!c||c.length===0?u.jsxs("div",{className:"text-center py-6 px-4",children:[u.jsx(kr,{className:"w-10 h-10 text-sky-400 mx-auto mb-2"}),u.jsx("p",{className:"text-slate-600 font-medium",children:"Nenhuma sugesto especfica no momento."}),u.jsx("p",{className:"text-sm text-slate-500",children:"Continue progredindo no seu plano ou me faa uma pergunta no chat!"})]}):u.jsx("ul",{className:"space-y-4",children:c.map(R=>u.jsx("li",{className:"p-4 border border-slate-200 rounded-lg hover:bg-sky-50 transition-colors group",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-sky-700 group-hover:text-sky-800 text-lg",children:R.topicName}),u.jsx("p",{className:"text-xs text-slate-500 mb-1",children:R.subjectName}),u.jsx("p",{className:"text-sm text-slate-600",children:R.reason})]}),u.jsx(ce,{variant:"primary",size:"sm",onClick:()=>m(R.subjectId,R.topicId),leftIcon:u.jsx(Mr,{className:"w-4 h-4"}),className:"ml-4 flex-shrink-0",children:"Estudar"})]})},`${R.subjectId}-${R.topicId}`))});return u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsx(ce,{onClick:x,variant:"ghost",size:"md",className:"mb-6 text-sky-700 hover:bg-sky-50",leftIcon:u.jsx(ti,{className:"w-5 h-5"}),children:"Voltar ao Painel / Plano"}),u.jsxs(he,{className:"shadow-xl",children:[u.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-8 pb-6 border-b border-slate-200",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-4xl font-bold text-slate-800 font-display flex items-center",children:[u.jsx(dv,{className:"w-10 h-10 text-sky-600 mr-3"})," Coach IA"]}),u.jsx("p",{className:"text-slate-600 mt-1 text-lg",children:"Seu assistente pessoal para otimizar seus estudos!"})]}),u.jsx(_t,{className:"w-12 h-12 text-amber-400 mt-4 md:mt-0"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsx(he,{title:"Sugestes de Estudo da IA",className:"bg-slate-50 shadow-md",actions:u.jsx(ce,{variant:"outline",size:"sm",onClick:h,isLoading:i,leftIcon:u.jsx(nN,{className:"w-4 h-4"}),children:"Atualizar"}),children:j()}),i&&!e&&u.jsxs("div",{className:"text-center py-4",children:[u.jsx(Xt,{size:"sm"}),u.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Carregando conselho..."})]}),!i&&e&&u.jsx(he,{title:"Conselho do Coach",className:"bg-sky-50 border-sky-200 shadow-md",children:u.jsxs("div",{className:"flex items-start",children:[u.jsx(uu,{className:"w-8 h-8 text-sky-500 mr-3 mt-1 flex-shrink-0"}),u.jsx("p",{className:"text-sky-700",children:e})]})}),!i&&!e&&!o&&u.jsx(he,{className:"bg-slate-50 border-slate-200 shadow-md",children:u.jsxs("div",{className:"flex items-center text-slate-500",children:[u.jsx(uu,{className:"w-6 h-6 text-slate-400 mr-2 mt-px flex-shrink-0"}),u.jsx("p",{children:"Nenhum conselho geral no momento. Mantenha o foco!"})]})})]}),u.jsxs(he,{title:"Converse com o Coach",className:"shadow-md flex flex-col h-[600px]",children:[u.jsxs("div",{className:"flex-grow overflow-y-auto mb-4 pr-2 space-y-3 bg-slate-50 p-4 rounded-lg border border-slate-200 custom-scrollbar",children:[t.length===0&&!r&&u.jsxs("div",{className:"text-center text-slate-400 pt-10",children:[u.jsx(dv,{className:"w-16 h-16 mx-auto mb-3 opacity-50"}),u.jsx("p",{children:"Faa uma pergunta sobre seu edital, tpicos de estudo ou pea dicas!"})]}),t.map(R=>u.jsx("div",{className:`flex ${R.sender==="user"?"justify-end":"justify-start"}`,children:u.jsxs("div",{className:`max-w-[80%] p-3 rounded-xl shadow ${R.sender==="user"?"bg-sky-500 text-white rounded-br-none":`bg-white text-slate-700 border border-slate-200 rounded-bl-none ${R.error?"border-red-300 bg-red-50 text-red-700":""}`}`,children:[u.jsx("p",{className:"text-sm whitespace-pre-wrap",children:R.text}),u.jsxs("p",{className:`text-xs mt-1 ${R.sender==="user"?"text-sky-200 text-right":R.error?"text-red-400":"text-slate-400"}`,children:[new Date(R.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),R.sender==="ai"&&R.error&&" (Erro da IA)"]})]})},R.id)),r&&u.jsx("div",{className:"flex justify-start",children:u.jsx("div",{className:"max-w-[80%] p-3 rounded-xl shadow bg-white text-slate-700 border border-slate-200 rounded-bl-none",children:u.jsx(Xt,{size:"sm",color:"text-sky-600"})})}),u.jsx("div",{ref:E})]}),d&&!r&&u.jsx("p",{className:"text-xs text-red-600 mb-2 p-2 bg-red-50 rounded-md border border-red-200",children:d}),u.jsxs("div",{className:"flex items-center space-x-2 pt-2 border-t border-slate-200",children:[u.jsx(rN,{id:"userMessage",value:v,onChange:R=>y(R.target.value),onKeyPress:_,placeholder:"Pergunte algo sobre o edital, tpicos, ou pea dicas...",rows:2,className:"flex-grow !mb-0",disabled:r,containerClassName:"!mb-0 flex-grow"}),u.jsx(ce,{onClick:S,isLoading:r,disabled:r||!v.trim(),className:"h-full px-5","aria-label":"Enviar mensagem",children:u.jsx(Xj,{className:"w-5 h-5"})})]})]})]})]})]})},bN=document.createElement("style");bN.textContent=`
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  .custom-scrollbar::-webkit-scrollbar-track {
    background: #f1f5f9; /* bg-slate-100 */
    border-radius: 10px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: #94a3b8; /* bg-slate-400 */
    border-radius: 10px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #64748b; /* bg-slate-500 */
  }
`;document.head.append(bN);const WR=({isAuthenticated:c,className:e=""})=>c?u.jsx("div",{className:`bg-green-50 border border-green-200 rounded-lg p-4 ${e}`,children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx(fs,{className:"h-5 w-5 text-green-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Salvamento Automtico Ativo"}),u.jsxs("div",{className:"mt-2 text-sm text-green-700",children:[u.jsx("p",{children:"Todos os seus dados so automaticamente salvos no seu perfil:"}),u.jsxs("ul",{className:"mt-1 list-disc list-inside space-y-1",children:[u.jsxs("li",{className:"flex items-center",children:[u.jsx(Cv,{className:"h-4 w-4 mr-2 text-green-600"}),"Edital processado e anlise completa"]}),u.jsxs("li",{className:"flex items-center",children:[u.jsx(sR,{className:"h-4 w-4 mr-2 text-green-600"}),"Progresso de todos os tpicos estudados"]}),u.jsxs("li",{className:"flex items-center",children:[u.jsx(fs,{className:"h-4 w-4 mr-2 text-green-600"}),"Questes respondidas e performance"]}),u.jsxs("li",{className:"flex items-center",children:[u.jsx(fs,{className:"h-4 w-4 mr-2 text-green-600"}),"Conversas com o AI Coach"]}),u.jsxs("li",{className:"flex items-center",children:[u.jsx(fs,{className:"h-4 w-4 mr-2 text-green-600"}),"Configuraes de estudo personalizadas"]})]}),u.jsx("p",{className:"mt-2 text-xs opacity-75",children:" Seus dados ficam sincronizados entre dispositivos e protegidos na nuvem"})]})]})]})}):null,lS=({percentage:c,colorClass:e="bg-sky-500"})=>u.jsx("div",{className:"w-full bg-slate-200 rounded-full h-3.5 dark:bg-slate-700 shadow-inner",children:u.jsx("div",{className:`${e} h-3.5 rounded-full transition-all duration-500 ease-out`,style:{width:`${c}%`},role:"progressbar","aria-valuenow":c,"aria-valuemin":0,"aria-valuemax":100})}),ZR=({dashboardData:c,userName:e,onNavigateToPlan:t,onNavigateToTopic:i,analysisResult:r,isAuthenticated:o=!1})=>{const{totalTopics:d,completedTopics:h,pendingTopics:p,studyingTopics:m,completionPercentage:x,subjectProgress:v}=c,E=(()=>{if(!r)return null;for(const _ of r.subjects){const j=_.topics.find(R=>R.status==="Estudando");if(j)return j}for(const _ of r.subjects){const j=_.topics.find(R=>R.status==="Pendente");if(j)return j}return null})(),S=E?r==null?void 0:r.subjects.find(_=>_.topics.some(j=>j.id===E.id)):null;return u.jsxs("div",{className:"max-w-6xl mx-auto",children:[u.jsxs("div",{className:"mb-10 text-center",children:[u.jsxs("h2",{className:"text-4xl font-extrabold text-slate-800 font-display",children:["Ol",e?`, ${e}`:"","! Bem-vindo(a) de volta."]}),u.jsx("p",{className:"text-xl text-slate-600 mt-2",children:"Seu progresso e prximos passos esto aqui."})]}),u.jsxs(he,{className:"mb-8 bg-gradient-to-r from-sky-600 to-cyan-500 text-white shadow-xl",children:[u.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-3xl font-bold mb-1 font-display",children:"Viso Geral do Progresso"}),u.jsxs("p",{className:"text-sky-100 text-lg",children:["Voc completou ",u.jsx("strong",{className:"text-amber-300",children:h})," de ",u.jsx("strong",{className:"text-amber-300",children:d})," tpicos."]})]}),u.jsxs("div",{className:"text-5xl font-extrabold mt-4 md:mt-0",children:[x,"%",u.jsx(_t,{className:"inline-block w-10 h-10 ml-2 text-amber-300"})]})]}),u.jsx("div",{className:"mt-6",children:u.jsx(lS,{percentage:x,colorClass:"bg-amber-400 h-5 shadow-md"})}),u.jsxs("div",{className:"mt-6 grid grid-cols-2 sm:grid-cols-3 gap-4 text-center text-sm",children:[u.jsxs("div",{className:"bg-sky-700 bg-opacity-50 p-3 rounded-lg",children:[u.jsx("div",{className:"font-bold text-2xl",children:p}),u.jsx("div",{className:"text-sky-200",children:"Pendentes"})]}),u.jsxs("div",{className:"bg-sky-700 bg-opacity-50 p-3 rounded-lg",children:[u.jsx("div",{className:"font-bold text-2xl",children:m}),u.jsx("div",{className:"text-sky-200",children:"Estudando"})]}),u.jsxs("div",{className:"bg-sky-700 bg-opacity-50 p-3 rounded-lg col-span-2 sm:col-span-1",children:[u.jsx("div",{className:"font-bold text-2xl",children:h}),u.jsx("div",{className:"text-sky-200",children:"Concludos"})]})]})]}),u.jsx(he,{className:"mb-8",title:"Progresso por Matria",actions:u.jsx(ce,{variant:"primary",size:"md",onClick:t,leftIcon:u.jsx(gg,{}),children:"Ver Plano Detalhado"}),children:v.length>0?u.jsx("div",{className:"space-y-5",children:v.map(_=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:"text-lg font-semibold text-slate-700",children:_.name}),u.jsxs("span",{className:"text-sm font-medium text-sky-600",children:[_.completedTopics," / ",_.totalTopics," tpicos (",_.percentage,"%)"]})]}),u.jsx(lS,{percentage:_.percentage})]},_.id))}):u.jsx("p",{className:"text-slate-500 text-center py-4",children:"Nenhuma matria encontrada no seu plano ainda."})}),E&&S&&u.jsx(he,{className:"bg-green-50 border-green-300 shadow-lg",children:u.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[u.jsx(fs,{className:"w-12 h-12 text-green-500 mb-4 md:mb-0 md:mr-6 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-bold text-green-800 mb-2 font-display",children:"Seu Prximo Passo!"}),u.jsxs("p",{className:"text-green-700 mb-1",children:["Que tal continuar com: ",u.jsx("strong",{className:"text-green-900",children:E.name})]}),u.jsxs("p",{className:"text-xs text-green-600 mb-4",children:["Matria: ",S.name]}),u.jsx(ce,{variant:"primary",className:"bg-green-600 hover:bg-green-700 focus:ring-green-500",onClick:()=>i(S.id,E.id),leftIcon:u.jsx(Mr,{}),rightIcon:u.jsx(pg,{}),children:"Estudar Agora"})]})]})}),!E&&d>0&&h===d&&u.jsxs(he,{className:"bg-emerald-500 text-white text-center py-10 shadow-2xl",children:[u.jsx(_t,{className:"w-20 h-20 mx-auto mb-4 text-amber-300"}),u.jsx("h3",{className:"text-4xl font-extrabold font-display mb-3",children:"Parabns!"}),u.jsx("p",{className:"text-xl text-emerald-100 mb-6",children:"Voc concluiu todos os tpicos do seu plano de estudos!"}),u.jsx(ce,{variant:"outline",className:"border-white text-white hover:bg-white hover:text-emerald-600",size:"lg",onClick:t,leftIcon:u.jsx(Vd,{}),children:"Revisar Plano Completo"})]}),!E&&d===0&&u.jsxs(he,{className:"text-center py-10",children:[u.jsx(Vd,{className:"w-16 h-16 mx-auto text-slate-400 mb-4"}),u.jsx("h3",{className:"text-2xl font-semibold text-slate-700 mb-2",children:"Seu plano de estudos est vazio."}),u.jsx("p",{className:"text-slate-500 mb-6",children:"Parece que voc ainda no gerou um plano. Envie um edital para comear!"}),u.jsx(ce,{variant:"primary",size:"lg",onClick:t,leftIcon:u.jsx(_t,{}),children:"Criar Novo Plano"})]}),u.jsx(WR,{isAuthenticated:o,className:"mt-8"})]})};class JR{constructor(){this.STORAGE_KEY="user_question_profile",this.userProfile=null,this.loadUserProfile()}loadUserProfile(){try{const e=localStorage.getItem(this.STORAGE_KEY);e?this.userProfile=JSON.parse(e):this.userProfile=this.createDefaultProfile()}catch(e){console.error("Erro ao carregar perfil de questes:",e),this.userProfile=this.createDefaultProfile()}}createDefaultProfile(){return{questionsMemory:{},totalQuestionsAnswered:0,totalCorrectAnswers:0,averageScore:0,strongCategories:[],weakCategories:[],preferredDifficulty:"medium",totalStudyTime:0,quizSessions:[],lastActivityTimestamp:Date.now(),streakDays:0,longestStreak:0,achievements:[]}}saveUserProfile(){if(this.userProfile)try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.userProfile))}catch(e){console.error("Erro ao salvar perfil de questes:",e)}}recordAttempt(e,t,i,r,o){if(!this.userProfile)return;const d={questionId:e,isCorrect:i,selectedAnswerIndex:t,timeSpent:r,timestamp:Date.now(),hintsUsed:0};this.userProfile.questionsMemory[e]||(this.userProfile.questionsMemory[e]={questionId:e,totalAttempts:0,correctAttempts:0,incorrectAttempts:0,averageTimeSpent:0,lastAttemptTimestamp:Date.now(),consecutiveCorrect:0,consecutiveIncorrect:0,difficultyRating:o.difficulty||"medium",masteryLevel:"learning",topicId:o.topic,category:o.category,attempts:[]});const h=this.userProfile.questionsMemory[e];h.attempts.push(d),h.totalAttempts++,h.lastAttemptTimestamp=Date.now(),i?(h.correctAttempts++,h.consecutiveCorrect++,h.consecutiveIncorrect=0):(h.incorrectAttempts++,h.consecutiveIncorrect++,h.consecutiveCorrect=0),h.averageTimeSpent=h.attempts.reduce((p,m)=>p+m.timeSpent,0)/h.attempts.length,this.updateMasteryLevel(h),this.userProfile.totalQuestionsAnswered++,i&&this.userProfile.totalCorrectAnswers++,this.userProfile.averageScore=this.userProfile.totalCorrectAnswers/this.userProfile.totalQuestionsAnswered*100,this.userProfile.totalStudyTime+=r,this.userProfile.lastActivityTimestamp=Date.now(),this.updateStreak(),this.updateCategoriesStrength(),this.saveUserProfile()}updateMasteryLevel(e){const t=e.correctAttempts/e.totalAttempts;e.totalAttempts<3?e.masteryLevel="learning":t>=.8&&e.consecutiveCorrect>=3?e.masteryLevel="mastered":t>=.6?e.masteryLevel="practicing":e.masteryLevel="learning"}updateStreak(){if(!this.userProfile)return;const e=new Date().toDateString(),t=new Date(this.userProfile.lastActivityTimestamp).toDateString();if(e===t)return;const i=new Date;i.setDate(i.getDate()-1),t===i.toDateString()?(this.userProfile.streakDays++,this.userProfile.streakDays>this.userProfile.longestStreak&&(this.userProfile.longestStreak=this.userProfile.streakDays)):this.userProfile.streakDays=1}updateCategoriesStrength(){if(!this.userProfile)return;const e={};Object.values(this.userProfile.questionsMemory).forEach(i=>{i.category&&(e[i.category]||(e[i.category]={correct:0,total:0}),e[i.category].correct+=i.correctAttempts,e[i.category].total+=i.totalAttempts)});const t=Object.entries(e).map(([i,r])=>({category:i,accuracy:r.correct/r.total})).filter(i=>!isNaN(i.accuracy)).sort((i,r)=>r.accuracy-i.accuracy);this.userProfile.strongCategories=t.filter(i=>i.accuracy>=.7).slice(0,5).map(i=>i.category),this.userProfile.weakCategories=t.filter(i=>i.accuracy<.5).slice(-5).map(i=>i.category)}startQuizSession(e,t,i){var o;return{id:`quiz_${Date.now()}`,userId:(o=this.userProfile)==null?void 0:o.userId,startTimestamp:Date.now(),questions:e,attempts:[],score:0,totalQuestions:e.length,correctAnswers:0,timeSpent:0,category:t,topicId:i,difficulty:this.determineDifficulty(e),isCompleted:!1}}completeQuizSession(e){this.userProfile&&(e.endTimestamp=Date.now(),e.timeSpent=e.endTimestamp-e.startTimestamp,e.isCompleted=!0,e.score=e.correctAnswers/e.totalQuestions*100,this.userProfile.quizSessions.push(e),this.userProfile.quizSessions.length>50&&(this.userProfile.quizSessions=this.userProfile.quizSessions.slice(-50)),this.saveUserProfile())}determineDifficulty(e){const t=e.map(r=>r.difficulty||"medium"),i={easy:t.filter(r=>r==="easy").length,medium:t.filter(r=>r==="medium").length,hard:t.filter(r=>r==="hard").length};return i.hard>i.medium&&i.hard>i.easy?"hard":i.easy>i.medium&&i.easy>i.hard?"easy":"medium"}getQuestionRecommendations(e,t=10){if(!this.userProfile)return[];const i=[];return e.forEach(r=>{const o=this.userProfile.questionsMemory[r.id];let d=5,h="new_topic";o?o.masteryLevel==="learning"||o.consecutiveIncorrect>1?(d=9,h="weak_category"):o.masteryLevel==="mastered"?(Date.now()-o.lastAttemptTimestamp)/864e5>7?(d=6,h="spaced_repetition"):d=2:(d=5,h="difficulty_progression"):(d=7,h="new_topic"),r.category&&this.userProfile.weakCategories.includes(r.category)&&(d+=2,h="weak_category"),i.push({questionId:r.id,reason:h,priority:d,estimatedDifficulty:r.difficulty||"medium"})}),i.sort((r,o)=>o.priority-r.priority).slice(0,t)}getUserStats(){if(!this.userProfile)return{totalQuestions:0,correctPercentage:0,averageTimePerQuestion:0,strongCategories:[],weakCategories:[],currentStreak:0,longestStreak:0,recentSessions:[],masteryDistribution:{learning:0,practicing:0,mastered:0}};const e=Object.values(this.userProfile.questionsMemory),t=e.length>0?e.reduce((r,o)=>r+o.averageTimeSpent,0)/e.length:0,i=e.reduce((r,o)=>(r[o.masteryLevel]++,r),{learning:0,practicing:0,mastered:0});return{totalQuestions:this.userProfile.totalQuestionsAnswered,correctPercentage:this.userProfile.averageScore,averageTimePerQuestion:t,strongCategories:this.userProfile.strongCategories,weakCategories:this.userProfile.weakCategories,currentStreak:this.userProfile.streakDays,longestStreak:this.userProfile.longestStreak,recentSessions:this.userProfile.quizSessions.slice(-5),masteryDistribution:i}}getQuestionHistory(e){return this.userProfile&&this.userProfile.questionsMemory[e]||null}resetUserData(){this.userProfile=this.createDefaultProfile(),this.saveUserProfile()}exportUserData(){return JSON.stringify(this.userProfile,null,2)}importUserData(e){try{const t=JSON.parse(e);return this.userProfile=t,this.saveUserProfile(),!0}catch(t){return console.error("Erro ao importar dados:",t),!1}}}const Ys=new JR;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cS;(function(c){c.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",c.OUTCOME_OK="OUTCOME_OK",c.OUTCOME_FAILED="OUTCOME_FAILED",c.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(cS||(cS={}));var uS;(function(c){c.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",c.PYTHON="PYTHON"})(uS||(uS={}));var dS;(function(c){c.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",c.STRING="STRING",c.NUMBER="NUMBER",c.INTEGER="INTEGER",c.BOOLEAN="BOOLEAN",c.ARRAY="ARRAY",c.OBJECT="OBJECT",c.NULL="NULL"})(dS||(dS={}));var hS;(function(c){c.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",c.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",c.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",c.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",c.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",c.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",c.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",c.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",c.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",c.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(hS||(hS={}));var fS;(function(c){c.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",c.SEVERITY="SEVERITY",c.PROBABILITY="PROBABILITY"})(fS||(fS={}));var mS;(function(c){c.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",c.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",c.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",c.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",c.BLOCK_NONE="BLOCK_NONE",c.OFF="OFF"})(mS||(mS={}));var pS;(function(c){c.MODE_UNSPECIFIED="MODE_UNSPECIFIED",c.MODE_DYNAMIC="MODE_DYNAMIC"})(pS||(pS={}));var gS;(function(c){c.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",c.NO_AUTH="NO_AUTH",c.API_KEY_AUTH="API_KEY_AUTH",c.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",c.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",c.OAUTH="OAUTH",c.OIDC_AUTH="OIDC_AUTH"})(gS||(gS={}));var xS;(function(c){c.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",c.SIMPLE_SEARCH="SIMPLE_SEARCH",c.ELASTIC_SEARCH="ELASTIC_SEARCH"})(xS||(xS={}));var bS;(function(c){c.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",c.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",c.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",c.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",c.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(bS||(bS={}));var vS;(function(c){c.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",c.STOP="STOP",c.MAX_TOKENS="MAX_TOKENS",c.SAFETY="SAFETY",c.RECITATION="RECITATION",c.LANGUAGE="LANGUAGE",c.OTHER="OTHER",c.BLOCKLIST="BLOCKLIST",c.PROHIBITED_CONTENT="PROHIBITED_CONTENT",c.SPII="SPII",c.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",c.IMAGE_SAFETY="IMAGE_SAFETY",c.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(vS||(vS={}));var yS;(function(c){c.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",c.NEGLIGIBLE="NEGLIGIBLE",c.LOW="LOW",c.MEDIUM="MEDIUM",c.HIGH="HIGH"})(yS||(yS={}));var AS;(function(c){c.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",c.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",c.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",c.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",c.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(AS||(AS={}));var ES;(function(c){c.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",c.SAFETY="SAFETY",c.OTHER="OTHER",c.BLOCKLIST="BLOCKLIST",c.PROHIBITED_CONTENT="PROHIBITED_CONTENT",c.IMAGE_SAFETY="IMAGE_SAFETY"})(ES||(ES={}));var SS;(function(c){c.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",c.ON_DEMAND="ON_DEMAND",c.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(SS||(SS={}));var _S;(function(c){c.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",c.TEXT="TEXT",c.IMAGE="IMAGE",c.AUDIO="AUDIO"})(_S||(_S={}));var wS;(function(c){c.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",c.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",c.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",c.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(wS||(wS={}));var NS;(function(c){c.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",c.JOB_STATE_QUEUED="JOB_STATE_QUEUED",c.JOB_STATE_PENDING="JOB_STATE_PENDING",c.JOB_STATE_RUNNING="JOB_STATE_RUNNING",c.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",c.JOB_STATE_FAILED="JOB_STATE_FAILED",c.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",c.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",c.JOB_STATE_PAUSED="JOB_STATE_PAUSED",c.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",c.JOB_STATE_UPDATING="JOB_STATE_UPDATING",c.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(NS||(NS={}));var TS;(function(c){c.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",c.TUNING_MODE_FULL="TUNING_MODE_FULL",c.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(TS||(TS={}));var CS;(function(c){c.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",c.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",c.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",c.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",c.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",c.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",c.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(CS||(CS={}));var jS;(function(c){c.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",c.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",c.BALANCED="BALANCED",c.PRIORITIZE_COST="PRIORITIZE_COST"})(jS||(jS={}));var RS;(function(c){c.UNSPECIFIED="UNSPECIFIED",c.BLOCKING="BLOCKING",c.NON_BLOCKING="NON_BLOCKING"})(RS||(RS={}));var MS;(function(c){c.MODE_UNSPECIFIED="MODE_UNSPECIFIED",c.MODE_DYNAMIC="MODE_DYNAMIC"})(MS||(MS={}));var kS;(function(c){c.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",c.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(kS||(kS={}));var DS;(function(c){c.MODE_UNSPECIFIED="MODE_UNSPECIFIED",c.AUTO="AUTO",c.ANY="ANY",c.NONE="NONE",c.VALIDATED="VALIDATED"})(DS||(DS={}));var OS;(function(c){c.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",c.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",c.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",c.BLOCK_NONE="BLOCK_NONE"})(OS||(OS={}));var LS;(function(c){c.DONT_ALLOW="DONT_ALLOW",c.ALLOW_ADULT="ALLOW_ADULT",c.ALLOW_ALL="ALLOW_ALL"})(LS||(LS={}));var IS;(function(c){c.auto="auto",c.en="en",c.ja="ja",c.ko="ko",c.hi="hi",c.zh="zh",c.pt="pt",c.es="es"})(IS||(IS={}));var PS;(function(c){c.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",c.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",c.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",c.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",c.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(PS||(PS={}));var US;(function(c){c.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",c.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",c.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",c.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(US||(US={}));var zS;(function(c){c.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",c.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",c.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",c.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(zS||(zS={}));var FS;(function(c){c.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",c.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",c.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",c.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",c.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",c.EDIT_MODE_STYLE="EDIT_MODE_STYLE",c.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",c.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(FS||(FS={}));var BS;(function(c){c.FOREGROUND="FOREGROUND",c.BACKGROUND="BACKGROUND",c.PROMPT="PROMPT",c.SEMANTIC="SEMANTIC",c.INTERACTIVE="INTERACTIVE"})(BS||(BS={}));var HS;(function(c){c.ASSET="ASSET",c.STYLE="STYLE"})(HS||(HS={}));var qS;(function(c){c.INSERT="INSERT",c.REMOVE="REMOVE",c.REMOVE_STATIC="REMOVE_STATIC",c.OUTPAINT="OUTPAINT"})(qS||(qS={}));var GS;(function(c){c.OPTIMIZED="OPTIMIZED",c.LOSSLESS="LOSSLESS"})(GS||(GS={}));var YS;(function(c){c.STATE_UNSPECIFIED="STATE_UNSPECIFIED",c.PROCESSING="PROCESSING",c.ACTIVE="ACTIVE",c.FAILED="FAILED"})(YS||(YS={}));var VS;(function(c){c.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",c.UPLOADED="UPLOADED",c.GENERATED="GENERATED"})(VS||(VS={}));var $S;(function(c){c.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",c.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",c.RESPONSE_REJECTED="RESPONSE_REJECTED",c.NEED_MORE_INPUT="NEED_MORE_INPUT"})($S||($S={}));var XS;(function(c){c.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",c.TEXT="TEXT",c.IMAGE="IMAGE",c.VIDEO="VIDEO",c.AUDIO="AUDIO",c.DOCUMENT="DOCUMENT"})(XS||(XS={}));var QS;(function(c){c.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",c.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",c.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(QS||(QS={}));var KS;(function(c){c.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",c.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",c.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(KS||(KS={}));var WS;(function(c){c.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",c.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",c.NO_INTERRUPTION="NO_INTERRUPTION"})(WS||(WS={}));var ZS;(function(c){c.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",c.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",c.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ZS||(ZS={}));var JS;(function(c){c.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",c.SILENT="SILENT",c.WHEN_IDLE="WHEN_IDLE",c.INTERRUPT="INTERRUPT"})(JS||(JS={}));var e_;(function(c){c.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",c.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",c.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",c.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",c.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",c.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",c.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",c.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",c.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",c.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",c.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",c.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",c.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(e_||(e_={}));var t_;(function(c){c.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",c.QUALITY="QUALITY",c.DIVERSITY="DIVERSITY",c.VOCALIZATION="VOCALIZATION"})(t_||(t_={}));var s_;(function(c){c.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",c.PLAY="PLAY",c.PAUSE="PAUSE",c.STOP="STOP",c.RESET_CONTEXT="RESET_CONTEXT"})(s_||(s_={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var a_;(function(c){c.PAGED_ITEM_BATCH_JOBS="batchJobs",c.PAGED_ITEM_MODELS="models",c.PAGED_ITEM_TUNING_JOBS="tuningJobs",c.PAGED_ITEM_FILES="files",c.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(a_||(a_={}));const ns=[];for(let c=0;c<256;++c)ns.push((c+256).toString(16).slice(1));function eM(c,e=0){return(ns[c[e+0]]+ns[c[e+1]]+ns[c[e+2]]+ns[c[e+3]]+"-"+ns[c[e+4]]+ns[c[e+5]]+"-"+ns[c[e+6]]+ns[c[e+7]]+"-"+ns[c[e+8]]+ns[c[e+9]]+"-"+ns[c[e+10]]+ns[c[e+11]]+ns[c[e+12]]+ns[c[e+13]]+ns[c[e+14]]+ns[c[e+15]]).toLowerCase()}let Yx;const tM=new Uint8Array(16);function sM(){if(!Yx){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Yx=crypto.getRandomValues.bind(crypto)}return Yx(tM)}const aM=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),i_={randomUUID:aM};function Ms(c,e,t){var r;if(i_.randomUUID&&!c)return i_.randomUUID();c=c||{};const i=c.random??((r=c.rng)==null?void 0:r.call(c))??sM();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,eM(i)}const pl=()=>(console.warn("API_KEY no configurada. Usando dados mockados para Gemini API."),console.warn("Variveis disponveis:",{processEnvApiKey:void 0,viteApiKey:void 0}),null),jr=c=>{let e=c.trim();const t=/^```(\w*)?\s*\n?(.*?)\n?\s*```$/s,i=e.match(t);i&&i[2]&&(e=i[2].trim());try{return JSON.parse(e)}catch(r){return console.error("Falha ao parsear JSON da resposta Gemini:",r,"String original:",e),{error:`Falha ao parsear JSON: ${r.message}`}}},iM=async c=>{const e=pl();if(!e)return new Promise(i=>setTimeout(()=>{const r=Math.random();r<.6?i({roles:["Analista Judicirio (Mock)","Tcnico em Informtica (Mock)","Assistente Administrativo (Mock)"],clarificationQuestions:["O edital especifica a rea de formao para Analista Judicirio? (Mock)"]}):r<.8?i({roles:[],clarificationQuestions:["O documento parece ser um anexo. Poderia fornecer o edital principal para identificao dos cargos? (Mock)"]}):i({roles:[],error:"No foi possvel processar o documento para extrair cargos. Verifique se  o edital correto. (Mock)"})},1200));const t=`
    Voc  um assistente especializado em analisar editais de concursos pblicos brasileiros para extrair os NOMES DOS CARGOS/VAGAS oferecidos.
    Dado o seguinte texto do edital:
    ---
    ${c.substring(0,5e4)} 
    ---
    Por favor, extraia e liste os nomes dos cargos (posies, vagas) disponveis neste edital.
    Se houver muitos cargos, liste os principais ou at um mximo de 15 cargos distintos.
    Formate a sada como um JSON com a seguinte estrutura:
    {
      "roles": ["Nome do Cargo 1", "Nome do Cargo 2", ...],
      "clarification_questions": ["Pergunta de clarificao 1?", "Pergunta 2?"],
      "error": "Mensagem de erro se no puder extrair."
    }
    Importante: Os valores de string dentro do JSON devem ser strings JSON vlidas (ex: aspas duplas internas devem ser escapadas como \\").
    Se nenhum cargo for encontrado, retorne um array "roles" vazio.
    Se tiver dvidas sobre o contedo ou precisar de mais informaes para identificar os cargos, use "clarification_questions".
    Se no houver perguntas de clarificao, omita o campo ou retorne um array vazio.
    Se no houver erro, omita o campo "error".
    Retorne apenas o JSON.
  `;try{const i=await e.models.generateContent({model:fl,contents:t,config:{responseMimeType:"application/json"}}),r=jr(i.text);if("error"in r&&!("roles"in r)&&!("clarification_questions"in r))return{roles:[],error:r.error};const o=r;return o.error&&(!o.roles||o.roles.length===0)?{roles:[],error:o.error,clarificationQuestions:o.clarification_questions}:{roles:o.roles||[],clarificationQuestions:o.clarification_questions,error:o.roles&&o.roles.length>0?void 0:o.error}}catch(i){return console.error("Erro ao extrair cargos com IA:",i),{roles:[],error:`Erro na API Gemini ao extrair cargos: ${i.message}`}}},nM=async(c,e)=>{const t=pl();if(!t)return new Promise(r=>setTimeout(()=>{const o=[{id:Ms(),name:`Lngua Portuguesa (Mock para ${e})`,topics:[{id:"lp-topic1-mock",name:"Interpretao de Texto Avanada (Mock)",status:"Pendente",userInteractions:{questions:{},flashcards:{}}},{id:"lp-topic2-mock",name:"Gramtica Normativa e Variaes Lingusticas (Mock)",status:"Pendente",userInteractions:{questions:{},flashcards:{}}},{id:"lp-topic3-mock",name:"Redao Oficial e Discursiva (Mock)",status:"Pendente",userInteractions:{questions:{},flashcards:{}}}]},{id:Ms(),name:`Conhecimentos Especficos Detalhados de ${e} (Mock)`,topics:[{id:"ce-topic1-mock",name:`Tpico Especfico Aprofundado 1 para ${e} (Mock)`,status:"Pendente",userInteractions:{questions:{},flashcards:{}}},{id:"ce-topic2-mock",name:`Legislao Chave para ${e} (Mock)`,status:"Pendente",userInteractions:{questions:{},flashcards:{}}},{id:"ce-topic3-mock",name:`Estudo de Caso Prtico para ${e} (Mock)`,status:"Pendente",userInteractions:{questions:{},flashcards:{}}},{id:"ce-topic4-mock",name:`Atualidades Relevantes para ${e} (Mock)`,status:"Estudando",userInteractions:{questions:{},flashcards:{}}}]},{id:Ms(),name:"Raciocnio Lgico e Matemtico (Mock)",topics:[{id:"rlm-topic1-mock",name:"Lgica Proposicional (Mock)",status:"Concludo",userInteractions:{}},{id:"rlm-topic2-mock",name:"Anlise Combinatria e Probabilidade (Mock)",status:"Pendente",userInteractions:{}}]}];r({subjects:o,clarificationQuestionsFromAI:[`Este  um plano mockado e aprofundado para ${e}. (Mock)`,`Verifique se a legislao especfica para ${e} est atualizada. (Mock)`]})},1500));const i=`
    Voc  um assistente de IA ultra especializado em analisar editais de concursos pblicos brasileiros para montar planos de estudo. Sua principal tarefa  identificar e extrair, com preciso cirrgica, as MATRIAS (disciplinas) e seus respectivos TPICOS de estudo para um CARGO ESPECFICO.

    O cargo alvo para esta anlise : "${e}".

    Analise o TEXTO DO EDITAL COMPLETO fornecido abaixo. O contedo programtico pode estar em sees como 'Contedo Programtico', 'Conhecimentos Bsicos', 'Conhecimentos Especficos', 'Conhecimentos Comuns a todos os cargos', 'Anexos', ou listas de matrias ao final do documento. Sua tarefa  encontr-lo, onde quer que esteja.
    Foque EXCLUSIVAMENTE nas sees que descrevem o que o candidato precisa estudar para o cargo de "${e}". Ignore informaes sobre inscries, datas, requisitos gerais que no sejam contedo de estudo.
    Se o edital mencionar mltiplos cargos, filtre o contedo APENAS para "${e}". Se o cargo "${e}" no for encontrado explicitamente no detalhamento do contedo, tente inferir com base em cargos similares ou sees gerais que se aplicariam (ex: 'Conhecimentos Bsicos para todos os cargos de Nvel Superior'), mas indique isso nas "clarification_questions".

    Quando encontrar uma seo de "LEGISLAO", no a liste como um nico tpico gigante. Em vez disso, tente agrupar leis relacionadas em tpicos menores e mais gerenciveis. Por exemplo, se houver 'Lei 8.112/90', 'Lei 9.784/99', 'Decreto X', transforme-os em tpicos como "Regime Jurdico dos Servidores Pblicos (Lei 8.112/90)", "Processo Administrativo Federal (Lei 9.784/99)", "Decreto Regulamentador X", ou agrupe-os sob uma matria como "Direito Administrativo - Legislao Especfica". Se uma lista de leis for muito extensa e variada, crie tpicos para as 2-3 leis mais importantes e um tpico genrico como "Demais legislaes citadas" ou agrupe-as tematicamente se possvel.

    TEXTO DO EDITAL (pode ser extenso, analise-o completamente):
    ---
    ${c.substring(0,25e4)} 
    ---

    OBJETIVO: Transformar o contedo programtico encontrado em uma estrutura JSON clara, pronta para ser usada em um plano de estudos.

    ESTRUTURA JSON ESPERADA:
    {
      "subjects": [
        {
          "name": "Nome da Matria 1 (ex: Lngua Portuguesa)",
          "topics": [
            "Tpico 1.1 (ex: Interpretao de texto)",
            "Tpico 1.2 (ex: Concordncia verbal e nominal)"
          ]
        },
        {
          "name": "Nome da Matria 2 (ex: Direito Administrativo para ${e})",
          "topics": [
            "Tpico 2.1 (ex: Atos Administrativos)",
            "Tpico 2.2 (ex: Licitaes e Contratos - Lei 14.133/2021)"
          ]
        }
      ],
      "clarification_questions": [ 
        "Pergunta de clarificao especfica sobre o contedo de ${e}?",
        "Ex: O tpico 'Legislao XYZ' se refere a qual norma especfica para ${e}?"
      ],
      "error": "Mensagem de erro apenas se for IMPOSSVEL extrair o contedo programtico para ${e} do texto fornecido, mesmo aps tentativa de inferncia e busca exaustiva."
    }

    INSTRUES ADICIONAIS IMPORTANTES:
    1.  **PRECISO NO CARGO**: Extraia somente o que for de "${e}". Seja meticuloso. Diferencie claramente entre conhecimentos bsicos (comuns a vrios cargos) e conhecimentos especficos do "${e}". Se houver sees como "Conhecimentos Gerais para todos os cargos de Nvel Superior" e o "${e}" for de nvel superior, inclua esses tpicos.
    2.  **IDENTIFICAO DE MATRIAS**: Procure por cabealhos ou divises que indiquem diferentes matrias/disciplinas. Use nomes claros e concisos.
    3.  **EXTRAO DE TPICOS**:
        *   Dentro de cada matria, liste os tpicos de estudo detalhados.
        *   LIMPEZA: Tente normalizar os tpicos: remova numerao excessiva (ex: "1.2.3. Assunto" deve virar "Assunto"), marcadores (como '*') ou prefixos muito genricos (ex: "Contedo programtico de: Assunto" para "Assunto"), mantendo a essncia do que precisa ser estudado.
        *   DETALHAMENTO: Se um tpico principal tiver sub-tpicos importantes listados sequencialmente, liste-os como tpicos separados.
    4.  **CONTEDO INEXISTENTE/VAGO**: Se o texto fornecido no contiver um contedo programtico claro para "${e}", informe isso no campo "error".
    5.  **JSON VLIDO**: A sada DEVE ser um JSON estritamente vlido. Todos os valores de string dentro do JSON devem ser strings JSON vlidas (ex: aspas duplas internas devem ser escapadas como \\").

    Priorize a qualidade, relevncia e detalhamento da extrao para o cargo "${e}".
  `;try{const r=await t.models.generateContent({model:fl,contents:i,config:{responseMimeType:"application/json"}}),o=jr(r.text);if("error"in o&&!("subjects"in o)&&!("clarification_questions"in o))return{subjects:[],error:o.error,clarificationQuestionsFromAI:void 0};const d=o;if(d.error||!d.subjects||d.subjects.length===0){const p=`No foi possvel extrair as matrias e tpicos para o cargo "${e}" a partir do edital fornecido. Verifique se o PDF contm o contedo programtico detalhado para este cargo ou se o cargo foi digitado corretamente. Tente novamente ou verifique se o edital est completo.`;return{subjects:[],error:d.error||p,clarificationQuestionsFromAI:d.clarification_questions}}return{subjects:d.subjects.map(p=>({id:Ms(),name:p.name,topics:p.topics.map(m=>({id:Ms(),name:m,status:"Pendente",userInteractions:{questions:{},flashcards:{}},content:{summary:void 0,questions:[],flashcards:[],discursiveQuestions:[]}}))})),clarificationQuestionsFromAI:d.clarification_questions}}catch(r){return console.error("Erro ao analisar edital com IA:",r),{subjects:[],error:`Erro na API Gemini ao analisar o edital: ${r.message}. Verifique a conexo e a chave da API.`}}},n_=async(c,e,t,i)=>{const r=pl();if(!r)return new Promise(p=>setTimeout(()=>{if(t===Ue.SUMMARY)p({summary:`## ${e} (Resumo Mockado Aprimorado)

### Introduo
Este  um resumo **mockado** e aprimorado sobre "${e}", demonstrando uma estrutura mais rica. A IA real produzir contedo mais detalhado e especfico.

### Conceitos Fundamentais (Mock)
*   **Termo Chave A:** Explicao detalhada do Termo Chave A, com **negrito** em partes cruciais e *itlico* para nfase. Exemplo prtico: ...
*   **Termo Chave B:** Abordagem aprofundada, incluindo um **ALERTA:** sobre um erro comum.

#### Subconceito B.1 (Mock)
   Detalhes sobre este subconceito importante.

### Exemplos Prticos (Mock)
| Situao      | Aplicao de ${e}      |
|---------------|-----------------------------|
| Cenrio 1     | Descrio da aplicao aqui |
| Cenrio 2     | Outra descrio importante  |

> **PONTO DE ATENO:** Lembre-se que a prtica leva  perfeio neste tpico! (Mock)

> **DICA DE OURO:** Revise este tpico utilizando flashcards para melhor fixao. (Mock)

### Concluso (Mock)
Este resumo cobriu os aspectos essenciais de "${e}". Para aprofundar, consulte a bibliografia recomendada e resolva questes de concursos anteriores. (Mock)`});else if(t===Ue.QUESTIONS){const m=[{id:Ms(),questionText:`Com base no resumo, qual  o principal aspecto de "${e}"? (Mock)`,options:["Opo A (do resumo)","Opo B (do resumo)","Opo C (relacionada)","Opo D (distrator)"],correctAnswerIndex:0,explanation:"Explicao mockada detalhada baseada no resumo. (Mock)",attempts:0},{id:Ms(),questionText:`Considerando o resumo fornecido sobre "${e}", analise a seguinte afirmao: ... (Mock)`,options:["Verdadeira","Falsa","Parcialmente Verdadeira","No abordado no resumo"],correctAnswerIndex:1,explanation:"Justificativa baseada no resumo. (Mock)",attempts:0}];p({questions:m})}else if(t===Ue.FLASHCARDS){const m=[{id:Ms(),front:`(Baseado no resumo) Defina: ${e} (Mock)`,back:`(Baseado no resumo) Definio completa de ${e}. (Mock)`,reviewCount:0,lastReviewedTimestamp:0},{id:Ms(),front:`(Baseado no resumo) Ponto chave de ${e}? (Mock)`,back:"(Baseado no resumo) Explicao do ponto chave. (Mock)",reviewCount:0,lastReviewedTimestamp:0}];p({flashcards:m})}else if(t===Ue.DISCURSIVE_QUESTIONS){const m=[{id:Ms(),questionText:`Com base no resumo de "${e}", discorra sobre seus desafios e implicaes. (Mock)`,modelAnswerOutline:`### Roteiro de Resposta (Baseado no Resumo - Mock):
1.  **Introduo:** Reafirmar conceito principal do resumo.
2.  **Desafio 1 (do resumo):** Detalhar.
3.  **Implicao 1 (do resumo):** Detalhar.
4.  **Concluso:** Sntese.`}];p({discursiveQuestions:m})}},1e3));let o="",d="text",h=`Para o tpico "${e}" da matria "${c}".`;i&&(h=`Considerando o seguinte resumo sobre o tpico "${e}" (matria "${c}"):
---RESUMO---
${i}
---FIM DO RESUMO---
`),t===Ue.SUMMARY?o=`
      Voc  um Mestre Catedrtico e Didata Excepcional, especializado em criar materiais de estudo aprofundados e visualmente organizados para concursos pblicos de alto nvel.
      Seu objetivo  gerar um RESUMO COMPLETO E COMPLEXO para o tpico "${e}" da matria "${c}".
      ${h}

      O resumo DEVE ser uma obra de arte didtica, utilizando Markdown de forma rica e estruturada. Siga RIGOROSAMENTE as seguintes diretrizes:

      **ESTRUTURA E CONTEDO OBRIGATRIOS:**
      1.  **TTULO PRINCIPAL:** Use um H2 (##) para o ttulo do resumo, que deve ser o nome do tpico. (O H1  implcito).
      2.  **INTRODUO PERSUASIVA (H3 - ### Introduo):**
          *   Apresente o tpico de forma envolvente, destacando sua importncia e relevncia para o concurso.
          *   Fornea um breve roteiro do que ser abordado no resumo.
      3.  **SEES DETALHADAS (Use H3 - ### para ttulos de seo principal, e H4 - #### para subsees internas, se necessrio):**
          *   **Conceitos Fundamentais (### Definies e Conceitos Essenciais):** Explique os pilares tericos do tpico. Use listas (\`* Item\` ou \`1. Item\`) para clareza. Defina termos tcnicos com **negrito**.
          *   **Aprofundamento e Exemplos Prticos (### Anlise Aprofundada com Exemplos Detalhados):** V alm do bsico. Fornea explicaes detalhadas, cenrios de aplicao e exemplos prticos elaborados. Se pertinente, use subsees (#### Exemplo Prtico 1, #### Estudo de Caso).
          *   **Legislao e Normas Aplicveis (### Marco Legal e Normativo):** Se o tpico envolver leis, decretos, portarias, etc., liste as principais e explique seus pontos mais relevantes para o tpico. Use citaes de artigos importantes se necessrio.
          *   **Pontos Crticos e Controvrsias (### Pontos de Ateno e Controvrsias Doutrinrias):** Destaque as reas mais complexas, pegadinhas comuns, ou diferentes entendimentos sobre o tema (se houver).
          *   **Como o Tema  Cobrado em Provas (### Incidncia em Concursos e Dicas Estratgicas):** Fornea insights sobre como o tpico costuma aparecer em questes de concurso. D dicas de estudo especficas para este tpico.
          *   **(Opcional, se aplicvel) Glossrio de Termos Tcnicos (### Glossrio Chave):** Se o tpico for muito especfico e utilizar jarges, crie um pequeno glossrio. Formate como: \`**Termo:** Definio.\`
      4.  **CONCLUSO E PRXIMOS PASSOS (### Concluso e Recomendaes de Estudo):**
          *   Recapitule os pontos mais importantes do resumo.
          *   Sugira prximos passos para o estudante, como tpicos relacionados a revisar ou tipos de questes a praticar.

      **FORMATAO E DESTAQUES VISUAIS (Markdown):**
      *   **NVEIS DE CABEALHO:** Use H2 (##) para o ttulo do resumo, H3 (###) para sees principais, e H4 (####) para subsees.
      *   **NEGITO E ITLICO:** Use \`**negrito**\` para termos cruciais, definies importantes, e ttulos de elementos especiais. Use \`*itlico*\` para nfase, termos estrangeiros, ou nomes de obras.
      *   **LISTAS:** Use listas numeradas ou com marcadores para enumerar itens, caractersticas, etc.
      *   **TABELAS (Simples):** Se apropriado (ex: para comparar conceitos, listar vantagens/desvantagens), use tabelas Markdown simples.
          Exemplo de Tabela:
          \`\`\`
          | Caracterstica | Descrio A | Descrio B |
          |----------------|-------------|-------------|
          | Ponto 1        | Detalhe A1  | Detalhe B1  |
          | Ponto 2        | Detalhe A2  | Detalhe B2  |
          \`\`\`
      *   **BLOCOS DE DESTAQUE ESPECIAIS (OBRIGATRIO O USO DESTES PREFIXOS EXATOS EM BLOCKQUOTES):**
          *   \`> **PONTO DE ATENO:** Texto importante que requer cuidado.\`
          *   \`> **ALERTA DE PEGADINHA:** Cuidado com este erro comum ou detalhe que derruba candidatos.\`
          *   \`> **MNEMNICO (Nome do Mnemnico):** Para memorizar X, Y, Z, pense em A, B, C.\`
          *   \`> **DICA DE OURO:** Um conselho estratgico valioso para este tpico.\`
          *   \`> **JURISPRUDNCIA RELEVANTE:** STF/STJ: (Resumo da deciso e como afeta o tpico).\` (Se aplicvel)
      *   **CITAES:** Se citar um autor ou trecho de lei, use blockquotes simples (\`> Texto citado.\`).

      **TOM E QUALIDADE:**
      *   Linguagem formal, precisa, clara e extremamente didtica.
      *   Profundidade analtica, mas acessvel.
      *   Evite redundncias. Seja completo, mas conciso dentro de cada explicao.
      *   O resumo deve ser substancial, visando entre 600 e 1200 palavras, dependendo da complexidade inerente ao tpico.

      **REGRAS FINAIS:**
      *   Responda EXCLUSIVAMENTE com o contedo Markdown do resumo. No inclua saudaes, explicaes sobre o que voc est fazendo, ou qualquer texto fora do resumo em si.
      *   Assegure-se de que todo o Markdown seja sintaticamente correto e pronto para renderizao.
    `:t===Ue.QUESTIONS?(d="json",o=`
      Voc  um especialista em criar questes de mltipla escolha de alto nvel para ${c}.
      ${h}
      Crie 3 (trs) questes de mltipla escolha DESAFIADORAS e BEM ELABORADAS baseadas ${i?"NO RESUMO FORNECIDO":`no tpico "${e}"`}.
      Cada questo deve:
      1.  Ter 4 alternativas, apenas UMA correta.
      2.  Abordar aspectos relevantes, nuances ou pontos crticos ${i?"do resumo":"do tpico"}.
      3.  Possuir distratores plausveis.
      4.  Incluir uma explicao DETALHADA para a resposta correta E para CADA DISTRATOR.
      Formate a sada como um array JSON de objetos (ESTRITAMENTE JSON).
      Importante: Os valores de string dentro do JSON devem ser strings JSON vlidas (ex: aspas duplas internas devem ser escapadas como \\").
      Exemplo de formato:
      [
        {
          "questionText": "...", "options": ["A", "B", "C", "D"], "correctAnswerIndex": 0, "explanation": "..."
        }
      ]
    `):t===Ue.FLASHCARDS?(d="json",o=`
      Voc  um especialista em criar flashcards eficazes para ${c}.
      ${h}
      Crie 3 (trs) flashcards baseados ${i?"NO RESUMO FORNECIDO":`no tpico "${e}"`}.
      Frente: pergunta/termo. Verso: resposta/definio concisa mas completa.
      Formate a sada como um array JSON de objetos (ESTRITAMENTE JSON).
      Importante: Os valores de string dentro do JSON devem ser strings JSON vlidas (ex: aspas duplas internas devem ser escapadas como \\").
      Exemplo de formato:
      [
        { "front": "...", "back": "..." }
      ]
    `):t===Ue.DISCURSIVE_QUESTIONS&&(d="json",o=`
      Voc  um especialista em elaborar questes dissertativas complexas para ${c}.
      ${h}
      Crie 1 ou 2 questes dissertativas que exijam anlise crtica, baseadas ${i?"NO RESUMO FORNECIDO":`no tpico "${e}"`}.
      Para cada questo, fornea um "Roteiro de Resposta Esperada" detalhado em Markdown.
      Formate a sada como um array JSON de objetos (ESTRITAMENTE JSON).
      Importante: Os valores de string dentro do JSON (especialmente 'questionText' e 'modelAnswerOutline') devem ser strings JSON vlidas. Isso significa que caracteres especiais como aspas duplas (") e barras invertidas (\\) dentro do texto do 'questionText' ou do 'modelAnswerOutline' DEVEM SER ESCAPADOS (ex: \\" para aspas duplas, \\\\ para barra invertida, \\n para nova linha DENTRO DA STRING JSON).
      Exemplo de formato:
      [
        {
          "questionText": "Considerando o resumo, discuta a aplicabilidade de X em Y. Inclua \\"exemplos prticos\\".",
          "modelAnswerOutline": "### Roteiro de Resposta Esperada:\\n1. Introduo: Defina X e Y.\\n2. Desenvolvimento: Detalhe a aplicao e os \\"exemplos prticos\\".\\n   - Ponto A\\n   - Ponto B\\n3. Concluso: Resuma."
        }
      ]
    `);try{const p=await r.models.generateContent({model:fl,contents:o,config:{responseMimeType:d==="json"?"application/json":void 0}});if(t===Ue.SUMMARY)return{summary:p.text};if(t===Ue.QUESTIONS){const m=jr(p.text);return"error"in m?{error:m.error}:{questions:(Array.isArray(m)?m:m?[m]:[]).map(v=>({...v,id:Ms(),attempts:0}))}}else if(t===Ue.FLASHCARDS){const m=jr(p.text);return"error"in m?{error:m.error}:{flashcards:(Array.isArray(m)?m:m?[m]:[]).map(v=>({...v,id:Ms(),reviewCount:0,lastReviewedTimestamp:0}))}}else if(t===Ue.DISCURSIVE_QUESTIONS){const m=jr(p.text);return"error"in m?{error:m.error}:{discursiveQuestions:(Array.isArray(m)?m:m?[m]:[]).map(v=>({...v,id:Ms()}))}}return{error:"Tipo de contedo desconhecido."}}catch(p){return console.error(`Erro ao gerar ${t} para ${e}:`,p),{error:`Erro na API Gemini ao gerar ${t}: ${p.message}`}}},rM=async(c,e,t)=>{const i=pl();if(!i)return new Promise(d=>setTimeout(()=>{const h=[{subjectId:"lp-mock",topicId:"lp-topic1-mock",subjectName:"Lngua Portuguesa (Mock)",topicName:"Interpretao de Texto Avanada (Mock)",reason:"Este  um tpico fundamental e ainda est pendente. (Mock)"},{subjectId:"ce-mock",topicId:"ce-topic4-mock",subjectName:`Conhecimentos Especficos de ${t} (Mock)`,topicName:`Atualidades Relevantes para ${t} (Mock)`,reason:"Voc comeou a estudar este tpico, continue para consolidar o conhecimento. (Mock)"},{subjectId:"rlm-mock",topicId:"rlm-topic1-mock",subjectName:"Raciocnio Lgico (Mock)",topicName:"Lgica Proposicional (Mock)",reason:"Este tpico foi marcado para reviso em flashcards. tima hora para consolidar! (Mock)"}];d({suggestions:h,generalAdvice:"Mantenha a consistncia! Revisar tpicos com flashcards marcados como 'difceis' ou 'mdios' pode ser muito produtivo. (Mock)"})},1e3));const r=c==null?void 0:c.subjects.map(d=>({id:d.id,name:d.name,topics:d.topics.map(h=>{var p,m;return{id:h.id,name:h.name,status:h.status,flashcardAssessments:(p=h.userInteractions)!=null&&p.flashcards?Object.values(h.userInteractions.flashcards).map(x=>({assessment:x.selfAssessment,reviewCount:x.reviewCount,lastReviewed:x.lastReviewedTimestamp?new Date(x.lastReviewedTimestamp).toLocaleDateString():"nunca"})):[],questionPerformance:(m=h.userInteractions)!=null&&m.questions?Object.values(h.userInteractions.questions).map(x=>({attempts:x.attempts,correct:x.isCorrect})):[]}})})),o=`
      Voc  um Coach de Estudos especializado em concursos pblicos brasileiros. Seu objetivo  analisar o progresso de estudo de um candidato e fornecer sugestes personalizadas de tpicos para estudar ou revisar, alm de um conselho geral de estudo.
      
      Cargo Alvo do Candidato: "${t}"
      
      Progresso Atual do Plano de Estudos (JSON), incluindo status dos tpicos, autoavaliao de flashcards ('easy', 'medium', 'hard', 'unseen'), contagem de revises, ltima reviso, e performance em questes (tentativas, acerto):
      ${JSON.stringify(r,null,2).substring(0,2e4)}

      Com base no progresso atual, sugira de 2 a 4 tpicos para o candidato focar. Para cada sugesto, fornea:
      - subjectId, topicId, subjectName, topicName.
      - reason: Justificativa (1-2 frases concisas) do porqu este tpico  uma boa sugesto agora, considerando o progresso.

      Prioridades para sugestes (em ordem de importncia):
      1.  Tpicos com flashcards avaliados como 'hard' e que no foram revisados recentemente (ex: >3 dias).
      2.  Tpicos onde o usurio errou mltiplas questes (ex: >50% de erro ou mltiplas tentativas).
      3.  Tpicos 'Pendente' que so cruciais (ex: "Fundamentos de...", "Introduo a...") ou pr-requisitos para outros.
      4.  Tpicos 'Estudando' para incentivar a concluso, especialmente se o progresso parece estagnado.
      5.  Tpicos com flashcards avaliados como 'medium' para reviso, especialmente se no revisados recentemente.
      6.  Tpicos 'Concludo' importantes para reviso espaada (ex: revisados h mais de 7-10 dias), especialmente se foram difceis inicialmente.

      Alm das sugestes de tpicos, fornea um "generalAdvice" (conselho geral de estudo) curto (1-3 frases), motivador e especfico para a situao atual do progresso, se possvel. Ex: "Voc est indo bem em X, mas foque em revisar Y onde teve mais dificuldade."

      Formate sua resposta como um objeto JSON (ESTRITAMENTE JSON):
      {
        "suggestions": [
          { "subjectId": "...", "topicId": "...", "subjectName": "...", "topicName": "...", "reason": "..." }
        ],
        "generalAdvice": "Seu conselho geral aqui."
      }
      Importante: Os valores de string dentro do JSON devem ser strings JSON vlidas (ex: aspas duplas internas devem ser escapadas como \\").
      Se no houver plano de estudos ou tpicos, retorne um array "suggestions" vazio e um conselho geral genrico sobre como comear.
    `;try{const d=await i.models.generateContent({model:fl,contents:o,config:{responseMimeType:"application/json"}}),h=jr(d.text);return"error"in h?{suggestions:[],error:h.error}:{suggestions:h.suggestions||[],generalAdvice:h.generalAdvice}}catch(d){return console.error("Erro ao obter sugestes de estudo da IA:",d),{suggestions:[],error:`Erro na API Gemini: ${d.message}`}}},oM=async(c,e,t,i,r)=>{const o=pl();if(!o)return new Promise(m=>setTimeout(()=>{m({answer:`Resposta mockada para sua pergunta sobre "${c.substring(0,30)}...": A IA est aqui para ajudar com o edital e estratgias. (Mock)`})},800));const d=r==null?void 0:r.subjects.map(m=>({name:m.name,topics:m.topics.map(x=>({name:x.name,status:x.status}))})),h=e.slice(-6).map(m=>`${m.sender==="user"?"Usurio":"CoachIA"}: ${m.text}`).join(`
`),p=`
    Voc  um Coach de Estudos Inteligente (CoachIA), especializado em auxiliar candidatos de concursos pblicos no Brasil.
    Seu tom  amigvel, prestativo e objetivo.

    Informaes de Contexto:
    - Cargo Alvo do Usurio: "${i}"
    - Edital Resumido (primeiras 15000 caracteres): 
      ---
      ${t.substring(0,15e3)}
      ---
    - Estrutura do Plano de Estudos do Usurio (Matrias, Tpicos e Status - PRIMEIROS 5000 CARACTERES JSON):
      ${JSON.stringify(d,null,2).substring(0,5e3)}
    
    Histrico Recente da Conversa:
    ---
    ${h}
    ---

    Pergunta do Usurio: "${c}"

    Sua Tarefa:
    Responda  pergunta do usurio da forma mais til e concisa possvel, utilizando o contexto fornecido.
    Se a pergunta for sobre um tpico especfico, tente relacion-lo com o material do edital ou seu status no plano.
    Se a pergunta for sobre estratgia de estudo, fornea dicas prticas.
    Se voc no souber a resposta ou a pergunta for muito fora do escopo de concursos, admita isso de forma educada.
    Evite respostas excessivamente longas. Mantenha o foco.

    Formate da Sada: Retorne um objeto JSON (ESTRITAMENTE JSON):
    {
      "answer": "Sua resposta aqui."
    }
    Importante: O valor da string "answer" deve ser uma string JSON vlida (ex: aspas duplas internas devem ser escapadas como \\").
  `;try{const m=await o.models.generateContent({model:fl,contents:p,config:{responseMimeType:"application/json"}}),x=jr(m.text);return"error"in x?{answer:"",error:x.error}:{answer:x.answer||"Desculpe, no consegui processar uma resposta no momento."}}catch(m){return console.error("Erro ao obter resposta do Coach IA:",m),{answer:"",error:`Erro na API Gemini: ${m.message}`}}},lM=async(c,e,t,i)=>{const r=pl();if(!r)return new Promise(h=>setTimeout(()=>{h({type:"general_advice",title:"Conselho Adicional (Mock)",content:`Para aprofundar em "${e}", revise os pontos chave do resumo e tente aplicar os conceitos em exemplos prticos. Se certas reas ainda parecerem confusas, procure por vdeos ou artigos complementares. (Mock)`})},1200));let o="O usurio solicitou ajuda adicional para este tpico.";if(i){const h={total:0,correct:0,incorrect:0,attemptsSum:0};i.questions&&Object.values(i.questions).forEach(m=>{h.total++,m.isCorrect?h.correct++:m.isRevealed&&h.incorrect++,h.attemptsSum+=m.attempts||0});const p={total:0,easy:0,medium:0,hard:0};i.flashcards&&Object.values(i.flashcards).forEach(m=>{p.total++,m.selfAssessment==="easy"?p.easy++:m.selfAssessment==="medium"?p.medium++:m.selfAssessment==="hard"&&p.hard++}),o=`Resumo das interaes do usurio com o tpico "${e}":
    - Questes: ${h.correct} de ${h.total} corretas. Mdia de ${h.total>0?(h.attemptsSum/h.total).toFixed(1):0} tentativas por questo.
    - Flashcards: ${p.hard} marcados como 'difceis', ${p.medium} como 'mdios', ${p.easy} como 'fceis' de ${p.total} avaliados.`}const d=`
    Voc  um Tutor de IA especialista em ajudar estudantes a superar dificuldades em tpicos de estudo para concursos.
    O estudante est no tpico "${e}" da matria "${c}".
    
    Ele j possui o seguinte resumo do tpico:
    --- RESUMO ATUAL ---
    ${t||"Nenhum resumo foi gerado ainda para este tpico."}
    --- FIM DO RESUMO ---

    ${o}

    O estudante clicou em "Preciso de mais ajuda com este tpico". Sua tarefa  fornecer UMA das seguintes formas de ajuda, escolhendo a mais apropriada com base no contexto e nas interaes do usurio, ou se no houver informaes de interao suficientes, uma explicao alternativa ou analogia:

    1.  **Explicao Alternativa (alternative_explanation)**: Se houver um conceito chave que parece complexo ou se o resumo for denso, fornea uma explicao alternativa, mais simples ou com uma perspectiva diferente sobre UM PONTO CRTICO do tpico.
    2.  **Analogia (analogy)**: Crie uma analogia do dia-a-dia ou de fcil compreenso para explicar o conceito principal do tpico ou um aspecto difcil dele.
    3.  **Conceitos Fundamentais (foundational_concepts)**: Se o tpico for avanado ou o usurio parecer estar com dificuldades bsicas, liste 2-3 conceitos fundamentais (de outros tpicos ou da mesma matria) que ele deveria revisar para entender melhor "${e}".
    4.  **Conselho Geral (general_advice)**: Se as opes acima no parecerem adequadas, fornea um conselho geral sobre como abordar o estudo deste tpico.

    Formate sua resposta como um objeto JSON (ESTRITAMENTE JSON) com a seguinte estrutura:
    {
      "type": "tipo_da_ajuda_escolhida (ex: 'analogy', 'alternative_explanation', 'foundational_concepts', 'general_advice')",
      "title": "Ttulo para a Ajuda (ex: 'Entendendo ${e} com uma Analogia', 'Revisite Estes Conceitos Primeiro')",
      "content": "O contedo da sua ajuda em formato Markdown. Use pargrafos, listas, e **negrito** conforme apropriado para clareza."
    }
    Importante: O valor da string "content" deve ser uma string JSON vlida (especialmente escape aspas duplas internas com \\").
    Seja conciso, mas til. O objetivo  desbloquear o entendimento do estudante.
  `;try{const h=await r.models.generateContent({model:fl,contents:d,config:{responseMimeType:"application/json"}}),p=jr(h.text);return"error"in p?{error:p.error}:{...p,promptUsed:void 0}}catch(h){return console.error(`Erro ao gerar ajuda adicional para ${e}:`,h),{error:`Erro na API Gemini ao gerar ajuda adicional: ${h.message}`}}},Vx=async c=>{const e=pl();if(!e)throw new Error("API_KEY no configurada para Gemini AI");try{return(await e.models.generateContent({model:fl,contents:[{parts:[{text:c}]}]})).text||"Resposta no disponvel"}catch(t){throw console.error("Erro ao gerar contedo com Gemini:",t),t}};class cM{generatePrompt(e){const{topic:t,difficulty:i,quantity:r,category:o,language:d="pt-BR"}=e;return`
Voc  um especialista em educao e criao de questes. Crie ${r} questes de mltipla escolha sobre o tpico "${t}" com nvel de dificuldade ${{easy:"bsico - conceitos fundamentais e definies",medium:"intermedirio - aplicao de conceitos e anlise",hard:"avanado - sntese, avaliao crtica e resoluo de problemas complexos"}[i]}.

INSTRUES IMPORTANTES:
1. Cada questo deve ter exatamente 4 alternativas (A, B, C, D)
2. Apenas uma alternativa deve estar correta
3. Inclua uma explicao clara para a resposta correta
4. As questes devem ser educativas e bem formuladas
5. Evite pegadinhas desnecessrias, foque no conhecimento real
6. Use linguagem clara e acessvel em portugus brasileiro
${o?`7. Categoria: ${o}`:""}

FORMATO DE RESPOSTA (JSON):
{
  "questions": [
    {
      "questionText": "Pergunta aqui?",
      "options": ["Alternativa A", "Alternativa B", "Alternativa C", "Alternativa D"],
      "correctAnswerIndex": 0,
      "explanation": "Explicao detalhada da resposta correta",
      "difficulty": "${i}",
      "topic": "${t}",
      "category": "${o||"Geral"}"
    }
  ]
}

Certifique-se de retornar um JSON vlido com exatamente ${r} questes.
`}async generateQuestions(e){try{const t=this.generatePrompt(e);let r=await Vx(t);r.includes("```json")?r=r.split("```json")[1].split("```")[0]:r.includes("```")&&(r=r.split("```")[1].split("```")[0]);const o=JSON.parse(r.trim());if(!o.questions||!Array.isArray(o.questions))throw new Error("Formato de resposta invlido - no contm array de questes");return o.questions.map((h,p)=>{if(!h.questionText||!Array.isArray(h.options)||h.options.length!==4)throw new Error(`Questo ${p+1} est malformada`);if(typeof h.correctAnswerIndex!="number"||h.correctAnswerIndex<0||h.correctAnswerIndex>3)throw new Error(`ndice de resposta correta invlido na questo ${p+1}`);return{id:`generated_${Date.now()}_${p}`,questionText:h.questionText,options:h.options,correctAnswerIndex:h.correctAnswerIndex,explanation:h.explanation||"Explicao no fornecida",difficulty:e.difficulty,topic:e.topic,category:e.category||"Geral"}})}catch(t){return console.error("Erro ao gerar questes:",t),this.getFallbackQuestions(e)}}getFallbackQuestions(e){return[{id:`fallback_${Date.now()}_0`,questionText:`Questo de exemplo sobre ${e.topic} (nvel ${e.difficulty})`,options:["Alternativa A - Esta  a resposta correta","Alternativa B - Esta  incorreta","Alternativa C - Esta tambm  incorreta","Alternativa D - Esta tambm  incorreta"],correctAnswerIndex:0,explanation:`Esta  uma questo de exemplo gerada automaticamente sobre ${e.topic}. A resposta correta  a alternativa A.`,difficulty:e.difficulty,topic:e.topic,category:e.category||"Geral"}].slice(0,e.quantity)}async generateQuestionsFromContent(e,t="medium",i=5,r){const o=`
Baseando-se no contedo fornecido abaixo, crie ${i} questes de mltipla escolha de nvel ${t}.

CONTEDO:
${e}

INSTRUES:
1. As questes devem ser baseadas exclusivamente no contedo fornecido
2. Cada questo deve ter 4 alternativas
3. Inclua explicao para cada resposta correta
4. Varie o tipo de questo (definies, aplicaes, comparaes, etc.)
5. Mantenha a dificuldade ${t}

FORMATO DE RESPOSTA (JSON):
{
  "questions": [
    {
      "questionText": "Pergunta baseada no contedo?",
      "options": ["Opo A", "Opo B", "Opo C", "Opo D"],
      "correctAnswerIndex": 0,
      "explanation": "Explicao baseada no contedo fornecido",
      "difficulty": "${t}",
      "topic": "Tpico extrado do contedo",
      "category": "${r||"Contedo Personalizado"}"
    }
  ]
}
`;try{let h=await Vx(o);h.includes("```json")?h=h.split("```json")[1].split("```")[0]:h.includes("```")&&(h=h.split("```")[1].split("```")[0]);const p=JSON.parse(h.trim());if(!p.questions||!Array.isArray(p.questions))throw new Error("Formato de resposta invlido");return p.questions.map((m,x)=>({id:`content_${Date.now()}_${x}`,questionText:m.questionText,options:m.options,correctAnswerIndex:m.correctAnswerIndex,explanation:m.explanation||"Explicao no fornecida",difficulty:t,topic:m.topic||"Contedo Personalizado",category:r||"Contedo Personalizado"}))}catch(d){throw console.error("Erro ao gerar questes do contedo:",d),d}}async generateAdaptiveQuestions(e,t,i,r=10){const o=e.length>0?e:t.length>0?t:["Conhecimentos Gerais"],d=`
Crie ${r} questes adaptativas focando nas seguintes reas que precisam de reforo: ${o.join(", ")}.

DIRETRIZES:
1. 70% das questes devem focar nas reas fracas: ${e.join(", ")}
2. 30% das questes podem abordar reas conhecidas para reforo: ${t.join(", ")}
3. Dificuldade base: ${i}
4. Varie ligeiramente a dificuldade para desafio progressivo
5. Questes devem ser educativas e construtivas

FORMATO DE RESPOSTA (JSON):
{
  "questions": [
    {
      "questionText": "Pergunta adaptativa?",
      "options": ["Opo A", "Opo B", "Opo C", "Opo D"],
      "correctAnswerIndex": 0,
      "explanation": "Explicao educativa",
      "difficulty": "easy|medium|hard",
      "topic": "Tpico especfico",
      "category": "Categoria da rea de foco"
    }
  ]
}
`;try{let p=await Vx(d);return p.includes("```json")?p=p.split("```json")[1].split("```")[0]:p.includes("```")&&(p=p.split("```")[1].split("```")[0]),JSON.parse(p.trim()).questions.map((x,v)=>({id:`adaptive_${Date.now()}_${v}`,questionText:x.questionText,options:x.options,correctAnswerIndex:x.correctAnswerIndex,explanation:x.explanation||"Explicao no fornecida",difficulty:x.difficulty||i,topic:x.topic||"Adaptativo",category:x.category||"Personalizado"}))}catch(h){throw console.error("Erro ao gerar questes adaptativas:",h),h}}}const $x=new cM;console.warn("[supabaseClient] Missing VITE_SUPABASE_URL or VITE_SUPABASE_ANON_KEY. Auth/Cloud sync will be disabled.");const za=null;class uM{ensureSupabase(){throw new Error("Supabase no configurado. Verifique as variveis de ambiente.")}async saveUserEdital(e,t,i,r,o){this.ensureSupabase();try{const d={user_id:e,edital_text:t,edital_filename:i,analysis_result:r,selected_role:o,processed_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:h,error:p}=await za.from("user_editals").upsert(d,{onConflict:"user_id,edital_filename",ignoreDuplicates:!1}).select("id").single();if(p)throw console.error("Erro ao salvar edital:",p),new Error(p.message);return console.log("Edital salvo com sucesso:",h==null?void 0:h.id),(h==null?void 0:h.id)||null}catch(d){throw console.error("Falha ao salvar edital:",d),d}}async saveTopicProgress(e,t,i,r,o,d){this.ensureSupabase();try{const h={user_id:e,edital_id:t,subject_name:r,topic_name:i.name,topic_id:i.id,content_generated:i.content||{},interactions:o||{},study_time_minutes:d||0,last_studied:new Date().toISOString(),mastery_level:this.calculateMasteryLevel(i,o),updated_at:new Date().toISOString()},{data:p,error:m}=await za.from("topic_progress").upsert(h,{onConflict:"user_id,topic_id",ignoreDuplicates:!1}).select("id").single();if(m)throw console.error("Erro ao salvar progresso do tpico:",m),new Error(m.message);return console.log("Progresso do tpico salvo:",p==null?void 0:p.id),(p==null?void 0:p.id)||null}catch(h){throw console.error("Falha ao salvar progresso do tpico:",h),h}}async saveQuestionAttempt(e,t,i,r,o,d,h){this.ensureSupabase();try{const p={user_id:e,topic_progress_id:t,question_data:{id:i.id,questionText:i.questionText,options:i.options,correctAnswerIndex:i.correctAnswerIndex,explanation:i.explanation,difficulty:i.difficulty,topic:i.topic,category:i.category},selected_answer_index:r,is_correct:o,time_spent_seconds:d,hints_used:h||0,created_at:new Date().toISOString()},{data:m,error:x}=await za.from("user_question_attempts").insert(p).select("id").single();if(x)throw console.error("Erro ao salvar tentativa de questo:",x),new Error(x.message);return console.log("Tentativa de questo salva:",m==null?void 0:m.id),(m==null?void 0:m.id)||null}catch(p){throw console.error("Falha ao salvar tentativa de questo:",p),p}}async saveAICoachConversation(e,t,i){this.ensureSupabase();try{const r={user_id:e,topic_progress_id:i,messages:t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:o,error:d}=await za.from("ai_coach_conversations").upsert(r,{onConflict:"user_id,topic_progress_id",ignoreDuplicates:!1}).select("id").single();if(d)throw console.error("Erro ao salvar conversa do AI Coach:",d),new Error(d.message);return console.log("Conversa do AI Coach salva:",o==null?void 0:o.id),(o==null?void 0:o.id)||null}catch(r){throw console.error("Falha ao salvar conversa do AI Coach:",r),r}}async saveStudySession(e,t,i,r,o,d,h){this.ensureSupabase();try{const p={user_id:e,subject_name:t,topic_name:i,duration_minutes:r,session_type:o,performance_score:d,notes:h,created_at:new Date().toISOString()},{data:m,error:x}=await za.from("study_sessions").insert(p).select("id").single();if(x)throw console.error("Erro ao salvar sesso de estudo:",x),new Error(x.message);return console.log("Sesso de estudo salva:",m==null?void 0:m.id),(m==null?void 0:m.id)||null}catch(p){throw console.error("Falha ao salvar sesso de estudo:",p),p}}async getUserLatestEdital(e){this.ensureSupabase();try{const{data:t,error:i}=await za.from("user_editals").select("*").eq("user_id",e).order("processed_at",{ascending:!1}).limit(1).single();if(i){if(i.code==="PGRST116")return null;throw console.error("Erro ao buscar edital:",i),new Error(i.message)}return t}catch(t){return console.error("Falha ao buscar edital:",t),null}}async getUserTopicProgress(e,t){this.ensureSupabase();try{let i=za.from("topic_progress").select("*").eq("user_id",e).order("last_studied",{ascending:!1});t&&(i=i.eq("edital_id",t));const{data:r,error:o}=await i;if(o)throw console.error("Erro ao buscar progresso de tpicos:",o),new Error(o.message);return r}catch(i){return console.error("Falha ao buscar progresso de tpicos:",i),[]}}async getUserQuestionStats(e,t){this.ensureSupabase();try{let i=za.from("user_question_attempts").select("*").eq("user_id",e);t&&(i=i.eq("topic_progress_id",t));const{data:r,error:o}=await i;if(o)throw console.error("Erro ao buscar estatsticas de questes:",o),new Error(o.message);const d=r||[],h=d.length,p=d.filter(v=>v.is_correct).length,m=h>0?p/h*100:0,x=h>0?d.reduce((v,y)=>v+y.time_spent_seconds,0)/h:0;return{totalAttempts:h,correctAttempts:p,accuracy:m,averageTimeSeconds:x,attempts:r}}catch(i){return console.error("Falha ao buscar estatsticas de questes:",i),{totalAttempts:0,correctAttempts:0,accuracy:0,averageTimeSeconds:0,attempts:[]}}}calculateMasteryLevel(e,t){const i=e.content&&Object.keys(e.content).length>0,r=t&&Object.keys(t).length>0;return!i&&!r?"not_started":i&&!r?"learning":i&&r?"practicing":"mastered"}async saveCompleteUserData(e,t,i,r,o,d){this.ensureSupabase();try{console.log("Iniciando salvamento completo dos dados do usurio...");const h=await this.saveUserEdital(e,t,i,r,o);if(!h)throw new Error("Falha ao salvar edital");const p=[];for(const m of r.subjects)for(const x of m.topics){const v=await this.saveTopicProgress(e,h,x,m.name,{},0);v&&p.push(v)}return d&&await this.updateUserProfile(e,d),console.log(`Dados completos salvos: edital ${h}, ${p.length} tpicos`),{editalId:h,topicProgressIds:p}}catch(h){throw console.error("Erro no salvamento completo:",h),h}}async updateUserProfile(e,t){this.ensureSupabase();try{const{error:i}=await za.from("user_profiles").upsert({id:e,target_role:t.targetRole,daily_study_hours:t.dailyStudyHours,study_days:t.studyDays,study_notes:t.studyNotes,updated_at:new Date().toISOString()},{onConflict:"id"});if(i)throw console.error("Erro ao atualizar perfil:",i),new Error(i.message);console.log("Perfil do usurio atualizado com sucesso")}catch(i){throw console.error("Falha ao atualizar perfil:",i),i}}}const Gs=new uM,dM=({userId:c,topicId:e,subjectName:t,topicName:i})=>{const r={},o=X.useCallback(async(m,x,v)=>{if(!c)return null;if(r[m])return r[m];try{const y=await Gs.getUserLatestEdital(c);if(!(y!=null&&y.id))return console.warn("Nenhum edital encontrado para o usurio"),null;const S=(await Gs.getUserTopicProgress(c,y.id)).find(R=>R.topic_id===m);if(S!=null&&S.id)return r[m]=S.id,S.id;const _={id:m,name:v,description:"",estimatedStudyTimeHours:0,prerequisites:[],content:{},userInteractions:{},status:"Pendente"},j=await Gs.saveTopicProgress(c,y.id,_,x,{},0);return j?(r[m]=j,j):null}catch(y){return console.error("Erro ao obter/criar progresso do tpico:",y),null}},[c,r]),d=X.useCallback(async(m,x,v,y,E,S,_,j)=>{if(!c){console.log("Usurio no logado - tentativa no salva no Supabase");return}const R=S||e,L=_||t,D=j||i;if(!R||!L||!D){console.warn("Informaes do tpico incompletas - tentativa no salva");return}try{const z=await o(R,L,D);if(!z){console.warn("No foi possvel obter ID do progresso do tpico");return}await Gs.saveQuestionAttempt(c,z,m,x,v,y,E),console.log(" Tentativa de questo salva no Supabase")}catch(z){console.error("Erro ao salvar tentativa de questo no Supabase:",z)}},[c,o,e,t,i]),h=X.useCallback(async(m,x,v,y,E,S)=>{if(!c)return;const _=E||t||"Matria",j=S||i||"Tpico";try{await Gs.saveStudySession(c,_,j,m,x,v,y),console.log(" Sesso de estudo salva no Supabase")}catch(R){console.error("Erro ao salvar sesso de estudo:",R)}},[c,t,i]),p=X.useCallback(async(m,x,v,y)=>{if(!c||!m.length)return;const E=x||e,S=v||t,_=y||i;try{let j;E&&S&&_&&(j=await o(E,S,_)||void 0),await Gs.saveAICoachConversation(c,m,j),console.log(" Conversa do AI Coach salva no Supabase")}catch(j){console.error("Erro ao salvar conversa do AI Coach:",j)}},[c,o,e,t,i]);return{saveQuestionAttempt:d,saveStudySession:h,saveAICoachConversation:p,isEnabled:!!c}},hM=({questions:c,onComplete:e,onBack:t,category:i,topicId:r,title:o="Sistema de Questes",userId:d,subjectName:h,topicName:p})=>{const[m,x]=X.useState(null),[v,y]=X.useState(0),[E,S]=X.useState(null),[_,j]=X.useState(!1),[R,L]=X.useState(Date.now()),[D,z]=X.useState(!1),[P,H]=X.useState(Ys.getUserStats()),{saveQuestionAttempt:se,saveStudySession:re}=dM({userId:d,topicId:r,subjectName:h,topicName:p});X.useEffect(()=>{if(c.length>0){const Y=Ys.startQuizSession(c,i,r);x(Y),L(Date.now())}},[c,i,r]),X.useEffect(()=>{H(Ys.getUserStats())},[]);const ne=m==null?void 0:m.questions[v],ue=Y=>{E===null&&S(Y)},J=async()=>{if(!m||!ne||E===null)return;const Y=(Date.now()-R)/1e3,W=E===ne.correctAnswerIndex;Ys.recordAttempt(ne.id,E,W,Y,ne),se(ne,E,W,Math.round(Y),0,r,h,p).catch(M=>{console.warn("Falha ao salvar questo no Supabase:",M)});const oe={questionId:ne.id,isCorrect:W,selectedAnswerIndex:E,timeSpent:Y,timestamp:Date.now(),hintsUsed:0};m.attempts.push(oe),W&&m.correctAnswers++,j(!0),H(Ys.getUserStats())},ge=()=>{if(m)if(v<m.questions.length-1)y(Y=>Y+1),S(null),j(!1),L(Date.now());else{Ys.completeQuizSession(m);const Y=Math.round((Date.now()-m.startTime)/6e4),W=Math.round(m.correctAnswers/m.questions.length*100);re(Y,"questions",W,`Sesso de questes: ${m.correctAnswers}/${m.questions.length} corretas`,h,p).catch(oe=>{console.warn("Falha ao salvar sesso de estudo no Supabase:",oe)}),z(!0),e&&e(m)}},Ce=()=>{v>0&&(y(Y=>Y-1),S(null),j(!1),L(Date.now()))},Ie=Y=>E===null?"bg-white hover:bg-blue-50 border-gray-300 text-gray-700":Y===(ne==null?void 0:ne.correctAnswerIndex)?"bg-green-100 border-green-500 text-green-700":Y===E&&Y!==(ne==null?void 0:ne.correctAnswerIndex)?"bg-red-100 border-red-500 text-red-700":"bg-gray-100 border-gray-300 text-gray-500",ae=()=>ne?Ys.getQuestionHistory(ne.id):null,G=Y=>{const W=Math.floor(Y/60),oe=Math.floor(Y%60);return`${W}:${oe.toString().padStart(2,"0")}`};return!m||c.length===0?u.jsx(he,{className:"p-6",children:u.jsxs("div",{className:"text-center",children:[u.jsx(fu,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma questo disponvel"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"No h questes para exibir no momento."}),t&&u.jsxs(ce,{onClick:t,variant:"outline",children:[u.jsx(ti,{className:"h-4 w-4 mr-2"}),"Voltar"]})]})}):D?u.jsxs("div",{className:"space-y-6",children:[u.jsx(he,{className:"p-6",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 mb-4",children:u.jsx(hu,{className:"h-8 w-8 text-blue-600"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Sesso Concluda!"}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m.correctAnswers}),u.jsx("div",{className:"text-sm text-gray-500",children:"Acertos"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-gray-600",children:m.totalQuestions}),u.jsx("div",{className:"text-sm text-gray-500",children:"Total"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(m.score),"%"]}),u.jsx("div",{className:"text-sm text-gray-500",children:"Pontuao"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-purple-600",children:G(m.timeSpent/1e3)}),u.jsx("div",{className:"text-sm text-gray-500",children:"Tempo"})]})]})]})}),u.jsxs(he,{className:"p-6",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[u.jsx(hc,{className:"h-5 w-5 mr-2 text-yellow-500"}),"Suas Estatsticas"]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-xl font-bold text-blue-600",children:P.totalQuestions}),u.jsx("div",{className:"text-sm text-gray-500",children:"Questes Respondidas"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-xl font-bold text-green-600",children:[Math.round(P.correctPercentage),"%"]}),u.jsx("div",{className:"text-sm text-gray-500",children:"Taxa de Acerto"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-xl font-bold text-orange-600 flex items-center justify-center",children:[u.jsx(rl,{className:"h-5 w-5 mr-1"}),P.currentStreak]}),u.jsx("div",{className:"text-sm text-gray-500",children:"Sequncia Atual"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-xl font-bold text-purple-600",children:G(P.averageTimePerQuestion)}),u.jsx("div",{className:"text-sm text-gray-500",children:"Tempo Mdio"})]})]})]}),u.jsxs(he,{className:"p-6",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[u.jsx(fc,{className:"h-5 w-5 mr-2 text-indigo-500"}),"Nvel de Maestria"]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-red-600",children:P.masteryDistribution.learning}),u.jsx("div",{className:"text-sm text-red-600",children:"Aprendendo"})]}),u.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:P.masteryDistribution.practicing}),u.jsx("div",{className:"text-sm text-yellow-600",children:"Praticando"})]}),u.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-green-600",children:P.masteryDistribution.mastered}),u.jsx("div",{className:"text-sm text-green-600",children:"Dominado"})]})]})]}),u.jsx("div",{className:"flex justify-center space-x-4",children:t&&u.jsxs(ce,{onClick:t,variant:"outline",children:[u.jsx(ti,{className:"h-4 w-4 mr-2"}),"Voltar"]})})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs(he,{className:"p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:o}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[u.jsx(Rf,{className:"h-4 w-4 mr-1"}),G((Date.now()-R)/1e3)]}),u.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[u.jsx(rl,{className:"h-4 w-4 mr-1"}),"Sequncia: ",P.currentStreak]})]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(v+1)/m.questions.length*100}%`}})}),u.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mt-2",children:[u.jsxs("span",{children:["Questo ",v+1," de ",m.questions.length]}),u.jsxs("span",{children:[m.correctAnswers," acertos"]})]})]}),u.jsxs(he,{className:"p-6",children:[u.jsxs("div",{className:"mb-6",children:[ae()&&u.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:u.jsxs("div",{className:"text-sm text-gray-600",children:[u.jsx("span",{className:"font-medium",children:"Histrico:"})," ",ae().totalAttempts," tentativas, "," ",Math.round(ae().correctAttempts/ae().totalAttempts*100),"% de acerto, "," ","Nvel: ",u.jsx("span",{className:"capitalize font-medium",children:ae().masteryLevel})]})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:ne==null?void 0:ne.questionText}),u.jsx("div",{className:"space-y-3",children:ne==null?void 0:ne.options.map((Y,W)=>u.jsx("button",{onClick:()=>ue(W),disabled:E!==null,className:`w-full p-4 text-left border-2 rounded-lg transition-all ${Ie(W)} ${E===null?"hover:shadow-md":""}`,children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-gray-300 text-white text-sm mr-3",children:String.fromCharCode(65+W)}),Y,E!==null&&W===ne.correctAnswerIndex&&u.jsx(fs,{className:"ml-auto h-5 w-5"}),E===W&&W!==ne.correctAnswerIndex&&u.jsx(du,{className:"ml-auto h-5 w-5"})]})},W))})]}),_&&(ne==null?void 0:ne.explanation)&&u.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[u.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Explicao:"}),u.jsx("p",{className:"text-blue-800 text-sm",children:ne.explanation})]}),u.jsxs("div",{className:"flex justify-between mt-6",children:[u.jsxs(ce,{onClick:Ce,variant:"outline",disabled:v===0,children:[u.jsx(ti,{className:"h-4 w-4 mr-2"}),"Anterior"]}),E===null?u.jsx(ce,{onClick:J,disabled:E===null,children:"Confirmar Resposta"}):u.jsxs(ce,{onClick:ge,children:[v===m.questions.length-1?"Finalizar":"Prxima",u.jsx(pg,{className:"h-4 w-4 ml-2"})]})]})]})]})},fM=({onClose:c})=>{const[e,t]=X.useState(Ys.getUserStats()),[i,r]=X.useState("overview");X.useEffect(()=>{t(Ys.getUserStats())},[]);const o=()=>{t(Ys.getUserStats())},d=()=>{window.confirm("Tem certeza que deseja resetar todos os dados? Esta ao no pode ser desfeita.")&&(Ys.resetUserData(),o())},h=v=>{const y=Math.floor(v/3600),E=Math.floor(v%3600/60),S=Math.floor(v%60);return y>0?`${y}h ${E}m`:`${E}:${S.toString().padStart(2,"0")}`},m=(v=>v>=90?{text:"Excelente",color:"text-green-600",icon:u.jsx(hc,{className:"h-5 w-5 text-green-500"})}:v>=80?{text:"Muito Bom",color:"text-blue-600",icon:u.jsx(rl,{className:"h-5 w-5 text-blue-500"})}:v>=70?{text:"Bom",color:"text-yellow-600",icon:u.jsx(jv,{className:"h-5 w-5 text-yellow-500"})}:v>=60?{text:"Regular",color:"text-orange-600",icon:u.jsx(fc,{className:"h-5 w-5 text-orange-500"})}:{text:"Precisa Melhorar",color:"text-red-600",icon:u.jsx(Zj,{className:"h-5 w-5 text-red-500"})})(e.correctPercentage),x=({tab:v,children:y})=>u.jsx("button",{onClick:()=>r(v),className:`px-4 py-2 text-sm font-medium rounded-lg ${i===v?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:y});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[u.jsx(hu,{className:"h-8 w-8 mr-3 text-blue-600"}),"Estatsticas de Questes"]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs(ce,{onClick:o,variant:"outline",size:"sm",children:[u.jsx(nN,{className:"h-4 w-4 mr-2"}),"Atualizar"]}),c&&u.jsxs(ce,{onClick:c,variant:"outline",size:"sm",children:[u.jsx(Gj,{className:"h-4 w-4 mr-2"}),"Fechar"]})]})]}),u.jsx(he,{className:"p-1",children:u.jsxs("div",{className:"flex space-x-1",children:[u.jsx(x,{tab:"overview",children:"Viso Geral"}),u.jsx(x,{tab:"history",children:"Histrico"}),u.jsx(x,{tab:"categories",children:"Categorias"}),u.jsx(x,{tab:"achievements",children:"Conquistas"})]})}),i==="overview"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxs(he,{className:"p-6 text-center",children:[u.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:e.totalQuestions}),u.jsx("div",{className:"text-sm text-gray-600",children:"Questes Respondidas"})]}),u.jsxs(he,{className:"p-6 text-center",children:[u.jsxs("div",{className:`text-3xl font-bold mb-2 ${m.color}`,children:[Math.round(e.correctPercentage),"%"]}),u.jsxs("div",{className:"text-sm text-gray-600 flex items-center justify-center",children:[m.icon,u.jsx("span",{className:"ml-1",children:m.text})]})]}),u.jsxs(he,{className:"p-6 text-center",children:[u.jsxs("div",{className:"text-3xl font-bold text-orange-600 mb-2 flex items-center justify-center",children:[u.jsx(rl,{className:"h-8 w-8 mr-2"}),e.currentStreak]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Sequncia Atual"})]}),u.jsxs(he,{className:"p-6 text-center",children:[u.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:h(e.averageTimePerQuestion)}),u.jsx("div",{className:"text-sm text-gray-600",children:"Tempo Mdio"})]})]}),u.jsxs(he,{className:"p-6",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[u.jsx(fc,{className:"h-5 w-5 mr-2 text-indigo-500"}),"Distribuio de Maestria"]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{className:"text-center p-6 bg-red-50 rounded-xl",children:[u.jsx("div",{className:"text-3xl font-bold text-red-600 mb-2",children:e.masteryDistribution.learning}),u.jsx("div",{className:"text-sm font-medium text-red-600 mb-1",children:"Aprendendo"}),u.jsx("div",{className:"text-xs text-red-500",children:"Questes em desenvolvimento"})]}),u.jsxs("div",{className:"text-center p-6 bg-yellow-50 rounded-xl",children:[u.jsx("div",{className:"text-3xl font-bold text-yellow-600 mb-2",children:e.masteryDistribution.practicing}),u.jsx("div",{className:"text-sm font-medium text-yellow-600 mb-1",children:"Praticando"}),u.jsx("div",{className:"text-xs text-yellow-500",children:"Questes em progresso"})]}),u.jsxs("div",{className:"text-center p-6 bg-green-50 rounded-xl",children:[u.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:e.masteryDistribution.mastered}),u.jsx("div",{className:"text-sm font-medium text-green-600 mb-1",children:"Dominado"}),u.jsx("div",{className:"text-xs text-green-500",children:"Questes dominadas"})]})]})]})]}),i==="history"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs(he,{className:"p-6",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[u.jsx(Rf,{className:"h-5 w-5 mr-2 text-gray-600"}),"Sesses Recentes"]}),e.recentSessions.length===0?u.jsxs("div",{className:"text-center py-8",children:[u.jsx("div",{className:"text-gray-400 mb-2",children:"Nenhuma sesso encontrada"}),u.jsx("div",{className:"text-sm text-gray-500",children:"Suas sesses de questes aparecero aqui"})]}):u.jsx("div",{className:"space-y-3",children:e.recentSessions.reverse().map((v,y)=>u.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-gray-900",children:v.category||"Sesso Geral"}),u.jsx("div",{className:"text-sm text-gray-500",children:new Date(v.startTimestamp).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[Math.round(v.score),"%"]}),u.jsxs("div",{className:"text-sm text-gray-500",children:[v.correctAnswers,"/",v.totalQuestions]})]})]},v.id))})]}),u.jsxs(he,{className:"p-6",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[u.jsx(hc,{className:"h-5 w-5 mr-2 text-yellow-500"}),"Recordes Pessoais"]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-yellow-600 mb-1",children:e.longestStreak}),u.jsx("div",{className:"text-sm text-yellow-600",children:"Maior Sequncia"})]}),u.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[u.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:[Math.round(Math.max(...e.recentSessions.map(v=>v.score),0)),"%"]}),u.jsx("div",{className:"text-sm text-blue-600",children:"Melhor Pontuao"})]})]})]})]}),i==="categories"&&u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs(he,{className:"p-6",children:[u.jsxs("h3",{className:"text-lg font-semibold text-green-700 mb-4 flex items-center",children:[u.jsx(hc,{className:"h-5 w-5 mr-2 text-green-500"}),"Pontos Fortes"]}),e.strongCategories.length===0?u.jsx("div",{className:"text-center py-4 text-gray-500",children:"Continue respondendo questes para descobrir seus pontos fortes!"}):u.jsx("div",{className:"space-y-2",children:e.strongCategories.map((v,y)=>u.jsxs("div",{className:"flex items-center p-3 bg-green-50 rounded-lg",children:[u.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),u.jsx("span",{className:"text-green-800 font-medium",children:v})]},y))})]}),u.jsxs(he,{className:"p-6",children:[u.jsxs("h3",{className:"text-lg font-semibold text-red-700 mb-4 flex items-center",children:[u.jsx(fc,{className:"h-5 w-5 mr-2 text-red-500"}),"reas para Melhorar"]}),e.weakCategories.length===0?u.jsx("div",{className:"text-center py-4 text-gray-500",children:"timo! Voc no tem reas fracas identificadas."}):u.jsx("div",{className:"space-y-2",children:e.weakCategories.map((v,y)=>u.jsxs("div",{className:"flex items-center p-3 bg-red-50 rounded-lg",children:[u.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-3"}),u.jsx("span",{className:"text-red-800 font-medium",children:v})]},y))})]})]})}),i==="achievements"&&u.jsx("div",{className:"space-y-6",children:u.jsxs(he,{className:"p-6",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[u.jsx(eR,{className:"h-5 w-5 mr-2 text-yellow-500"}),"Sistema de Conquistas"]}),u.jsxs("div",{className:"text-center py-8",children:[u.jsx("div",{className:"text-gray-400 mb-2",children:"Em desenvolvimento"}),u.jsx("div",{className:"text-sm text-gray-500",children:"Sistema de conquistas ser implementado em breve!"})]})]})}),u.jsxs(he,{className:"p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Aes Avanadas"}),u.jsxs("div",{className:"flex flex-wrap gap-3",children:[u.jsx(ce,{onClick:()=>{const v=Ys.exportUserData(),y=new Blob([v],{type:"application/json"}),E=URL.createObjectURL(y),S=document.createElement("a");S.href=E,S.download=`question-stats-${Date.now()}.json`,S.click(),URL.revokeObjectURL(E)},variant:"outline",size:"sm",children:"Exportar Dados"}),u.jsx(ce,{onClick:()=>{const v=document.createElement("input");v.type="file",v.accept=".json",v.onchange=y=>{var S;const E=(S=y.target.files)==null?void 0:S[0];if(E){const _=new FileReader;_.onload=j=>{var L;const R=(L=j.target)==null?void 0:L.result;Ys.importUserData(R)?(o(),alert("Dados importados com sucesso!")):alert("Erro ao importar dados!")},_.readAsText(E)}},v.click()},variant:"outline",size:"sm",children:"Importar Dados"}),u.jsx(ce,{onClick:d,variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:"Resetar Dados"})]})]})]})},mM=({onBack:c,userId:e,subjectName:t,topicName:i,topicId:r})=>{const[o,d]=X.useState("home"),[h,p]=X.useState(!1),[m,x]=X.useState([]),[v]=X.useState(Ys.getUserStats()),[y,E]=X.useState(""),[S,_]=X.useState("medium"),[j,R]=X.useState(10),[L,D]=X.useState(""),[z,P]=X.useState(""),H=async()=>{if(!y.trim()){alert("Por favor, informe o tpico das questes");return}p(!0);try{const ue=await $x.generateQuestions({topic:y.trim(),difficulty:S,quantity:j,category:L.trim()||void 0});x(ue),d("quiz")}catch(ue){console.error("Erro ao gerar questes:",ue),alert("Erro ao gerar questes. Tente novamente.")}finally{p(!1)}},se=async()=>{if(!z.trim()){alert("Por favor, fornea o contedo para gerar questes");return}p(!0);try{const ue=await $x.generateQuestionsFromContent(z.trim(),S,j,L.trim()||void 0);x(ue),d("quiz")}catch(ue){console.error("Erro ao gerar questes do contedo:",ue),alert("Erro ao gerar questes do contedo. Tente novamente.")}finally{p(!1)}},re=async()=>{p(!0);try{const ue=await $x.generateAdaptiveQuestions(v.weakCategories,v.strongCategories,S,j);x(ue),d("quiz")}catch(ue){console.error("Erro ao gerar questes adaptativas:",ue),alert("Erro ao gerar questes adaptativas. Tente novamente.")}finally{p(!1)}},ne=ue=>{d("home"),x([])};return h?u.jsx(he,{className:"p-8",children:u.jsxs("div",{className:"text-center",children:[u.jsx(Xt,{size:"lg"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Gerando questes..."}),u.jsx("p",{className:"text-gray-500 mt-2",children:"Isso pode levar alguns segundos"})]})}):o==="quiz"&&m.length>0?u.jsx(hM,{questions:m,onComplete:ne,onBack:()=>d("home"),category:L,topicId:r,title:"Sistema de Questes",userId:e,subjectName:t,topicName:i}):o==="stats"?u.jsx(fM,{onClose:()=>d("home")}):o==="generate"?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[u.jsx(_t,{className:"h-8 w-8 mr-3 text-purple-600"}),"Gerar Questes"]}),u.jsxs(ce,{onClick:()=>d("home"),variant:"outline",children:[u.jsx(ti,{className:"h-4 w-4 mr-2"}),"Voltar"]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs(he,{className:"p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Configuraes Bsicas"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tpico/Assunto *"}),u.jsx(Hd,{value:y,onChange:ue=>E(ue.target.value),placeholder:"Ex: Histria do Brasil, Matemtica Bsica, Fsica...",className:"w-full"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoria (opcional)"}),u.jsx(Hd,{value:L,onChange:ue=>D(ue.target.value),placeholder:"Ex: Histria, Cincias, Literatura...",className:"w-full"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dificuldade"}),u.jsxs("select",{value:S,onChange:ue=>_(ue.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[u.jsx("option",{value:"easy",children:"Fcil"}),u.jsx("option",{value:"medium",children:"Mdio"}),u.jsx("option",{value:"hard",children:"Difcil"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantidade"}),u.jsx(Hd,{type:"number",value:j,onChange:ue=>R(Math.max(1,Math.min(20,parseInt(ue.target.value)||1))),min:"1",max:"20",className:"w-full"})]})]}),u.jsxs(ce,{onClick:H,className:"w-full",children:[u.jsx(_t,{className:"h-4 w-4 mr-2"}),"Gerar Questes"]})]})]}),u.jsxs(he,{className:"p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"A partir de Contedo"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cole seu contedo aqui"}),u.jsx("textarea",{value:z,onChange:ue=>P(ue.target.value),placeholder:"Cole aqui o texto, slides, anotaes ou qualquer contedo para gerar questes...",rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"})]}),u.jsxs(ce,{onClick:se,className:"w-full",disabled:!z.trim(),children:[u.jsx(fc,{className:"h-4 w-4 mr-2"}),"Gerar do Contedo"]})]})]})]})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h2",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[u.jsx(fu,{className:"h-10 w-10 mr-3 text-blue-600"}),"Sistema de Questes"]}),c&&u.jsxs(ce,{onClick:c,variant:"outline",children:[u.jsx(ti,{className:"h-4 w-4 mr-2"}),"Voltar"]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxs(he,{className:"p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:v.totalQuestions}),u.jsx("div",{className:"text-sm text-gray-600",children:"Questes Respondidas"})]}),u.jsxs(he,{className:"p-4 text-center",children:[u.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:[Math.round(v.correctPercentage),"%"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Taxa de Acerto"})]}),u.jsxs(he,{className:"p-4 text-center",children:[u.jsxs("div",{className:"text-2xl font-bold text-orange-600 mb-1 flex items-center justify-center",children:[u.jsx(rl,{className:"h-6 w-6 mr-1"}),v.currentStreak]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Sequncia Atual"})]}),u.jsxs(he,{className:"p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:v.masteryDistribution.mastered}),u.jsx("div",{className:"text-sm text-gray-600",children:"Tpicos Dominados"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsx(he,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>d("generate"),children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-purple-100 mb-4",children:u.jsx(_t,{className:"h-8 w-8 text-purple-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Gerar Questes"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Use IA para criar questes personalizadas sobre qualquer tpico"}),u.jsxs(ce,{className:"w-full",children:[u.jsx(tR,{className:"h-4 w-4 mr-2"}),"Criar Questes"]})]})}),u.jsx(he,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:re,children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:u.jsx(Tv,{className:"h-8 w-8 text-green-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Questes Adaptativas"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Questes personalizadas baseadas no seu histrico de aprendizado"}),u.jsx(ce,{className:"w-full",variant:"outline",disabled:v.totalQuestions<5,children:v.totalQuestions<5?"Responda mais questes primeiro":"Comear Sesso"})]})}),u.jsx(he,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>d("stats"),children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 mb-4",children:u.jsx(hu,{className:"h-8 w-8 text-blue-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Minhas Estatsticas"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Acompanhe seu progresso e reas de melhoria"}),u.jsxs(ce,{className:"w-full",variant:"outline",children:[u.jsx(hu,{className:"h-4 w-4 mr-2"}),"Ver Detalhes"]})]})})]}),v.weakCategories.length>0&&u.jsxs(he,{className:"p-6",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[u.jsx(hc,{className:"h-5 w-5 mr-2 text-yellow-500"}),"Recomendaes para Voc"]}),u.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[u.jsxs("p",{className:"text-yellow-800 mb-2",children:[u.jsx("strong",{children:"reas para focar:"})," ",v.weakCategories.join(", ")]}),u.jsx("p",{className:"text-sm text-yellow-700 mb-3",children:"Baseado no seu histrico, recomendamos praticar mais estas reas."}),u.jsx(ce,{onClick:re,size:"sm",className:"bg-yellow-600 hover:bg-yellow-700",children:"Praticar reas Fracas"})]})]}),u.jsxs(he,{className:"p-6 bg-gray-50",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[u.jsx(Cv,{className:"h-5 w-5 mr-2 text-gray-600"}),"Como funciona"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-1",children:u.jsx("span",{className:"text-blue-600 font-bold",children:"1"})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-gray-900",children:"Gere ou escolha questes"}),u.jsx("div",{children:"Crie questes sobre qualquer tpico ou use questes adaptativas"})]})]}),u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-3 mt-1",children:u.jsx("span",{className:"text-green-600 font-bold",children:"2"})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-gray-900",children:"Responda e aprenda"}),u.jsx("div",{children:"O sistema registra seus acertos e erros para melhorar o aprendizado"})]})]}),u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-3 mt-1",children:u.jsx("span",{className:"text-purple-600 font-bold",children:"3"})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-gray-900",children:"Acompanhe o progresso"}),u.jsx("div",{children:"Veja suas estatsticas e reas que precisam de mais ateno"})]})]})]})]})]})},pM=({onClose:c})=>{const[e,t]=X.useState(!1);return e?u.jsx(mM,{onBack:()=>t(!1)}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"mx-auto flex items-center justify-center h-20 w-20 rounded-full bg-blue-100 mb-4",children:u.jsx(fu,{className:"h-10 w-10 text-blue-600"})}),u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Sistema Avanado de Questes"}),u.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Sistema inteligente de questes com IA, memria adaptativa e acompanhamento de progresso"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs(he,{className:"p-6 text-center",children:[u.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-purple-100 mb-4",children:u.jsx(Vd,{className:"h-8 w-8 text-purple-600"})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Gerao Inteligente"}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Crie questes personalizadas sobre qualquer tpico usando inteligncia artificial avanada"})]}),u.jsxs(he,{className:"p-6 text-center",children:[u.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:u.jsx(Mr,{className:"h-8 w-8 text-green-600"})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Sistema de Memria"}),u.jsx("p",{className:"text-gray-600 text-sm",children:"O sistema lembra suas respostas e adapta futuras questes baseadas no seu desempenho"})]}),u.jsxs(he,{className:"p-6 text-center",children:[u.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 mb-4",children:u.jsx(hu,{className:"h-8 w-8 text-blue-600"})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Anlise Detalhada"}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Acompanhe seu progresso com estatsticas detalhadas e recomendaes personalizadas"})]})]}),u.jsxs(he,{className:"p-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Funcionalidades Principais"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Inteligncia Artificial"}),u.jsxs("ul",{className:"space-y-2 text-gray-600",children:[u.jsx("li",{children:" Gerao automtica de questes sobre qualquer tpico"}),u.jsx("li",{children:" Questes baseadas em contedo personalizado (textos, slides)"}),u.jsx("li",{children:" Diferentes nveis de dificuldade (fcil, mdio, difcil)"}),u.jsx("li",{children:" Explicaes detalhadas para cada resposta"})]}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mt-6",children:" Sistema de Memria"}),u.jsxs("ul",{className:"space-y-2 text-gray-600",children:[u.jsx("li",{children:" Rastreamento de acertos e erros por questo"}),u.jsx("li",{children:" Identificao de pontos fortes e fracos"}),u.jsx("li",{children:" Repetio espaada baseada no desempenho"}),u.jsx("li",{children:" Nveis de maestria (aprendendo, praticando, dominado)"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Anlise e Estatsticas"}),u.jsxs("ul",{className:"space-y-2 text-gray-600",children:[u.jsx("li",{children:" Taxa de acerto geral e por categoria"}),u.jsx("li",{children:" Tempo mdio de resposta"}),u.jsx("li",{children:" Sequncias de acertos (streaks)"}),u.jsx("li",{children:" Histrico detalhado de sesses"})]}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mt-6",children:" Aprendizado Adaptativo"}),u.jsxs("ul",{className:"space-y-2 text-gray-600",children:[u.jsx("li",{children:" Questes personalizadas baseadas no histrico"}),u.jsx("li",{children:" Foco automtico em reas fracas"}),u.jsx("li",{children:" Progresso de dificuldade inteligente"}),u.jsx("li",{children:" Recomendaes de estudo personalizadas"})]})]})]})]}),u.jsxs(he,{className:"p-8 bg-gradient-to-r from-blue-50 to-purple-50",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Como Usar"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 text-center",children:[u.jsxs("div",{children:[u.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:u.jsx("span",{className:"text-blue-600 font-bold text-lg",children:"1"})}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Escolha o Tpico"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Digite qualquer assunto ou cole contedo personalizado"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:u.jsx("span",{className:"text-green-600 font-bold text-lg",children:"2"})}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Configure as Questes"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Defina dificuldade, quantidade e categoria desejada"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:u.jsx("span",{className:"text-purple-600 font-bold text-lg",children:"3"})}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Responda e Aprenda"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Responda as questes e receba feedback imediato"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-3",children:u.jsx("span",{className:"text-orange-600 font-bold text-lg",children:"4"})}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Acompanhe o Progresso"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Veja suas estatsticas e reas para melhorar"})]})]})]}),u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx(ce,{onClick:()=>t(!0),className:"text-lg px-8 py-3",size:"lg",children:" Comear Agora"}),c&&u.jsx("div",{children:u.jsx(ce,{onClick:c,variant:"outline",children:"Voltar"})})]}),u.jsxs(he,{className:"p-6 bg-gray-50",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Informaes Tcnicas"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm text-gray-600",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Tecnologias Utilizadas:"}),u.jsxs("ul",{className:"space-y-1",children:[u.jsx("li",{children:" React + TypeScript para interface"}),u.jsx("li",{children:" Gemini AI para gerao de questes"}),u.jsx("li",{children:" localStorage para persistncia de dados"}),u.jsx("li",{children:" Sistema de algoritmos adaptativos"})]})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Recursos Avanados:"}),u.jsxs("ul",{className:"space-y-1",children:[u.jsx("li",{children:" Anlise preditiva de desempenho"}),u.jsx("li",{children:" Exportao/importao de dados"}),u.jsx("li",{children:" Interface responsiva e acessvel"}),u.jsx("li",{children:" Atualizao em tempo real das estatsticas"})]})]})]})]})]})},gM=({onBack:c,onNext:e})=>{const[t,i]=X.useState(!1);return t?u.jsx(pM,{onClose:()=>i(!1)}):u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"mx-auto flex items-center justify-center h-20 w-20 rounded-full bg-purple-100 mb-4",children:u.jsx(fu,{className:"h-10 w-10 text-purple-600"})}),u.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Sistema Avanado de Questes"}),u.jsx("p",{className:"mt-4 text-xl text-gray-600",children:"Pratique com questes personalizadas geradas por IA"})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs(he,{className:"p-8 bg-gradient-to-r from-purple-50 to-blue-50",children:[u.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:" Novo Sistema de Questes Inteligente"}),u.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed",children:"Apresentamos um sistema revolucionrio de questes que usa inteligncia artificial para criar uma experincia de aprendizado personalizada e adaptativa."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" O que h de novo:"}),u.jsxs("ul",{className:"space-y-1 text-gray-700 text-sm",children:[u.jsx("li",{children:" Gerao automtica de questes com IA"}),u.jsx("li",{children:" Sistema de memria que lembra seus acertos/erros"}),u.jsx("li",{children:" Questes adaptativas baseadas no seu progresso"}),u.jsx("li",{children:" Estatsticas detalhadas e insights de aprendizado"})]})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" Benefcios:"}),u.jsxs("ul",{className:"space-y-1 text-gray-700 text-sm",children:[u.jsx("li",{children:" Estudo mais eficiente e direcionado"}),u.jsx("li",{children:" Identificao automtica de pontos fracos"}),u.jsx("li",{children:" Repetio espaada para melhor reteno"}),u.jsx("li",{children:" Acompanhamento de progresso em tempo real"})]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs(he,{className:"p-6 text-center hover:shadow-lg transition-shadow",children:[u.jsx("div",{className:"text-4xl mb-3",children:""}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Gerao por IA"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Digite qualquer tpico e receba questes personalizadas"})]}),u.jsxs(he,{className:"p-6 text-center hover:shadow-lg transition-shadow",children:[u.jsx("div",{className:"text-4xl mb-3",children:""}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Sistema de Memria"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Lembra suas respostas para otimizar o aprendizado"})]}),u.jsxs(he,{className:"p-6 text-center hover:shadow-lg transition-shadow",children:[u.jsx("div",{className:"text-4xl mb-3",children:""}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Anlise Detalhada"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Veja seu progresso e reas para melhorar"})]})]}),u.jsxs(he,{className:"p-8 text-center bg-purple-50 border-purple-200",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Pronto para experimentar?"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"O sistema est totalmente funcional e pronto para uso. Voc pode comear a gerar questes sobre qualquer tpico que desejar estudar."}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(ce,{onClick:()=>i(!0),className:"text-lg px-8 py-3 bg-purple-600 hover:bg-purple-700",size:"lg",children:" Experimentar Agora"}),u.jsx("div",{className:"text-sm text-gray-500",children:"No se preocupe, voc pode voltar a qualquer momento"})]})]}),u.jsxs("div",{className:"flex justify-between pt-6",children:[u.jsx(ce,{onClick:c,variant:"outline",children:"Voltar"}),u.jsxs(ce,{onClick:e,className:"flex items-center",children:["Continuar",u.jsx(pg,{className:"ml-2 h-4 w-4"})]})]})]})]})};class xM{constructor(){this.MAIN_KEY="concursoGeniusAppState_v2",this.BACKUP_PREFIX="concursoGeniusBackup_",this.SETTINGS_KEY="concursoGeniusSettings",this.PERFORMANCE_KEY="concursoGeniusPerformance",this.VERSION="2.0.0",this.autoSaveTimer=null,this.defaultConfig={autoSaveInterval:3e4,maxBackups:5,compressionEnabled:!0}}saveAppState(e){try{const t={...e,lastSaved:Date.now(),version:this.VERSION},i=JSON.stringify(t);return this.checkStorageQuota(i)?(localStorage.setItem(this.MAIN_KEY,i),this.logPerformance("save",i.length),!0):(console.warn("LocalStorage quota exceeded, attempting cleanup..."),this.cleanupOldData(),localStorage.setItem(this.MAIN_KEY,i),!0)}catch(t){return console.error("Failed to save app state:",t),!1}}loadAppState(){try{const e=localStorage.getItem(this.MAIN_KEY);if(!e)return null;const t=JSON.parse(e);return this.needsMigration(t.version)?this.migrateState(t):(this.logPerformance("load",e.length),t)}catch(e){return console.error("Failed to load app state:",e),this.createBackup("corrupted_"+Date.now()),localStorage.removeItem(this.MAIN_KEY),null}}createBackup(e){try{const t=this.loadAppState();if(!t)return!1;const i=`${this.BACKUP_PREFIX}${e||Date.now()}`;return localStorage.setItem(i,JSON.stringify(t)),this.cleanupOldBackups(),!0}catch(t){return console.error("Failed to create backup:",t),!1}}listBackups(){const e=[];for(let t=0;t<localStorage.length;t++){const i=localStorage.key(t);if(i!=null&&i.startsWith(this.BACKUP_PREFIX))try{const r=localStorage.getItem(i);if(r){const o=i.replace(this.BACKUP_PREFIX,"").replace("corrupted_",""),d=new Date(parseInt(o)||0);e.push({key:i,date:d,size:r.length})}}catch{console.warn(`Invalid backup found: ${i}`)}}return e.sort((t,i)=>i.date.getTime()-t.date.getTime())}restoreBackup(e){try{const t=localStorage.getItem(e);return t?(this.createBackup("before_restore_"+Date.now()),localStorage.setItem(this.MAIN_KEY,t),!0):!1}catch(t){return console.error("Failed to restore backup:",t),!1}}saveTopicProgress(e,t){try{const i=`topic_progress_${e}`,r={topicId:e,interactions:t,lastUpdated:Date.now()};return localStorage.setItem(i,JSON.stringify(r)),!0}catch(i){return console.error("Failed to save topic progress:",i),!1}}loadTopicProgress(e){try{const t=`topic_progress_${e}`,i=localStorage.getItem(t);if(!i)return null;const r=JSON.parse(i);return{interactions:r.interactions,lastUpdated:r.lastUpdated}}catch(t){return console.error("Failed to load topic progress:",t),null}}saveSettings(e){try{return localStorage.setItem(this.SETTINGS_KEY,JSON.stringify({...e,lastUpdated:Date.now()})),!0}catch(t){return console.error("Failed to save settings:",t),!1}}loadSettings(){try{const e=localStorage.getItem(this.SETTINGS_KEY);return e?JSON.parse(e):null}catch(e){return console.error("Failed to load settings:",e),null}}exportAllData(){const e={mainState:this.loadAppState(),backups:this.listBackups().map(t=>({...t,data:JSON.parse(localStorage.getItem(t.key)||"{}")})),settings:this.loadSettings(),topicProgress:this.getAllTopicProgress(),exportDate:new Date().toISOString(),version:this.VERSION};return JSON.stringify(e,null,2)}importAllData(e){try{const t=JSON.parse(e);if(!this.validateImportData(t))throw new Error("Invalid import data structure");if(this.createBackup("before_import_"+Date.now()),t.mainState&&this.saveAppState(t.mainState),t.settings&&this.saveSettings(t.settings),t.topicProgress)for(const[i,r]of Object.entries(t.topicProgress))this.saveTopicProgress(i,r.interactions);return!0}catch(t){return console.error("Failed to import data:",t),!1}}clearAllData(){try{return this.createBackup("final_backup_"+Date.now()),localStorage.removeItem(this.MAIN_KEY),localStorage.removeItem(this.SETTINGS_KEY),localStorage.removeItem(this.PERFORMANCE_KEY),this.clearAllTopicProgress(),!0}catch(e){return console.error("Failed to clear all data:",e),!1}}enableAutoSave(e,t){this.disableAutoSave();const i={...this.defaultConfig,...t};this.autoSaveTimer=setInterval(()=>{try{const r=e();this.saveAppState(r)}catch(r){console.error("Auto-save failed:",r)}},i.autoSaveInterval)}disableAutoSave(){this.autoSaveTimer&&(clearInterval(this.autoSaveTimer),this.autoSaveTimer=null)}getStorageStats(){let e=0,t=0;for(let d=0;d<localStorage.length;d++){const h=localStorage.key(d);if(h){const p=localStorage.getItem(h);p&&(e+=h.length+p.length),t++}}const i=5*1024*1024,r=i-e,o=e/i*100;return{used:e,total:i,available:r,percentage:o,keys:t}}checkStorageQuota(e){try{const t="quota_test";return localStorage.setItem(t,e),localStorage.removeItem(t),!0}catch{return!1}}cleanupOldData(){const e=this.listBackups();e.length>this.defaultConfig.maxBackups&&e.slice(this.defaultConfig.maxBackups).forEach(i=>{localStorage.removeItem(i.key)})}cleanupOldBackups(){const e=this.listBackups();e.length>this.defaultConfig.maxBackups&&e.slice(this.defaultConfig.maxBackups).forEach(i=>{localStorage.removeItem(i.key)})}needsMigration(e){if(!e)return!0;const[t,i,r]=e.split(".").map(Number),[o,d,h]=this.VERSION.split(".").map(Number);return t<o||t===o&&i<d||t===o&&i===d&&r<h}migrateState(e){return console.log("Migrating state from version:",e.version,"to:",this.VERSION),{...e,version:this.VERSION}}logPerformance(e,t){try{const i=localStorage.getItem(this.PERFORMANCE_KEY),r=i?JSON.parse(i):{saves:[],loads:[]},o={timestamp:Date.now(),dataSize:t,action:e};e==="save"?(r.saves.push(o),r.saves.length>10&&(r.saves=r.saves.slice(-10))):(r.loads.push(o),r.loads.length>10&&(r.loads=r.loads.slice(-10))),localStorage.setItem(this.PERFORMANCE_KEY,JSON.stringify(r))}catch{}}getAllTopicProgress(){const e={};for(let t=0;t<localStorage.length;t++){const i=localStorage.key(t);if(i!=null&&i.startsWith("topic_progress_")){const r=i.replace("topic_progress_",""),o=this.loadTopicProgress(r);o&&(e[r]=o)}}return e}clearAllTopicProgress(){const e=[];for(let t=0;t<localStorage.length;t++){const i=localStorage.key(t);i!=null&&i.startsWith("topic_progress_")&&e.push(i)}e.forEach(t=>localStorage.removeItem(t))}validateImportData(e){return typeof e=="object"&&e!==null&&"exportDate"in e&&"version"in e}}const vt=new xM,bM=({onStateRestored:c,currentState:e})=>{const[t,i]=X.useState([]),[r,o]=X.useState(null),[d,h]=X.useState(!1),[p,m]=X.useState(null);X.useEffect(()=>{x()},[]);const x=()=>{i(vt.listBackups()),o(vt.getStorageStats())},v=(D,z)=>{m({type:D,text:z}),setTimeout(()=>m(null),5e3)},y=async()=>{h(!0);try{vt.createBackup()?(v("success","Backup criado com sucesso!"),x()):v("error","Falha ao criar backup")}catch{v("error","Erro ao criar backup")}finally{h(!1)}},E=async D=>{h(!0);try{if(vt.restoreBackup(D)){const P=vt.loadAppState();P&&c&&c(P),v("success","Backup restaurado com sucesso!"),x()}else v("error","Falha ao restaurar backup")}catch{v("error","Erro ao restaurar backup")}finally{h(!1)}},S=()=>{try{const D=vt.exportAllData(),z=new Blob([D],{type:"application/json"}),P=URL.createObjectURL(z),H=document.createElement("a");H.href=P,H.download=`concurso-genius-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(P),v("success","Dados exportados com sucesso!")}catch{v("error","Erro ao exportar dados")}},_=D=>{var H;const z=(H=D.target.files)==null?void 0:H[0];if(!z)return;const P=new FileReader;P.onload=se=>{var re;try{const ne=(re=se.target)==null?void 0:re.result;if(vt.importAllData(ne)){const J=vt.loadAppState();J&&c&&c(J),v("success","Dados importados com sucesso!"),x()}else v("error","Falha ao importar dados")}catch{v("error","Erro ao processar arquivo de importao")}},P.readAsText(z),D.target.value=""},j=()=>{if(window.confirm(" ATENO: Esta ao ir remover TODOS os seus dados salvos e no pode ser desfeita. Tem certeza que deseja continuar?")){h(!0);try{vt.clearAllData()?(v("success","Todos os dados foram removidos"),x(),setTimeout(()=>window.location.reload(),1500)):v("error","Erro ao limpar dados")}catch{v("error","Erro ao limpar dados")}finally{h(!1)}}},R=D=>{if(D===0)return"0 Bytes";const z=1024,P=["Bytes","KB","MB","GB"],H=Math.floor(Math.log(D)/Math.log(z));return parseFloat((D/Math.pow(z,H)).toFixed(2))+" "+P[H]},L=D=>D.toLocaleString("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return u.jsxs("div",{className:"space-y-6",children:[p&&u.jsx("div",{className:`p-4 rounded-md ${p.type==="success"?"bg-green-50 text-green-700 border border-green-200":p.type==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:p.text}),r&&u.jsxs(he,{children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Uso do Armazenamento Local"}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-blue-600",children:R(r.used)}),u.jsx("div",{className:"text-sm text-gray-600",children:"Usado"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-green-600",children:R(r.available)}),u.jsx("div",{className:"text-sm text-gray-600",children:"Disponvel"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[r.percentage.toFixed(1),"%"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Percentual"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-purple-600",children:r.keys}),u.jsx("div",{className:"text-sm text-gray-600",children:"Registros"})]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(r.percentage,100)}%`}})})]}),u.jsxs(he,{children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Gerenciar Dados"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(ce,{onClick:y,disabled:d,className:"bg-blue-600 hover:bg-blue-700",children:" Criar Backup"}),u.jsx(ce,{onClick:S,disabled:d,className:"bg-green-600 hover:bg-green-700",children:" Exportar Dados"}),u.jsxs("label",{className:"cursor-pointer",children:[u.jsx(ce,{as:"span",disabled:d,className:"bg-orange-600 hover:bg-orange-700 w-full",children:" Importar Dados"}),u.jsx("input",{type:"file",accept:".json",onChange:_,className:"hidden",disabled:d})]}),u.jsx(ce,{onClick:j,disabled:d,className:"bg-red-600 hover:bg-red-700",children:" Limpar Tudo"})]})]}),u.jsxs(he,{children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold",children:" Backups Automticos"}),u.jsx(ce,{onClick:x,size:"sm",variant:"outline",disabled:d,children:" Atualizar"})]}),t.length===0?u.jsxs("div",{className:"text-center py-8 text-gray-500",children:[u.jsx("div",{className:"text-4xl mb-2",children:""}),u.jsx("p",{children:"Nenhum backup encontrado"}),u.jsx("p",{className:"text-sm",children:"Crie seu primeiro backup clicando no boto acima"})]}):u.jsx("div",{className:"space-y-3",children:t.map((D,z)=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:D.key.includes("corrupted")?" Backup de Recuperao":D.key.includes("before_restore")?" Antes da Restaurao":D.key.includes("before_import")?" Antes da Importao":D.key.includes("final_backup")?" Backup Final":` Backup #${t.length-z}`}),u.jsxs("div",{className:"text-sm text-gray-600",children:[L(D.date),"  ",R(D.size)]})]}),u.jsx(ce,{onClick:()=>E(D.key),size:"sm",disabled:d,className:"bg-blue-600 hover:bg-blue-700",children:"Restaurar"})]},D.key))})]}),u.jsxs(he,{children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Informaes do Sistema"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold mb-2",children:" Salvamento Automtico"}),u.jsxs("ul",{className:"space-y-1 text-gray-600",children:[u.jsx("li",{children:" Salva automaticamente a cada 30 segundos"}),u.jsx("li",{children:" Mantm at 5 backups automticos"}),u.jsx("li",{children:" Detecta e recupera dados corrompidos"}),u.jsx("li",{children:" Migrao automtica entre verses"})]})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold mb-2",children:" O que  salvo"}),u.jsxs("ul",{className:"space-y-1 text-gray-600",children:[u.jsx("li",{children:" Texto do edital e anlise completa"}),u.jsx("li",{children:" Seu progresso em cada tpico"}),u.jsx("li",{children:" Respostas e autoavaliaes"}),u.jsx("li",{children:" Histrico de conversas com IA"}),u.jsx("li",{children:" Configuraes e preferncias"})]})]})]})]})]})},vM=()=>{throw new Error("Cloud sync not configured. Provide VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY.")},yM=async(c,e)=>{vM();const t={...e,lastSaved:Date.now()},i={user_id:c,state_json:t,last_saved:new Date().toISOString(),updated_at:new Date().toISOString()},{error:r}=await za.from("user_app_state").upsert(i,{onConflict:"user_id"});if(r)throw console.error("Error saving state to cloud:",r),new Error(r.message||"Erro ao salvar estado na nuvem");return!0};class tp{static async createManualBackup(e,t,i){try{const r=vt.createBackup(`manual_${i||Date.now()}`);return console.log("Manual backup created successfully"),!0}catch(r){return console.error("Failed to create manual backup:",r),!1}}static async listAvailableBackups(e){return[]}static async smartRecover(e,t={}){console.log("Starting smart recovery for user:",e);let i=null,r=null;try{r=vt.loadState(),console.log("Local state loaded:",!!r)}catch(o){console.warn("Failed to load local state:",o)}return this.mergeStates(r,i,t)}static mergeStates(e,t,i){if(i.forceLocal)return e;if(i.forceCloud||!e)return t;if(!t)return e;const r=e.lastSaved||0,o=t.lastSaved||0;if(console.log("Comparing timestamps - Local:",new Date(r),"Cloud:",new Date(o)),i.preferLatest!==!1){const h=o>r?t:e;return console.log("Using newer state:",o>r?"cloud":"local"),h}return{...e,...t,editalText:t.editalText||e.editalText,editalFileName:t.editalFileName||e.editalFileName,analysisResult:t.analysisResult||e.analysisResult,userProfile:{...e.userProfile,...t.userProfile},dashboardData:this.mergeProgress(e.dashboardData,t.dashboardData),aiCoachChatMessages:this.mergeMessages(e.aiCoachChatMessages||[],t.aiCoachChatMessages||[]),lastSaved:Math.max(r,o)}}static mergeProgress(e,t){if(!e)return t;if(!t)return e;const i=e.completedTopics||0;return(t.completedTopics||0)>=i?t:e}static mergeMessages(e,t){return[...e,...t].filter((o,d,h)=>h.findIndex(p=>p.timestamp===o.timestamp&&p.content===o.content)===d).sort((o,d)=>(o.timestamp||0)-(d.timestamp||0))}static validateState(e){try{return!e||typeof e!="object"?!1:e.currentPhase&&e.currentPhase!=="UPLOAD_PDF_ONLY"&&!e.editalText?(console.warn("State inconsistency: Phase advanced but no edital text"),!1):e.analysisResult&&!e.editalText?(console.warn("State inconsistency: Analysis exists but no edital text"),!1):!0}catch(t){return console.error("State validation error:",t),!1}}static async emergencyRecover(e){console.log("Starting emergency recovery...");const t=await this.listAvailableBackups(e);if(t.length>0){console.log(`Found ${t.length} backups, trying latest...`);const r=t[0];if(this.validateState(r.state_json))return r.state_json}const i=vt.listBackups();if(i.length>0){console.log(`Found ${i.length} local backups, trying latest...`);const r=i[0];try{if(await vt.restoreBackup(r.key))return vt.loadState()}catch(o){console.error("Failed to restore local backup:",o)}}return console.log("Emergency recovery failed - no valid backups found"),null}static async safeSyncToCloud(e,t,i=3){return!1}}const vN=(c,e={})=>{const{autoSave:t=!0,autoSaveInterval:i=3e4,onSaveError:r,onLoadError:o,userId:d}=e,[h,p]=X.useState(null),[m,x]=X.useState(!0),[v,y]=X.useState(null),[E,S]=X.useState(!1),_=X.useRef(null),j=X.useRef(!0);X.useEffect(()=>{_.current=h},[h]),X.useEffect(()=>()=>{j.current=!1,vt.disableAutoSave()},[]),X.useEffect(()=>{(async()=>{try{x(!0),y(null);const M=await L();j.current&&p(M||c||null)}catch(M){const k=M;j.current&&(y(k.message),o==null||o(k))}finally{j.current&&x(!1)}})()},[]),X.useEffect(()=>(t&&h&&!m?J():ge(),()=>{ge()}),[t,h,m,i]);const R=X.useCallback(async oe=>{try{const M=vt.saveAppState(oe);return M&&j.current&&(p(oe),y(null)),M}catch(M){const k=M;return j.current&&(y(k.message),r==null||r(k)),!1}},[r]),L=X.useCallback(async()=>{try{const oe=vt.loadAppState();return j.current&&y(null),oe}catch(oe){const M=oe;return j.current&&(y(M.message),o==null||o(M)),null}},[o]),D=X.useCallback(async oe=>{try{const M=oe(_.current);return await R(M)}catch(M){const k=M;return j.current&&(y(k.message),r==null||r(k)),!1}},[R,r]),z=X.useCallback(async oe=>{try{const M=vt.createBackup(oe);return j.current&&y(null),M}catch(M){const k=M;return j.current&&y(k.message),!1}},[]),P=X.useCallback(()=>vt.listBackups(),[]),H=X.useCallback(async oe=>{try{const M=vt.restoreBackup(oe);if(M){const k=await L();j.current&&(p(k),y(null))}return M}catch(M){const k=M;return j.current&&y(k.message),!1}},[L]),se=X.useCallback(async()=>{try{const oe=vt.clearAllData();return oe&&j.current&&(p(null),y(null)),oe}catch(oe){const M=oe;return j.current&&y(M.message),!1}},[]),re=X.useCallback(()=>vt.exportAllData(),[]),ne=X.useCallback(async oe=>{try{const M=vt.importAllData(oe);if(M){const k=await L();j.current&&(p(k),y(null))}return M}catch(M){const k=M;return j.current&&y(k.message),!1}},[L]),ue=X.useCallback(()=>vt.getStorageStats(),[]),J=X.useCallback(()=>{E||(vt.enableAutoSave(()=>_.current||{},{autoSaveInterval:i}),S(!0))},[E,i]),ge=X.useCallback(()=>{E&&(vt.disableAutoSave(),S(!1))},[E]),Ce=X.useCallback(()=>{J()},[J]),Ie=X.useCallback(()=>{ge()},[ge]),ae=X.useCallback(async()=>{if(!d)return null;try{const oe=await tp.smartRecover(d);if(oe)return p(oe),oe}catch(oe){console.error("Smart recover failed:",oe)}return null},[d]),G=X.useCallback(async()=>{if(!d)return null;try{const oe=await tp.emergencyRecover(d);if(oe)return p(oe),oe}catch(oe){console.error("Emergency recover failed:",oe)}return null},[d]),Y=X.useCallback(async oe=>{if(!d||!h)return!1;try{return await tp.createManualBackup(d,h,oe)}catch(M){return console.error("Manual backup failed:",M),!1}},[d,h]),W=X.useCallback(async()=>{if(!d||!h)return!1;try{return await tp.safeSyncToCloud(d,h)}catch(oe){return console.error("Safe sync to cloud failed:",oe),!1}},[d,h]);return{state:h,loading:m,error:v,saveState:R,loadState:L,updateState:D,smartRecover:ae,emergencyRecover:G,createManualBackup:Y,safeSyncToCloud:W,createBackup:z,listBackups:P,restoreBackup:H,clearAllData:se,exportData:re,importData:ne,getStorageStats:ue,autoSaveEnabled:E,enableAutoSave:Ce,disableAutoSave:Ie}},AM=({onBack:c,onStateRestored:e,currentState:t})=>{const[i,r]=X.useState(!1),{getStorageStats:o,exportData:d}=vN(),h=()=>{try{const m=d(),x=new Blob([m],{type:"application/json"}),v=URL.createObjectURL(x),y=document.createElement("a");y.href=v,y.download=`backup-rapido-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(v)}catch(m){console.error("Erro no export rpido:",m)}},p=o();return u.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-3xl font-bold mb-4",children:" Gerenciamento de Dados"}),u.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Gerencie seus dados de estudo, crie backups, importe/exporte dados e monitore o uso do armazenamento local."})]}),u.jsx(he,{children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-3xl mb-2",children:""}),u.jsx("div",{className:"text-lg font-semibold",children:p?`${(p.used/1024/1024).toFixed(1)} MB`:"Calculando..."}),u.jsx("div",{className:"text-sm text-gray-600",children:"Dados Salvos"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-3xl mb-2",children:""}),u.jsx("div",{className:"text-lg font-semibold",children:"Ativo"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Auto-Save"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-3xl mb-2",children:""}),u.jsx("div",{className:"text-lg font-semibold",children:"Seguro"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Armazenamento Local"})]})]})}),u.jsxs(he,{children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Aes Rpidas"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs(ce,{onClick:h,className:"bg-green-600 hover:bg-green-700 flex items-center justify-center space-x-2",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Export Rpido"})]}),u.jsxs(ce,{onClick:()=>r(!0),className:"bg-blue-600 hover:bg-blue-700 flex items-center justify-center space-x-2",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Opes Avanadas"})]})]})]}),!i&&u.jsxs(he,{children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Como Funciona"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-green-600 mb-2",children:" Automtico"}),u.jsxs("ul",{className:"space-y-1 text-sm text-gray-600",children:[u.jsx("li",{children:" Seus dados so salvos automaticamente a cada 30 segundos"}),u.jsx("li",{children:" Backups automticos so criados regularmente"}),u.jsx("li",{children:" No precisa se preocupar em perder o progresso"}),u.jsx("li",{children:" Sistema detecta e corrige dados corrompidos"})]})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-blue-600 mb-2",children:" Manual"}),u.jsxs("ul",{className:"space-y-1 text-sm text-gray-600",children:[u.jsx("li",{children:" Export: salva uma cpia dos seus dados"}),u.jsx("li",{children:" Import: restaura dados de um arquivo"}),u.jsx("li",{children:" Backups: pontos de restaurao especficos"}),u.jsx("li",{children:" Funciona offline, direto no seu navegador"})]})]})]}),u.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"text-blue-600 text-xl",children:""}),u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold text-blue-800",children:"Dica Importante"}),u.jsx("div",{className:"text-sm text-blue-700 mt-1",children:'Seus dados ficam salvos apenas neste navegador. Para usar em outro dispositivo, use a funo "Export" para criar um arquivo de backup e depois "Import" no outro dispositivo.'})]})]})})]}),i&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-xl font-semibold",children:" Gerenciamento Avanado"}),u.jsx(ce,{onClick:()=>r(!1),variant:"outline",size:"sm",children:"Voltar ao Simples"})]}),u.jsx(bM,{onStateRestored:e,currentState:t})]}),u.jsx("div",{className:"flex justify-center pt-6",children:u.jsxs(ce,{onClick:c,variant:"outline",className:"flex items-center space-x-2",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Voltar"})]})})]})},EM=({isOnline:c,lastSyncTime:e,isSyncing:t=!1,hasError:i=!1,onManualSync:r,onEmergencyRecover:o})=>{const[d,h]=X.useState(!1),p=y=>{if(!y)return"Nunca sincronizado";const S=new Date().getTime()-y.getTime(),_=Math.floor(S/6e4),j=Math.floor(_/60),R=Math.floor(j/24);return _<1?"Agora mesmo":_<60?`${_} min atrs`:j<24?`${j}h atrs`:`${R} dias atrs`},m=()=>i?"text-red-600 bg-red-50 border-red-200":t?"text-blue-600 bg-blue-50 border-blue-200":c?"text-green-600 bg-green-50 border-green-200":"text-yellow-600 bg-yellow-50 border-yellow-200",x=()=>i?u.jsx(hv,{className:"w-4 h-4"}):t?u.jsx(eS,{className:"w-4 h-4 animate-pulse"}):c?u.jsx(fs,{className:"w-4 h-4"}):u.jsx(hv,{className:"w-4 h-4"}),v=()=>i?"Erro na sincronizao":t?"Sincronizando...":c?"Dados salvos":"Offline";return u.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[u.jsxs("div",{className:`flex items-center space-x-2 px-3 py-2 rounded-lg border shadow-lg cursor-pointer transition-all duration-200 ${m()}`,onClick:()=>h(!d),children:[x(),u.jsx("span",{className:"text-sm font-medium",children:v()})]}),d&&u.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-64 bg-white border border-gray-200 rounded-lg shadow-xl p-4",children:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Status da Sincronizao"}),u.jsxs("div",{className:"space-y-2 text-sm",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Conexo:"}),u.jsx("span",{className:c?"text-green-600":"text-red-600",children:c?"Online":"Offline"})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"ltima sync:"}),u.jsx("span",{className:"text-gray-800",children:p(e)})]}),i&&u.jsx("div",{className:"text-red-600 text-xs mt-2",children:"Houve um problema na sincronizao. Seus dados esto salvos localmente."}),!c&&u.jsx("div",{className:"text-yellow-600 text-xs mt-2",children:"Sem conexo. Os dados sero sincronizados quando voltar online."})]})]}),u.jsxs("div",{className:"border-t pt-3 space-y-2",children:[r&&u.jsxs("button",{onClick:y=>{y.stopPropagation(),r(),h(!1)},disabled:t||!c,className:"w-full flex items-center justify-center space-x-2 px-3 py-2 bg-blue-500 text-white rounded-md text-sm hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx(eS,{className:"w-4 h-4"}),u.jsx("span",{children:"Sincronizar Agora"})]}),o&&i&&u.jsxs("button",{onClick:y=>{y.stopPropagation(),o(),h(!1)},className:"w-full flex items-center justify-center space-x-2 px-3 py-2 bg-orange-500 text-white rounded-md text-sm hover:bg-orange-600",children:[u.jsx(Wj,{className:"w-4 h-4"}),u.jsx("span",{children:"Recuperar Dados"})]})]})]})})]})},SM=({notification:c,onDismiss:e})=>{const{id:t,type:i,title:r,message:o,duration:d=5e3,action:h}=c;X.useEffect(()=>{if(d>0){const x=setTimeout(()=>{e(t)},d);return()=>clearTimeout(x)}},[t,d,e]);const p=()=>{switch(i){case"success":return"bg-green-50 border-green-200 text-green-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"error":return"bg-red-50 border-red-200 text-red-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}},m=()=>{switch(i){case"success":return u.jsx(fs,{className:"w-5 h-5 text-green-500"});case"warning":case"error":return u.jsx(hv,{className:"w-5 h-5 text-red-500"});default:return u.jsx(fs,{className:"w-5 h-5 text-blue-500"})}};return u.jsxs("div",{className:`flex items-start p-4 border rounded-lg shadow-lg max-w-md w-full ${p()}`,children:[u.jsx("div",{className:"flex-shrink-0 mr-3",children:m()}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-semibold",children:r}),o&&u.jsx("p",{className:"mt-1 text-sm opacity-75",children:o}),h&&u.jsx("button",{onClick:h.onClick,className:"mt-2 text-sm font-medium underline hover:no-underline",children:h.label})]}),u.jsx("button",{onClick:()=>e(t),className:"flex-shrink-0 ml-2 text-gray-400 hover:text-gray-600",children:u.jsx(Kj,{className:"w-4 h-4"})})]})},_M=({notifications:c,onDismiss:e})=>c.length===0?null:u.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:c.map(t=>u.jsx(SM,{notification:t,onDismiss:e},t.id))}),wM=()=>{const[c,e]=X.useState([]),t=x=>{const v=Date.now().toString();return e(y=>[...y,{...x,id:v}]),v};return{notifications:c,addNotification:t,dismissNotification:x=>{e(v=>v.filter(y=>y.id!==x))},clearAll:()=>{e([])},notifyDataSaved:x=>{t({type:"success",title:"Dados salvos com sucesso",message:`${x} foi salvo automaticamente`,duration:3e3})},notifyDataSyncError:x=>{t({type:"error",title:"Erro na sincronizao",message:"Seus dados esto seguros localmente",duration:7e3,action:x?{label:"Tentar novamente",onClick:x}:void 0})},notifyOfflineMode:()=>{t({type:"warning",title:"Modo offline",message:"Dados sero sincronizados quando voltar online",duration:5e3})},notifyDataRecovered:()=>{t({type:"success",title:"Dados recuperados",message:"Seu progresso foi restaurado com sucesso",duration:5e3})},notifyBackupCreated:x=>{t({type:"info",title:"Backup criado",message:`Backup ${x} salvo com segurana`,duration:3e3})}}},NM=()=>{const[c,e]=X.useState(null),{state:t,loading:i,saveState:r,emergencyRecover:o,createManualBackup:d,safeSyncToCloud:h}=vN({},{userId:c==null?void 0:c.id}),[p,m]=X.useState(!1),[x,v]=X.useState(null),[y,E]=X.useState(!1),S=!1,[_,j]=X.useState((t==null?void 0:t.currentPhase)||ye.UPLOAD_PDF_ONLY),[R,L]=X.useState((t==null?void 0:t.editalText)||""),[D,z]=X.useState((t==null?void 0:t.editalFileName)||null),[P,H]=X.useState((t==null?void 0:t.userProfile)||{targetRole:"",dailyStudyHours:3,studyDays:["Segunda","Tera","Quarta","Quinta","Sexta"],studyNotes:""}),[se,re]=X.useState((t==null?void 0:t.extractedRoles)||[]),[ne,ue]=X.useState((t==null?void 0:t.aiRoleClarificationQuestions)||void 0),[J,ge]=X.useState((t==null?void 0:t.aiRoleExtractionError)||null),[Ce,Ie]=X.useState(!1),[ae,G]=X.useState((t==null?void 0:t.analysisResult)||null),[Y,W]=X.useState((t==null?void 0:t.currentStudyingSubjectId)||null),[oe,M]=X.useState((t==null?void 0:t.currentStudyingTopicId)||null),[k,Q]=X.useState(null),[q,ee]=X.useState((t==null?void 0:t.aiCoachChatMessages)||[]),[le,pe]=X.useState(null),[Me,Pe]=X.useState(!1),[gt,_s]=X.useState(null),[gl,kn]=X.useState(!1),{notifications:mu,dismissNotification:pu,notifyDataSaved:xl,notifyDataSyncError:bl,notifyOfflineMode:Qs,notifyBackupCreated:kf}=wM(),[Df,gu]=X.useState(null),[vl,xu]=X.useState(!1),[Of,bu]=X.useState(!1),[vg,ji]=X.useState(null),[ws,Oa]=X.useState(null),[Ct,yl]=X.useState((t==null?void 0:t.dashboardData)||null),[yg,Al]=X.useState(!1),pa=X.useCallback(()=>({currentPhase:_,editalText:R,editalFileName:D,userProfile:P,extractedRoles:se,aiRoleClarificationQuestions:ne,aiRoleExtractionError:J,analysisResult:ae,currentStudyingSubjectId:Y,currentStudyingTopicId:oe,aiCoachChatMessages:q,dashboardData:Ct}),[_,R,D,P,se,ne,J,ae,Y,oe,q,Ct]);X.useEffect(()=>{if(!i){const ie=pa();r(ie)}},[pa,r,i]),X.useEffect(()=>{},[S]);const Ir=X.useCallback(()=>{if(!ae||!ae.subjects){yl(null);return}let ie=0,de=0,je=0,Ee=0;const we=ae.subjects.map(Ne=>{let De=0;return Ne.topics.forEach(Le=>{ie++,Le.status==="Concludo"?(De++,de++):Le.status==="Pendente"?je++:Ee++}),{id:Ne.id,name:Ne.name,totalTopics:Ne.topics.length,completedTopics:De,percentage:Ne.topics.length>0?Math.round(De/Ne.topics.length*100):0}});yl({totalTopics:ie,completedTopics:de,pendingTopics:je,studyingTopics:Ee,completionPercentage:ie>0?Math.round(de/ie*100):0,subjectProgress:we})},[ae]),La=X.useCallback(async ie=>{if(!ie)return;Ie(!0),ge(null),ue(void 0),re([]);const de=await iM(ie);de.error&&ge(de.error),de.roles&&re(de.roles),de.clarificationQuestions&&ue(de.clarificationQuestions),Ie(!1)},[]),El=X.useCallback(async(ie,de)=>{L(ie),z(de),j(ye.ROLE_SELECTION),console.log("Critical save: PDF uploaded");try{const je={...pa(),editalText:ie,editalFileName:de,currentPhase:ye.ROLE_SELECTION,lastSaved:Date.now()};await r(je),xl("Edital"),c?(await d("edital_uploaded"),kf("do edital"),h().catch(Ee=>{console.warn("Background cloud sync failed:",Ee),bl(()=>Dn())})):Qs()}catch(je){console.error("Critical save failed:",je),bl(()=>Dn())}await La(ie)},[La,pa,r,d,h,c]),It=X.useCallback((ie,de)=>{G(je=>je?{...je,subjects:je.subjects.map(we=>({...we,topics:we.topics.map(Ne=>Ne.id===ie?de(Ne):Ne)}))}:null)},[]),Ag=X.useCallback(async(ie,de,je)=>{var Le;const Ee=ae==null?void 0:ae.subjects.find(Fe=>Fe.topics.some(nt=>nt.id===ie)),we=Ee==null?void 0:Ee.topics.find(Fe=>Fe.id===ie);if(!Ee||!we)return;await It(ie,Fe=>({...Fe,isLoadingContent:!0,errorContent:void 0}));let Ne=je||((Le=we.content)==null?void 0:Le.summary);if(!Ne&&de!==Ue.SUMMARY&&(de===Ue.QUESTIONS||de===Ue.FLASHCARDS||de===Ue.DISCURSIVE_QUESTIONS)){const Fe=await n_(Ee.name,we.name,Ue.SUMMARY);if(!("error"in Fe)&&Fe.summary)Ne=Fe.summary,await It(ie,nt=>({...nt,content:{...nt.content||{},summary:Ne}}));else if("error"in Fe){await It(ie,nt=>({...nt,isLoadingContent:!1,errorContent:`Erro ao gerar resumo base necessrio: ${Fe.error}`}));return}}const De=await n_(Ee.name,we.name,de,Ne);await It(ie,Fe=>{var Ln,Ns,Ri;const nt={...Fe.content||{}};return"error"in De?(de===Ue.SUMMARY&&(nt.summary=void 0),de===Ue.QUESTIONS&&(nt.questions=((Ln=Fe.content)==null?void 0:Ln.questions)||[]),de===Ue.FLASHCARDS&&(nt.flashcards=((Ns=Fe.content)==null?void 0:Ns.flashcards)||[]),de===Ue.DISCURSIVE_QUESTIONS&&(nt.discursiveQuestions=((Ri=Fe.content)==null?void 0:Ri.discursiveQuestions)||[])):(de===Ue.SUMMARY&&De.summary&&(nt.summary=De.summary),de===Ue.QUESTIONS&&De.questions&&(nt.questions=De.questions),de===Ue.FLASHCARDS&&De.flashcards&&(nt.flashcards=De.flashcards),de===Ue.DISCURSIVE_QUESTIONS&&De.discursiveQuestions&&(nt.discursiveQuestions=De.discursiveQuestions)),{...Fe,content:nt,isLoadingContent:!1,errorContent:"error"in De?De.error:void 0}})},[ae,It]),Lf=X.useCallback((ie,de)=>{if(It(ie,je=>({...je,status:de})),c&&ae){const je=ae.subjects.find(we=>we.topics.some(Ne=>Ne.id===ie)),Ee=je==null?void 0:je.topics.find(we=>we.id===ie);je&&Ee&&Gs.getUserLatestEdital(c.id).then(we=>{if(we!=null&&we.id)return Gs.saveTopicProgress(c.id,we.id,{...Ee,status:de},je.name,Ee.userInteractions||{},0)}).catch(we=>{console.warn("Falha ao salvar status do tpico no Supabase:",we)})}},[It,c,ae]),If=X.useCallback((ie,de,je,Ee,we,Ne)=>{It(ie,De=>{const Le=De.userInteractions?{...De.userInteractions}:{questions:{},flashcards:{}};Le.questions=Le.questions?{...Le.questions}:{};const Fe=Le.questions[de]||{};if(Le.questions[de]={...Fe,userAnswerIndex:je,isRevealed:Ee,isCorrect:Ee&&we!==void 0?we:Fe.isCorrect,attempts:Ne!==void 0?Ne:Fe.attempts},c&&ae){const nt=ae.subjects.find(Ns=>Ns.topics.some(Ri=>Ri.id===ie)),Ln=nt==null?void 0:nt.topics.find(Ns=>Ns.id===ie);nt&&Ln&&Gs.getUserLatestEdital(c.id).then(Ns=>{if(Ns!=null&&Ns.id)return Gs.saveTopicProgress(c.id,Ns.id,Ln,nt.name,{...De.userInteractions,questions:Le.questions},0)}).catch(Ns=>{console.warn("Falha ao salvar interao de questo no Supabase:",Ns)})}return{...De,userInteractions:Le}})},[It,c,ae]),vu=X.useCallback((ie,de,je)=>{It(ie,Ee=>{var Ne;const we=Ee.userInteractions?{...Ee.userInteractions}:{questions:{},flashcards:{}};if(we.flashcards=we.flashcards?{...we.flashcards}:{},we.flashcards[de]={selfAssessment:je,reviewCount:(((Ne=we.flashcards[de])==null?void 0:Ne.reviewCount)||0)+1,lastReviewedTimestamp:Date.now()},c&&ae){const De=ae.subjects.find(Fe=>Fe.topics.some(nt=>nt.id===ie)),Le=De==null?void 0:De.topics.find(Fe=>Fe.id===ie);De&&Le&&Gs.getUserLatestEdital(c.id).then(Fe=>{if(Fe!=null&&Fe.id)return Gs.saveTopicProgress(c.id,Fe.id,Le,De.name,{...Ee.userInteractions,flashcards:we.flashcards},0)}).catch(Fe=>{console.warn("Falha ao salvar autoavaliao de flashcard no Supabase:",Fe)})}return{...Ee,userInteractions:we}})},[It,c,ae]),Pr=X.useCallback(async ie=>{var we;const de=ae==null?void 0:ae.subjects.find(Ne=>Ne.topics.some(De=>De.id===ie)),je=de==null?void 0:de.topics.find(Ne=>Ne.id===ie);if(!de||!je)return;await It(ie,Ne=>({...Ne,isLoadingDeeperUnderstanding:!0,errorDeeperUnderstanding:void 0}));const Ee=await lM(de.name,je.name,(we=je.content)==null?void 0:we.summary,je.userInteractions);await It(ie,Ne=>{const De={...Ne.content||{}};return"error"in Ee||(De.deeperUnderstanding=Ee),{...Ne,content:De,isLoadingDeeperUnderstanding:!1,errorDeeperUnderstanding:"error"in Ee?Ee.error:void 0}})},[ae,It]),yu=X.useCallback(async()=>{if(!(P!=null&&P.targetRole)||!ae||!R)return;xu(!0),ji(null);const ie=await rM(ae,R,P.targetRole);ie.error?ji(ie.error):(pe(ie.suggestions),gu(ie.generalAdvice||null)),xu(!1)},[ae,R,P]),Pf=X.useCallback(()=>{j(ye.AI_COACH),yu()},[yu]),Uf=X.useCallback(async ie=>{if(!ie.trim()||!(P!=null&&P.targetRole)||!R)return;const de={id:Ms(),sender:"user",text:ie,timestamp:Date.now()},je=[...q,de];ee(je),bu(!0),Oa(null);const Ee=je.slice(-6),we=await oM(ie,Ee,R,P.targetRole,ae);let Ne="Desculpe, no consegui processar sua pergunta no momento.",De=!1;we.error?(Ne=we.error,De=!0):we.answer&&(Ne=we.answer);const Le={id:Ms(),sender:"ai",text:Ne,timestamp:Date.now(),error:De},Fe=[...je,Le];ee(Fe),c&&Fe.length>0&&Gs.saveAICoachConversation(c.id,Fe,oe||void 0).catch(nt=>{console.warn("Falha ao salvar conversa do AI Coach no Supabase:",nt)}),bu(!1)},[q,R,P,ae,c,oe]),Au=()=>{L(""),z(null),H({targetRole:"",dailyStudyHours:3,studyDays:["Segunda","Tera","Quarta","Quinta","Sexta"],studyNotes:""}),re([]),ue(void 0),ge(null),Ie(!1),G(null),W(null),M(null),Q(null),pe(null),gu(null),ee([]),xu(!1),bu(!1),ji(null),Oa(null),yl(null),Al(!1),j(ye.UPLOAD_PDF_ONLY)},Eu=()=>{Q("Limpando dados..."),vt.clearAllData(),Au(),setTimeout(()=>{Q(null)},500)},Dn=async()=>{if(c){Pe(!0),kn(!1);try{const ie=pa();await yM(c.id,ie),_s(new Date),console.log("Manual sync successful")}catch(ie){console.error("Manual sync failed",ie),kn(!0)}finally{Pe(!1)}}},Eg=async()=>{if(c){Pe(!0);try{await o()?(_s(new Date),kn(!1),console.log("Emergency recovery successful")):console.warn("No backup data found for recovery")}catch(ie){console.error("Emergency recovery failed",ie),kn(!0)}finally{Pe(!1)}}},si=ie=>{ie.currentPhase&&j(ie.currentPhase),ie.editalText&&L(ie.editalText),ie.editalFileName!==void 0&&z(ie.editalFileName),ie.userProfile&&H(ie.userProfile),ie.extractedRoles&&re(ie.extractedRoles),ie.aiRoleClarificationQuestions&&ue(ie.aiRoleClarificationQuestions),ie.aiRoleExtractionError!==void 0&&ge(ie.aiRoleExtractionError),ie.analysisResult&&G(ie.analysisResult),ie.currentStudyingSubjectId!==void 0&&W(ie.currentStudyingSubjectId),ie.currentStudyingTopicId!==void 0&&M(ie.currentStudyingTopicId),ie.aiCoachChatMessages&&ee(ie.aiCoachChatMessages),ie.dashboardData&&yl(ie.dashboardData)},Kt=ie=>{H(de=>({...de||{dailyStudyHours:3,studyDays:["Segunda","Tera","Quarta","Quinta","Sexta"],studyNotes:""},targetRole:ie})),j(ye.USER_PREFERENCES)},ps=async ie=>{if(!(P!=null&&P.targetRole)||!R){Q("Erro: Dados incompletos para gerar o plano."),j(R?ye.ROLE_SELECTION:ye.UPLOAD_PDF_ONLY);return}Al(!0);const de={...P,...ie};H(de);try{Al(!1),j(ye.GENERATING_PLAN),Q(`Analisando edital para "${de.targetRole}" e personalizando seu plano...`);const je=await nM(R,de.targetRole),Ee=je.error?je:{...je,subjects:je.subjects.map(we=>({...we,topics:we.topics.map(Ne=>({...Ne,content:Ne.content||{summary:void 0,questions:[],flashcards:[],discursiveQuestions:[]},userInteractions:Ne.userInteractions||{questions:{},flashcards:{}}}))}))};G(Ee),j(ye.DASHBOARD),Q(null),console.log("Critical save: Analysis completed");try{const we={...pa(),analysisResult:Ee,userProfile:de,currentPhase:ye.DASHBOARD,lastSaved:Date.now()};if(await r(we),xl("Plano de estudos"),c){try{console.log("Salvando dados completos no Supabase..."),await Gs.saveCompleteUserData(c.id,R,D||"edital.pdf",Ee,de.targetRole,de),console.log(" Todos os dados salvos no Supabase com sucesso!"),xl(" Edital, plano e progresso completos salvos no perfil")}catch(Ne){console.error("Erro ao salvar no Supabase:",Ne),xl("Plano de estudos (salvo localmente)")}await d("analysis_completed"),kf("do plano"),h().catch(Ne=>{console.warn("Background cloud sync failed after analysis:",Ne),bl(()=>Dn())})}else console.log("  Usurio no logado - dados salvos apenas localmente"),Qs()}catch(we){console.error("Critical save after analysis failed:",we),bl(()=>Dn())}}catch(je){console.error("Error during preferences submission or plan generation:",je),Al(!1),Q(null),j(ye.USER_PREFERENCES)}},ga=(ie,de)=>{W(ie),M(de),j(ye.STUDY_TOPIC)},Ur=()=>{W(null),M(null),Ct&&(Ct.completedTopics>0||Ct.studyingTopics>0||Ct.pendingTopics>0)?j(ye.DASHBOARD):ae&&ae.subjects.length>0?j(ye.VIEW_PLAN):j(ye.UPLOAD_PDF_ONLY)},Sg=(ie,de)=>{ga(ie,de)},Su=()=>j(ye.DASHBOARD),_u=()=>j(ye.VIEW_PLAN),zr=()=>j(ye.QUESTION_SYSTEM),wu=()=>j(ye.DATA_MANAGEMENT);X.useEffect(()=>{(_===ye.DASHBOARD||_===ye.VIEW_PLAN||_===ye.STUDY_TOPIC||_===ye.QUESTION_SYSTEM||_===ye.DATA_MANAGEMENT)&&ae&&Ir()},[_,ae,Ir]);const On=()=>{var ie;if(k&&(_===ye.GENERATING_PLAN||k.includes("Limpando")))return u.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)] text-center px-4",children:[u.jsx(Xt,{size:"lg",color:"text-sky-600"}),u.jsx("h2",{className:"mt-6 text-2xl font-semibold text-sky-700",children:"Aguarde um Momento"}),u.jsx("p",{className:"mt-2 text-lg text-slate-600",children:k})]});switch(_){case ye.UPLOAD_PDF_ONLY:return u.jsx(aR,{onPdfUploaded:El,isLoading:Ce});case ye.ROLE_SELECTION:return u.jsx(iR,{editalFileName:D,extractedRoles:se,aiClarificationQuestions:ne,aiRoleExtractionError:J,isLoadingRoles:Ce,onRoleSelectAndProceed:Kt,onBackToUpload:()=>j(ye.UPLOAD_PDF_ONLY),onRequestRoleExtraction:()=>R?La(R):j(ye.UPLOAD_PDF_ONLY)});case ye.USER_PREFERENCES:return P!=null&&P.targetRole?u.jsx(nR,{targetRole:P.targetRole,onPreferencesSubmit:ps,isLoading:yg,initialProfile:{dailyStudyHours:P.dailyStudyHours,studyDays:P.studyDays,studyNotes:P.studyNotes},onGoBack:()=>j(ye.ROLE_SELECTION)}):(j(ye.ROLE_SELECTION),u.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)]",children:[u.jsx(Xt,{size:"lg"}),u.jsx("p",{className:"mt-4 text-slate-600",children:"Redirecionando para seleo de cargo..."})]}));case ye.GENERATING_PLAN:return null;case ye.DASHBOARD:return Ct?u.jsx(ZR,{dashboardData:Ct,userName:(ie=P==null?void 0:P.email)==null?void 0:ie.split("@")[0],onNavigateToPlan:_u,onNavigateToTopic:ga,analysisResult:ae,isAuthenticated:!!c}):ae&&ae.subjects.length===0&&!ae.error?u.jsx(sS,{planData:ae,targetRoleName:P==null?void 0:P.targetRole,onSelectTopic:ga,onGoBack:()=>j(ye.USER_PREFERENCES)}):u.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)]",children:[u.jsx(Xt,{size:"lg"}),u.jsx("p",{className:"mt-4 text-slate-600",children:"Carregando Dashboard..."})]});case ye.VIEW_PLAN:return ae?u.jsx(sS,{planData:ae,targetRoleName:P==null?void 0:P.targetRole,onSelectTopic:ga,onGoBack:()=>j(ye.DASHBOARD)}):u.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)]",children:[u.jsx(Xt,{size:"lg"}),u.jsx("p",{className:"mt-4 text-slate-600",children:"Carregando Plano..."})]});case ye.STUDY_TOPIC:{const de=ae==null?void 0:ae.subjects.find(Le=>Le.id===Y),je=de==null?void 0:de.topics.find(Le=>Le.id===oe);if(!de||!je||!ae)return j(ye.DASHBOARD),u.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)]",children:[u.jsx(Xt,{size:"lg"}),u.jsx("p",{className:"mt-4 text-slate-600",children:"Tpico no encontrado, redirecionando..."})]});let Ee=null,we=null;const Ne=ae.subjects.findIndex(Le=>Le.id===Y),De=de.topics.findIndex(Le=>Le.id===oe);if(De>0){const Le=de.topics[De-1];Ee={subjectId:de.id,topicId:Le.id}}else if(Ne>0){const Le=ae.subjects[Ne-1];if(Le.topics.length>0){const Fe=Le.topics[Le.topics.length-1];Ee={subjectId:Le.id,topicId:Fe.id}}}if(De<de.topics.length-1){const Le=de.topics[De+1];we={subjectId:de.id,topicId:Le.id}}else if(Ne<ae.subjects.length-1){const Le=ae.subjects[Ne+1];if(Le.topics.length>0){const Fe=Le.topics[0];we={subjectId:Le.id,topicId:Fe.id}}}return u.jsx(QR,{subjectName:de.name,topic:je,onBackToPlan:Ur,onGenerateContent:Ag,onUpdateTopicStatus:Lf,onUpdateQuestionInteraction:If,onFlashcardSelfAssessment:vu,onGetDeeperUnderstanding:Pr,prevTopicInfo:Ee,nextTopicInfo:we,onSelectTopic:ga})}case ye.AI_COACH:return u.jsx(KR,{suggestions:le,generalAdvice:Df,chatMessages:q,isLoadingSuggestions:vl,isLoadingChatResponse:Of,suggestionsError:vg,chatError:ws,onRefreshSuggestions:yu,onSendMessage:Uf,onNavigateToTopic:Sg,onBackToPlan:Ur});case ye.QUESTION_SYSTEM:return u.jsx(gM,{onBack:Ur,onNext:()=>j(ye.DASHBOARD)});case ye.DATA_MANAGEMENT:return u.jsx(AM,{onBack:Su,onStateRestored:si,currentState:pa()});default:return j(ye.UPLOAD_PDF_ONLY),u.jsx(Xt,{size:"lg"})}};return u.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[k&&(_===ye.GENERATING_PLAN||k.includes("Limpando"))&&u.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-lg flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-10 shadow-2xl flex flex-col items-center space-y-6 max-w-md mx-4 border border-white/20",children:[u.jsxs("div",{className:"relative",children:[u.jsx(Xt,{size:"lg"}),u.jsx("div",{className:"absolute inset-0 animate-ping rounded-full bg-sky-400/20"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:k||"Processando..."}),u.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:"Nossa IA est trabalhando para criar a melhor experincia de estudos para voc."})]})]})}),u.jsxs("header",{className:"relative bg-white/70 backdrop-blur-xl border-b border-white/20 sticky top-0 z-40 shadow-sm",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-sky-600/5 via-indigo-600/5 to-purple-600/5"}),u.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4 cursor-pointer",onClick:()=>{ae&&ae.subjects.length>0?Su():j(R?ye.ROLE_SELECTION:ye.UPLOAD_PDF_ONLY)},role:"button",tabIndex:0,"aria-label":"Ir para o Incio / Dashboard",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-sky-500 via-blue-600 to-indigo-700 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform duration-200",children:u.jsx(Mr,{className:"w-7 h-7 text-white"})}),u.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-br from-amber-400 to-orange-500 rounded-full animate-pulse"})]}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-slate-900 via-sky-800 to-indigo-900 bg-clip-text text-transparent",children:"ConcursoGenius"}),u.jsxs("p",{className:"text-sm text-slate-600 font-medium flex items-center gap-1",children:[u.jsx(_t,{className:"w-3 h-3 text-amber-500"}),"Plano de Estudos Inteligente"]})]})]}),u.jsxs("nav",{className:"hidden md:flex items-center space-x-2",children:[u.jsx(ce,{variant:"ghost",size:"md",onClick:Su,leftIcon:u.jsx(Qj,{className:"w-5 h-5"}),className:`font-semibold rounded-xl px-4 py-2 transition-all duration-200 ${_===ye.DASHBOARD?"text-emerald-700 bg-gradient-to-r from-emerald-100 to-teal-100 shadow-sm border border-emerald-200":"text-slate-600 hover:text-emerald-700 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50"}`,disabled:!(ae&&ae.subjects.length>0),"aria-current":_===ye.DASHBOARD?"page":void 0,children:u.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})}),u.jsx(ce,{variant:"ghost",size:"md",onClick:_u,leftIcon:u.jsx(hu,{className:"w-5 h-5"}),className:`font-semibold rounded-xl px-4 py-2 transition-all duration-200 ${_===ye.VIEW_PLAN||_===ye.STUDY_TOPIC?"text-sky-700 bg-gradient-to-r from-sky-100 to-blue-100 shadow-sm border border-sky-200":"text-slate-600 hover:text-sky-700 hover:bg-gradient-to-r hover:from-sky-50 hover:to-blue-50"}`,disabled:!(ae&&ae.subjects.length>0),"aria-current":_===ye.VIEW_PLAN||_===ye.STUDY_TOPIC?"page":void 0,children:u.jsx("span",{className:"hidden sm:inline",children:"Meu Plano"})}),u.jsx(ce,{variant:"ghost",size:"md",onClick:Pf,leftIcon:u.jsx(dv,{className:"w-5 h-5"}),className:`font-semibold rounded-xl px-4 py-2 transition-all duration-200 ${_===ye.AI_COACH?"text-purple-700 bg-gradient-to-r from-purple-100 to-indigo-100 shadow-sm border border-purple-200":"text-slate-600 hover:text-purple-700 hover:bg-gradient-to-r hover:from-purple-50 hover:to-indigo-50"}`,"aria-current":_===ye.AI_COACH?"page":void 0,children:u.jsx("span",{className:"hidden sm:inline",children:"Coach IA"})}),u.jsx(ce,{variant:"ghost",size:"md",onClick:zr,leftIcon:u.jsx(fu,{className:"w-5 h-5"}),className:`font-semibold rounded-xl px-4 py-2 transition-all duration-200 ${_===ye.QUESTION_SYSTEM?"text-orange-700 bg-gradient-to-r from-orange-100 to-amber-100 shadow-sm border border-orange-200":"text-slate-600 hover:text-orange-700 hover:bg-gradient-to-r hover:from-orange-50 hover:to-amber-50"}`,"aria-current":_===ye.QUESTION_SYSTEM?"page":void 0,children:u.jsx("span",{className:"hidden sm:inline",children:"Questes"})}),S]})]})})]}),u.jsx("main",{className:"flex-grow w-full max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[u.jsx("div",{className:"absolute top-0 left-1/4 w-72 h-72 bg-gradient-to-br from-sky-300/10 to-blue-400/10 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute top-1/3 right-1/4 w-64 h-64 bg-gradient-to-br from-indigo-300/10 to-purple-400/10 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-80 h-80 bg-gradient-to-br from-emerald-300/10 to-teal-400/10 rounded-full blur-3xl"})]}),u.jsx("div",{className:"relative z-10",children:On()})]})}),S,u.jsxs("footer",{className:"relative bg-gradient-to-br from-slate-900 via-slate-800 to-indigo-900 text-slate-300 py-12",children:[u.jsx("div",{className:"absolute inset-0 opacity-20 bg-repeat",style:{backgroundImage:`url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.03"%3E%3Cpath d="M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')`}}),u.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8",children:[u.jsxs("div",{className:"text-center md:text-left",children:[u.jsxs("div",{className:"flex items-center justify-center md:justify-start space-x-3 mb-4",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-sky-500 to-indigo-600 rounded-xl flex items-center justify-center",children:u.jsx(Mr,{className:"w-6 h-6 text-white"})}),u.jsx("h3",{className:"text-xl font-bold text-white",children:"ConcursoGenius"})]}),u.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Revolucionando a forma como voc estuda para concursos com inteligncia artificial avanada."})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("h4",{className:"text-white font-semibold mb-4",children:"Recursos"}),u.jsxs("ul",{className:"space-y-2 text-sm text-slate-400",children:[u.jsx("li",{className:"hover:text-sky-400 transition-colors cursor-pointer",children:" Anlise de Editais"}),u.jsx("li",{className:"hover:text-sky-400 transition-colors cursor-pointer",children:" Planos Personalizados"}),u.jsx("li",{className:"hover:text-sky-400 transition-colors cursor-pointer",children:" Coach IA"}),u.jsx("li",{className:"hover:text-sky-400 transition-colors cursor-pointer",children:" Dashboard Inteligente"})]})]}),u.jsxs("div",{className:"text-center md:text-right",children:[u.jsx("h4",{className:"text-white font-semibold mb-4",children:"Tecnologia"}),u.jsxs("div",{className:"flex flex-wrap justify-center md:justify-end gap-2",children:[u.jsx("span",{className:"px-3 py-1 bg-sky-600/20 text-sky-300 rounded-full text-xs font-medium border border-sky-500/20",children:"IA Gemini"}),u.jsx("span",{className:"px-3 py-1 bg-indigo-600/20 text-indigo-300 rounded-full text-xs font-medium border border-indigo-500/20",children:"React + TypeScript"}),u.jsx("span",{className:"px-3 py-1 bg-purple-600/20 text-purple-300 rounded-full text-xs font-medium border border-purple-500/20",children:"Machine Learning"})]})]})]}),u.jsx("div",{className:"border-t border-slate-700 pt-8",children:u.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0",children:[u.jsxs("p",{className:"text-sm text-slate-400",children:[" ",new Date().getFullYear()," ConcursoGenius. Todos os direitos reservados."]}),u.jsxs("div",{className:"flex items-center space-x-6",children:[u.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-2",children:["Potencializado por ",u.jsx(_t,{className:"w-4 h-4 text-amber-400 animate-pulse"}),u.jsx("span",{className:"font-medium text-amber-400",children:"Inteligncia Artificial"})]}),u.jsx("div",{className:"h-4 w-px bg-slate-600"}),u.jsx(ce,{variant:"link",size:"sm",onClick:wu,className:"text-slate-400 hover:text-blue-400 transition-colors duration-200 font-medium",children:" Gerenciar Dados"}),u.jsx("div",{className:"h-4 w-px bg-slate-600"}),u.jsx(ce,{variant:"link",size:"sm",onClick:Eu,className:"text-slate-400 hover:text-red-400 transition-colors duration-200 font-medium",isLoading:k==null?void 0:k.includes("Limpando"),children:k!=null&&k.includes("Limpando")?"Limpando...":"Resetar Sistema"})]})]})})]})]}),u.jsx(_M,{notifications:mu,onDismiss:pu}),c&&u.jsx(EM,{isOnline:navigator.onLine&&!1,lastSyncTime:gt,isSyncing:Me,hasError:gl,onManualSync:Dn,onEmergencyRecover:Eg})]})},yN=document.getElementById("root");if(!yN)throw new Error("Could not find root element to mount to");const TM=zT.createRoot(yN);TM.render(u.jsx(ig.StrictMode,{children:u.jsx(NM,{})}));
